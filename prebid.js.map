{"version":3,"sources":["webpack:///webpack/bootstrap 33ec5e9368bf34a8c845","webpack:///src/utils.js","webpack:///src/adapters/bidderFactory.js","webpack:///node_modules/core-js/library/fn/array/find.js","webpack:///node_modules/core-js/library/modules/es6.array.find-index.js","webpack:///src/url.js","webpack:///src/Renderer.js","webpack:///node_modules/core-js/library/modules/_core.js","webpack:///node_modules/core-js/library/modules/_export.js","webpack:///node_modules/core-js/library/modules/_is-object.js","webpack:///src/bidfactory.js","webpack:///src/native.js","webpack:///src/userSync.js","webpack:///node_modules/core-js/library/modules/_global.js","webpack:///src/mediaTypes.js","webpack:///src/hook.js","webpack:///src/videoCache.js","webpack:///node_modules/core-js/library/fn/array/find-index.js","webpack:///src/adloader.js","webpack:///node_modules/core-js/library/modules/_descriptors.js","webpack:///node_modules/core-js/library/modules/_cof.js","webpack:///node_modules/core-js/library/modules/_defined.js","webpack:///node_modules/core-js/library/modules/_wks.js","webpack:///node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///src/adapter.js","webpack:///src/auctionManager.js","webpack:///src/config.js","webpack:///(webpack)/buildin/global.js","webpack:///src/cpmBucketManager.js","webpack:///node_modules/core-js/library/modules/_ctx.js","webpack:///node_modules/core-js/library/modules/_fails.js","webpack:///node_modules/core-js/library/modules/_array-methods.js","webpack:///node_modules/core-js/library/modules/_iobject.js","webpack:///node_modules/core-js/library/modules/_to-length.js","webpack:///node_modules/core-js/library/modules/_to-integer.js","webpack:///node_modules/core-js/library/modules/_is-array.js","webpack:///src/adUnits.js","webpack:///src/constants.json","webpack:///src/video.js","webpack:///src/prebidGlobal.js","webpack:///src/targeting.js","webpack:///src/auction.js","webpack:///node_modules/core-js/library/modules/es6.array.find.js","webpack:///node_modules/core-js/library/modules/_a-function.js","webpack:///node_modules/core-js/library/modules/_hide.js","webpack:///node_modules/core-js/library/modules/_object-dp.js","webpack:///node_modules/core-js/library/fn/array/includes.js","webpack:///node_modules/core-js/library/modules/_an-object.js","webpack:///node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///node_modules/core-js/library/modules/_dom-create.js","webpack:///node_modules/core-js/library/modules/_to-primitive.js","webpack:///node_modules/core-js/library/modules/_property-desc.js","webpack:///node_modules/core-js/library/modules/_has.js","webpack:///node_modules/core-js/library/modules/_to-object.js","webpack:///src/prebid.js","webpack:///src/secureCreatives.js","webpack:///src/debugging.js","webpack:///node_modules/core-js/library/modules/_array-species-create.js","webpack:///node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///node_modules/core-js/library/modules/_shared.js","webpack:///node_modules/core-js/library/modules/_library.js","webpack:///node_modules/core-js/library/modules/_uid.js","webpack:///node_modules/core-js/library/modules/es7.array.includes.js","webpack:///node_modules/core-js/library/modules/_array-includes.js","webpack:///node_modules/core-js/library/modules/_to-iobject.js","webpack:///node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///node_modules/just-clone/index.js","webpack:///src/sizeMapping.js","webpack:///src/refererDetection.js","webpack:///src/ajax.js","webpack:///src/adaptermanager.js","webpack:///src/events.js","webpack:///modules/33acrossBidAdapter.js","webpack:///modules/a4gBidAdapter.js","webpack:///modules/aardvarkBidAdapter.js","webpack:///modules/adbutlerBidAdapter.js","webpack:///modules/adformBidAdapter.js","webpack:///modules/adgenerationBidAdapter.js","webpack:///src/AnalyticsAdapter.js","webpack:///modules/adkernelAdnAnalyticsAdapter.js","webpack:///modules/adkernelAdnBidAdapter.js","webpack:///modules/adkernelBidAdapter.js","webpack:///modules/admaticBidAdapter.js","webpack:///modules/admixerBidAdapter.js","webpack:///modules/adoceanBidAdapter.js","webpack:///modules/adomikAnalyticsAdapter.js","webpack:///modules/adspiritBidAdapter.js","webpack:///modules/adtelligentBidAdapter.js","webpack:///modules/aduptechBidAdapter.js","webpack:///modules/adxcgAnalyticsAdapter.js","webpack:///modules/adxcgBidAdapter.js","webpack:///modules/adyoulikeBidAdapter.js","webpack:///modules/ajaBidAdapter.js","webpack:///modules/andbeyondBidAdapter.js","webpack:///modules/aolBidAdapter.js","webpack:///modules/appnexusAnalyticsAdapter.js","webpack:///modules/appnexusBidAdapter.js","webpack:///modules/arteebeeBidAdapter.js","webpack:///modules/atomxBidAdapter.js","webpack:///modules/audienceNetworkBidAdapter.js","webpack:///modules/beachfrontBidAdapter.js","webpack:///modules/betweenBidAdapter.js","webpack:///modules/bizzclickBidAdapter.js","webpack:///modules/brainyBidAdapter.js","webpack:///modules/bridgewellBidAdapter.js","webpack:///modules/c1xBidAdapter.js","webpack:///modules/ccxBidAdapter.js","webpack:///modules/clickforceBidAdapter.js","webpack:///modules/colossussspBidAdapter.js","webpack:///modules/consentManagement.js","webpack:///node_modules/core-js/library/fn/string/includes.js","webpack:///node_modules/core-js/library/modules/es6.string.includes.js","webpack:///node_modules/core-js/library/modules/_string-context.js","webpack:///node_modules/core-js/library/modules/_is-regexp.js","webpack:///node_modules/core-js/library/modules/_fails-is-regexp.js","webpack:///modules/consumableBidAdapter.js","webpack:///modules/contentigniteBidAdapter.js","webpack:///modules/conversantBidAdapter.js","webpack:///modules/coxBidAdapter.js","webpack:///modules/criteoBidAdapter.js","webpack:///modules/currency.js","webpack:///modules/danmarketBidAdapter.js","webpack:///modules/dfpAdServerVideo.js","webpack:///src/adServerManager.js","webpack:///modules/dgadsBidAdapter.js","webpack:///modules/districtmDMXBidAdapter.js","webpack:///modules/divreachBidAdapter.js","webpack:///modules/ebdrBidAdapter.js","webpack:///modules/eplanningAnalyticsAdapter.js","webpack:///modules/eplanningBidAdapter.js","webpack:///modules/etargetBidAdapter.js","webpack:///modules/express.js","webpack:///modules/fairtradeBidAdapter.js","webpack:///modules/fidelityBidAdapter.js","webpack:///modules/freewheel-sspBidAdapter.js","webpack:///modules/fyberBidAdapter.js","webpack:///modules/gambidBidAdapter.js","webpack:///modules/gammaBidAdapter.js","webpack:///modules/getintentBidAdapter.js","webpack:///modules/giantsBidAdapter.js","webpack:///modules/gjirafaBidAdapter.js","webpack:///modules/googleAnalyticsAdapter.js","webpack:///modules/gumgumBidAdapter.js","webpack:///modules/gxoneBidAdapter.js","webpack:///modules/huddledmassesBidAdapter.js","webpack:///modules/iasBidAdapter.js","webpack:///modules/improvedigitalBidAdapter.js","webpack:///modules/innityBidAdapter.js","webpack:///modules/inskinBidAdapter.js","webpack:///modules/interactiveOffersBidAdapter.js","webpack:///modules/invibesBidAdapter.js","webpack:///modules/iqmBidAdapter.js","webpack:///modules/ixBidAdapter.js","webpack:///node_modules/core-js/library/fn/array/is-array.js","webpack:///node_modules/core-js/library/modules/es6.array.is-array.js","webpack:///node_modules/core-js/library/fn/number/is-integer.js","webpack:///node_modules/core-js/library/modules/es6.number.is-integer.js","webpack:///node_modules/core-js/library/modules/_is-integer.js","webpack:///modules/jcmBidAdapter.js","webpack:///modules/justpremiumBidAdapter.js","webpack:///modules/kargoAnalyticsAdapter.js","webpack:///modules/kargoBidAdapter.js","webpack:///modules/komoonaBidAdapter.js","webpack:///modules/kummaBidAdapter.js","webpack:///modules/lifestreetBidAdapter.js","webpack:///modules/lkqdBidAdapter.js","webpack:///modules/lockerdomeBidAdapter.js","webpack:///modules/madvertiseBidAdapter.js","webpack:///modules/mantisBidAdapter.js","webpack:///modules/marsmediaAnalyticsAdapter.js","webpack:///modules/medianetBidAdapter.js","webpack:///modules/mobfoxBidAdapter.js","webpack:///modules/my6senseBidAdapter.js","webpack:///modules/nanointeractiveBidAdapter.js","webpack:///modules/nasmediaAdmixerBidAdapter.js","webpack:///modules/oneVideoBidAdapter.js","webpack:///modules/oneplanetonlyBidAdapter.js","webpack:///modules/onetagBidAdapter.js","webpack:///modules/openxBidAdapter.js","webpack:///modules/optimaticBidAdapter.js","webpack:///modules/optimeraBidAdapter.js","webpack:///modules/orbitsoftBidAdapter.js","webpack:///modules/papyrusBidAdapter.js","webpack:///modules/peak226BidAdapter.js","webpack:///modules/piximediaBidAdapter.js","webpack:///modules/platformioBidAdapter.js","webpack:///modules/playgroundxyzBidAdapter.js","webpack:///modules/polluxBidAdapter.js","webpack:///modules/polymorphBidAdapter.js","webpack:///modules/prebidServerBidAdapter/index.js","webpack:///src/cookie.js","webpack:///modules/prebidServerBidAdapter/config.js","webpack:///modules/pubCommonId.js","webpack:///modules/pubmaticBidAdapter.js","webpack:///modules/pubwiseAnalyticsAdapter.js","webpack:///modules/pulsepointAnalyticsAdapter.js","webpack:///modules/pulsepointBidAdapter.js","webpack:///modules/quantcastBidAdapter.js","webpack:///modules/quantumBidAdapter.js","webpack:///modules/readpeakBidAdapter.js","webpack:///modules/realvuAnalyticsAdapter.js","webpack:///modules/rhythmoneBidAdapter.js","webpack:///modules/rockyouBidAdapter.js","webpack:///modules/roxotAnalyticsAdapter.js","webpack:///modules/rtbdemandBidAdapter.js","webpack:///modules/rtbdemandadkBidAdapter.js","webpack:///modules/rtbhouseBidAdapter.js","webpack:///modules/rubiconAnalyticsAdapter.js","webpack:///modules/rubiconBidAdapter.js","webpack:///modules/rxrtbBidAdapter.js","webpack:///modules/s2sTesting.js","webpack:///modules/saraBidAdapter.js","webpack:///modules/sekindoUMBidAdapter.js","webpack:///modules/serverbidBidAdapter.js","webpack:///modules/serverbidServerBidAdapter.js","webpack:///modules/sharethroughAnalyticsAdapter.js","webpack:///modules/sharethroughBidAdapter.js","webpack:///modules/sigmoidAnalyticsAdapter.js","webpack:///modules/smartadserverBidAdapter.js","webpack:///modules/smartyadsBidAdapter.js","webpack:///modules/somoaudienceBidAdapter.js","webpack:///modules/sonobiBidAdapter.js","webpack:///modules/sortableBidAdapter.js","webpack:///modules/sovrnBidAdapter.js","webpack:///modules/telariaBidAdapter.js","webpack:///modules/trionBidAdapter.js","webpack:///modules/tripleliftBidAdapter.js","webpack:///modules/trustxBidAdapter.js","webpack:///modules/ucfunnelBidAdapter.js","webpack:///modules/underdogmediaBidAdapter.js","webpack:///modules/undertoneBidAdapter.js","webpack:///modules/unrulyBidAdapter.js","webpack:///modules/uolBidAdapter.js","webpack:///modules/vertamediaBidAdapter.js","webpack:///modules/vertozBidAdapter.js","webpack:///modules/viBidAdapter.js","webpack:///modules/vidazooBidAdapter.js","webpack:///modules/visxBidAdapter.js","webpack:///modules/vubleAnalyticsAdapter.js","webpack:///modules/vubleBidAdapter.js","webpack:///modules/weboramaBidAdapter.js","webpack:///modules/widespaceBidAdapter.js","webpack:///package.json","webpack:///modules/xendizBidAdapter.js","webpack:///modules/xhbBidAdapter.js","webpack:///modules/yieldNexusBidAdapter.js","webpack:///modules/yieldbotBidAdapter.js","webpack:///modules/yieldlabBidAdapter.js","webpack:///modules/yieldmoBidAdapter.js","webpack:///modules/yieldoneBidAdapter.js","webpack:///modules/yuktamediaAnalyticsAdapter.js","webpack:///modules/zedoBidAdapter.js"],"names":["getAdUnitSizes","parseSizesInput","parseGPTSingleSizeArray","uniques","flatten","getBidRequest","getKeys","getValue","getBidderCodes","isGptPubadsDefined","shuffle","adUnitsFilter","isSrcdocSupported","deepClone","inIframe","isSafariBrowser","replaceAuctionPrice","timestamp","checkCookieSupport","cookiesAreEnabled","delayExecution","groupBy","deepAccess","createContentToExecuteExtScriptInFriendlyFrame","getDefinedParams","isValidMediaTypes","getBidderRequest","getUserConfiguredParams","getOrigin","getDNT","isAdUnitCodeMatchingSlot","isSlotMatchingAdUnitCode","unsupportedBidderMessage","deletePropertyFromObject","removeRequestId","isInteger","convertCamelToUnderscore","transformBidderParamKeywords","convertTypes","CONSTANTS","require","_loggingChecked","tArr","tStr","tFn","tNumb","tObject","tBoolean","toString","Object","prototype","consoleExists","Boolean","window","console","consoleLogExists","log","consoleInfoExists","info","consoleWarnExists","warn","consoleErrorExists","error","exports","replaceTokenInString","str","map","token","_each","value","key","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","_getUniqueIdentifierStr","Math","random","substr","getUniqueIdentifierStr","generateUUID","placeholder","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","transformAdServerTargetingObj","targeting","getOwnPropertyNames","length","join","adUnit","sizes","mediaTypes","banner","Array","isArray","bannerSizes","push","sizeObj","parsedSizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","i","singleSize","isNaN","getTopWindowLocation","loc","getAncestorOrigins","getTopFrameReferrer","e","logInfo","getWindowLocation","top","location","referrerLoc","currentWindow","parent","document","referrer","ancestorOrigins","getWindowTop","getWindowSelf","self","getTopWindowUrl","href","getTopWindowReferrer","logMessage","debugTurnedOn","apply","decorateLog","arguments","logWarn","logError","args","prefix","slice","call","unshift","hasConsoleLogger","config","getConfig","debug","getParameterByName","DEBUG_MODE","setConfig","createInvisibleIframe","_createInvisibleIframe","f","createElement","id","height","width","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","event","func","addEventListener","attachEvent","isA","object","_t","isFn","isStr","isNumber","isPlainObject","isBoolean","isEmpty","isEmptyStr","fn","forEach","l","contains","a","obj","indexOf","_map","callback","output","objectToCheck","propertyToCheckFor","constructor","insertElement","elm","doc","target","elToAppend","getElementsByTagName","insertBefore","firstChild","triggerPixel","url","img","Image","callBurl","source","burl","S2S","SRC","insertHtmlIntoIframe","htmlCode","iframe","allowtransparency","contentWindow","open","write","close","insertUserSyncIframe","iframeHtml","createTrackPixelIframeHtml","div","innerHTML","createTrackPixelHtml","escapedUrl","encodeURI","encodeUri","sandbox","getIframeDocument","contentDocument","getValueString","param","val","defaultValue","index","arry","b","concat","bidderRequests","bidRequest","some","bidderRequest","bids","bid","type","keys","adUnits","pbjs","unit","bidder","reduce","filter","googletag","pubads","getSlots","getHighestCpm","getHighestCpmCallback","previous","current","getOldestHighestCpmBid","getLatestHighestCpmBid","useTieBreakerProperty","tieBreakerCallback","cpm","array","counter","floor","temp","adUnitCode","defaultView","frameElement","test","navigator","userAgent","Date","getTime","cookieEnabled","cookie","numRequiredCalls","Error","numCalls","xs","rv","x","path","String","params","SUPPORTED_MEDIA_TYPES","SUPPORTED_STREAM_TYPES","types","every","video","context","bidRequests","request","start","auctionId","code","bidderData","origin","protocol","hostname","port","doNotTrack","msDoNotTrack","compareCodeAndSlot","slot","getAdUnitPath","getSlotElementId","mediaType","prop","Number","isFinite","y","toLowerCase","keywords","paramName","arrs","v","values","tryConvertType","typeToConvert","registerBidder","newBidder","isValid","COMMON_BID_RESPONSE_KEYS","spec","supportedMediaTypes","putBidder","adaptermanager","registerBidAdapter","aliases","aliasRegistry","alias","Adapter","getSpec","freeze","registerSyncs","callBids","addBidResponse","done","ajax","adUnitCodesHandled","addBidWithCode","responses","afterAllResponses","events","emit","EVENTS","BIDDER_DONE","gdprConsent","validBidRequests","filterAndWarn","bidRequestMap","bidId","placementCode","requests","buildRequests","onResponse","processRequest","formatGetParameters","data","method","success","onSuccess","onFailure","withCredentials","options","JSON","stringify","contentType","response","responseObj","parse","body","headers","headerParser","interpretResponse","err","addBidUsingRequestMap","requestId","prebidBid","bidfactory","createBid","STATUS","GOOD","xmlHttpResponse","get","getResponseHeader","bind","getUserSyncs","filterConfig","syncs","iframeEnabled","all","pixelEnabled","image","sync","userSync","registerSync","isBidRequestValid","validBidSize","bidderCode","hasValidKeys","bidKeys","errorMessage","msg","parseQS","formatQS","format","query","acc","criteria","parsed","noDecodeWholeURL","qsAsString","decodeSearchAsString","pathname","hash","host","Renderer","utils","loaded","handlers","cmd","process","install","setRender","render","setEventHandlers","handleVideoEvent","eventName","shift","Bid","statusCode","_bidId","_bidSrc","_statusCode","statusMessage","_getStatus","adId","getStatusCode","getSize","processNativeAdUnitParams","nativeBidIsValid","fireNativeTrackers","getNativeTargeting","nativeAdapters","NATIVE_KEYS","title","sponsoredBy","icon","clickUrl","cta","NATIVE_TARGETING_KEYS","IMAGE","required","SUPPORTED_TYPES","typeIsSupported","nativeAdUnit","nativeBidder","hasNonNativeBidder","requestedAssets","nativeParams","requiredAssets","returnedAssets","asset","message","adObject","trackers","action","clickTrackers","impressionTrackers","javascriptTrackers","keyValues","newUserSync","setDefaults","syncEnabled","syncsPerBidder","syncDelay","userSyncDependencies","publicApi","queue","getDefaultQueue","hasFired","numAdapterBids","permittedPixels","usConfig","conf","fireSyncs","browserSupportsCookies","fireImagePixels","loadIframes","bidderName","trackingPixelUrl","iframeUrl","incrementAdapterBids","filterSettings","shouldBidderBeBlocked","enabledBidders","isFilterConfigValid","activeConfig","biddersToFilter","bidders","filterType","checkForFiltering","activeConfigName","filterField","biddersField","bidderInList","syncUsers","timeout","setTimeout","triggerUserSyncs","enableOverride","NATIVE","VIDEO","BANNER","createHook","hooks","hookName","_hooks","priority","hook","asyncSeries","curr","asyncSeriesNext","methods","addHook","sort","removeHook","removeFn","hasHook","hookedFn","store","getCacheUrl","wrapURI","uri","impUrl","vastImp","toStorageRequest","vastValue","vastXml","vastUrl","vastImpUrl","shimStorageCallback","responseBody","ids","statusText","requestData","puts","_requestCache","_vendorWhitelist","loadExternalScript","moduleCode","script","async","loadScript","tagSrc","cacheRequest","callbacks","requestResource","jptScript","readyState","onreadystatechange","onload","setBidderCode","getBidderCode","newAuctionManager","_auctions","auctionManager","addWinningBid","auction","getAuctionId","getAllWinningBids","getWinningBids","getBidsRequested","getBidRequests","getBidsReceived","getAuctionStatus","AUCTION_COMPLETED","getAdUnits","getAdUnitCodes","createAuction","adUnitCodes","cbTimeout","labels","_addAuction","findBidByAdId","getStandardBidderAdServerTargeting","JSON_MAPPING","ADSERVER_TARGETING","setStatusForBids","status","newConfig","DEFAULT_DEBUG","DEFAULT_BIDDER_TIMEOUT","DEFAULT_PUBLISHER_DOMAIN","DEFAULT_COOKIESYNC_DELAY","DEFAULT_ENABLE_SEND_ALL_BIDS","DEFAULT_DISABLE_AJAX_TIMEOUT","DEFAULT_TIMEOUTBUFFER","RANDOM","FIXED","VALID_ORDERS","DEFAULT_BIDDER_SEQUENCE","GRANULARITY_OPTIONS","LOW","MEDIUM","HIGH","AUTO","DENSE","CUSTOM","ALL_TOPICS","listeners","defaults","resetConfig","_debug","_bidderTimeout","bidderTimeout","_publisherDomain","publisherDomain","_cookieSyncDelay","cookieSyncDelay","_priceGranularity","priceGranularity","validatePriceGranularity","hasGranularity","_customPriceBucket","customPriceBucket","_mediaTypePriceGranularity","mediaTypePriceGranularity","aggregate","item","_sendAllBids","enableSendAllBids","_bidderSequence","bidderSequence","_timoutBuffer","timeoutBuffer","_disableAjaxTimeout","disableAjaxTimeout","option","subscribe","topics","topicalConfig","topic","callSubscribers","listener","unsubscribe","splice","TOPICS","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","getPriceBucketString","customConfig","granularityMultiplier","cpmFloat","parseFloat","low","getCpmStringValue","med","high","auto","dense","custom","cpmStr","isValidPriceConfig","cap","buckets","prev","max","bucket","precision","toFixed","min","getCpmTarget","increment","bucketMin","pow","cpmToFloor","cpmTarget","incrementCounter","adunit","getCounter","adunitCounter","isValidVideoBid","VIDEO_MEDIA_TYPE","OUTSTREAM","videoAdUnit","videoBidder","videoAdapters","hasNonVideoBidder","videoMediaType","renderer","getGlobal","que","getHighestCpmBidsFromBidPool","newTargeting","pbTargetingKeys","BID_TARGETING_SET","RENDERED","MAX_DFP_KEYLENGTH","TTL_BUFFER","isBidNotExpired","responseTimestamp","ttl","isUnusedBid","bidsReceived","highestCpmCallback","bidsByBidder","bucketKey","getEmptyBid","adserverTargeting","timeToRespond","resetPresetTargeting","setTargeting","getAllTargeting","getWinningBidTargeting","getCustomBidTargeting","getBidLandscapeTargeting","targetKey","flattenTargeting","targetingObj","p","c","accumulator","setTargetingForGPT","targetingConfig","customSlotMatching","targetId","valueArr","setTargetingForAst","astTargeting","keywordsObj","apntag","setKeywords","winners","standardKeys","getStandardKeys","winner","sendStandardTargeting","targetingValue","substring","bidderCodeTargetingKey","bidderCodeTargeting","TARGETING_KEYS","mergeAdServerTargeting","arr","concatTargetingValue","currentBidElement","hasSameAdunitCodeAndKey","getCustomKeys","truncateCustomKeys","getTargetingMap","isApntagDefined","newAuction","auctionCallbacks","getStandardBidderSettings","getKeyValueTargetingPairs","adjustBids","AUCTION_STARTED","AUCTION_IN_PROGRESS","on","BID_ADJUSTMENT","MAX_REQUESTS_PER_ORIGIN","outstandingRequests","sourceInfo","queuedCalls","_adUnits","_labels","_adUnitCodes","_bidderRequests","_bidsReceived","_auctionStart","_auctionId","_auctionStatus","_callback","_timer","_timeout","_winningBids","addBidRequests","addBidReceived","startAuctionTimer","timedOut","timeoutCallback","executeCallback","timer","cleartimer","clearTimeout","timedOutBidders","getTimedOutBids","BID_TIMEOUT","AUCTION_END","groupByPlacement","callTimedOutBidders","userSyncConfig","auctionDone","bidderCount","doneCalled","closeAuction","now","makeBidRequests","run","auctionInit","AUCTION_INIT","boundObj","auctionAddBidResponse","adapterDone","SRA","runIfOriginHasCapacity","hasCapacity","maxRequests","winningBid","callBidWonBidder","getTimeout","auctionInstance","outstandingBidsAdded","afterBidAdded","bidResponse","getPreparedBidForAuction","tryAddVideoBid","addBidToAuction","doCallbacksIfTimedout","BID_RESPONSE","addBid","videoCacheKey","cacheIds","uuid","bidObject","requestTimestamp","bidReq","adUnitRenderer","mediaTypeGranularity","priceStringsObj","pbLg","pbMg","pbHg","pbAg","pbDg","pbCg","dealId","granularity","bidderSettings","BD_SETTING_STANDARD","size","custBidObj","standardSettings","setKeys","kvPair","suppressEmptyKeys","bidPriceAdjusted","bidCpmAdjustment","bidsByPlacement","bidRequestedWithoutDoneCodes","doneCbCallCount","bidReceivedCodes","timedOutBidderCodes","timedOutBids","ADD_AD_UNITS","BID_WON","REQUEST_BIDS","SET_TARGETING","AD_RENDER_FAILED","AD_RENDER_FAILED_REASON","PREVENT_WRITING_ON_MAIN_DOCUMENT","NO_AD","EXCEPTION","CANNOT_FIND_AD","MISSING_DOC_OR_ADID","eventValidators","bidWon","checkDefinedPlacement","libLoaded","version","bidSet","setRenderSize","getAdserverTargetingForAdUnitCodeStr","adunitCode","res","getAdserverTargetingForAdUnitCode","getAdserverTargeting","getBidResponses","currentAuctionId","getBidResponsesForAdUnitCode","setTargetingForGPTAsync","targetingSet","targetingKey","emitAdRenderFail","reason","renderAd","ad","adUrl","creativeComment","createComment","creativeId","overflow","removeAdUnit","requestBids","bidsBackHandler","adUnitMediaTypes","allBidders","bidderRegistry","s2sConfig","s2sBidders","transactionId","bidderMediaTypes","bidderEligible","addAdUnits","adUnitArr","onEvent","handler","offEvent","off","bidderAdaptor","registerAnalyticsAdapter","useCache","enableAnalytics","aliasBidder","aliasBidAdapter","getAllPrebidWinningBids","getHighestCpmBids","markWinningBidAsUsed","markBidRequest","command","stack","processQueue","called","listenMessagesFromCreative","receiveMessage","ev","sendAdToCreative","adServerDomain","remoteDomain","resizeRemoteCreative","postMessage","elementStyle","getElementByAdUnit","elmType","getElementById","querySelector","disableOverrides","addBidResponseHook","sessionLoader","OVERRIDE_KEY","boundHook","enableOverrides","overrides","fromSession","next","overrideBid","debugging","enabled","sessionStorage","removeItem","setItem","storage","getItem","setSizeConfig","resolveStatus","sizeConfig","labelAll","activeLabels","configs","maps","evaluateSizeConfig","filteredSizes","shouldFilter","sizesSupported","active","label","mediaQuery","matchMedia","matches","thing","detectReferer","win","getLevels","levels","walkUpWindows","ancestors","ancestor","getPubUrlStack","defUrl","encodedUrl","frameLocation","prevFrame","prevRef","detectedRefererUrl","isTop","refererInfo","numIframes","reachedTop","stackInfo","referer","getRefererInfo","ajaxBuilder","XHR_DONE","parser","XMLHttpRequest","responseText","ontimeout","urlInfo","customHeaders","header","setRequestHeader","preflight","send","s2sTestingModule","_bidderRegistry","_s2sConfig","_analyticsRegistry","getLabels","bidOrAdUnit","labelAny","getBids","bidderRequestId","filteredAdUnitSizes","bid_id","bidRequestsCount","getAdUnitCopyForPrebidServer","adaptersServerSide","adUnitsCopy","doingS2STesting","finalSource","CLIENT","getAdUnitCopyForClientAdapters","adUnitsClientCopy","SERVER","gdprDataHandler","consentData","setConsentData","consentInfo","getConsentData","auctionStart","checkBidRequestSizes","bidderCodes","clientBidderCodes","clientTestAdapters","getSourceBidderMap","adUnitsS2SCopy","tid","adUnitCopy","validBids","adUnitBid","reqBid","isArrayOfNums","normalizedSize","playerSize","newPlayerSize","native","aspect_ratios","doneCb","requestCallbacks","requestBidsTimeout","partitions","clientBidRequests","serverBidRequests","s2sAjax","s2sAdapter","s2sBidRequest","ad_units","doneCbs","adapters","BID_REQUESTED","testing","getSupportedMediaTypes","bidAdaptor","existingAlias","newAdapter","adapterConfig","provider","getBidAdapter","setS2STestingModule","module","tryCallBidderMethod","timedOutBidder","allEvents","idPaths","EVENT_ID_PATHS","eventsFired","_handlers","_public","_dispatch","eventString","eventPayload","idPath","eventKeys","eventType","_checkAvailableEvent","_handler","getEvents","arrayCopy","newProp","BIDDER_CODE","END_POINT","SYNC_ENDPOINT","adapterState","_createBidResponse","seatbid","price","w","h","adm","crid","currency","cur","netRevenue","_createServerRequest","ttxRequest","imp","_getFormatSize","ext","ttx","prod","productId","site","siteId","user","consent","consentString","regs","gdpr","gdprApplies","ttxSettings","_createSync","syncUrl","sizeArr","uniqueSiteIds","req","serverResponse","bidResponses","syncOptions","A4G_BIDDER_CODE","A4G_CURRENCY","A4G_DEFAULT_BID_URL","A4G_TTL","LOCATION_PARAM_NAME","ID_PARAM_NAME","IFRAME_PARAM_NAME","ZONE_ID_PARAM_NAME","SIZE_PARAM_NAME","ARRAY_PARAM_SEPARATOR","ARRAY_SIZE_SEPARATOR","SIZE_SEPARATOR","zoneId","deliveryUrl","idParams","sizeParams","zoneIds","applies","serverResponses","resetUserSync","DEFAULT_ENDPOINT","AARDVARK_TTL","AARDVARK_CURRENCY","hasSynced","ai","sc","auctionCodes","requestsMap","pageCategories","rtkcategories","rMap","shortCodes","payload","jsonp","rtkreferer","endpoint","categories","cat","rawBid","cid","media","nurl","pageID","accountID","zoneID","keyword","domain","requestURI","serverRequests","zoneCounters","bidObj","isCorrectSize","isCorrectCPM","CPM","minCPM","maxCPM","parseInt","placement_id","ad_code","addTrackingPixels","tracking_pixels","trackingPixels","trackingPixelMarkup","pixelURL","trackingPixel","mid","j","_key","_value","reqParams","gdprObject","globalParams","priceType","pt","formRequestUrl","gdpr_consent","reqData","btoa","VALID_RESPONSES","vast_content","vast_url","bidRespones","verifySize","win_bid","deal_id","win_cur","adItem","validSizes","ADG_BIDDER_CODE","len","validReq","DEBUG_URL","URL","lastIndexOf","creativeid","dealid","createNativeAd","createAd","vastxml","createAPVTag","insertVASTMethod","appendChildToBody","beacon","removeWrapper","native_ad","assets","text","link","clicktrackers","imptrackers","beaconurl","APVURL","apvScript","outerHTML","apvVideoAdParam","s","bodyIndex","lastBodyIndex","AnalyticsAdapter","ENDPOINT","BUNDLE","_sampled","analyticsType","global","_queue","_eventCount","_enableCheck","_emptyQueue","track","_track","enqueue","_enqueue","_enable","disableAnalytics","_disable","getAdapterType","getHandler","getUrl","_callEndpoint","_this","sampling","_oldEnable","getUmtSource","ExpiringQueue","ANALYTICS_VERSION","DEFAULT_QUEUE_TIMEOUT","DEFAULT_HOST","ADK_HB_EVENTS","BID_REQUEST","TIMEOUT","buildRequestTemplate","pubId","ref","topLocation","ver","accId","env","screen","lang","language","analyticsAdapter","init","trackAuctionInit","trackBidRequest","trackBidResponse","trackBidWon","trackBidTimeout","trackAuctionEnd","sendAll","originEnableAnalytics","requestTemplate","queueTimeout","popAll","hb_ev","auctionTimeStart","createHbEvent","tagid","time","UTM_TAGS","ADKERNEL_PREBID_KEY","DIRECT","REFERRAL","ORGANIC","localStorage","pageUrl","prevUtm","getPreviousTrafficSource","currUtm","getCurrentTrafficSource","chooseActualUtm","updated","actual","storeUtm","getDirect","getUTM","se","getSearchEngine","asUtm","parsedUrl","getReferrer","refHost","refPath","engines","engine","urlParameters","utmArgs","utmTagName","utmValue","utm","medium","campaign","term","content","c1","c2","c3","c4","c5","ord","isCampaignTraffic","timeoutId","reset","peekAll","DEFAULT_ADKERNEL_DSP_DOMAIN","VIDEO_TARGETING","DEFAULT_MIMES","DEFAULT_PROTOCOLS","DEFAULT_APIS","isRtbDebugEnabled","buildImp","canonicalizeSizesArray","mimes","protocols","api","buildRequestParams","tags","buildSite","page","secure","buildBid","tag","impid","dispatch","rps","syncpages","rsp","VERSION","impDispatch","dispatchImps","buildRtbRequest","zone","ad_type","r","rtbRequest","rtbImps","rtbBids","rtbBid","prBid","formatAdMarkup","adk_usersync","topframe","imps","createSite","getLanguage","device","dnt","ENDPOINT_URL","pid","wid","validBidRequest","transformSizes","payloadString","serverBody","serverBid","requestSizes","bidResp","buildEndpointUrl","emiter","buildRequest","masterBidRequests","masterId","firstBid","bidIdMap","slaveId","assignToMaster","bidRequestsByMaster","placementResponse","adCode","winUrl","statsUrl","auctionEnd","bidRequested","bidTimeout","adomikAdapter","initializeBucketEvents","currentContext","timeouted","bucketEvents","buildBidResponse","sendWonEvent","sendTypedEvent","groupedTypedEvents","buildTypedEvents","bulkEvents","uid","ahbaid","eventsByPlacementCode","typedEventsByType","eventKey","typedEvent","sizeUtils","handleSize","stringBulkEvents","encodedBuf","encodedUri","splittedUrl","partUrl","wonEvent","stringWonEvent","afterTimeout","sizeAlreadyExists","typedEventSize","formatSize","formattedSize","existTypedEvent","groupedTypedEvent","adapterEnableAnalytics","initOptions","RTB_URL","SCRIPT_URL","getBidderHost","placementId","reqUrl","adspiritConId","genAdConId","innerWidth","clientWidth","innerHeight","clientHeight","round","adData","OUTSTREAM_SRC","DISPLAY","aid","bidToTag","parseRTBResponse","serverBidResponse","isInvalidValidResp","extMessage","getMediaType","prepareRTBRequestParams","_index","cmpId","adResponse","newRenderer","outstreamRender","VOutstreamAPI","initOutstreams","elId","PUBLISHER_PLACEHOLDER","ENDPOINT_METHOD","publisher","placement","consentRequired","creative","net","html","emptyUrl","adxcgAnalyticsVersion","adxcgAnalyticsAdapter","mapAuctionInit","auctionTimestamp","mapBidRequested","mapBidResponse","outData2","bidWons","mapBidWon","startTime","renderedSize","adxcgAnalyticsRequestUrl","publisherId","ats","aav","iob","intersectionObserverAvailable","pbv","sz","IntersectionObserver","IntersectionObserverEntry","SUPPORTED_AD_TYPES","SOURCE","USER_PARAMS_AUCTION","USER_PARAMS_BID","BIDADAPTERVERSION","adzoneid","isVideoRequest","dt","ratio","devicePixelRatio","iobavailable","bt","PREBID_TIMEOUT","requestUrl","beaconParams","renderformat","uw","uh","dpr","isinframe","cookies","tz","getTimezoneOffset","rndid","biddercustom","adZoneIds","prebidBidIds","bidfloors","bidfloor","customBidParams","adxcgRequestUrl","serverResponseOneItem","trim","nativeResponse","DEFAULT_DC","dcHostname","getHostname","Version","Bids","PlacementID","TransactionID","Width","Height","PageRefreshed","getPageRefreshed","createEndpoint","DC","getReferrerUrl","getCanonicalUrl","head","performance","navigation","TYPE_RELOAD","createEndpointQS","qs","RefererUrl","can","CanonicalUrl","parsedSize","Ad","BidID","CreativeID","Price","SDK_TYPE","AD_TYPE","asi","queryString","bidderResponse","bidderResponseBody","is_ad_return","prebid_id","creative_id","videoAd","vtag","bannerAd","tracker","impTracker","purl","aja_vast_player","vast_tag","ad_unit_code","progress","loop","inread","AOL_BIDDERS_CODES","AOL","ONEMOBILE","ONEDISPLAY","AOL_ENDPOINTS","GET","MOBILE","POST","SYNC_TYPES","IFRAME","TAG","TYPE","pubapiTemplate","template","nexageBaseApiTemplate","nexageGetApiTemplate","MP_SERVER_MAP","us","eu","as","NEXAGE_SERVER","ONE_DISPLAY_TTL","ONE_MOBILE_TTL","aolGlobals","pixelsDropped","NUMERIC_VALUES","TRUE","FALSE","showCpmAdjustmentWarning","showCpmWarning","aol","strings","dict","parsePixelItems","pixels","itemsRegExp","tagNameRegExp","srcRegExp","pixelsItems","matchedItems","tagName","_isMarketplaceBidder","_isOneMobileBidder","_isNexageRequestPost","minduration","maxduration","_isNexageRequestGet","dcn","pos","isMarketplaceBid","network","isMobileBid","resolveEndpointCode","endpointCode","formatBidRequest","_parseBidResponse","buildMarketplaceUrl","buildOneMobileGetUrl","buildOneMobileBaseUrl","buildOpenRtbRequestData","userSyncOn","serverParam","server","regionParam","region","pageid","pageId","sizeid","sizeId","misc","dynamicParams","formatMarketplaceDynamicParams","nexageApi","formatOneMobileDynamicParams","queryParams","bidFloor","formatKeyValues","formatConsentData","paramsFormatted","isSecureProtocol","openRtbObject","isConsentRequired","keyValuesHash","euconsent","bidData","encp","pubapiId","formatPixels","formattedPixels","isOneMobileBidder","appnexusAdapter","USER_PARAMS","APP_DEVICE_PARAMS","NATIVE_MAPPING","serverName","requiredParams","minimumParams","member","invCode","userObjBid","hasUserInfo","userObj","appDeviceObjBid","hasAppDeviceInfo","appDeviceObj","app","appIdObjBid","hasAppId","appIdObj","appid","memberIdBid","hasMemberId","sdk","member_id","consent_string","consent_required","refererinfo","rd_ref","rd_top","rd_ifs","rd_stk","referrer_detection","getRtbBid","newBid","parseMediaType","transformBidParams","isOpenRtb","use_pmt_rule","usePaymentRule","convertedKey","paramKey","rendererOptions","renderer_id","renderer_url","impression","ended","appnexus","buyerMemberId","buyer_member_id","rtb","player_width","player_height","asset_url","notify_url","ads","nativeAd","desc","ctatext","sponsored","click_trackers","impression_trackers","javascript_trackers","main_img","impression_urls","primary_size","ad_types","allow_smaller_sizes","allowSmallerSizes","prebid","disable_psa","reserve","position","trafficSourceCode","traffic_source_code","privateSizes","private_sizes","supplyType","supply_type","pubClick","pubclick","extInvCode","ext_inv_code","externalImpId","external_imp_id","nativeRequest","buildNativeRequest","layouts","require_asset_url","requestKey","adunitKeys","requiredKeys","remaining","ANOutstreamVideo","tagId","tag_id","handleOutstreamRendererEvents","adType","DEFAULT_SSP","pub","prebidReq","makePrebidRequest","rtbResp","exp","ssp","makeRtbRequest","makeImp","rtbReq","makeSite","makeDevice","coppa","makeBanner","makePublisher","getDomain","atomxt","unused","colorDepth","timezone","hbBidder","videoTtl","platver","platform","adapterver","isFullWidth","flattenSize","isValidNonSizedFormat","isValidSize","expandSize","isValidSizeAndFormat","isVideo","sdkVersion","findPlatform","platforms","isTestmode","createAdHtml","nativeStyle","nativeContainer","getTopWindowUrlEncoded","placementids","adformats","requestIds","testmode","pageurl","playerwidth","playerheight","cb","fbBidid","bid_price_cents","hb_bidder","fb_bidid","fb_format","fb_placementid","ADAPTER_VERSION","ADAPTER_NAME","VIDEO_ENDPOINT","BANNER_ENDPOINT","appId","isVideoBidValid","isBannerBidValid","videoBids","bannerBids","getVideoBidParam","createVideoRequestData","getBannerBidParam","createBannerRequestData","isVideoBid","bidPrice","getVideoSizes","firstSize","getFirstSize","createRenderer","bannerResponse","Beachfront","Player","ad_tag_url","expand_in_view","collapse_on_complete","parseSizes","getBannerSizes","getOsVersion","clientStrings","cs","isMobile","isConnectedTV","getDoNotTrack","msDoNoTrack","isBannerBid","getVideoTargetingParams","isPrebid","ua","devicetype","js","geo","slots","deviceOs","adapterVersion","adapterName","jst","getTz","fl","getFl","rr","getRr","bidid","transactionid","auctionid","itu","subid","click3rd","pubdata","td","plugins","description","mimeTypes","enabledPlugin","URL_SYNC","isBidResponseValid","winTop","placements","BASE_URL","_getFlash","_mac","FlashVersion","_axo","ActiveXObject","_v","slotID","flash","nocache","requestURL","brainyResponseObj","adID","REQUEST_ENDPOINT","BIDDER_VERSION","valid","typeOfCpmWeight","ChannelID","cpmWeight","bridgewell","matchedResponse","consumed","sizeValid","reqNativeLayout","resNative","PIXEL_ENDPOINT","LOG_MSG","invalidBid","noSite","noBid","bidWin","c1xAdapter","tagObj","pixelUrl","adunits","rnd","c1xTags","bidIdTags","bidToShortTag","pixelId","useSSL","compress","stringifyPayload","bidType","curBid","adIndex","sizeKey","priceKey","sizesArr","floorPriceMap","newSizeArr","foundChar","BID_URL","SUPPORTED_VIDEO_PROTOCOLS","SUPPORTED_VIDEO_MIMES","SUPPORTED_VIDEO_PLAYBACK_METHODS","_getDeviceObj","_getSiteObj","_validateSizes","_buildBid","playbackmethod","skip","skipafter","_buildResponse","resp","requestBody","usersync","bidParams","z","cfResponses","bidRequestList","cu","button_text","advertiser","iu","traffic","resItem","requestBidsHook","resetConsentData","DEFAULT_CMP","DEFAULT_CONSENT_TIMEOUT","DEFAULT_ALLOW_AUCTION_WO_CONSENT","userCMP","consentTimeout","allowAuction","staticConsentData","cmpCallMap","lookupIabConsent","lookupStaticConsentData","cmpSuccess","cmpError","hookConfig","handleCmpResponseCallbacks","cmpResponse","afterEach","getVendorConsents","consentDataCallback","consentResponse","vendorConsentsCallback","callbackHandler","cmpCallbacks","cmpFunction","__cmp","inASafeFrame","$sf","cmp","callCmpWhileInSafeFrame","cmpFrame","frames","callCmpWhileInIframe","commandName","sfCallback","msgName","vendorConsentData","vendorConsents","register","moduleCallback","arg","callId","__cmpCall","parameter","readPostMessageResponse","cmpIframeCallback","json","__cmpReturn","returnValue","removePostMessageListener","removeEventListener","consentObject","reqBidsConfigObj","nextFn","haveExited","exitModule","processCmpData","cmpFailed","cmpTimedOut","storeConsentData","errMsg","extraArgs","cmpConsentObject","vendorData","cmpApi","allowAuctionWithoutConsent","consentManagement","BASE_URI","networkId","unitId","unitName","ret","enableBotFiltering","includePricingData","parallel","divName","adTypes","decision","decisions","pricing","clearPrice","retrieveAd","sizeMap","oad","contents","impressionUrl","site_id","isPageSecure","pubcid","conversantImps","convertSizes","displaymanager","displaymanagerver","copyOptProperty","crumbs","mobile","getDevice","at","userExt","fpc","requestMap","bidList","conversantBid","responseCPM","responseAd","responseNurl","make","vendor","bidSizes","d","srcName","dst","dstName","helper","srTestCapabilities","flashVer","sf","swVer2","flashDescription","getRand","ingest","rawBids","adZoneAttributeKeys","otherKeys","state","createState","oneBid","responseJSON","adZoneKey","zones","placementMap","transform","coxRawBids","pbjsBids","responded","ingested","valueOf","puTop","validBidReqs","tpCookieSync","urls","ignore","CDB_ENDPOINT","CRITEO_VENDOR_ID","INTEGRATION_MODES","PROFILE_ID_INLINE","PROFILE_ID_PUBLISHERTAG","PUBLISHER_TAG_URL","publisherTagAvailable","Criteo","usePrebidEvents","tryGetCriteoFastBid","PubTag","Adapters","Prebid","buildCdbUrl","buildCdbRequest","buildContext","GetAdapter","zoneid","nativeCallback","onTimeout","timeoutData","handleBidTimeout","noLog","integrationMode","publisherSubId","publishersubid","networkid","consentGiven","criteo_prebid_native_slots","fastBid","eval","DEFAULT_CURRENCY_RATE_URL","CURRENCY_RATE_PRECISION","bidResponseQueue","conversionCache","currencyRatesLoaded","adServerCurrency","currencySupportEnabled","currencyRates","bidderCurrencyDefault","defaultRates","rates","conversions","conversionRateFile","initCurrency","resetCurrency","errorSettingsRates","processBidResponseQueue","currencyDefault","fromCurrency","getCpmInNewCurrency","toCurrency","getCurrencyConversion","wrapFunction","conversion","originalCpm","originalCurrency","NO_BID","conversionRate","cacheKey","roundFloat","anyBaseCurrency","toIntermediateConversionRate","fromIntermediateConversionRate","num","dec","TIME_TO_LIVE","ADAPTER_SYNC_URL","LOG_ERROR_MESS","noAuid","noAdm","noPlacementCode","emptyUids","emptySeatbid","emptyResponse","hasEmptySeatbidArray","hasNoArrayOfBids","auids","bidsMap","reqId","u","gdpr_applies","_addBidResponse","_getBidFromResponse","respItem","auid","awaitingBids","buildDfpVideoUrl","defaultParamConstants","gdfp_req","unviewed_position_start","urlComponents","buildUrlFromAdserverUrlComponents","derivedParams","correlator","encodedCustomParams","getCustParams","cust_params","descriptionUrl","getDescriptionUrl","description_url","components","allTargetingData","allTargeting","optCustParams","customParams","hb_uuid","hb_cache_id","buildVideoUrl","registerVideoSupport","videoSupport","adServers","getCookieUid","UID_NAME","location_id","isNative","setNativeResponse","nativeResponce","uidName","matchRequest","checkDeepArray","defaultSize","DMXURI","supportedFormat","dmxid","memberid","oBid","nBid","winnersClean","dmxRequest","tmax","tosendtags","dmx","optionsType","Arr","thebidObj","returnObject","rtbServerDomain","ebdrImps","ebdrReq","ebdrParams","whArr","getWidthAndHeight","_mediaTypes","ebdrBidReq","lat","latitude","longitude","ifa","ebdrResponseImps","ebdrResponseObj","ebdrBid","vastURL","iurl","adW","adH","EPL_HOST","auctionEndHandler","auctionInitHandler","bidRequestedHandler","bidResponseHandler","bidWonHandler","bidTimeoutHandler","callHandler","evtype","eplAnalyticsAdapter","ec","strjson","ci","DEFAULT_SV","DEFAULT_ISV","PARAMS","DOLLARS","NET_REVENUE","TTL","NULL_SIZE","FILE","t","dfpClientId","sec","urlConfig","getUrlConfig","pcrs","getCharset","isv","sv","referrerUrl","spacesString","getSpacesString","ur","ncb","crs","fr","adUnitToBidId","getBidIdMap","sp","space","pr","responseSyncs","ifr","cleanName","isTestRequest","getTestConfig","br","isTest","charset","characterSet","countryMap","refid","country","lastContry","vast_link","MODULE_NAME","express","gptSlotCache","adUnitsCache","cache","gpt","pads","enableServices","refresh","disableInitialLoad","enableSingleRequest","mapGptSlotSizes","aGPTSlotSizes","aSlotSizes","getWidth","getHeight","defaultSlots","pickAdUnits","gptSlots","gptSlot","elemId","getSizes","fGptDisplay","fGptEnableServices","fGptRefresh","fGptDisableInitialLoad","fGptEnableSingleRequest","bInitialLoadDisabled","sElementId","aGptSlots","bEnabledSRA","oGptSlot","_displayed","BIDDER_SERVER","FIDELITY_VENDOR_ID","from","requestid","charSet","flashver","getFlashVersion","defloc","setConsentParams","seatBid","plugin","consent_str","consent_given","PROTOCOL","getProtocol","FREEWHEEL_ADSSETUP","MUSTANG_URL","PRIMETIME_URL","USER_SYNC_URL","isValidUrl","pattern","getBiggerSize","getPricing","xmlNode","pricingExtNode","princingData","extensions","querySelectorAll","node","getAttribute","priceNode","textContent","innerText","getCreativeId","creaId","adNodes","el","getTopMostWindow","getComponentId","inputFormat","component","getAPIName","componentId","formatAdHTML","integrationType","divHtml","libUrl","getOutstreamScript","getInBannerScript","domId","currentBidRequest","requestParams","reqType","protocolVersion","_fw_gdpr_consent","_fw_gdpr","vastParams","vastUrlParams","bidrequest","xmlDoc","DOMParser","parseFromString","topWin","freewheelssp_cache","blob","Blob","createObjectURL","CODE","V","RECTANGLE_SIZE","W","H","SPOT_TYPES","INTERSTITIAL","RECTANGLE","FLOATING","DISPLAY_AD","EVENTS_ENDPOINT_URL","RESPONSE_HEADERS_NAME","PRICING_VALUE","AD_H","AD_W","CREATIVE_ID","CURRENCY","Helpers","defaultsQsParams","mw","hb","getAd","adHtml","tracking","impressionsHtml","impressions","Reporter","getEventUrl","clicks","adTemplate","stringToCamel","first","charAt","$1","objectToCamel","keyCamelCase","getEndpointUrl","qa","getPageProtocol","toBidParams","bidParamsWithCustomParams","isValidBidResponse","responseAsJson","headersData","Url","defaultsParams","fs","serverParamNameBySettingParamName","portal","age","gender","gdprPrivacyConsent","gdprConsentData","unwantedValues","toServerParams","serverParams","isSecured","handleGDPR","getUrlParams","toQueryString","spotType","rw","rh","bco","errorEventName","pageProtocol","evtName","extraDetails","eventsEndpoint","queryStringParams","eventQueryStringParams","queryStringParamsWithAID","toQS","realAppId","Http","headerNames","getBidHeaders","responseHeaders","headerName","bidByBidId","FyberBid","trackName","getTopFrame","startsWith","getTopWindowDomain","domainStart","getTopWindowReferer","supplyPartnerId","instl","baseEndpoint","rtbEndpoint","rtbBidRequest","outBids","outBid","suffix","pixel","rendererUrl","renderOutstream","ALL_ADS_COMPLETED","removeAd","gaxObjParams","adid","IS_NET_REVENUE","BID_HOST","BID_BANNER_PATH","BID_VIDEO_PATH","BID_RESPONSE_TTL_SEC","VIDEO_PROPERTIES","OPTIONAL_PROPERTIES","giBidRequest","buildGiBidRequest","buildUrl","no_bid","parseSize","is_video","known","resp_type","produceSize","addVideo","addOptional","props","sizeToStr","getKeywords","_renderCreative","DIMENSION_SEPARATOR","minCPC","gjid","generateSizeParam","configId","allowExplicit","explicit","CreativeId","Currency","NetRevenue","Referrer","_disableInteraction","nonInteraction","_analyticsQueue","_gaGlobal","_category","_enableDistribution","_trackerSend","trackerName","enableDistribution","existingEvents","eventObj","sendBidRequestToGa","sendBidResponseToGa","bidderArray","sendBidTimeouts","sendBidWonToGa","bidRequestObj","getTrackerSend","checkAnalytics","convertToCents","dollars","getLoadTimeDistribution","distribution","getCpmDistribution","cpmCents","dis","cpmDis","ALIAS_BIDDER_CODE","BID_ENDPOINT","DT_CREDENTIALS","browserParams","pageViewId","_getBrowserParams","topWindow","topScreen","topUrl","ggad","vw","vh","sw","sh","pu","ce","getWrapperCode","wrapper","_getDigiTrustQueryParams","getDigiTrustId","digiTrustUser","DigiTrust","getUser","identity","digiTrustId","privacy","optout","inScreen","inSlot","ICV","pv","pi","si","ni","tId","selector","serverResponseBody","defaultResponse","markup","pag","pvid","cw","product","isTestUnit","pxs","scr","userSyncs","usersyncs","sizeIndex","otherBidIds","adUnitPath","stringifySlotSizes","stringifySlot","ss","stringifyWindowSize","stringifyScreenSize","IAS_HOST","anId","queries","getPageLevelKeywords","shallowMerge","brandSafety","dest","srcKey","iasResponse","commonBidResponse","otherResponse","placementKey","normalizedBids","getNormalizedBidRequest","idClient","ImproveDigitalAdServerJSClient","requestParameters","singleRequestMode","returnObjType","RETURN_OBJ_TYPE","URL_PARAMS_SPLIT","libVersion","requestObj","createRequest","errors","lid","isNet","syncElement","adUnitId","localSize","normalizedBidRequest","endPoint","HTTP_SECURITY","STANDARD","SECURE","AD_SERVER_BASE_URL","AD_SERVER_URL_PARAM","CLIENT_VERSION","MAX_URL_LENGTH","ERROR_CODES","MISSING_PLACEMENT_PARAMS","LIB_VERSION_MISSING","DEFAULT","getErrorReturn","errorCode","idMappings","requestObject","extraRequestParameters","impressionObjects","impressionObject","createImpressionObject","returnIdMappings","baseUrl","bidRequestObject","bid_request","createBasicBidRequestObject","writeLongRequest","outputUri","pop","formatRequest","impressionBidRequestObject","placementObject","outputObject","pubid","pkey","valueCounter","kvw","parseSized","arrSize","vpw","vph","callback_uid","CONFIG","gdprConsentString","gdprConsentRequired","eventIds","appendChild","BIDDER_ENDPOINT","TIMEOUT_DEFAULT","bidRequestParams","serverPayloadData","payloadData","resetInvibes","DEFAULT_CURRENCY","PREBID_VERSION","METHOD","handleResponse","handlePostMessage","buildSyncUrl","invibes","_customUserSync","_placementIds","_loginId","_customEndpoint","_ivAuctionStart","loginId","customEndpoint","customUserSync","visitId","generateRandomId","cookieDomain","detectTopmostCookieDomain","noCookies","getCookie","optIn","initDomainId","currentQueryStringParams","parseQueryStringParams","getDocumentLocation","videoAdHtmlId","showFallback","ivbsCampIdsLocal","lId","dom","bidParamsJson","placementIds","auctionStartTime","bidVersion","capCounts","getCappedCampaignsAsString","vId","noc","oi","parametersToPassForward","videoAdContentResult","bidModel","BidModel","Ads","AdReason","PlacementId","BidPrice","VideoExposedId","renderCreative","ivLogger","AuctionStartTime","ivbs","m","lastIndex","CreativeHtml","loadData","saveData","clearExpired","dirty","getCappedCampaigns","record","noop","initLogger","InvibesDEBUG","did","bks","acceptPostMessage","ivbscd","setCookie","exdays","graduate","Uid","generate","maxRand","mkRand","rand1","rand2","unescape","whiteListed","exdate","exms","setTime","cookieValue","toUTCString","testCookie","hostParts","cookiePersistence","cname","load","save","persistence","minHC","validGradTime","cr","minAge","hc","setId","tempId","noVisit","mediatype","_getDNT","_isMobile","_isConnectedTV","BANNER_SECURE_BID_URL","BANNER_INSECURE_BID_URL","ENDPOINT_VERSION","CENT_TO_DOLLAR_FACTOR","isSecureWeb","PRICE_TO_DOLLAR_FACTOR","JPY","bidToBannerImp","siteID","sid","bidfloorcur","bidFloorCur","parseBid","includesSize","sizeArray","isValidBidFloorParams","curRegex","hasBidFloor","hasBidFloorCur","bannerImps","bannerImp","otherIxConfig","firstPartyData","firstPartyString","ac","sd","innerBids","BidRequestStr","adSizes","JSONStr","dataStr","callbackId","JP_ADAPTER_VERSION","TRACK_START_TIME","LAST_PAYLOAD","AD_UNIT_IDS","preparePubCond","dim","getWebsiteDim","screenWidth","screenHeight","ww","wh","jp_adapter","findBid","pubUrl","jp","auc","to","duration","cssText","passCond","allow","exclude","cond","formats","arrayUnique","idx","kargoAdapter","HOST","currencyObj","bidIds","transformedParams","cpmGranularity","cpmRange","ceil","bidIDs","_getAllMetadata","encodedParams","_readCookie","nameEquals","_getCrbIds","crb","syncIds","vParsed","atob","_getUid","vData","_getKruxUserId","_getLocalStorageSafely","_getKruxSegments","_getKrux","segmentsStr","segments","userID","_getUserIds","crbIds","kargoID","userId","clientID","clientId","crbIDs","optOut","userIDs","krux","pageURL","rawCRB","USYNCURL","hbid","trid","placementid","floorPrice","floorprice","kbConf","ts_as","hb_placements","hb_placement_bidids","hb_floors","_generateCb","hdbdid","encode_bid","NATIVE_DEFAULTS","TITLE_LEN","DESCR_LEN","SPONSORED_BY_LEN","IMG_MIN","ICON_MIN","applyGdpr","bidResponseAvailable","idToImpMap","idToBidMap","ortbRequest","nativeImpression","videoImpression","addAsset","titleAsset","dataAsset","imageAsset","defaultLen","defaultMinWidth","defaultMinHeight","wmin","hmin","appParams","bundle","storeurl","storeUrl","lon","browserLanguage","userLanguage","systemLanguage","innerHeigh","rawResponse","ex","urlTemplate","adkey","ad_size","wn","boolToString","fif","if","stamp","hbver","isResponseValid","content_type","BID_TTL_DEFAULT","PARAM_OUTPUT_DEFAULT","PARAM_EXECUTION_DEFAULT","PARAM_SUPPORT_DEFAULT","PARAM_PLAYINIT_DEFAULT","PARAM_VOLUME_DEFAULT","_validateId","adWidth","adHeight","playerWidth","playerHeight","sspUrl","sspData","execution","support","playinit","volume","vpaidmode","appname","bundleid","idfa","gdprcs","flrd","flrmp","contentId","contentid","contentTitle","contenttitle","contentLength","contentlength","contentUrl","contenturl","bidWidth","bidHeight","sspXmlString","sspXml","adUnitBidRequests","MADVERTISE_ENDPOINT","mantis_link","isDesktop","ignoreTouch","supportsTouch","msMaxTouchPoints","documentElement","mantis_breakpoint","onVisible","doOnVisible","pct","started","notified","onNotVisible","whenNotVisible","interval","doCheck","winWidth","winHeight","rect","hidden","minHeight","minWidth","inView","bottom","left","right","ack","clearInterval","onHidden","isAmp","observeIntersection","changes","change","rootBounds","boundingClientRect","setInterval","getBoundingClientRect","storeUuid","mantis_uuid","onMessage","mantis","isSendable","isObject","isSecure","jsonToQuery","chain","form","parts","queryKey","akey","aval","buildMantisUrl","buster","localUuid","amp","canonicalUrl","mantis_domain","property","measurable","view","viewed","inViewPercentage","frame","stop","MARS_BIDDER_CODE","MARS_VERSION","MARS_ANALYTICS_URL","marsmediaAnalyticsAdapter","act","SLOT_VISIBILITY","NOT_DETERMINED","ABOVE_THE_FOLD","BELOW_THE_FOLD","TIMEOUT_EVENT_NAME","BID_WON_EVENT_NAME","EVENT_PIXEL_URL","mnData","medianetGlobals","siteDetails","siteData","getPageMeta","pageMeta","getUrlFromSelector","ogUrl","twitterUrl","attribute","attr","getAttributeFromSelector","getAbsoluteUrl","aTag","filterUrlsByType","getWindowSize","getCoordinates","coordinates","top_left","bottom_right","extParams","customer_id","prebid_version","gdpr_consent_string","windowSize","slotParams","dfp_id","display_count","normCoordinates","normalizeCoordinates","viewability","getSlotVisibility","getMinSize","visibility","topLeft","maxArea","bottomRight","getOverlapArea","topLeft1","bottomRight1","topLeft2","bottomRight2","pageXOffset","pageYOffset","generatePayload","isValidBid","fetchCookieSyncUrls","csUrl","getLoggingData","logid","evtid","project","acid","adunit_count","dn","requrl","rd","related_data","logEvent","getParams","clearMnData","cookieSyncUrls","eventData","onBidWon","BID_REQUEST_BASE_URL","CPM_HEADER","rt","r_type","r_resp","adspace_width","adspace_height","r_floor","o_andadvid","demo_age","adspace_strict","imp_instl","c_mraid","v_dur_min","v_dur_max","v_autoplay","v_startmute","v_rewarded","v_api","n_ver","n_adunit","n_layout","n_context","n_plcmttype","n_img_icon_req","n_img_icon_size","n_img_large_req","n_img_large_w","n_img_large_h","n_title_req","n_title_len","n_desc_req","n_desc_len","n_rating_req","buildPayloadString","serverResponseHeaders","bidRequestData","clickurl","htmlString","END_POINT_METHOD","canonicalLink","metaElements","canonicalLinkContainer","fixRequestParamForServer","isEmptyValue","parametersMap","emptyValue","fromUser","buildGdprServerProperty","gdprObj","widget_num","isDataUrlSetByUser","fixedObj","ENGINE_BASE_URL","DATA_PARTNER_PIXEL_ID","NQ","NQ_NAME","CATEGORY","CATEGORY_NAME","SUB_ID","REF","LOCATION","createSingleBidRequest","isEngineResponseValid","createSingleBidResponse","createNqParam","createCategoryParam","createSubIdParam","createRefParam","createLocationParam","ADMIXER_ENDPOINT","DEFAULT_BID_TTL","DEFAULT_REVENUE","ax_key","adSize","req_id","os","getOsType","error_code","ad_id","regexpOs","tos","SYNC_ENDPOINT1","SYNC_ENDPOINT2","SYNC_ENDPOINT3","SYNC_ENDPOINT4","getRequestData","linearity","maxbitrate","delivery","EDNPOINT","bidReqs","prebidVer","requestsToBids","pageInfo","getPageInfo","nobid","masked","wWidth","wHeight","sWidth","sHeight","date","timeOffset","toRet","lenght","resetBoPixel","BIDDER_CONFIG","shouldSendBoPixel","delDomain","partitionByVideoBids","buildOXBannerRequest","buildOXVideoRequest","videoBid","serverRequest","oxResponseObj","getMediaTypeFromRequest","createVideoBidResponses","createBannerBidResponses","adUnitIdx","pub_rev","tbd","ts","registerBeacon","buildQueryStringFromParams","getViewportDimensions","isIfr","tWin","tDoc","docEl","formatCustomParms","customKey","buildCommonQueryParamsFromBids","isInIframe","defaultParams","ju","jr","ch","tws","be","bc","dddid","gdprConsentConfig","x_gdpr_f","customParamsForAllBids","hasCustomParam","aus","divIds","ns","tfcd","customParamsForBid","formattedCustomParams","tps","customFloorsForAllBids","hasCustomFloor","customFloor","aumfs","oxVideoParams","generateVideoParameters","oxVideoConfig","vwd","vht","vos","vmimes","vastQueryParams","ph","colo","beaconUrl","bd","bp","bs","recordPixel","boBase","getData","ip","SCORES_BASE_URL","optimeraHost","optimeraPathName","scoresURL","scores","styleParamsMap","stylesParams","stylesParamsArray","currentValue","currentStyle","field","styleField","customParamsArray","customField","sizesParams","WIDTH","HEIGHT","CREATIVE","content_url","CALLBACK_UID","REFERER","PAPYRUS_ENDPOINT","PAPYRUS_CODE","address","responseBid","requestBid","pver","pbparams","pbwidth","pbheight","pbbidid","mapImpression","sBid","iBid","mapBanner","mapSizes","PLX_ENDPOINT_URL","PLX_CURRENCY","PLX_TTL","PLX_NETREVENUE","customUrl","bidderUrl","tracker2","urlParams","polymorphAdapterSpec","zid","hb_source","defaultWidth","defaultHeight","theHTML","ecpm","resetSyncedStatus","PrebidServer","_synced","DEFAULT_S2S_TTL","DEFAULT_S2S_CURRENCY","DEFAULT_S2S_NETREVENUE","s2sDefaultConfig","maxBids","setS2sConfig","defaultVendor","optionKeys","S2S_VENDORS","vendorKey","queueSync","jsonPayload","syncEndpoint","bidder_status","doBidderSync","doClientSideSyncs","clientAdapter","keyv","pref","_appendSiteAppDevice","accountId","transformHeightWidth","sizesObj","heightWidth","LEGACY_PROTOCOL","media_types","account_id","max_bids","timeout_millis","cache_markup","cacheMarkup","is_debug","digiTrust","requestedBidders","serverResponseTimeMs","response_time_ms","cache_id","cache_url","media_type","ad_server_targeting","OPEN_RTB_PROTOCOL","bidMap","sizeObjects","bannerParams","videoParams","digitrust","seat","OPEN_RTB_PATH","protocolAdapter","baseAdapter","adUnitsWithSizes","requestJson","cookieSet","cookieSetUrl","adLoader","isPubcidEnabled","getExpInterval","requestBidHook","initPubcid","COOKIE_NAME","DEFAULT_EXPIRES","PUB_COMMON","pubcidEnabled","getId","expires","expTime","toGMTString","enable","expInterval","constants","AUCTION_TYPE","UNDEFINED","CUSTOM_PARAMS","DATA_TYPES","VIDEO_CUSTOM_PARAMS","ARRAY","NUMBER","dealChannelValues","_getDomainFromURL","anchor","_parseSlotParam","paramValue","_cleanSlot","slotName","_parseAdSlot","adUnitIndex","sizesArrayExists","adSlot","splits","_initConf","refURL","_handleCustomParams","kadpageurl","entry","_createOrtbTemplate","_checkParamDataType","datatype","BOOLEAN","STRING","_createImpressionObject","impObj","bannerObj","videoObj","kadfloor","pmZoneId","pmzoneid","videoData","skippable","bidCurrency","dctr","dctrLen","dctrArr","profile","profId","verId","wiid","wv","REPO_AND_VERSION","wp","yob","key_val","respCur","seatbidder","parsedRequest","deal_channel","syncurl","analyticsName","defaultUrl","pubwiseVersion","pubwiseSchema","configOptions","pwAnalyticsEnabled","utmKeys","utm_source","utm_medium","utm_campaign","utm_term","utm_content","markEnabled","enrichWithMetrics","dataBag","enrichWithUTM","newUtm","itemValue","sendEvent","target_site","pubwiseAnalytics","pulsepointAdapter","DEFAULT_NET_REVENUE","cp","ct","applyExt","ortbBid","cf","DEFAULT_BID_FLOOR","QUANTCAST_DOMAIN","QUANTCAST_TEST_DOMAIN","QUANTCAST_NET_REVENUE","QUANTCAST_TEST_PUBLISHER","QUANTCAST_TTL","QUANTCAST_PROTOCOL","QUANTCAST_PORT","bidRequestsList","battr","gdprSignal","qcDomain","bidResponsesList","qtxRequest","devEnpoint","useDev","renderMode","quantx_user_consent_string","quantx_gdpr","cobj","adAssetsUrl","jstracker","qtx_native","CTA_LEN","fd","realvuAnalyticsAdapter","top1","wnd","realvu_aa_fifo","realvu_aa","x1","y1","x2","y2","t0","nn","frm","foc","sr","beacons","ie","appVersion","saf","ff","ope","opera","add_evt","doLog","elem","evtType","update","de","scrollLeft","scrollTop","w1","h1","brd","getComputedStyle","padd","viz_area","iv","geom","xv1","yv1","xv2","yv2","A","viz_dist","s1","tru","bk","send_track","riff","unit_id","charCodeAt","st","dv0","parentNode","pin","pins","s2","partner_id","enc","mode","ru","escape","findPosG","adi","xp","yp","dc","ownerDocument","parentWindow","offsetLeft","offsetTop","op","offsetParent","pn","opf","ptn","ff_o","q","poll","fifo","ptm","dvz","restored","adobj","readPos","bind_obj","questA","box","offsetWidth","offsetHeight","pad","ax","ay","writePos","vtr","edge","vz","vt","vtu","plen","dist","near","vrScore","score","vv0Score","show","time0","rpt","bids_rpt","incrMem","tmin","rotate","delay","ncall","tx2n","nodeType","Node","TEXT_NODE","par","notFriendly","ain","tn","backgroundImage","hasChildNodes","nextSibling","add","wnd1","rq_bids","fmt","asz","setSize","check","p1","ed","sa","sb","mm","addUnitById","partnerId","checkBidIn","boost","pushBid","pb","ttr","checkBidWon","bj","wo","g","rqb","getStatusById","m1","keyPos","level","evt","k1","vmem","vr","nv","nr","vstr","boost_poll","_options","regAllUnits","unitIds","checkIn","isInView","realvu","RhythmOneBidAdapter","slotsToBids","getFirstParam","doc_version","doc_type","ao","ancestor_origins","popped","opener","framed","prebid_timeout","response_ms","loadStart","placement_codes","bidder_version","that","BRs","fallbackPlacementId","attempt","valueFunction","getRMPUrl","defaultZone","defaultPath","n","heights","widths","floors","configuredPlacements","fat","th","tw","BASE_REQUEST_PATH","IFRAME_SYNC_URL","VAST_PLAYER_LOCATION","ROTATION_ZONE","determineOptimalPlacementId","determineOptimalRequestId","buildSiteComponent","buildDeviceComponent","extractValidSize","requestedSizes","conformingSize","splitSizes","generateVideoComponent","impSize","generateBannerComponent","generateImpBody","overridableProperties","rendererLocation","baseRequestPath","rotationZone","rendererOverride","requestRoot","requestType","requestPayload","serverLocations","RockYouVastPlayer","playerCallbacks","pbe","rockYouEventTranslation","rockYouEvent","translated","generateRenderer","adText","seatBids","nullify","bannerCreative","videoXml","serversideLocations","internals","DEFAULT_EVENT_URL","DEFAULT_SERVER_CONFIG_URL","AUCTION_STATUS","BIDDER_STATUS","ROXOT_EVENTS","localStoragePrefix","utmTags","utmTtlKey","utmTtl","isNewKey","isNewTtl","auctionCache","auctionTtl","sendEventCache","sendEventTimeoutId","sendEventTimeoutTime","detectDevice","checkIsNewFlag","buildLocalStorageKey","lastUpdate","updateUtmTimeout","isUtmTimeoutExpired","utmTimestamp","isSupportedAdUnit","deleteOldAuctions","buildAuctionEntity","extractAdUnitCode","extractBidder","buildAdUnitAuctionEntity","RUNNING","buildBidderRequest","FINISHED","REQUESTED","buildBidAfterTimeout","adUnitAuction","buildImpression","handleAuctionInit","handleBidRequested","handleBidAdjustment","handleBidAfterTimeout","finish","BID","bidAfterTimeout","isAfterTimeout","registerEvent","BID_AFTER_TIMEOUT","handleBidderDone","bidDone","handleAuctionEnd","AUCTION","handleBidWon","IMPRESSION","handleOtherEvents","roxotAdapter","initConfig","buildUtmTagData","utmTagData","utmTagsDetected","utmTagKey","utmTagValue","isCorrectConfig","publisherIds","configServer","loadServerConfig","getOptions","serverConfig","checkEventAfterTimeout","checkSendEvent","isNeedSend","meta","buildLogMessage","request_id","imp_id","aff","bid_floor","site_domain","site_page","device_width","device_height","REGIONS","DEFAULT_CURRENCY_ARR","slotSizes","mapSite","validRequest","consentStr","originalRequest","SEND_TIMEOUT","INTEGRATION","auctions","timeouts","_pick","properties","newObj","stringProperties","sizeToDimensions","validMediaType","formatSource","sendMessage","bidWonId","formatBid","formatBidWon","videoAdFormat","bidwonStatus","samplingFactor","eventTimeMillis","integration","referrerUri","sent","adUnitMap","statusPriority","clientTimeoutMillis","serverTimeoutMillis","bidsWon","memo","parseBidResponse","rubiconAdapter","validSamplingFactors","cacheEntry","_","cachedBid","startdelay","dimensions","clientLatencyMillis","serverLatencyMillis","badBid","hasVideoMediaType","masSizeOrdering","FASTLANE_ENDPOINT","TIMEOUT_BUFFER","videoRequests","page_url","_getPageUrl","resolution","_getScreenResolution","stash_creatives","slotData","zone_id","element_id","size_id","ae_pass_through_parameters","aeParams","inventory","visitor","createSlotParams","getOrderedParams","paramString","propValue","nonVideoRequests","groupedBidRequests","groupedBids","bidsInGroup","bidGroupKey","combinedSlotParams","combineSlotUrlParams","containsTgV","containsTgI","orderedParams","aSlotUrlParams","oCombinedSlotUrlParams","oCombinedParams","oSlotUrlParams","iIndex","sValues","latLong","digitrustParams","associatedBidRequest","deal","rubicon","advertiserId","creative_type","creative_depot_url","impression_id","rubiconTargeting","adA","adB","impId","mappedSize","validVideo","MAS_SIZE_PRIORITY","second","firstPriority","secondPriority","RESPONSE_TTL","badv","bcat","getSource","bidSource","calculateBidSources","sourceBidders","calcSource","bidderControl","sourceWeights","bidSources","srcIncWeight","totWeight","rndWeight","spaceId","e2","e1","subId","vid_vastType","endpointUrl","REQUIRED_S2S_CONFIG_KEYS","ServerBidServerAdapter","userConfig","getLocalConfig","_convertFields","safeBid","converted","shouldDoWorkFn","_callBids","allBids","skipSelection","_responseCallback","bidCode","skipSelectionRequestsReturnArray","createNew","STR_BIDDER_CODE","STR_VERSION","sharethroughAdapter","STR_BEACON_HOST","placementCodeSet","curBidderCode","strBid","fireLoseBeacon","adserverRequestId","winningBidderCode","winningCPM","arid","loseBeaconUrl","appendEnvFields","fireBeacon","theUrl","STR_ENDPOINT","sharethroughAdapterSpec","placement_key","hbVersion","strVersion","hbSource","strData","stayInIframe","iframeSize","creatives","getLargestSize","creative_key","generateAd","shouldCookieSync","area","strRespId","adMarkup","b64EncodeUnicode","toSolidBytes","fromCharCode","auctionInitConst","auctionEndConst","bidWonConst","bidRequestConst","bidAdjustmentConst","bidResponseConst","eventStack","auctionStatus","utmTimeoutKey","utmTimeout","sessionTimeout","sessionIdStorageKey","sessionTimeoutKey","vars","buildSessionIdLocalStorageKey","buildSessionIdTimeoutLocalStorageKey","updateSessionId","isSessionIdTimeoutExpired","newSessionId","sessionId","getSessionId","updateSessionIdTimeout","cpmSessionTimestamp","buildUtmLocalStorageTimeoutKey","buildUtmLocalStorageKey","utmMarkKey","checkOptions","checkAdUnitConfig","buildBidWon","buildEventStack","filterBidsByAdUnit","filteredBids","isValidEvent","validationEvents","isValidEventStack","isValidBidWon","flushEventStack","sigmoidAdapter","pushEvent","sendDataType","AWS","credentials","Credentials","accessKeyId","secretAccessKey","kinesis","Kinesis","apiVersion","dataList","jsonData","putRecords","Records","StreamName","formatId","siteid","formatid","currencyCode","buid","buId","appName","ckid","ckId","pageDomain","prebidVersion","isNetCpm","cSyncUrl","BANNER_TARGETING","SITE_TARGETING","APP_TARGETING","da","openRtbRequest","pmp","private_auction","deals","openRtbImpression","openRtbSite","openRtbApp","openRtbDevice","openRtbBCat","openRtbBAdv","populateOpenRtbGdpr","reqs","isApp","_getPlatform","PAGEVIEW_ID","ad_unit","slotIdentifier","_validateSlot","_validateSize","_validateFloor","hfa","bidsReturned","_getBidIdFromTrinityKey","bidReqest","createCreative","_creative","sbi_aid","sbi_mouse","sbi_size","sbi_dc","sbi_crid","sbi_dozer","creativeType","sbi_ct","sbi_px","sbiDc","sbiAid","_videoCreative","_isInbounds","lowerBound","upperBound","MAX_SAFE_INTEGER","isInBounds","MOBILE_VIEWPORT","lt","TABLET_VIEWPORT","ge","SERVER_URL","sortableConfig","haveSiteId","validFloor","validSize","validFloorSizeMap","floorSizeMap","validKeywords","globalSiteId","sortableImps","bidderParams","partner","sortableBidReq","sortableBids","details","fetch","Headers","sovrnImps","sovrnBidReq","sovrnBidResponses","sovrnBid","iidArr","iid","supplyCode","generateUrl","bidResult","lower","telaria","scheme","getStorageData","setStorageData","BASE_KEY","sectionId","trionUrlParams","buildTrionUrlParams","trionResponseObj","placeBid","getSyncUrl","unParsedPubAndSection","pubSectionArray","intT","TR_INT_T","trionUrl","tripleliftAdapterSpec","inventoryCode","tlCall","_buildPostBody","_buildResponseObject","ibCall","_sizes","_isValidSize","wtimeout","VER","VIDEO_CONTEXT","INSTREAM","OUSTREAM","isVideoMediaType","videoContext","ucfunnelResponseObj","videoPlayerSize","bl","je","atype","UDM_ADAPTER_VERSION","UDM_VENDOR_ID","bidParam","mids","useCount","sizeNotFound","ad_code_html","makeNotification","notification_url","visibilityState","getUrlVars","hashes","domains","REQ_URL","bidRequestId","hbadaptor","bidRes","configureUniversalTag","exchangeRenderer","unruly","supplyMode","configureRendererQueue","uq","notifyRenderer","bidResponseBid","serverResponseToBid","rendererInstance","buildPrebidResponseAndInstallRenderer","rendererConfig","noBidsResponse","isInvalidResponse","UOL_LOG_HEADER","cpmFactor","getPayloadFor","referrerURL","trackingAllowed","getLastLocation","geolocation","extractCustomParams","permissions","getUserCoordinates","then","long","Promise","resolve","reject","permission","getCurrentPosition","coords","bidRequestsArr","slotBidId","vzEndPoint","reqSrc","vzReq","_vzPlacementId","_rqsrc","_cb","_slotBidId","_cpm","_cbn","queryParamValue","bidRespObj","TTL_SECONDS","INTERNAL_SYNC_TYPE","EXTERNAL_SYNC_TYPE","cId","pId","topWindowUrl","dto","lookup","DEFAULT_CUR","vubleAnalytics","vubleEvent","videos","formalizeBidEvent","ENVS","CURRENCIES","com","showBigPlayButton","showProgressBar","showVolume","allowFullscreen","pub_id","floor_price","iframeSync","WS_ADAPTER_VERSION","LOCAL_STORAGE_AVAILABLE","COOKIE_ENABLED","LS_KEYS","PERF_DATA","LC_UID","CUST_DATA","preReqTime","REQUEST_SERVER_URL","getEngineUrl","DEMO_DATA_PARAMS","perfData","getLcuid","isInHostileIframe","visibleOnLoad","encodedParamValue","pixelSyncPossibility","demo","perfDataKey","CONNECTION","connection","webkitConnection","downlinkMax","DEBUG_AD","forceAdId","gdprCmp","hasGlobalScope","gdprHasGlobalScope","responseTime","successBids","storeData","netRev","allSyncPixels","syncPixels","theDate","expDate","setMonth","getMonth","remove","topPos","lcuid","requiredStringify","ENGINE_URL","wisp","PREBID_ENDPOINT","buildURI","buildItem","items","pixKey","spid","topFrame","YieldbotAdapter","_adapterLoaded","_navigationStart","_version","_bidRequestCount","_pageviewDepth","_lastPageviewId","_sessionBlocked","_isInitialized","_sessionTimeout","_userTimeout","_cookieLabels","initialize","pageviewDepth","sessionBlocked","cookieName","blockSession","newId","lastPageviewId","lastPageviewTime","urlPrefix","pIdx","invalidSizeArray","psn","_optOut","searchParams","initBidRequestParams","pageviewIdToMap","yieldbotSlotParams","getSlotRequestParams","bidUrl","Accept","user_syncs","responseUserSyncs","clearAllCookies","slotBids","sizeParts","ybBidId","url_prefix","tagObject","buildAdCreativeTag","initAdRequestParams","adRequestId","commonSearchParams","vi","pvi","buildAdUrl","publisherNumber","buildImpressionUrl","ybotAdRequestId","htmlMarkup","pageviewId","currentBidTime","lastBidTime","lastBidId","existingSize","nm","itemName","expireMillis","dataValue","cookieStr","deleteCookie","createDelegate","instance","outerArgs","CURRENCY_CODE","adslotId","supplyId","adslotIds","createQueryString","adslots","originalBidRequest","matchedBid","primarysize","customsize","SERVER_ENDPOINT","localWindow","getTopWindow","bust","scrd","getEnvironment","getPageDescription","addPlacement","createNewBid","getUserSync","trackingEnabled","placementInfo","callback_id","ym_placement_id","isIOS","isSuperSandboxedIframe","isDfpInAmp","isDfp","isDFPSafeFrame","isSafeFrame","isMraid","isCodeOnPage","isSandboxedIframe","parentElement","ampContext","sacrificialIframe","setAttribute","_testVar","removeChild","mraid","adTag","yuktamediaAnalyticsVersion","yuktamediaAnalyticsAdapter","mapBidRequests","renderStatus","o","yuktamediaAnalyticsRequestUrl","SECURE_URL","DIM_TYPE","channelCode","dimId","channel","dimension","dimType","creativeBid","getCreative","slotId","creativeDetails","adContent"],"mappings":"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","file":"prebid.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"pbjsChunk\"];\n \twindow[\"pbjsChunk\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t167: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 563);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 33ec5e9368bf34a8c845","import { config } from './config';\nimport clone from 'just-clone';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { parse } from './url';\nconst CONSTANTS = require('./constants');\n\nvar _loggingChecked = false;\n\nvar tArr = 'Array';\nvar tStr = 'String';\nvar tFn = 'Function';\nvar tNumb = 'Number';\nvar tObject = 'Object';\nvar tBoolean = 'Boolean';\nvar toString = Object.prototype.toString;\nlet consoleExists = Boolean(window.console);\nlet consoleLogExists = Boolean(consoleExists && window.console.log);\nlet consoleInfoExists = Boolean(consoleExists && window.console.info);\nlet consoleWarnExists = Boolean(consoleExists && window.console.warn);\nlet consoleErrorExists = Boolean(consoleExists && window.console.error);\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexports.replaceTokenInString = function (str, map, token) {\n  exports._each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n};\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\nfunction _getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n// generate a random string (to be used as a dynamic JSONP callback)\nexports.getUniqueIdentifierStr = _getUniqueIdentifierStr;\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexports.generateUUID = function generateUUID(placeholder) {\n  return placeholder\n    ? (placeholder ^ Math.random() * 16 >> placeholder / 4).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n};\n\nexports.getBidIdParameter = function (key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n};\n\nexports.tryAppendQueryString = function (existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n};\n\n// parse a query string object passed in bid params\n// bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexports.parseQueryStringParameters = function (queryObj) {\n  var result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k)) { result += k + '=' + encodeURIComponent(queryObj[k]) + '&'; }\n  }\n\n  return result;\n};\n\n// transform an AdServer targeting bids into a query string to send to the adserver\nexports.transformAdServerTargetingObj = function (targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n};\n\n/**\n * Read an adUnit object and return the sizes used in an [[728, 90]] format (even if they had [728, 90] defined)\n * Preference is given to the `adUnit.mediaTypes.banner.sizes` object over the `adUnit.sizes`\n * @param {object} adUnit one adUnit object from the normal list of adUnits\n * @returns {array[array[number]]} array of arrays containing numeric sizes\n */\nexport function getAdUnitSizes(adUnit) {\n  if (!adUnit) {\n    return;\n  }\n\n  let sizes = [];\n  if (adUnit.mediaTypes && adUnit.mediaTypes.banner && Array.isArray(adUnit.mediaTypes.banner.sizes)) {\n    let bannerSizes = adUnit.mediaTypes.banner.sizes;\n    if (Array.isArray(bannerSizes[0])) {\n      sizes = bannerSizes;\n    } else {\n      sizes.push(bannerSizes);\n    }\n  } else if (Array.isArray(adUnit.sizes)) {\n    if (Array.isArray(adUnit.sizes[0])) {\n      sizes = adUnit.sizes;\n    } else {\n      sizes.push(adUnit.sizes);\n    }\n  }\n  return sizes;\n}\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {array[array|number]} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {array[string]}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexport function parseSizesInput(sizeObj) {\n  var parsedSizes = [];\n\n  // if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === 'string') {\n    // multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    // regular expression to match strigns like 300x250\n    // start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === 'object') {\n    var sizeArrayLength = sizeObj.length;\n\n    // don't process empty array\n    if (sizeArrayLength > 0) {\n      // if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === 'number' && typeof sizeObj[1] === 'number') {\n        parsedSizes.push(parseGPTSingleSizeArray(sizeObj));\n      } else {\n        // otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(parseGPTSingleSizeArray(sizeObj[i]));\n        }\n      }\n    }\n  }\n\n  return parsedSizes;\n};\n\n// parse a GPT style sigle size array, (i.e [300,250])\n// into an AppNexus style string, (i.e. 300x250)\nexport function parseGPTSingleSizeArray(singleSize) {\n  // if we aren't exactly 2 items in this array, it is invalid\n  if (exports.isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]))) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n};\n\n/**\n * @deprecated This function will be removed soon\n */\nexports.getTopWindowLocation = function() {\n  if (exports.inIframe()) {\n    let loc;\n    try {\n      loc = exports.getAncestorOrigins() || exports.getTopFrameReferrer();\n    } catch (e) {\n      logInfo('could not obtain top window location', e);\n    }\n    if (loc) return parse(loc, {'decodeSearchAsString': true});\n  }\n  return exports.getWindowLocation();\n}\n\n/**\n * @deprecated This function will be removed soon\n */\nexports.getTopFrameReferrer = function () {\n  try {\n    // force an exception in x-domain environments. #1509\n    window.top.location.toString();\n    let referrerLoc = '';\n    let currentWindow;\n    do {\n      currentWindow = currentWindow ? currentWindow.parent : window;\n      if (currentWindow.document && currentWindow.document.referrer) {\n        referrerLoc = currentWindow.document.referrer;\n      }\n    }\n    while (currentWindow !== window.top);\n    return referrerLoc;\n  } catch (e) {\n    return window.document.referrer;\n  }\n};\n\n/**\n * @deprecated This function will be removed soon\n */\nexports.getAncestorOrigins = function () {\n  if (window.document.location && window.document.location.ancestorOrigins &&\n    window.document.location.ancestorOrigins.length >= 1) {\n    return window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length - 1];\n  }\n};\n\nexports.getWindowTop = function () {\n  return window.top;\n};\n\nexports.getWindowSelf = function () {\n  return window.self;\n};\n\nexports.getWindowLocation = function () {\n  return window.location;\n};\n\nexports.getTopWindowUrl = function () {\n  let href;\n  try {\n    href = exports.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n  return href;\n};\n\nexports.getTopWindowReferrer = function() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    return document.referrer;\n  }\n};\n\n/**\n * Wrappers to console.(log | info | warn | error). Takes N arguments, the same as the native methods\n */\nexports.logMessage = function () {\n  if (debugTurnedOn() && consoleLogExists) {\n    console.log.apply(console, decorateLog(arguments, 'MESSAGE:'));\n  }\n};\n\nexports.logInfo = function () {\n  if (debugTurnedOn() && consoleInfoExists) {\n    console.info.apply(console, decorateLog(arguments, 'INFO:'));\n  }\n};\n\nexports.logWarn = function () {\n  if (debugTurnedOn() && consoleWarnExists) {\n    console.warn.apply(console, decorateLog(arguments, 'WARNING:'));\n  }\n};\n\nexports.logError = function () {\n  if (debugTurnedOn() && consoleErrorExists) {\n    console.error.apply(console, decorateLog(arguments, 'ERROR:'));\n  }\n};\n\nfunction decorateLog(args, prefix) {\n  args = [].slice.call(args);\n  prefix && args.unshift(prefix);\n  args.unshift('display: inline-block; color: #fff; background: #3b88c3; padding: 1px 4px; border-radius: 3px;');\n  args.unshift('%cPrebid');\n  return args;\n}\n\nfunction hasConsoleLogger() {\n  return consoleLogExists;\n}\n\nexports.hasConsoleLogger = hasConsoleLogger;\n\nvar debugTurnedOn = function () {\n  if (config.getConfig('debug') === false && _loggingChecked === false) {\n    const debug = getParameterByName(CONSTANTS.DEBUG_MODE).toUpperCase() === 'TRUE';\n    config.setConfig({ debug });\n    _loggingChecked = true;\n  }\n\n  return !!config.getConfig('debug');\n};\n\nexports.debugTurnedOn = debugTurnedOn;\n\nexports.createInvisibleIframe = function _createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = _getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n};\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nvar getParameterByName = function (name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\nexports.getParameterByName = getParameterByName;\n\n/**\n * This function validates paramaters.\n * @param  {object[string]} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {bool}                   Bool if paramaters are valid\n */\nexports.hasValidBidRequest = function (paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    exports._each(paramObj, findParam);\n\n    if (!found) {\n      exports.logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n};\n\n// Handle addEventListener gracefully in older browsers\nexports.addEventHandler = function (element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n};\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexports.isA = function (object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n};\n\nexports.isFn = function (object) {\n  return exports.isA(object, tFn);\n};\n\nexports.isStr = function (object) {\n  return exports.isA(object, tStr);\n};\n\nexports.isArray = function (object) {\n  return exports.isA(object, tArr);\n};\n\nexports.isNumber = function(object) {\n  return exports.isA(object, tNumb);\n};\n\nexports.isPlainObject = function(object) {\n  return exports.isA(object, tObject);\n}\n\nexports.isBoolean = function(object) {\n  return exports.isA(object, tBoolean);\n}\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexports.isEmpty = function (object) {\n  if (!object) return true;\n  if (exports.isArray(object) || exports.isStr(object)) {\n    return !(object.length > 0);\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n};\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexports.isEmptyStr = function(str) {\n  return exports.isStr(str) && (!str || str.length === 0);\n};\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexports._each = function (object, fn) {\n  if (exports.isEmpty(object)) return;\n  if (exports.isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n};\n\nexports.contains = function (a, obj) {\n  if (exports.isEmpty(a)) {\n    return false;\n  }\n\n  if (exports.isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexports.indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  // return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexports._map = function (object, callback) {\n  if (exports.isEmpty(object)) return [];\n  if (exports.isFn(object.map)) return object.map(callback);\n  var output = [];\n  exports._each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n};\n\nvar hasOwn = function (objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n\nexports.insertElement = function(elm, doc, target) {\n  doc = doc || document;\n  let elToAppend;\n  if (target) {\n    elToAppend = doc.getElementsByTagName(target);\n  } else {\n    elToAppend = doc.getElementsByTagName('head');\n  }\n  try {\n    elToAppend = elToAppend.length ? elToAppend : doc.getElementsByTagName('body');\n    if (elToAppend.length) {\n      elToAppend = elToAppend[0];\n      elToAppend.insertBefore(elm, elToAppend.firstChild);\n    }\n  } catch (e) {}\n};\n\nexports.triggerPixel = function (url) {\n  const img = new Image();\n  img.src = url;\n};\n\nexports.callBurl = function({ source, burl }) {\n  if (source === CONSTANTS.S2S.SRC && burl) {\n    exports.triggerPixel(burl);\n  }\n};\n\n/**\n * Inserts an empty iframe with the specified `html`, primarily used for tracking purposes\n * (though could be for other purposes)\n * @param {string} htmlCode snippet of HTML code used for tracking purposes\n */\nexports.insertHtmlIntoIframe = function(htmlCode) {\n  if (!htmlCode) {\n    return;\n  }\n\n  let iframe = document.createElement('iframe');\n  iframe.id = exports.getUniqueIdentifierStr();\n  iframe.width = 0;\n  iframe.height = 0;\n  iframe.hspace = '0';\n  iframe.vspace = '0';\n  iframe.marginWidth = '0';\n  iframe.marginHeight = '0';\n  iframe.style.display = 'none';\n  iframe.style.height = '0px';\n  iframe.style.width = '0px';\n  iframe.scrolling = 'no';\n  iframe.frameBorder = '0';\n  iframe.allowtransparency = 'true';\n\n  exports.insertElement(iframe, document, 'body');\n\n  iframe.contentWindow.document.open();\n  iframe.contentWindow.document.write(htmlCode);\n  iframe.contentWindow.document.close();\n}\n\n/**\n * Inserts empty iframe with the specified `url` for cookie sync\n * @param  {string} url URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n */\nexports.insertUserSyncIframe = function(url) {\n  let iframeHtml = exports.createTrackPixelIframeHtml(url, false, 'allow-scripts allow-same-origin');\n  let div = document.createElement('div');\n  div.innerHTML = iframeHtml;\n  let iframe = div.firstChild;\n  exports.insertElement(iframe);\n};\n\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexports.createTrackPixelHtml = function (url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {string} sandbox string if provided the sandbox attribute will be included with the given value\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexports.createTrackPixelIframeHtml = function (url, encodeUri = true, sandbox = '') {\n  if (!url) {\n    return '';\n  }\n  if (encodeUri) {\n    url = encodeURI(url);\n  }\n  if (sandbox) {\n    sandbox = `sandbox=\"${sandbox}\"`;\n  }\n\n  return `<iframe ${sandbox} id=\"${exports.getUniqueIdentifierStr()}\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      marginheight=\"0\" marginwidth=\"0\"\n      width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\"\n      style=\"height:0px;width:0px;display:none;\"\n      scrolling=\"no\"\n      src=\"${url}\">\n    </iframe>`;\n};\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {object} iframe reference\n * @return {object}        iframe `document` reference\n */\nexports.getIframeDocument = function (iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  } catch (e) {\n    exports.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n};\n\nexports.getValueString = function(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (exports.isStr(val)) {\n    return val;\n  }\n  if (exports.isNumber(val)) {\n    return val.toString();\n  }\n  exports.logWarn('Unsuported type for param: ' + param + ' required type: String');\n};\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id, bidderRequests) {\n  let bidRequest;\n  bidderRequests.some(bidderRequest => {\n    let result = find(bidderRequest.bids, bid => ['bidId', 'adId', 'bid_id'].some(type => bid[type] === id));\n    if (result) {\n      bidRequest = result;\n    }\n    return result;\n  });\n  return bidRequest;\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\nexport function getBidderCodes(adUnits = pbjs.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && exports.isFn(window.googletag.pubads) && exports.isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\n// This function will get highest cpm value bid, in case of tie it will return the bid with lowest timeToRespond\nexport const getHighestCpm = getHighestCpmCallback('timeToRespond', (previous, current) => previous > current);\n\n// This function will get the oldest hightest cpm value bid, in case of tie it will return the bid which came in first\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2448\nexport const getOldestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous > current);\n\n// This function will get the latest hightest cpm value bid, in case of tie it will return the bid which came in last\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2539\nexport const getLatestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous < current);\n\nfunction getHighestCpmCallback(useTieBreakerProperty, tieBreakerCallback) {\n  return (previous, current) => {\n    if (previous.cpm === current.cpm) {\n      return tieBreakerCallback(previous[useTieBreakerProperty], current[useTieBreakerProperty]) ? current : previous;\n    }\n    return previous.cpm < current.cpm ? current : previous;\n  }\n}\n\n/**\n * FisherYates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return includes(filter, bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  // Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return doc.defaultView && doc.defaultView.frameElement &&\n    'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function deepClone(obj) {\n  return clone(obj);\n}\n\nexport function inIframe() {\n  try {\n    return exports.getWindowSelf() !== exports.getWindowTop();\n  } catch (e) {\n    return true;\n  }\n}\n\nexport function isSafariBrowser() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n}\n\nexport function replaceAuctionPrice(str, cpm) {\n  if (!str) return;\n  return str.replace(/\\$\\{AUCTION_PRICE\\}/g, cpm);\n}\n\nexport function timestamp() {\n  return new Date().getTime();\n}\n\nexport function checkCookieSupport() {\n  if (window.navigator.cookieEnabled || !!document.cookie.length) {\n    return true;\n  }\n}\nexport function cookiesAreEnabled() {\n  if (exports.checkCookieSupport()) {\n    return true;\n  }\n  window.document.cookie = 'prebid.cookieTest';\n  return window.document.cookie.indexOf('prebid.cookieTest') != -1;\n}\n\n/**\n * Given a function, return a function which only executes the original after\n * it's been called numRequiredCalls times.\n *\n * Note that the arguments from the previous calls will *not* be forwarded to the original function.\n * Only the final call's arguments matter.\n *\n * @param {function} func The function which should be executed, once the returned function has been executed\n *   numRequiredCalls times.\n * @param {int} numRequiredCalls The number of times which the returned function needs to be called before\n *   func is.\n */\nexport function delayExecution(func, numRequiredCalls) {\n  if (numRequiredCalls < 1) {\n    throw new Error(`numRequiredCalls must be a positive number. Got ${numRequiredCalls}`);\n  }\n  let numCalls = 0;\n  return function () {\n    numCalls++;\n    if (numCalls === numRequiredCalls) {\n      func.apply(null, arguments);\n    }\n  }\n}\n\n/**\n * https://stackoverflow.com/a/34890276/428704\n * @export\n * @param {array} xs\n * @param {string} key\n * @returns {${key_value}: ${groupByArray}, key_value: {groupByArray}}\n */\nexport function groupBy(xs, key) {\n  return xs.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n}\n\n/**\n * deepAccess utility function useful for doing safe access (will not throw exceptions) of deep object paths.\n * @param {object} obj The object containing the values you would like to access.\n * @param {string|number} path Object path to the value you would like to access.  Non-strings are coerced to strings.\n * @returns {*} The value found at the specified object path, or undefined if path is not found.\n */\nexport function deepAccess(obj, path) {\n  if (!obj) {\n    return;\n  }\n  path = String(path).split('.');\n  for (let i = 0; i < path.length; i++) {\n    obj = obj[path[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n  return obj;\n}\n\n/**\n * Returns content for a friendly iframe to execute a URL in script tag\n * @param {url} URL to be executed in a script tag in a friendly iframe\n * <!--PRE_SCRIPT_TAG_MACRO--> and <!--POST_SCRIPT_TAG_MACRO--> are macros left to be replaced if required\n */\nexport function createContentToExecuteExtScriptInFriendlyFrame(url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><base target=\"_top\" /><script>inDapIF=true;</script></head><body><!--PRE_SCRIPT_TAG_MACRO--><script src=\"${url}\"></script><!--POST_SCRIPT_TAG_MACRO--></body></html>`;\n}\n\n/**\n * Build an object consisting of only defined parameters to avoid creating an\n * object with defined keys and undefined values.\n * @param {object} object The object to pick defined params out of\n * @param {string[]} params An array of strings representing properties to look for in the object\n * @returns {object} An object containing all the specified values that are defined\n */\nexport function getDefinedParams(object, params) {\n  return params\n    .filter(param => object[param])\n    .reduce((bid, param) => Object.assign(bid, { [param]: object[param] }), {});\n}\n\n/**\n * @typedef {Object} MediaTypes\n * @property {Object} banner banner configuration\n * @property {Object} native native configuration\n * @property {Object} video video configuration\n */\n\n/**\n * Validates an adunit's `mediaTypes` parameter\n * @param {MediaTypes} mediaTypes mediaTypes parameter to validate\n * @return {boolean} If object is valid\n */\nexport function isValidMediaTypes(mediaTypes) {\n  const SUPPORTED_MEDIA_TYPES = ['banner', 'native', 'video'];\n  const SUPPORTED_STREAM_TYPES = ['instream', 'outstream'];\n\n  const types = Object.keys(mediaTypes);\n\n  if (!types.every(type => includes(SUPPORTED_MEDIA_TYPES, type))) {\n    return false;\n  }\n\n  if (mediaTypes.video && mediaTypes.video.context) {\n    return includes(SUPPORTED_STREAM_TYPES, mediaTypes.video.context);\n  }\n\n  return true;\n}\n\nexport function getBidderRequest(bidRequests, bidder, adUnitCode) {\n  return find(bidRequests, request => {\n    return request.bids\n      .filter(bid => bid.bidder === bidder && bid.adUnitCode === adUnitCode).length > 0;\n  }) || { start: null, auctionId: null };\n}\n/**\n * Returns user configured bidder params from adunit\n * @param {object} adunits\n * @param {string} adunit code\n * @param {string} bidder code\n * @return {Array} user configured param for the given bidder adunit configuration\n */\nexport function getUserConfiguredParams(adUnits, adUnitCode, bidder) {\n  return adUnits\n    .filter(adUnit => adUnit.code === adUnitCode)\n    .map((adUnit) => adUnit.bids)\n    .reduce(flatten, [])\n    .filter((bidderData) => bidderData.bidder === bidder)\n    .map((bidderData) => bidderData.params || {});\n}\n/**\n * Returns the origin\n */\nexport function getOrigin() {\n  // IE10 does not have this property. https://gist.github.com/hbogs/7908703\n  if (!window.location.origin) {\n    return window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  } else {\n    return window.location.origin;\n  }\n}\n\n/**\n * Returns Do Not Track state\n */\nexport function getDNT() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNotTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\nconst compareCodeAndSlot = (slot, adUnitCode) => slot.getAdUnitPath() === adUnitCode || slot.getSlotElementId() === adUnitCode;\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {object} slot GoogleTag slot\n * @return {function} filter function\n */\nexport function isAdUnitCodeMatchingSlot(slot) {\n  return (adUnitCode) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {string} adUnitCode AdUnit code\n * @return {function} filter function\n */\nexport function isSlotMatchingAdUnitCode(adUnitCode) {\n  return (slot) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Constructs warning message for when unsupported bidders are dropped from an adunit\n * @param {Object} adUnit ad unit from which the bidder is being dropped\n * @param {string} bidder bidder code that is not compatible with the adUnit\n * @return {string} warning message to display when condition is met\n */\nexport function unsupportedBidderMessage(adUnit, bidder) {\n  const mediaType = Object.keys(adUnit.mediaTypes || {'banner': 'banner'}).join(', ');\n\n  return `\n    ${adUnit.code} is a ${mediaType} ad unit\n    containing bidders that don't support ${mediaType}: ${bidder}.\n    This bidder won't fetch demand.\n  `;\n}\n\n/**\n * Delete property from object\n * @param {Object} object\n * @param {string} prop\n * @return {Object} object\n */\nexport function deletePropertyFromObject(object, prop) {\n  let result = Object.assign({}, object)\n  delete result[prop];\n  return result\n}\n\n/**\n * Delete requestId from external bid object.\n * @param {Object} bid\n * @return {Object} bid\n */\nexport function removeRequestId(bid) {\n  return exports.deletePropertyFromObject(bid, 'requestId');\n}\n\n/**\n * Checks input is integer or not\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n * @param {*} value\n */\nexport function isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  } else {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  }\n}\n\n/**\n * Converts a string value in camel-case to underscore eg 'placementId' becomes 'placement_id'\n * @param {string} value string value to convert\n */\nexport function convertCamelToUnderscore(value) {\n  return value.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) { return '_' + y.toLowerCase() }).replace(/^_/, '');\n}\n\n/**\n * Converts an object of arrays (either strings or numbers) into an array of objects containing key and value properties\n * normally read from bidder params\n * eg { foo: ['bar', 'baz'], fizz: ['buzz'] }\n * becomes [{ key: 'foo', value: ['bar', 'baz']}, {key: 'fizz', value: ['buzz']}]\n * @param {Object{Arrays}} keywords object of arrays representing keyvalue pairs\n * @param {string} paramName name of parent object (eg 'keywords') containing keyword data, used in error handling\n */\nexport function transformBidderParamKeywords(keywords, paramName = 'keywords') {\n  let arrs = [];\n\n  exports._each(keywords, (v, k) => {\n    if (exports.isArray(v)) {\n      let values = [];\n      exports._each(v, (val) => {\n        val = exports.getValueString(paramName + '.' + k, val);\n        if (val) { values.push(val); }\n      });\n      v = values;\n    } else {\n      v = exports.getValueString(paramName + '.' + k, v);\n      if (exports.isStr(v)) {\n        v = [v];\n      } else {\n        return;\n      } // unsuported types - don't send a key\n    }\n    arrs.push({key: k, value: v});\n  });\n\n  return arrs;\n}\n\n/**\n * Try to convert a value to a type.\n * If it can't be done, the value will be returned.\n *\n * @param {string} typeToConvert The target type. e.g. \"string\", \"number\", etc.\n * @param {*} value The value to be converted into typeToConvert.\n */\nfunction tryConvertType(typeToConvert, value) {\n  if (typeToConvert === 'string') {\n    return value && value.toString();\n  } else if (typeToConvert === 'number') {\n    return Number(value);\n  } else {\n    return value;\n  }\n}\n\nexport function convertTypes(types, params) {\n  Object.keys(types).forEach(key => {\n    if (params[key]) {\n      if (exports.isFn(types[key])) {\n        params[key] = types[key](params[key]);\n      } else {\n        params[key] = tryConvertType(types[key], params[key]);\n      }\n\n      // don't send invalid values\n      if (isNaN(params[key])) {\n        delete params.key;\n      }\n    }\n  });\n  return params;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import Adapter from 'src/adapter';\nimport adaptermanager from 'src/adaptermanager';\nimport { config } from 'src/config';\nimport bidfactory from 'src/bidfactory';\nimport { userSync } from 'src/userSync';\nimport { nativeBidIsValid } from 'src/native';\nimport { isValidVideoBid } from 'src/video';\nimport CONSTANTS from 'src/constants.json';\nimport events from 'src/events';\nimport includes from 'core-js/library/fn/array/includes';\n\nimport { logWarn, logError, parseQueryStringParameters, delayExecution, parseSizesInput, getBidderRequest } from 'src/utils';\n\n/**\n * This file aims to support Adapters during the Prebid 0.x -> 1.x transition.\n *\n * Prebid 1.x and Prebid 0.x will be in separate branches--perhaps for a long time.\n * This function defines an API for adapter construction which is compatible with both versions.\n * Adapters which use it can maintain their code in master, and only this file will need to change\n * in the 1.x branch.\n *\n * Typical usage looks something like:\n *\n * const adapter = registerBidder({\n *   code: 'myBidderCode',\n *   aliases: ['alias1', 'alias2'],\n *   supportedMediaTypes: ['video', 'native'],\n *   isBidRequestValid: function(paramsObject) { return true/false },\n *   buildRequests: function(bidRequests, bidderRequest) { return some ServerRequest(s) },\n *   interpretResponse: function(oneServerResponse) { return some Bids, or throw an error. }\n * });\n *\n * @see BidderSpec for the full API and more thorough descriptions.\n */\n\n/**\n * @typedef {object} BidderSpec An object containing the adapter-specific functions needed to\n * make a Bidder.\n *\n * @property {string} code A code which will be used to uniquely identify this bidder. This should be the same\n *   one as is used in the call to registerBidAdapter\n * @property {string[]} [aliases] A list of aliases which should also resolve to this bidder.\n * @property {MediaType[]} [supportedMediaTypes]: A list of Media Types which the adapter supports.\n * @property {function(object): boolean} isBidRequestValid Determines whether or not the given bid has all the params\n *   needed to make a valid request.\n * @property {function(BidRequest[], bidderRequest): ServerRequest|ServerRequest[]} buildRequests Build the request to the Server\n *   which requests Bids for the given array of Requests. Each BidRequest in the argument array is guaranteed to have\n *   passed the isBidRequestValid() test.\n * @property {function(ServerResponse, BidRequest): Bid[]} interpretResponse Given a successful response from the Server,\n *   interpret it and return the Bid objects. This function will be run inside a try/catch.\n *   If it throws any errors, your bids will be discarded.\n * @property {function(SyncOptions, ServerResponse[]): UserSync[]} [getUserSyncs] Given an array of all the responses\n *   from the server, determine which user syncs should occur. The argument array will contain every element\n *   which has been sent through to interpretResponse. The order of syncs in this array matters. The most\n *   important ones should come first, since publishers may limit how many are dropped on their page.\n * @property {function(object): object} transformBidParams Updates bid params before creating bid request\n }}\n */\n\n/**\n * @typedef {object} BidRequest\n *\n * @property {string} bidId A string which uniquely identifies this BidRequest in the current Auction.\n * @property {object} params Any bidder-specific params which the publisher used in their bid request.\n */\n\n/**\n * @typedef {object} ServerRequest\n *\n * @property {('GET'|'POST')} method The type of request which this is.\n * @property {string} url The endpoint for the request. For example, \"//bids.example.com\".\n * @property {string|object} data Data to be sent in the request.\n * @property {object} options Content-Type set in the header of the bid request, overrides default 'text/plain'.\n *   If this is a GET request, they'll become query params. If it's a POST request, they'll be added to the body.\n *   Strings will be added as-is. Objects will be unpacked into query params based on key/value mappings, or\n *   JSON-serialized into the Request body.\n */\n\n/**\n * @typedef {object} ServerResponse\n *\n * @property {*} body The response body. If this is legal JSON, then it will be parsed. Otherwise it'll be a\n *   string with the body's content.\n * @property {{get: function(string): string} headers The response headers.\n *   Call this like `ServerResponse.headers.get(\"Content-Type\")`\n */\n\n/**\n * @typedef {object} Bid\n *\n * @property {string} requestId The specific BidRequest which this bid is aimed at.\n *   This should match the BidRequest.bidId which this Bid targets.\n * @property {string} ad A URL which can be used to load this ad, if it's chosen by the publisher.\n * @property {string} currency The currency code for the cpm value\n * @property {number} cpm The bid price, in US cents per thousand impressions.\n * @property {number} ttl Time-to-live - how long (in seconds) Prebid can use this bid.\n * @property {boolean} netRevenue Boolean defining whether the bid is Net or Gross.  The default is true (Net).\n * @property {number} height The height of the ad, in pixels.\n * @property {number} width The width of the ad, in pixels.\n *\n * @property [Renderer] renderer A Renderer which can be used as a default for this bid,\n *   if the publisher doesn't override it. This is only relevant for Outstream Video bids.\n */\n\n/**\n * @typedef {Object} SyncOptions\n *\n * An object containing information about usersyncs which the adapter should obey.\n *\n * @property {boolean} iframeEnabled True if iframe usersyncs are allowed, and false otherwise\n * @property {boolean} pixelEnabled True if image usersyncs are allowed, and false otherwise\n */\n\n/**\n * TODO: Move this to the UserSync module after that PR is merged.\n *\n * @typedef {object} UserSync\n *\n * @property {('image'|'iframe')} type The type of user sync to be done.\n * @property {string} url The URL which makes the sync happen.\n */\n\n// common params for all mediaTypes\nconst COMMON_BID_RESPONSE_KEYS = ['requestId', 'cpm', 'ttl', 'creativeId', 'netRevenue', 'currency'];\n\n/**\n * Register a bidder with prebid, using the given spec.\n *\n * If possible, Adapter modules should use this function instead of adaptermanager.registerBidAdapter().\n *\n * @param {BidderSpec} spec An object containing the bare-bones functions we need to make a Bidder.\n */\nexport function registerBidder(spec) {\n  const mediaTypes = Array.isArray(spec.supportedMediaTypes)\n    ? { supportedMediaTypes: spec.supportedMediaTypes }\n    : undefined;\n  function putBidder(spec) {\n    const bidder = newBidder(spec);\n    adaptermanager.registerBidAdapter(bidder, spec.code, mediaTypes);\n  }\n\n  putBidder(spec);\n  if (Array.isArray(spec.aliases)) {\n    spec.aliases.forEach(alias => {\n      adaptermanager.aliasRegistry[alias] = spec.code;\n      putBidder(Object.assign({}, spec, { code: alias }));\n    });\n  }\n}\n\n/**\n * Make a new bidder from the given spec. This is exported mainly for testing.\n * Adapters will probably find it more convenient to use registerBidder instead.\n *\n * @param {BidderSpec} spec\n */\nexport function newBidder(spec) {\n  return Object.assign(new Adapter(spec.code), {\n    getSpec: function() {\n      return Object.freeze(spec);\n    },\n    registerSyncs,\n    callBids: function(bidderRequest, addBidResponse, done, ajax) {\n      if (!Array.isArray(bidderRequest.bids)) {\n        return;\n      }\n\n      const adUnitCodesHandled = {};\n      function addBidWithCode(adUnitCode, bid) {\n        adUnitCodesHandled[adUnitCode] = true;\n        if (isValid(adUnitCode, bid, [bidderRequest])) {\n          addBidResponse(adUnitCode, bid);\n        }\n      }\n\n      // After all the responses have come back, call done() and\n      // register any required usersync pixels.\n      const responses = [];\n      function afterAllResponses(bids) {\n        done();\n        events.emit(CONSTANTS.EVENTS.BIDDER_DONE, bidderRequest);\n        registerSyncs(responses, bidderRequest.gdprConsent);\n      }\n\n      const validBidRequests = bidderRequest.bids.filter(filterAndWarn);\n      if (validBidRequests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      const bidRequestMap = {};\n      validBidRequests.forEach(bid => {\n        bidRequestMap[bid.bidId] = bid;\n        // Delete this once we are 1.0\n        if (!bid.adUnitCode) {\n          bid.adUnitCode = bid.placementCode\n        }\n      });\n\n      let requests = spec.buildRequests(validBidRequests, bidderRequest);\n      if (!requests || requests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      if (!Array.isArray(requests)) {\n        requests = [requests];\n      }\n\n      // Callbacks don't compose as nicely as Promises. We should call done() once _all_ the\n      // Server requests have returned and been processed. Since `ajax` accepts a single callback,\n      // we need to rig up a function which only executes after all the requests have been responded.\n      const onResponse = delayExecution(afterAllResponses, requests.length)\n      requests.forEach(processRequest);\n\n      function formatGetParameters(data) {\n        if (data) {\n          return `?${typeof data === 'object' ? parseQueryStringParameters(data) : data}`;\n        }\n\n        return '';\n      }\n\n      function processRequest(request) {\n        switch (request.method) {\n          case 'GET':\n            ajax(\n              `${request.url}${formatGetParameters(request.data)}`,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              undefined,\n              Object.assign({\n                method: 'GET',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          case 'POST':\n            ajax(\n              request.url,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              typeof request.data === 'string' ? request.data : JSON.stringify(request.data),\n              Object.assign({\n                method: 'POST',\n                contentType: 'text/plain',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          default:\n            logWarn(`Skipping invalid request from ${spec.code}. Request type ${request.type} must be GET or POST`);\n            onResponse();\n        }\n\n        // If the server responds successfully, use the adapter code to unpack the Bids from it.\n        // If the adapter code fails, no bids should be added. After all the bids have been added, make\n        // sure to call the `onResponse` function so that we're one step closer to calling done().\n        function onSuccess(response, responseObj) {\n          try {\n            response = JSON.parse(response);\n          } catch (e) { /* response might not be JSON... that's ok. */ }\n\n          // Make response headers available for #1742. These are lazy-loaded because most adapters won't need them.\n          response = {\n            body: response,\n            headers: headerParser(responseObj)\n          };\n          responses.push(response);\n\n          let bids;\n          try {\n            bids = spec.interpretResponse(response, request);\n          } catch (err) {\n            logError(`Bidder ${spec.code} failed to interpret the server's response. Continuing without bids`, null, err);\n            onResponse();\n            return;\n          }\n\n          if (bids) {\n            if (bids.forEach) {\n              bids.forEach(addBidUsingRequestMap);\n            } else {\n              addBidUsingRequestMap(bids);\n            }\n          }\n          onResponse(bids);\n\n          function addBidUsingRequestMap(bid) {\n            const bidRequest = bidRequestMap[bid.requestId];\n            if (bidRequest) {\n              const prebidBid = Object.assign(bidfactory.createBid(CONSTANTS.STATUS.GOOD, bidRequest), bid);\n              addBidWithCode(bidRequest.adUnitCode, prebidBid);\n            } else {\n              logWarn(`Bidder ${spec.code} made bid for unknown request ID: ${bid.requestId}. Ignoring.`);\n            }\n          }\n\n          function headerParser(xmlHttpResponse) {\n            return {\n              get: responseObj.getResponseHeader.bind(responseObj)\n            };\n          }\n        }\n\n        // If the server responds with an error, there's not much we can do. Log it, and make sure to\n        // call onResponse() so that we're one step closer to calling done().\n        function onFailure(err) {\n          logError(`Server call for ${spec.code} failed: ${err}. Continuing without bids.`);\n          onResponse();\n        }\n      }\n    }\n  });\n\n  function registerSyncs(responses, gdprConsent) {\n    if (spec.getUserSyncs) {\n      let filterConfig = config.getConfig('userSync.filterSettings');\n      let syncs = spec.getUserSyncs({\n        iframeEnabled: !!(config.getConfig('userSync.iframeEnabled') || (filterConfig && (filterConfig.iframe || filterConfig.all))),\n        pixelEnabled: !!(config.getConfig('userSync.pixelEnabled') || (filterConfig && (filterConfig.image || filterConfig.all))),\n      }, responses, gdprConsent);\n      if (syncs) {\n        if (!Array.isArray(syncs)) {\n          syncs = [syncs];\n        }\n        syncs.forEach((sync) => {\n          userSync.registerSync(sync.type, spec.code, sync.url)\n        });\n      }\n    }\n  }\n\n  function filterAndWarn(bid) {\n    if (!spec.isBidRequestValid(bid)) {\n      logWarn(`Invalid bid sent to bidder ${spec.code}: ${JSON.stringify(bid)}`);\n      return false;\n    }\n    return true;\n  }\n}\n\n// check that the bid has a width and height set\nfunction validBidSize(adUnitCode, bid, bidRequests) {\n  if ((bid.width || bid.width === 0) && (bid.height || bid.height === 0)) {\n    return true;\n  }\n\n  const adUnit = getBidderRequest(bidRequests, bid.bidderCode, adUnitCode);\n\n  const sizes = adUnit && adUnit.bids && adUnit.bids[0] && adUnit.bids[0].sizes;\n  const parsedSizes = parseSizesInput(sizes);\n\n  // if a banner impression has one valid size, we assign that size to any bid\n  // response that does not explicitly set width or height\n  if (parsedSizes.length === 1) {\n    const [ width, height ] = parsedSizes[0].split('x');\n    bid.width = width;\n    bid.height = height;\n    return true;\n  }\n\n  return false;\n}\n\n// Validate the arguments sent to us by the adapter. If this returns false, the bid should be totally ignored.\nexport function isValid(adUnitCode, bid, bidRequests) {\n  function hasValidKeys() {\n    let bidKeys = Object.keys(bid);\n    return COMMON_BID_RESPONSE_KEYS.every(key => includes(bidKeys, key) && !includes([undefined, null], bid[key]));\n  }\n\n  function errorMessage(msg) {\n    return `Invalid bid from ${bid.bidderCode}. Ignoring bid: ${msg}`;\n  }\n\n  if (!adUnitCode) {\n    logWarn('No adUnitCode was supplied to addBidResponse.');\n    return false;\n  }\n\n  if (!bid) {\n    logWarn(`Some adapter tried to add an undefined bid for ${adUnitCode}.`);\n    return false;\n  }\n\n  if (!hasValidKeys()) {\n    logError(errorMessage(`Bidder ${bid.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`));\n    return false;\n  }\n\n  if (bid.mediaType === 'native' && !nativeBidIsValid(bid, bidRequests)) {\n    logError(errorMessage('Native bid missing some required properties.'));\n    return false;\n  }\n  if (bid.mediaType === 'video' && !isValidVideoBid(bid, bidRequests)) {\n    logError(errorMessage(`Video bid does not have required vastUrl or renderer property`));\n    return false;\n  }\n  if (bid.mediaType === 'banner' && !validBidSize(adUnitCode, bid, bidRequests)) {\n    logError(errorMessage(`Banner bids require a width and height`));\n    return false;\n  }\n\n  return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/bidderFactory.js","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find.js\n// module id = 10\n// module chunks = 167","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find-index.js\n// module id = 105\n// module chunks = 167","export function parseQS(query) {\n  return !query ? {} : query\n    .replace(/^\\?/, '')\n    .split('&')\n    .reduce((acc, criteria) => {\n      let [k, v] = criteria.split('=');\n      if (/\\[\\]$/.test(k)) {\n        k = k.replace('[]', '');\n        acc[k] = acc[k] || [];\n        acc[k].push(v);\n      } else {\n        acc[k] = v || '';\n      }\n      return acc;\n    }, {});\n}\n\nexport function formatQS(query) {\n  return Object\n    .keys(query)\n    .map(k => Array.isArray(query[k])\n      ? query[k].map(v => `${k}[]=${v}`).join('&')\n      : `${k}=${query[k]}`)\n    .join('&');\n}\n\nexport function parse(url, options) {\n  let parsed = document.createElement('a');\n  if (options && 'noDecodeWholeURL' in options && options.noDecodeWholeURL) {\n    parsed.href = url;\n  } else {\n    parsed.href = decodeURIComponent(url);\n  }\n  // in window.location 'search' is string, not object\n  let qsAsString = (options && 'decodeSearchAsString' in options && options.decodeSearchAsString);\n  return {\n    href: parsed.href,\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/, '/'),\n    search: (qsAsString) ? parsed.search : parseQS(parsed.search || ''),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: parsed.host || window.location.host\n  };\n}\n\nexport function format(obj) {\n  return (obj.protocol || 'http') + '://' +\n         (obj.host ||\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\n         (obj.pathname || '') +\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\n         (obj.hash ? `#${obj.hash}` : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","import { loadScript } from './adloader';\nimport * as utils from './utils';\n\n/**\n * @typedef {object} Renderer\n *\n * A Renderer stores some functions which are used to render a particular Bid.\n * These are used in Outstream Video Bids, returned on the Bid by the adapter, and will\n * be used to render that bid unless the Publisher overrides them.\n */\n\nexport function Renderer(options) {\n  const { url, config, id, callback, loaded } = options;\n  this.url = url;\n  this.config = config;\n  this.handlers = {};\n  this.id = id;\n\n  // a renderer may push to the command queue to delay rendering until the\n  // render function is loaded by loadScript, at which point the the command\n  // queue will be processed\n  this.loaded = loaded;\n  this.cmd = [];\n  this.push = func => {\n    if (typeof func !== 'function') {\n      utils.logError('Commands given to Renderer.push must be wrapped in a function');\n      return;\n    }\n    this.loaded ? func.call() : this.cmd.push(func);\n  };\n\n  // bidders may override this with the `callback` property given to `install`\n  this.callback = callback || (() => {\n    this.loaded = true;\n    this.process();\n  });\n\n  // we expect to load a renderer url once only so cache the request to load script\n  loadScript(url, this.callback, true);\n}\n\nRenderer.install = function({ url, config, id, callback, loaded }) {\n  return new Renderer({ url, config, id, callback, loaded });\n};\n\nRenderer.prototype.getConfig = function() {\n  return this.config;\n};\n\nRenderer.prototype.setRender = function(fn) {\n  this.render = fn;\n};\n\nRenderer.prototype.setEventHandlers = function(handlers) {\n  this.handlers = handlers;\n};\n\nRenderer.prototype.handleVideoEvent = function({ id, eventName }) {\n  if (typeof this.handlers[eventName] === 'function') {\n    this.handlers[eventName]();\n  }\n\n  utils.logMessage(`Prebid Renderer event for id ${id} type ${eventName}`);\n};\n\n/*\n * Calls functions that were pushed to the command queue before the\n * renderer was loaded by `loadScript`\n */\nRenderer.prototype.process = function() {\n  while (this.cmd.length > 0) {\n    try {\n      this.cmd.shift().call();\n    } catch (error) {\n      utils.logError('Error processing Renderer command: ', error);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/Renderer.js","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 13\n// module chunks = 167","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 14\n// module chunks = 167","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 15\n// module chunks = 167","var utils = require('./utils.js');\n\n/**\n Required paramaters\n bidderCode,\n height,\n width,\n statusCode\n Optional paramaters\n adId,\n cpm,\n ad,\n adUrl,\n dealId,\n priceKeyString;\n */\nfunction Bid(statusCode, bidRequest) {\n  var _bidId = (bidRequest && bidRequest.bidId) || utils.getUniqueIdentifierStr();\n  var _bidSrc = (bidRequest && bidRequest.src) || 'client';\n  var _statusCode = statusCode || 0;\n\n  this.bidderCode = (bidRequest && bidRequest.bidder) || '';\n  this.width = 0;\n  this.height = 0;\n  this.statusMessage = _getStatus();\n  this.adId = _bidId;\n  this.mediaType = 'banner';\n  this.source = _bidSrc;\n\n  function _getStatus() {\n    switch (_statusCode) {\n      case 0:\n        return 'Pending';\n      case 1:\n        return 'Bid available';\n      case 2:\n        return 'Bid returned empty or error response';\n      case 3:\n        return 'Bid timed out';\n    }\n  }\n\n  this.getStatusCode = function () {\n    return _statusCode;\n  };\n\n  // returns the size of the bid creative. Concatenation of width and height by x.\n  this.getSize = function () {\n    return this.width + 'x' + this.height;\n  };\n}\n\n// Bid factory function.\nexports.createBid = function (statusCode, bidRequest) {\n  return new Bid(statusCode, bidRequest);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidfactory.js","import { deepAccess, getBidRequest, logError, triggerPixel, insertHtmlIntoIframe } from './utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nexport const nativeAdapters = [];\n\nexport const NATIVE_KEYS = {\n  title: 'hb_native_title',\n  body: 'hb_native_body',\n  sponsoredBy: 'hb_native_brand',\n  image: 'hb_native_image',\n  icon: 'hb_native_icon',\n  clickUrl: 'hb_native_linkurl',\n  cta: 'hb_native_cta',\n};\n\nexport const NATIVE_TARGETING_KEYS = Object.keys(NATIVE_KEYS).map(\n  key => NATIVE_KEYS[key]\n);\n\nconst IMAGE = {\n  image: { required: true },\n  title: { required: true },\n  sponsoredBy: { required: true },\n  clickUrl: { required: true },\n  body: { required: false },\n  icon: { required: false },\n};\n\nconst SUPPORTED_TYPES = {\n  image: IMAGE\n};\n\n/**\n * Recieves nativeParams from an adUnit. If the params were not of type 'type',\n * passes them on directly. If they were of type 'type', translate\n * them into the predefined specific asset requests for that type of native ad.\n */\nexport function processNativeAdUnitParams(params) {\n  if (params && params.type && typeIsSupported(params.type)) {\n    return SUPPORTED_TYPES[params.type];\n  }\n\n  return params;\n}\n\n/**\n * Check if the native type specified in the adUnit is supported by Prebid.\n */\nfunction typeIsSupported(type) {\n  if (!(type && includes(Object.keys(SUPPORTED_TYPES), type))) {\n    logError(`${type} nativeParam is not supported`);\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Helper functions for working with native-enabled adUnits\n * TODO: abstract this and the video helper functions into general\n * adunit validation helper functions\n */\nexport const nativeAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === 'native';\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.native');\n  return mediaType || mediaTypes;\n}\nexport const nativeBidder = bid => includes(nativeAdapters, bid.bidder);\nexport const hasNonNativeBidder = adUnit =>\n  adUnit.bids.filter(bid => !nativeBidder(bid)).length;\n\n/**\n * Validate that the native assets on this bid contain all assets that were\n * marked as required in the adUnit configuration.\n * @param {Bid} bid Native bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function nativeBidIsValid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.adId, bidRequests);\n  if (!bidRequest) { return false; }\n\n  // all native bid responses must define a landing page url\n  if (!deepAccess(bid, 'native.clickUrl')) {\n    return false;\n  }\n\n  if (deepAccess(bid, 'native.image')) {\n    if (!deepAccess(bid, 'native.image.height') || !deepAccess(bid, 'native.image.width')) {\n      return false;\n    }\n  }\n\n  if (deepAccess(bid, 'native.icon')) {\n    if (!deepAccess(bid, 'native.icon.height') || !deepAccess(bid, 'native.icon.width')) {\n      return false;\n    }\n  }\n\n  const requestedAssets = bidRequest.nativeParams;\n  if (!requestedAssets) {\n    return true;\n  }\n\n  const requiredAssets = Object.keys(requestedAssets).filter(\n    key => requestedAssets[key].required\n  );\n  const returnedAssets = Object.keys(bid['native']).filter(\n    key => bid['native'][key]\n  );\n\n  return requiredAssets.every(asset => includes(returnedAssets, asset));\n}\n\n/*\n * Native responses may have associated impression or click trackers.\n * This retrieves the appropriate tracker urls for the given ad object and\n * fires them. As a native creatives may be in a cross-origin frame, it may be\n * necessary to invoke this function via postMessage. secureCreatives is\n * configured to fire this function when it receives a `message` of 'Prebid Native'\n * and an `adId` with the value of the `bid.adId`. When a message is posted with\n * these parameters, impression trackers are fired. To fire click trackers, the\n * message should contain an `action` set to 'click'.\n *\n * // Native creative template example usage\n * <a href=\"%%CLICK_URL_UNESC%%%%PATTERN:hb_native_linkurl%%\"\n *    target=\"_blank\"\n *    onclick=\"fireTrackers('click')\">\n *    %%PATTERN:hb_native_title%%\n * </a>\n *\n * <script>\n *   function fireTrackers(action) {\n *     var message = {message: 'Prebid Native', adId: '%%PATTERN:hb_adid%%'};\n *     if (action === 'click') {message.action = 'click';} // fires click trackers\n *     window.parent.postMessage(JSON.stringify(message), '*');\n *   }\n *   fireTrackers(); // fires impressions when creative is loaded\n * </script>\n */\nexport function fireNativeTrackers(message, adObject) {\n  let trackers;\n\n  if (message.action === 'click') {\n    trackers = adObject['native'] && adObject['native'].clickTrackers;\n  } else {\n    trackers = adObject['native'] && adObject['native'].impressionTrackers;\n\n    if (adObject['native'] && adObject['native'].javascriptTrackers) {\n      insertHtmlIntoIframe(adObject['native'].javascriptTrackers);\n    }\n  }\n\n  (trackers || []).forEach(triggerPixel);\n}\n\n/**\n * Gets native targeting key-value paris\n * @param {Object} bid\n * @return {Object} targeting\n */\nexport function getNativeTargeting(bid) {\n  let keyValues = {};\n\n  Object.keys(bid['native']).forEach(asset => {\n    const key = NATIVE_KEYS[asset];\n    let value = bid['native'][asset];\n\n    // native image-type assets can be a string or an object with a url prop\n    if (typeof value === 'object' && value.url) {\n      value = value.url;\n    }\n\n    if (key) {\n      keyValues[key] = value;\n    }\n  });\n\n  return keyValues;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/native.js","import * as utils from 'src/utils';\nimport { config } from 'src/config';\nimport includes from 'core-js/library/fn/array/includes';\n\n// Set userSync default values\nconfig.setDefaults({\n  'userSync': {\n    syncEnabled: true,\n    pixelEnabled: true,\n    syncsPerBidder: 5,\n    syncDelay: 3000\n  }\n});\n\n/**\n * Factory function which creates a new UserSyncPool.\n *\n * @param {UserSyncDependencies} userSyncDependencies Configuration options and dependencies which the\n *   UserSync object needs in order to behave properly.\n */\nexport function newUserSync(userSyncDependencies) {\n  let publicApi = {};\n  // A queue of user syncs for each adapter\n  // Let getDefaultQueue() set the defaults\n  let queue = getDefaultQueue();\n\n  // Whether or not user syncs have been trigger on this page load\n  let hasFired = false;\n  // How many bids for each adapter\n  let numAdapterBids = {};\n\n  // for now - default both to false in case filterSettings config is absent/misconfigured\n  let permittedPixels = {\n    image: false,\n    iframe: false\n  }\n\n  // Use what is in config by default\n  let usConfig = userSyncDependencies.config;\n  // Update if it's (re)set\n  config.getConfig('userSync', (conf) => {\n    usConfig = Object.assign(usConfig, conf.userSync);\n  });\n\n  /**\n   * @function getDefaultQueue\n   * @summary Returns the default empty queue\n   * @private\n   * @return {object} A queue with no syncs\n   */\n  function getDefaultQueue() {\n    return {\n      image: [],\n      iframe: []\n    };\n  }\n\n  /**\n   * @function fireSyncs\n   * @summary Trigger all user syncs in the queue\n   * @private\n   */\n  function fireSyncs() {\n    if (!usConfig.syncEnabled || !userSyncDependencies.browserSupportsCookies || hasFired) {\n      return;\n    }\n\n    try {\n      // Image pixels\n      fireImagePixels();\n      // Iframe syncs\n      loadIframes();\n    } catch (e) {\n      return utils.logError('Error firing user syncs', e);\n    }\n    // Reset the user sync queue\n    queue = getDefaultQueue();\n    hasFired = true;\n  }\n\n  /**\n   * @function fireImagePixels\n   * @summary Loops through user sync pixels and fires each one\n   * @private\n   */\n  function fireImagePixels() {\n    if (!(usConfig.pixelEnabled || permittedPixels.image)) {\n      return;\n    }\n    // Randomize the order of the pixels before firing\n    // This is to avoid giving any bidder who has registered multiple syncs\n    // any preferential treatment and balancing them out\n    utils.shuffle(queue.image).forEach((sync) => {\n      let [bidderName, trackingPixelUrl] = sync;\n      utils.logMessage(`Invoking image pixel user sync for bidder: ${bidderName}`);\n      // Create image object and add the src url\n      utils.triggerPixel(trackingPixelUrl);\n    });\n  }\n\n  /**\n   * @function loadIframes\n   * @summary Loops through iframe syncs and loads an iframe element into the page\n   * @private\n   */\n  function loadIframes() {\n    if (!(usConfig.iframeEnabled || permittedPixels.iframe)) {\n      return;\n    }\n    // Randomize the order of these syncs just like the pixels above\n    utils.shuffle(queue.iframe).forEach((sync) => {\n      let [bidderName, iframeUrl] = sync;\n      utils.logMessage(`Invoking iframe user sync for bidder: ${bidderName}`);\n      // Insert iframe into DOM\n      utils.insertUserSyncIframe(iframeUrl);\n    });\n  }\n\n  /**\n   * @function incrementAdapterBids\n   * @summary Increment the count of user syncs queue for the adapter\n   * @private\n   * @params {object} numAdapterBids The object contain counts for all adapters\n   * @params {string} bidder The name of the bidder adding a sync\n   * @returns {object} The updated version of numAdapterBids\n   */\n  function incrementAdapterBids(numAdapterBids, bidder) {\n    if (!numAdapterBids[bidder]) {\n      numAdapterBids[bidder] = 1;\n    } else {\n      numAdapterBids[bidder] += 1;\n    }\n    return numAdapterBids;\n  }\n\n  /**\n   * @function registerSync\n   * @summary Add sync for this bidder to a queue to be fired later\n   * @public\n   * @params {string} type The type of the sync including image, iframe\n   * @params {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @params {string} url Either the pixel url or iframe url depending on the type\n\n   * @example <caption>Using Image Sync</caption>\n   * // registerSync(type, adapter, pixelUrl)\n   * userSync.registerSync('image', 'rubicon', 'http://example.com/pixel')\n   */\n  publicApi.registerSync = (type, bidder, url) => {\n    if (!usConfig.syncEnabled || !utils.isArray(queue[type])) {\n      return utils.logWarn(`User sync type \"${type}\" not supported`);\n    }\n    if (!bidder) {\n      return utils.logWarn(`Bidder is required for registering sync`);\n    }\n    if (Number(numAdapterBids[bidder]) >= usConfig.syncsPerBidder) {\n      return utils.logWarn(`Number of user syncs exceeded for \"${bidder}\"`);\n    }\n\n    if (usConfig.filterSettings) {\n      if (shouldBidderBeBlocked(type, bidder)) {\n        return utils.logWarn(`Bidder '${bidder}' is not permitted to register their userSync ${type} pixels as per filterSettings config.`);\n      }\n      // TODO remove this else if code that supports deprecated fields (sometime in 2.x); for now - only run if filterSettings config is not present\n    } else if (usConfig.enabledBidders && usConfig.enabledBidders.length && usConfig.enabledBidders.indexOf(bidder) < 0) {\n      return utils.logWarn(`Bidder \"${bidder}\" not permitted to register their userSync pixels.`);\n    }\n\n    // the bidder's pixel has passed all checks and is allowed to register\n    queue[type].push([bidder, url]);\n    numAdapterBids = incrementAdapterBids(numAdapterBids, bidder);\n  };\n\n  /**\n   * @function shouldBidderBeBlocked\n   * @summary Check filterSettings logic to determine if the bidder should be prevented from registering their userSync tracker\n   * @private\n   * @param {string} type The type of the sync; either image or iframe\n   * @param {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @returns {boolean} true => bidder is not allowed to register; false => bidder can register\n    */\n  function shouldBidderBeBlocked(type, bidder) {\n    let filterConfig = usConfig.filterSettings;\n\n    // apply the filter check if the config object is there (eg filterSettings.iframe exists) and if the config object is properly setup\n    if (isFilterConfigValid(filterConfig, type)) {\n      permittedPixels[type] = true;\n\n      let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n      let biddersToFilter = (activeConfig.bidders === '*') ? [bidder] : activeConfig.bidders;\n      let filterType = activeConfig.filter || 'include'; // set default if undefined\n\n      // return true if the bidder is either: not part of the include (ie outside the whitelist) or part of the exclude (ie inside the blacklist)\n      const checkForFiltering = {\n        'include': (bidders, bidder) => !includes(bidders, bidder),\n        'exclude': (bidders, bidder) => includes(bidders, bidder)\n      }\n      return checkForFiltering[filterType](biddersToFilter, bidder);\n    }\n    return false;\n  }\n\n  /**\n   * @function isFilterConfigValid\n   * @summary Check if the filterSettings object in the userSync config is setup properly\n   * @private\n   * @param {object} filterConfig sub-config object taken from filterSettings\n   * @param {string} type The type of the sync; either image or iframe\n   * @returns {boolean} true => config is setup correctly, false => setup incorrectly or filterConfig[type] is not present\n   */\n  function isFilterConfigValid(filterConfig, type) {\n    if (filterConfig.all && filterConfig[type]) {\n      utils.logWarn(`Detected presence of the \"filterSettings.all\" and \"filterSettings.${type}\" in userSync config.  You cannot mix \"all\" with \"iframe/image\" configs; they are mutually exclusive.`);\n      return false;\n    }\n\n    let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n    let activeConfigName = (filterConfig.all) ? 'all' : type;\n\n    // if current pixel type isn't part of the config's logic, skip rest of the config checks...\n    // we return false to skip subsequent filter checks in shouldBidderBeBlocked() function\n    if (!activeConfig) {\n      return false;\n    }\n\n    let filterField = activeConfig.filter;\n    let biddersField = activeConfig.bidders;\n\n    if (filterField && filterField !== 'include' && filterField !== 'exclude') {\n      utils.logWarn(`UserSync \"filterSettings.${activeConfigName}.filter\" setting '${filterField}' is not a valid option; use either 'include' or 'exclude'.`);\n      return false;\n    }\n\n    if (biddersField !== '*' && !(Array.isArray(biddersField) && biddersField.length > 0 && biddersField.every(bidderInList => utils.isStr(bidderInList) && bidderInList !== '*'))) {\n      utils.logWarn(`Detected an invalid setup in userSync \"filterSettings.${activeConfigName}.bidders\"; use either '*' (to represent all bidders) or an array of bidders.`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * @function syncUsers\n   * @summary Trigger all the user syncs based on publisher-defined timeout\n   * @public\n   * @params {int} timeout The delay in ms before syncing data - default 0\n   */\n  publicApi.syncUsers = (timeout = 0) => {\n    if (timeout) {\n      return setTimeout(fireSyncs, Number(timeout));\n    }\n    fireSyncs();\n  };\n\n  /**\n   * @function triggerUserSyncs\n   * @summary A `syncUsers` wrapper for determining if enableOverride has been turned on\n   * @public\n   */\n  publicApi.triggerUserSyncs = () => {\n    if (usConfig.enableOverride) {\n      publicApi.syncUsers();\n    }\n  };\n\n  return publicApi;\n}\n\nconst browserSupportsCookies = !utils.isSafariBrowser() && utils.cookiesAreEnabled();\n\nexport const userSync = newUserSync({\n  config: config.getConfig('userSync'),\n  browserSupportsCookies: browserSupportsCookies\n});\n\n/**\n * @typedef {Object} UserSyncDependencies\n *\n * @property {UserSyncConfig} config\n * @property {boolean} browserSupportsCookies True if the current browser supports cookies, and false otherwise.\n */\n\n/**\n * @typedef {Object} UserSyncConfig\n *\n * @property {boolean} enableOverride\n * @property {boolean} syncEnabled\n * @property {boolean} pixelEnabled\n * @property {boolean} iframeEnabled\n * @property {int} syncsPerBidder\n * @property {string[]} enabledBidders\n * @property {Object} filterSettings\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/userSync.js","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 19\n// module chunks = 167","/**\n * This file contains the valid Media Types in Prebid.\n *\n * All adapters are assumed to support banner ads. Other media types are specified by Adapters when they\n * register themselves with prebid-core.\n */\n\n/**\n * @typedef {('native'|'video'|'banner')} MediaType\n */\n\n/** @type MediaType */\nexport const NATIVE = 'native';\n/** @type MediaType */\nexport const VIDEO = 'video';\n/** @type MediaType */\nexport const BANNER = 'banner';\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediaTypes.js","\n/**\n * @typedef {function} HookedFunction\n * @property {function(function(), [number])} addHook A method that takes a new function to attach as a hook\n *  to the HookedFunction\n * @property {function(function())} removeHook A method to remove attached hooks\n */\n\n/**\n * A map of global hook methods to allow easy extension of hooked functions that are intended to be extended globally\n * @type {{}}\n */\nexport const hooks = {};\n\n/**\n * A utility function for allowing a regular function to be extensible with additional hook functions\n * @param {string} type The method for applying all attached hooks when this hooked function is called\n * @param {function()} fn The function to make hookable\n * @param {string} hookName If provided this allows you to register a name for a global hook to have easy access to\n *  the addHook and removeHook methods for that hook (which are usually accessed as methods on the function itself)\n * @returns {HookedFunction} A new function that implements the HookedFunction interface\n */\nexport function createHook(type, fn, hookName) {\n  let _hooks = [{fn, priority: 0}];\n\n  let types = {\n    sync: function(...args) {\n      _hooks.forEach(hook => {\n        hook.fn.apply(this, args);\n      });\n    },\n    asyncSeries: function(...args) {\n      let curr = 0;\n\n      const asyncSeriesNext = (...args) => {\n        let hook = _hooks[++curr];\n        if (typeof hook === 'object' && typeof hook.fn === 'function') {\n          return hook.fn.apply(this, args.concat(asyncSeriesNext))\n        }\n      };\n\n      return _hooks[curr].fn.apply(this, args.concat(asyncSeriesNext));\n    }\n  };\n\n  if (!types[type]) {\n    throw 'invalid hook type';\n  }\n\n  let methods = {\n    addHook: function(fn, priority = 10) {\n      if (typeof fn === 'function') {\n        _hooks.push({\n          fn,\n          priority: priority\n        });\n\n        _hooks.sort((a, b) => b.priority - a.priority);\n      }\n    },\n    removeHook: function(removeFn) {\n      _hooks = _hooks.filter(hook => hook.fn === fn || hook.fn !== removeFn);\n    },\n    hasHook: function(fn) {\n      return _hooks.some(hook => hook.fn === fn);\n    }\n  };\n\n  if (typeof hookName === 'string') {\n    hooks[hookName] = methods;\n  }\n\n  function hookedFn(...args) {\n    if (_hooks.length === 1 && _hooks[0].fn === fn) {\n      return fn.apply(this, args);\n    }\n    return types[type].apply(this, args);\n  }\n\n  return Object.assign(hookedFn, methods);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hook.js","/**\n * This module interacts with the server used to cache video ad content to be restored later.\n * At a high level, the expected workflow goes like this:\n *\n *   - Request video ads from Bidders\n *   - Generate IDs for each valid bid, and cache the key/value pair on the server.\n *   - Return these IDs so that publishers can use them to fetch the bids later.\n *\n * This trickery helps integrate with ad servers, which set character limits on request params.\n */\n\nimport { ajax } from './ajax';\nimport { config } from '../src/config';\n\n/**\n * @typedef {object} CacheableUrlBid\n * @property {string} vastUrl A URL which loads some valid VAST XML.\n */\n\n/**\n * @typedef {object} CacheablePayloadBid\n * @property {string} vastXml Some VAST XML which loads an ad in a video player.\n */\n\n/**\n * A CacheableBid describes the types which the videoCache can store.\n *\n * @typedef {CacheableUrlBid|CacheablePayloadBid} CacheableBid\n */\n\n/**\n * Function which wraps a URI that serves VAST XML, so that it can be loaded.\n *\n * @param {string} uri The URI where the VAST content can be found.\n * @param {string} impUrl An impression tracker URL for the delivery of the video ad\n * @return A VAST URL which loads XML from the given URI.\n */\nfunction wrapURI(uri, impUrl) {\n  // Technically, this is vulnerable to cross-script injection by sketchy vastUrl bids.\n  // We could make sure it's a valid URI... but since we're loading VAST XML from the\n  // URL they provide anyway, that's probably not a big deal.\n  let vastImp = (impUrl) ? `<![CDATA[${impUrl}]]>` : ``;\n  return `<VAST version=\"3.0\">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${uri}]]></VASTAdTagURI>\n        <Impression>${vastImp}</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`;\n}\n\n/**\n * Wraps a bid in the format expected by the prebid-server endpoints, or returns null if\n * the bid can't be converted cleanly.\n *\n * @param {CacheableBid} bid\n */\nfunction toStorageRequest(bid) {\n  const vastValue = bid.vastXml ? bid.vastXml : wrapURI(bid.vastUrl, bid.vastImpUrl);\n  return {\n    type: 'xml',\n    value: vastValue\n  };\n}\n\n/**\n * A function which should be called with the results of the storage operation.\n *\n * @callback videoCacheStoreCallback\n *\n * @param {Error} [error] The error, if one occurred.\n * @param {?string[]} uuids An array of unique IDs. The array will have one element for each bid we were asked\n *   to store. It may include null elements if some of the bids were malformed, or an error occurred.\n *   Each non-null element in this array is a valid input into the retrieve function, which will fetch\n *   some VAST XML which can be used to render this bid's ad.\n */\n\n/**\n * A function which bridges the APIs between the videoCacheStoreCallback and our ajax function's API.\n *\n * @param {videoCacheStoreCallback} done A callback to the \"store\" function.\n * @return {Function} A callback which interprets the cache server's responses, and makes up the right\n *   arguments for our callback.\n */\nfunction shimStorageCallback(done) {\n  return {\n    success: function(responseBody) {\n      let ids;\n      try {\n        ids = JSON.parse(responseBody).responses\n      } catch (e) {\n        done(e, []);\n        return;\n      }\n\n      if (ids) {\n        done(null, ids);\n      } else {\n        done(new Error(\"The cache server didn't respond with a responses property.\"), []);\n      }\n    },\n    error: function(statusText, responseBody) {\n      done(new Error(`Error storing video ad in the cache: ${statusText}: ${JSON.stringify(responseBody)}`), []);\n    }\n  }\n}\n\n/**\n * If the given bid is for a Video ad, generate a unique ID and cache it somewhere server-side.\n *\n * @param {CacheableBid[]} bids A list of bid objects which should be cached.\n * @param {videoCacheStoreCallback} [done] An optional callback which should be executed after\n *   the data has been stored in the cache.\n */\nexport function store(bids, done) {\n  const requestData = {\n    puts: bids.map(toStorageRequest)\n  };\n\n  ajax(config.getConfig('cache.url'), shimStorageCallback(done), JSON.stringify(requestData), {\n    contentType: 'text/plain',\n    withCredentials: true\n  });\n}\n\nexport function getCacheUrl(id) {\n  return `${config.getConfig('cache.url')}?uuid=${id}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/videoCache.js","require('../../modules/es6.array.find-index');\nmodule.exports = require('../../modules/_core').Array.findIndex;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find-index.js\n// module id = 21\n// module chunks = 167","import includes from 'core-js/library/fn/array/includes';\nimport * as utils from './utils';\n\nconst _requestCache = {};\nconst _vendorWhitelist = [\n  'criteo',\n]\n\n/**\n * Loads external javascript. Can only be used if external JS is approved by Prebid. See https://github.com/prebid/prebid-js-external-js-template#policy\n * Each unique URL will be loaded at most 1 time.\n * @param {string} url the url to load\n * @param {string} moduleCode bidderCode or module code of the module requesting this resource\n */\nexports.loadExternalScript = function(url, moduleCode) {\n  if (!moduleCode || !url) {\n    utils.logError('cannot load external script without url and moduleCode');\n    return;\n  }\n  if (!includes(_vendorWhitelist, moduleCode)) {\n    utils.logError(`${moduleCode} not whitelisted for loading external JavaScript`);\n    return;\n  }\n  // only load each asset once\n  if (_requestCache[url]) {\n    return;\n  }\n\n  utils.logWarn(`module ${moduleCode} is loading external JavaScript`);\n  const script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = url;\n\n  utils.insertElement(script);\n  _requestCache[url] = true;\n};\n\n/**\n *\n * @deprecated\n * Do not use this function. Will be removed in the next release. If external resources are required, use #loadExternalScript instead.\n */\nexports.loadScript = function (tagSrc, callback, cacheRequest) {\n  // var noop = () => {};\n  //\n  // callback = callback || noop;\n  if (!tagSrc) {\n    utils.logError('Error attempting to request empty URL', 'adloader.js:loadScript');\n    return;\n  }\n\n  if (cacheRequest) {\n    if (_requestCache[tagSrc]) {\n      if (callback && typeof callback === 'function') {\n        if (_requestCache[tagSrc].loaded) {\n          // invokeCallbacks immediately\n          callback();\n        } else {\n          // queue the callback\n          _requestCache[tagSrc].callbacks.push(callback);\n        }\n      }\n    } else {\n      _requestCache[tagSrc] = {\n        loaded: false,\n        callbacks: []\n      };\n      if (callback && typeof callback === 'function') {\n        _requestCache[tagSrc].callbacks.push(callback);\n      }\n\n      requestResource(tagSrc, function () {\n        _requestCache[tagSrc].loaded = true;\n        try {\n          for (let i = 0; i < _requestCache[tagSrc].callbacks.length; i++) {\n            _requestCache[tagSrc].callbacks[i]();\n          }\n        } catch (e) {\n          utils.logError('Error executing callback', 'adloader.js:loadScript', e);\n        }\n      });\n    }\n  } else {\n    // trigger one time request\n    requestResource(tagSrc, callback);\n  }\n};\n\nfunction requestResource(tagSrc, callback) {\n  var jptScript = document.createElement('script');\n  jptScript.type = 'text/javascript';\n  jptScript.async = true;\n\n  // Execute a callback if necessary\n  if (callback && typeof callback === 'function') {\n    if (jptScript.readyState) {\n      jptScript.onreadystatechange = function () {\n        if (jptScript.readyState === 'loaded' || jptScript.readyState === 'complete') {\n          jptScript.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      jptScript.onload = function () {\n        callback();\n      };\n    }\n  }\n\n  jptScript.src = tagSrc;\n\n  // add the new script tag to the page\n  var elToAppend = document.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : document.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(jptScript, elToAppend.firstChild);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adloader.js","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 23\n// module chunks = 167","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 24\n// module chunks = 167","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 25\n// module chunks = 167","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 26\n// module chunks = 167","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 27\n// module chunks = 167","export default function Adapter(code) {\n  var bidderCode = code;\n\n  function setBidderCode(code) {\n    bidderCode = code;\n  }\n\n  function getBidderCode() {\n    return bidderCode;\n  }\n\n  function callBids() {\n  }\n\n  return {\n    callBids: callBids,\n    setBidderCode: setBidderCode,\n    getBidderCode: getBidderCode\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapter.js","/**\n * AuctionManager modules is responsible for creating auction instances.\n * This module is the gateway for Prebid core to access auctions.\n * It stores all created instances of auction and can be used to get consolidated values from auction.\n */\n\n/**\n * @typedef {Object} AuctionManager\n *\n * @property {function(): Array} getBidsRequested - returns consolidated bid requests\n * @property {function(): Array} getBidsReceived - returns consolidated bid received\n * @property {function(): Array} getAdUnits - returns consolidated adUnits\n * @property {function(): Array} getAdUnitCodes - returns consolidated adUnitCodes\n * @property {function(): Object} createAuction - creates auction instance and stores it for future reference\n * @property {function(): Object} findBidByAdId - find bid received by adId. This function will be called by pbjs.renderAd\n * @property {function(): Object} getStandardBidderAdServerTargeting - returns standard bidder targeting for all the adapters. Refer http://prebid.org/dev-docs/publisher-api-reference.html#module_pbjs.bidderSettings for more details\n */\n\nimport { uniques, flatten } from './utils';\nimport { newAuction, getStandardBidderSettings, AUCTION_COMPLETED } from 'src/auction';\nimport find from 'core-js/library/fn/array/find';\nconst utils = require('./utils.js');\n\nconst CONSTANTS = require('./constants.json');\n\n/**\n * Creates new instance of auctionManager. There will only be one instance of auctionManager but\n * a factory is created to assist in testing.\n *\n * @returns {AuctionManager} auctionManagerInstance\n */\nexport function newAuctionManager() {\n  let _auctions = [];\n  let auctionManager = {};\n\n  auctionManager.addWinningBid = function(bid) {\n    const auction = find(_auctions, auction => auction.getAuctionId() === bid.auctionId);\n    if (auction) {\n      auction.addWinningBid(bid);\n    } else {\n      utils.logWarn(`Auction not found when adding winning bid`);\n    }\n  }\n\n  auctionManager.getAllWinningBids = function() {\n    return _auctions.map(auction => auction.getWinningBids())\n      .reduce(flatten, []);\n  }\n\n  auctionManager.getBidsRequested = function() {\n    return _auctions.map(auction => auction.getBidRequests())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getBidsReceived = function() {\n    // As of now, an old bid which is not used in auction 1 can be used in auction n.\n    // To prevent this, bid.ttl (time to live) will be added to this logic and bid pool will also be added\n    // As of now none of the adapters are sending back bid.ttl\n    return _auctions.map((auction) => {\n      if (auction.getAuctionStatus() === AUCTION_COMPLETED) {\n        return auction.getBidsReceived();\n      }\n    }).reduce(flatten, [])\n      .filter(bid => bid);\n  };\n\n  auctionManager.getAdUnits = function() {\n    return _auctions.map(auction => auction.getAdUnits())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getAdUnitCodes = function() {\n    return _auctions.map(auction => auction.getAdUnitCodes())\n      .reduce(flatten, [])\n      .filter(uniques);\n  };\n\n  auctionManager.createAuction = function({ adUnits, adUnitCodes, callback, cbTimeout, labels }) {\n    const auction = newAuction({ adUnits, adUnitCodes, callback, cbTimeout, labels });\n    _addAuction(auction);\n    return auction;\n  };\n\n  auctionManager.findBidByAdId = function(adId) {\n    utils.logInfo('findBidByAdId -> _auctions', _auctions);\n    utils.logInfo('findBidByAdId -> _auctions -> getBidsReceived', _auctions.map(auction => auction.getBidsReceived()));\n    return find(_auctions.map(auction => auction.getBidsReceived()).reduce(flatten, []), bid => {\n      utils.logInfo('bid.adId', bid.adId);\n      return bid.adId === adId;\n    });\n  };\n\n  auctionManager.getStandardBidderAdServerTargeting = function() {\n    return getStandardBidderSettings()[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  };\n\n  auctionManager.setStatusForBids = function(adId, status) {\n    let bid = auctionManager.findBidByAdId(adId);\n    if (bid) bid.status = status;\n  }\n\n  function _addAuction(auction) {\n    _auctions.push(auction);\n  }\n\n  return auctionManager;\n}\n\nexport const auctionManager = newAuctionManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/auctionManager.js","/*\n * Module for getting and setting Prebid configuration.\n *\n * Prebid previously defined these properties directly on the global object:\n * pbjs.logging = true;\n *\n * Defining and access properties in this way is now deprecated, but these will\n * continue to work during a deprecation window.\n */\nimport { isValidPriceConfig } from './cpmBucketManager';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { createHook } from 'src/hook';\nconst utils = require('./utils');\n\nconst DEFAULT_DEBUG = false;\nconst DEFAULT_BIDDER_TIMEOUT = 3000;\nconst DEFAULT_PUBLISHER_DOMAIN = window.location.origin;\nconst DEFAULT_COOKIESYNC_DELAY = 100;\nconst DEFAULT_ENABLE_SEND_ALL_BIDS = true;\nconst DEFAULT_DISABLE_AJAX_TIMEOUT = false;\n\nconst DEFAULT_TIMEOUTBUFFER = 200;\n\nexport const RANDOM = 'random';\nconst FIXED = 'fixed';\n\nconst VALID_ORDERS = {};\nVALID_ORDERS[RANDOM] = true;\nVALID_ORDERS[FIXED] = true;\n\nconst DEFAULT_BIDDER_SEQUENCE = RANDOM;\n\nconst GRANULARITY_OPTIONS = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  AUTO: 'auto',\n  DENSE: 'dense',\n  CUSTOM: 'custom'\n};\n\nconst ALL_TOPICS = '*';\n\n/**\n * @typedef {object} PrebidConfig\n *\n * @property {string} cache.url Set a url if we should use prebid-cache to store video bids before adding\n *   bids to the auction. **NOTE** This must be set if you want to use the dfpAdServerVideo module.\n */\n\nexport function newConfig() {\n  let listeners = [];\n  let defaults;\n  let config;\n\n  function resetConfig() {\n    defaults = {};\n    config = {\n      // `debug` is equivalent to legacy `pbjs.logging` property\n      _debug: DEFAULT_DEBUG,\n      get debug() {\n        return this._debug;\n      },\n      set debug(val) {\n        this._debug = val;\n      },\n\n      // default timeout for all bids\n      _bidderTimeout: DEFAULT_BIDDER_TIMEOUT,\n      get bidderTimeout() {\n        return this._bidderTimeout;\n      },\n      set bidderTimeout(val) {\n        this._bidderTimeout = val;\n      },\n\n      // domain where prebid is running for cross domain iframe communication\n      _publisherDomain: DEFAULT_PUBLISHER_DOMAIN,\n      get publisherDomain() {\n        return this._publisherDomain;\n      },\n      set publisherDomain(val) {\n        this._publisherDomain = val;\n      },\n\n      // delay to request cookie sync to stay out of critical path\n      _cookieSyncDelay: DEFAULT_COOKIESYNC_DELAY,\n      get cookieSyncDelay() {\n        return pbjs.cookieSyncDelay || this._cookieSyncDelay;\n      },\n      set cookieSyncDelay(val) {\n        this._cookieSyncDelay = val;\n      },\n\n      // calls existing function which may be moved after deprecation\n      _priceGranularity: GRANULARITY_OPTIONS.MEDIUM,\n      set priceGranularity(val) {\n        if (validatePriceGranularity(val)) {\n          if (typeof val === 'string') {\n            this._priceGranularity = (hasGranularity(val)) ? val : GRANULARITY_OPTIONS.MEDIUM;\n          } else if (typeof val === 'object') {\n            this._customPriceBucket = val;\n            this._priceGranularity = GRANULARITY_OPTIONS.CUSTOM;\n            utils.logMessage('Using custom price granularity');\n          }\n        }\n      },\n      get priceGranularity() {\n        return this._priceGranularity;\n      },\n\n      _customPriceBucket: {},\n      get customPriceBucket() {\n        return this._customPriceBucket;\n      },\n\n      _mediaTypePriceGranularity: {},\n      get mediaTypePriceGranularity() {\n        return this._mediaTypePriceGranularity;\n      },\n      set mediaTypePriceGranularity(val) {\n        this._mediaTypePriceGranularity = Object.keys(val).reduce((aggregate, item) => {\n          if (validatePriceGranularity(val[item])) {\n            if (typeof val === 'string') {\n              aggregate[item] = (hasGranularity(val[item])) ? val[item] : this._priceGranularity;\n            } else if (typeof val === 'object') {\n              aggregate[item] = val[item];\n              utils.logMessage(`Using custom price granularity for ${item}`);\n            }\n          } else {\n            utils.logWarn(`Invalid price granularity for media type: ${item}`);\n          }\n          return aggregate;\n        }, {});\n      },\n\n      _sendAllBids: DEFAULT_ENABLE_SEND_ALL_BIDS,\n      get enableSendAllBids() {\n        return this._sendAllBids;\n      },\n      set enableSendAllBids(val) {\n        this._sendAllBids = val;\n      },\n\n      _bidderSequence: DEFAULT_BIDDER_SEQUENCE,\n      get bidderSequence() {\n        return this._bidderSequence;\n      },\n      set bidderSequence(val) {\n        if (VALID_ORDERS[val]) {\n          this._bidderSequence = val;\n        } else {\n          utils.logWarn(`Invalid order: ${val}. Bidder Sequence was not set.`);\n        }\n      },\n\n      // timeout buffer to adjust for bidder CDN latency\n      _timoutBuffer: DEFAULT_TIMEOUTBUFFER,\n      get timeoutBuffer() {\n        return this._timoutBuffer;\n      },\n      set timeoutBuffer(val) {\n        this._timoutBuffer = val;\n      },\n\n      _disableAjaxTimeout: DEFAULT_DISABLE_AJAX_TIMEOUT,\n      get disableAjaxTimeout() {\n        return this._disableAjaxTimeout;\n      },\n      set disableAjaxTimeout(val) {\n        this._disableAjaxTimeout = val;\n      },\n\n    };\n\n    function hasGranularity(val) {\n      return find(Object.keys(GRANULARITY_OPTIONS), option => val === GRANULARITY_OPTIONS[option]);\n    }\n\n    function validatePriceGranularity(val) {\n      if (!val) {\n        utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n        return false;\n      }\n      if (typeof val === 'string') {\n        if (!hasGranularity(val)) {\n          utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.');\n        }\n      } else if (typeof val === 'object') {\n        if (!isValidPriceConfig(val)) {\n          utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  /*\n   * Returns configuration object if called without parameters,\n   * or single configuration property if given a string matching a configuration\n   * property name.  Allows deep access e.g. getConfig('currency.adServerCurrency')\n   *\n   * If called with callback parameter, or a string and a callback parameter,\n   * subscribes to configuration updates. See `subscribe` function for usage.\n   */\n  function getConfig(...args) {\n    if (args.length <= 1 && typeof args[0] !== 'function') {\n      const option = args[0];\n      return option ? utils.deepAccess(config, option) : config;\n    }\n\n    return subscribe(...args);\n  }\n\n  /*\n   * Sets configuration given an object containing key-value pairs and calls\n   * listeners that were added by the `subscribe` function\n   */\n  let setConfig = createHook('asyncSeries', function setConfig(options) {\n    if (typeof options !== 'object') {\n      utils.logError('setConfig options must be an object');\n      return;\n    }\n\n    let topics = Object.keys(options);\n    let topicalConfig = {};\n\n    topics.forEach(topic => {\n      let option = options[topic];\n\n      if (typeof defaults[topic] === 'object' && typeof option === 'object') {\n        option = Object.assign({}, defaults[topic], option);\n      }\n\n      topicalConfig[topic] = config[topic] = option;\n    });\n\n    callSubscribers(topicalConfig);\n  });\n\n  /**\n   * Sets configuration defaults which setConfig values can be applied on top of\n   * @param {object} options\n   */\n  function setDefaults(options) {\n    if (typeof defaults !== 'object') {\n      utils.logError('defaults must be an object');\n      return;\n    }\n\n    Object.assign(defaults, options);\n    // Add default values to config as well\n    Object.assign(config, options);\n  }\n\n  /*\n   * Adds a function to a set of listeners that are invoked whenever `setConfig`\n   * is called. The subscribed function will be passed the options object that\n   * was used in the `setConfig` call. Topics can be subscribed to to only get\n   * updates when specific properties are updated by passing a topic string as\n   * the first parameter.\n   *\n   * Returns an `unsubscribe` function for removing the subscriber from the\n   * set of listeners\n   *\n   * Example use:\n   * // subscribe to all configuration changes\n   * subscribe((config) => console.log('config set:', config));\n   *\n   * // subscribe to only 'logging' changes\n   * subscribe('logging', (config) => console.log('logging set:', config));\n   *\n   * // unsubscribe\n   * const unsubscribe = subscribe(...);\n   * unsubscribe(); // no longer listening\n   */\n  function subscribe(topic, listener) {\n    let callback = listener;\n\n    if (typeof topic !== 'string') {\n      // first param should be callback function in this case,\n      // meaning it gets called for any config change\n      callback = topic;\n      topic = ALL_TOPICS;\n    }\n\n    if (typeof callback !== 'function') {\n      utils.logError('listener must be a function');\n      return;\n    }\n\n    listeners.push({ topic, callback });\n\n    // save and call this function to remove the listener\n    return function unsubscribe() {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }\n\n  /*\n   * Calls listeners that were added by the `subscribe` function\n   */\n  function callSubscribers(options) {\n    const TOPICS = Object.keys(options);\n\n    // call subscribers of a specific topic, passing only that configuration\n    listeners\n      .filter(listener => includes(TOPICS, listener.topic))\n      .forEach(listener => {\n        listener.callback({ [listener.topic]: options[listener.topic] });\n      });\n\n    // call subscribers that didn't give a topic, passing everything that was set\n    listeners\n      .filter(listener => listener.topic === ALL_TOPICS)\n      .forEach(listener => listener.callback(options));\n  }\n\n  resetConfig();\n\n  return {\n    getConfig,\n    setConfig,\n    setDefaults,\n    resetConfig\n  };\n}\n\nexport const config = newConfig();\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 30\n// module chunks = 167","import find from 'core-js/library/fn/array/find';\nconst utils = require('src/utils');\n\nconst _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 3,\n    'increment': 0.01\n  },\n  {\n    'min': 3,\n    'max': 8,\n    'increment': 0.05\n  },\n  {\n    'min': 8,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.05\n  },\n  {\n    'min': 5,\n    'max': 10,\n    'increment': 0.1\n  },\n  {\n    'min': 10,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\n\nfunction getPriceBucketString(cpm, customConfig, granularityMultiplier = 1) {\n  let cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig, granularityMultiplier),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig, granularityMultiplier),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig, granularityMultiplier),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig, granularityMultiplier),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig, granularityMultiplier),\n    custom: (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig, granularityMultiplier)\n  };\n}\n\nfunction getCpmStringValue(cpm, config, granularityMultiplier) {\n  let cpmStr = '';\n  if (!isValidPriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev, curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = find(config.buckets, bucket => {\n    if (cpm > cap.max * granularityMultiplier) {\n      // cpm exceeds cap, just return the cap.\n      let precision = bucket.precision;\n      if (typeof precision === 'undefined') {\n        precision = _defaultPrecision;\n      }\n      cpmStr = (bucket.max * granularityMultiplier).toFixed(precision);\n    } else if (cpm <= bucket.max * granularityMultiplier && cpm >= bucket.min * granularityMultiplier) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket, granularityMultiplier);\n  }\n  return cpmStr;\n}\n\nfunction isValidPriceConfig(config) {\n  if (utils.isEmpty(config) || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if (typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, bucket, granularityMultiplier) {\n  const precision = typeof bucket.precision !== 'undefined' ? bucket.precision : _defaultPrecision;\n  const increment = bucket.increment * granularityMultiplier;\n  const bucketMin = bucket.min * granularityMultiplier;\n\n  // start increments at the bucket min and then add bucket min back to arrive at the correct rounding\n  // note - we're padding the values to avoid using decimals in the math prior to flooring\n  // this is done as JS can return values slightly below the expected mark which would skew the price bucket target\n  //   (eg 4.01 / 0.01 = 400.99999999999994)\n  // min precison should be 2 to move decimal place over.\n  let pow = Math.pow(10, precision + 2);\n  let cpmToFloor = ((cpm * pow) - (bucketMin * pow)) / (increment * pow);\n  let cpmTarget = ((Math.floor(cpmToFloor)) * increment) + bucketMin;\n  // force to 10 decimal places to deal with imprecise decimal/binary conversions\n  //    (for example 0.1 * 3 = 0.30000000000000004)\n  cpmTarget = Number(cpmTarget.toFixed(10));\n  return cpmTarget.toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidPriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 32\n// module chunks = 167","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 33\n// module chunks = 167","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-methods.js\n// module id = 34\n// module chunks = 167","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 35\n// module chunks = 167","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 36\n// module chunks = 167","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 37\n// module chunks = 167","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 38\n// module chunks = 167","import { deepAccess } from './utils';\n\nlet adUnits = {};\n\n/**\n * Increments and returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction incrementCounter(adunit) {\n  adUnits[adunit] = adUnits[adunit] || {};\n  adUnits[adunit].counter = (deepAccess(adUnits, `${adunit}.counter`) + 1) || 1;\n  return adUnits[adunit].counter;\n}\n\n/**\n * Returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction getCounter(adunit) {\n  return deepAccess(adUnits, `${adunit}.counter`) || 0;\n}\n\n/**\n * A module which counts how many times an adunit was called\n * @module adunitCounter\n */\nlet adunitCounter = {\n  incrementCounter,\n  getCounter\n}\n\nexport { adunitCounter };\n\n\n\n// WEBPACK FOOTER //\n// ./src/adUnits.js","module.exports = {\"JSON_MAPPING\":{\"PL_CODE\":\"code\",\"PL_SIZE\":\"sizes\",\"PL_BIDS\":\"bids\",\"BD_BIDDER\":\"bidder\",\"BD_ID\":\"paramsd\",\"BD_PL_ID\":\"placementId\",\"ADSERVER_TARGETING\":\"adserverTargeting\",\"BD_SETTING_STANDARD\":\"standard\"},\"REPO_AND_VERSION\":\"prebid_prebid_1.25.0-pre\",\"DEBUG_MODE\":\"pbjs_debug\",\"STATUS\":{\"GOOD\":1,\"NO_BID\":2},\"CB\":{\"TYPE\":{\"ALL_BIDS_BACK\":\"allRequestedBidsBack\",\"AD_UNIT_BIDS_BACK\":\"adUnitBidsBack\",\"BID_WON\":\"bidWon\",\"REQUEST_BIDS\":\"requestBids\"}},\"EVENTS\":{\"AUCTION_INIT\":\"auctionInit\",\"AUCTION_END\":\"auctionEnd\",\"BID_ADJUSTMENT\":\"bidAdjustment\",\"BID_TIMEOUT\":\"bidTimeout\",\"BID_REQUESTED\":\"bidRequested\",\"BID_RESPONSE\":\"bidResponse\",\"BID_WON\":\"bidWon\",\"BIDDER_DONE\":\"bidderDone\",\"SET_TARGETING\":\"setTargeting\",\"REQUEST_BIDS\":\"requestBids\",\"ADD_AD_UNITS\":\"addAdUnits\",\"AD_RENDER_FAILED\":\"adRenderFailed\"},\"AD_RENDER_FAILED_REASON\":{\"PREVENT_WRITING_ON_MAIN_DOCUMENT\":\"preventWritingOnMainDocuemnt\",\"NO_AD\":\"noAd\",\"EXCEPTION\":\"exception\",\"CANNOT_FIND_AD\":\"cannotFindAd\",\"MISSING_DOC_OR_ADID\":\"missingDocOrAdid\"},\"EVENT_ID_PATHS\":{\"bidWon\":\"adUnitCode\"},\"GRANULARITY_OPTIONS\":{\"LOW\":\"low\",\"MEDIUM\":\"medium\",\"HIGH\":\"high\",\"AUTO\":\"auto\",\"DENSE\":\"dense\",\"CUSTOM\":\"custom\"},\"TARGETING_KEYS\":[\"hb_bidder\",\"hb_adid\",\"hb_pb\",\"hb_size\",\"hb_deal\",\"hb_source\",\"hb_format\"],\"S2S\":{\"SRC\":\"s2s\",\"DEFAULT_ENDPOINT\":\"https://prebid.adnxs.com/pbs/v1/openrtb2/auction\",\"SYNCED_BIDDERS_KEY\":\"pbjsSyncs\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 4\n// module chunks = 167","import { videoAdapters } from './adaptermanager';\nimport { getBidRequest, deepAccess, logError } from './utils';\nimport { config } from '../src/config';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst VIDEO_MEDIA_TYPE = 'video';\nexport const OUTSTREAM = 'outstream';\n\n/**\n * Helper functions for working with video-enabled adUnits\n */\nexport const videoAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === VIDEO_MEDIA_TYPE;\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.video');\n  return mediaType || mediaTypes;\n};\nexport const videoBidder = bid => includes(videoAdapters, bid.bidder);\nexport const hasNonVideoBidder = adUnit =>\n  adUnit.bids.filter(bid => !videoBidder(bid)).length;\n\n/**\n * @typedef {object} VideoBid\n * @property {string} adId id of the bid\n */\n\n/**\n * Validate that the assets required for video context are present on the bid\n * @param {VideoBid} bid Video bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function isValidVideoBid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.adId, bidRequests);\n\n  const videoMediaType =\n    bidRequest && deepAccess(bidRequest, 'mediaTypes.video');\n  const context = videoMediaType && deepAccess(videoMediaType, 'context');\n\n  // if context not defined assume default 'instream' for video bids\n  // instream bids require a vast url or vast xml content\n  if (!bidRequest || (videoMediaType && context !== OUTSTREAM)) {\n    // xml-only video bids require a prebid cache url\n    if (!config.getConfig('cache.url') && bid.vastXml && !bid.vastUrl) {\n      logError(`\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: \"...\"} });\n      `);\n      return false;\n    }\n\n    return !!(bid.vastUrl || bid.vastXml);\n  }\n\n  // outstream bids require a renderer on the bid or pub-defined on adunit\n  if (context === OUTSTREAM) {\n    return !!(bid.renderer || bidRequest.renderer);\n  }\n\n  return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/video.js","// if pbjs already exists in global document scope, use it, if not, create the object\n// global defination should happen BEFORE imports to avoid global undefined errors.\nwindow.pbjs = (window.pbjs || {});\nwindow.pbjs.cmd = window.pbjs.cmd || [];\nwindow.pbjs.que = window.pbjs.que || [];\n\nexport function getGlobal() {\n  return window.pbjs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebidGlobal.js","import { uniques, isGptPubadsDefined, getHighestCpm, getOldestHighestCpmBid, groupBy, isAdUnitCodeMatchingSlot, timestamp } from './utils';\nimport { config } from './config';\nimport { NATIVE_TARGETING_KEYS } from './native';\nimport { auctionManager } from './auctionManager';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\n\nvar pbTargetingKeys = [];\n\nexport const BID_TARGETING_SET = 'targetingSet';\nexport const RENDERED = 'rendered';\n\nconst MAX_DFP_KEYLENGTH = 20;\nconst TTL_BUFFER = 1000;\n\n// return unexpired bids\nexport const isBidNotExpired = (bid) => (bid.responseTimestamp + bid.ttl * 1000 + TTL_BUFFER) > timestamp();\n\n// return bids whose status is not set. Winning bid can have status `targetingSet` or `rendered`.\nconst isUnusedBid = (bid) => bid && ((bid.status && !includes([BID_TARGETING_SET, RENDERED], bid.status)) || !bid.status);\n\n// If two bids are found for same adUnitCode, we will use the highest one to take part in auction\n// This can happen in case of concurrent auctions\nexport function getHighestCpmBidsFromBidPool(bidsReceived, highestCpmCallback) {\n  const bids = [];\n  // bucket by adUnitcode\n  let buckets = groupBy(bidsReceived, 'adUnitCode');\n  // filter top bid for each bucket by bidder\n  Object.keys(buckets).forEach(bucketKey => {\n    let bidsByBidder = groupBy(buckets[bucketKey], 'bidderCode');\n    Object.keys(bidsByBidder).forEach(key => bids.push(bidsByBidder[key].reduce(highestCpmCallback, getEmptyBid())));\n  });\n  return bids;\n}\n\nfunction getEmptyBid(adUnitCode) {\n  return {\n    adUnitCode: adUnitCode,\n    cpm: 0,\n    adserverTargeting: {},\n    timeToRespond: 0\n  };\n}\n\n/**\n * @typedef {Object.<string,string>} targeting\n * @property {string} targeting_key\n */\n\n/**\n * @typedef {Object.<string,Object.<string,string[]>[]>[]} targetingArray\n */\n\nexport function newTargeting(auctionManager) {\n  let targeting = {};\n\n  targeting.resetPresetTargeting = function(adUnitCode) {\n    if (isGptPubadsDefined()) {\n      const adUnitCodes = getAdUnitCodes(adUnitCode);\n      const adUnits = auctionManager.getAdUnits().filter(adUnit => includes(adUnitCodes, adUnit.code));\n      window.googletag.pubads().getSlots().forEach(slot => {\n        pbTargetingKeys.forEach(function(key) {\n          // reset only registered adunits\n          adUnits.forEach(function(unit) {\n            if (unit.code === slot.getAdUnitPath() ||\n                unit.code === slot.getSlotElementId()) {\n              slot.setTargeting(key, null);\n            }\n          });\n        });\n      });\n    }\n  };\n\n  /**\n   * Returns all ad server targeting for all ad units.\n   * @param {string=} adUnitCode\n   * @return {Object.<string,targeting>} targeting\n   */\n  targeting.getAllTargeting = function(adUnitCode, bidsReceived = getBidsReceived()) {\n    const adUnitCodes = getAdUnitCodes(adUnitCode);\n\n    // Get targeting for the winning bid. Add targeting for any bids that have\n    // `alwaysUseBid=true`. If sending all bids is enabled, add targeting for losing bids.\n    var targeting = getWinningBidTargeting(adUnitCodes, bidsReceived)\n      .concat(getCustomBidTargeting(adUnitCodes, bidsReceived))\n      .concat(config.getConfig('enableSendAllBids') ? getBidLandscapeTargeting(adUnitCodes, bidsReceived) : []);\n\n    // store a reference of the targeting keys\n    targeting.map(adUnitCode => {\n      Object.keys(adUnitCode).map(key => {\n        adUnitCode[key].map(targetKey => {\n          if (pbTargetingKeys.indexOf(Object.keys(targetKey)[0]) === -1) {\n            pbTargetingKeys = Object.keys(targetKey).concat(pbTargetingKeys);\n          }\n        });\n      });\n    });\n\n    targeting = flattenTargeting(targeting);\n\n    // make sure at least there is a entry per adUnit code in the targetingSet so receivers of SET_TARGETING call's can know what ad units are being invoked\n\n    adUnitCodes.forEach(code => {\n      if (!targeting[code]) {\n        targeting[code] = {};\n      }\n    });\n\n    return targeting;\n  };\n\n  /**\n   * Converts targeting array and flattens to make it easily iteratable\n   * e.g: Sample input to this function\n   * ```\n   * [\n   *    {\n   *      \"div-gpt-ad-1460505748561-0\": [{\"hb_bidder\": [\"appnexusAst\"]}]\n   *    },\n   *    {\n   *      \"div-gpt-ad-1460505748561-0\": [{\"hb_bidder_appnexusAs\": [\"appnexusAst\"]}]\n   *    }\n   * ]\n   * ```\n   * Resulting array\n   * ```\n   * {\n   *  \"div-gpt-ad-1460505748561-0\": {\n   *    \"hb_bidder\": \"appnexusAst\",\n   *    \"hb_bidder_appnexusAs\": \"appnexusAst\"\n   *  }\n   * }\n   * ```\n   *\n   * @param {targetingArray}  targeting\n   * @return {Object.<string,targeting>}  targeting\n   */\n  function flattenTargeting(targeting) {\n    let targetingObj = targeting.map(targeting => {\n      return {\n        [Object.keys(targeting)[0]]: targeting[Object.keys(targeting)[0]]\n          .map(target => {\n            return {\n              [Object.keys(target)[0]]: target[Object.keys(target)[0]].join(', ')\n            };\n          }).reduce((p, c) => Object.assign(c, p), {})\n      };\n    }).reduce(function (accumulator, targeting) {\n      var key = Object.keys(targeting)[0];\n      accumulator[key] = Object.assign({}, accumulator[key], targeting[key]);\n      return accumulator;\n    }, {});\n    return targetingObj;\n  }\n\n  /**\n   * Sets targeting for DFP\n   * @param {Object.<string,Object.<string,string>>} targetingConfig\n   */\n  targeting.setTargetingForGPT = function(targetingConfig, customSlotMatching) {\n    window.googletag.pubads().getSlots().forEach(slot => {\n      Object.keys(targetingConfig).filter(customSlotMatching ? customSlotMatching(slot) : isAdUnitCodeMatchingSlot(slot))\n        .forEach(targetId =>\n          Object.keys(targetingConfig[targetId]).forEach(key => {\n            let valueArr = targetingConfig[targetId][key].split(',');\n            valueArr = (valueArr.length > 1) ? [valueArr] : valueArr;\n            valueArr.map((value) => {\n              utils.logMessage(`Attempting to set key value for slot: ${slot.getSlotElementId()} key: ${key} value: ${value}`);\n              return value;\n            }).forEach(value => {\n              slot.setTargeting(key, value);\n            });\n          })\n        )\n    })\n  };\n\n  /**\n   * normlizes input to a `adUnit.code` array\n   * @param  {(string|string[])} adUnitCode [description]\n   * @return {string[]}     AdUnit code array\n   */\n  function getAdUnitCodes(adUnitCode) {\n    if (typeof adUnitCode === 'string') {\n      return [adUnitCode];\n    } else if (utils.isArray(adUnitCode)) {\n      return adUnitCode;\n    }\n    return auctionManager.getAdUnitCodes() || [];\n  }\n\n  function getBidsReceived() {\n    const bidsReceived = auctionManager.getBidsReceived()\n      .filter(isUnusedBid)\n      .filter(exports.isBidNotExpired)\n    ;\n\n    return getHighestCpmBidsFromBidPool(bidsReceived, getOldestHighestCpmBid);\n  }\n\n  /**\n   * Returns top bids for a given adUnit or set of adUnits.\n   * @param  {(string|string[])} adUnitCode adUnitCode or array of adUnitCodes\n   * @return {[type]}            [description]\n   */\n  targeting.getWinningBids = function(adUnitCode, bidsReceived = getBidsReceived()) {\n    const adUnitCodes = getAdUnitCodes(adUnitCode);\n\n    return bidsReceived\n      .filter(bid => includes(adUnitCodes, bid.adUnitCode))\n      .filter(bid => bid.cpm > 0)\n      .map(bid => bid.adUnitCode)\n      .filter(uniques)\n      .map(adUnitCode => bidsReceived\n        .filter(bid => bid.adUnitCode === adUnitCode ? bid : null)\n        .reduce(getHighestCpm, getEmptyBid(adUnitCode)));\n  };\n\n  /**\n   * Sets targeting for AST\n   */\n  targeting.setTargetingForAst = function() {\n    let astTargeting = targeting.getAllTargeting();\n    Object.keys(astTargeting).forEach(targetId =>\n      Object.keys(astTargeting[targetId]).forEach(key => {\n        utils.logMessage(`Attempting to set targeting for targetId: ${targetId} key: ${key} value: ${astTargeting[targetId][key]}`);\n        // setKeywords supports string and array as value\n        if (utils.isStr(astTargeting[targetId][key]) || utils.isArray(astTargeting[targetId][key])) {\n          let keywordsObj = {};\n          let regex = /pt[0-9]/;\n          if (key.search(regex) < 0) {\n            keywordsObj[key.toUpperCase()] = astTargeting[targetId][key];\n          } else {\n            // pt${n} keys should not be uppercased\n            keywordsObj[key] = astTargeting[targetId][key];\n          }\n          window.apntag.setKeywords(targetId, keywordsObj);\n        }\n      })\n    );\n  };\n\n  /**\n   * Get targeting key value pairs for winning bid.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   winning bids targeting\n   */\n  function getWinningBidTargeting(adUnitCodes, bidsReceived) {\n    let winners = targeting.getWinningBids(adUnitCodes, bidsReceived);\n    let standardKeys = getStandardKeys();\n\n    winners = winners.map(winner => {\n      return {\n        [winner.adUnitCode]: Object.keys(winner.adserverTargeting)\n          .filter(key =>\n            typeof winner.sendStandardTargeting === 'undefined' ||\n            winner.sendStandardTargeting ||\n            standardKeys.indexOf(key) === -1)\n          .reduce((acc, key) => {\n            const targetingValue = [winner.adserverTargeting[key]];\n            const targeting = { [key.substring(0, MAX_DFP_KEYLENGTH)]: targetingValue };\n            if (key === 'hb_deal') {\n              const bidderCodeTargetingKey = `${key}_${winner.bidderCode}`.substring(0, MAX_DFP_KEYLENGTH);\n              const bidderCodeTargeting = { [bidderCodeTargetingKey]: targetingValue };\n              return [...acc, targeting, bidderCodeTargeting];\n            }\n            return [...acc, targeting];\n          }, [])\n      };\n    });\n\n    return winners;\n  }\n\n  function getStandardKeys() {\n    return auctionManager.getStandardBidderAdServerTargeting() // in case using a custom standard key set\n      .map(targeting => targeting.key)\n      .concat(CONSTANTS.TARGETING_KEYS).filter(uniques); // standard keys defined in the library.\n  }\n\n  /**\n   * Merge custom adserverTargeting with same key name for same adUnitCode.\n   * e.g: Appnexus defining custom keyvalue pair foo:bar and Rubicon defining custom keyvalue pair foo:baz will be merged to foo: ['bar','baz']\n   *\n   * @param {Object[]} acc Accumulator for reducer. It will store updated bidResponse objects\n   * @param {Object} bid BidResponse\n   * @param {number} index current index\n   * @param {Array} arr original array\n   */\n  function mergeAdServerTargeting(acc, bid, index, arr) {\n    function concatTargetingValue(key) {\n      return function(currentBidElement) {\n        if (!utils.isArray(currentBidElement.adserverTargeting[key])) {\n          currentBidElement.adserverTargeting[key] = [currentBidElement.adserverTargeting[key]];\n        }\n        currentBidElement.adserverTargeting[key] = currentBidElement.adserverTargeting[key].concat(bid.adserverTargeting[key]).filter(uniques);\n        delete bid.adserverTargeting[key];\n      }\n    }\n\n    function hasSameAdunitCodeAndKey(key) {\n      return function(currentBidElement) {\n        return currentBidElement.adUnitCode === bid.adUnitCode && currentBidElement.adserverTargeting[key]\n      }\n    }\n\n    Object.keys(bid.adserverTargeting)\n      .filter(getCustomKeys())\n      .forEach(key => {\n        if (acc.length) {\n          acc.filter(hasSameAdunitCodeAndKey(key))\n            .forEach(concatTargetingValue(key));\n        }\n      });\n    acc.push(bid);\n    return acc;\n  }\n\n  function getCustomKeys() {\n    let standardKeys = getStandardKeys();\n    return function(key) {\n      return standardKeys.indexOf(key) === -1;\n    }\n  }\n\n  function truncateCustomKeys(bid) {\n    return {\n      [bid.adUnitCode]: Object.keys(bid.adserverTargeting)\n        // Get only the non-standard keys of the losing bids, since we\n        // don't want to override the standard keys of the winning bid.\n        .filter(getCustomKeys())\n        .map(key => {\n          return {\n            [key.substring(0, MAX_DFP_KEYLENGTH)]: [bid.adserverTargeting[key]]\n          };\n        })\n    }\n  }\n\n  /**\n   * Get custom targeting key value pairs for bids.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   bids with custom targeting defined in bidderSettings\n   */\n  function getCustomBidTargeting(adUnitCodes, bidsReceived) {\n    return bidsReceived\n      .filter(bid => includes(adUnitCodes, bid.adUnitCode))\n      .map(bid => Object.assign({}, bid))\n      .reduce(mergeAdServerTargeting, [])\n      .map(truncateCustomKeys)\n      .filter(bid => bid); // removes empty elements in array;\n  }\n\n  /**\n   * Get targeting key value pairs for non-winning bids.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   all non-winning bids targeting\n   */\n  function getBidLandscapeTargeting(adUnitCodes, bidsReceived) {\n    const standardKeys = CONSTANTS.TARGETING_KEYS.concat(NATIVE_TARGETING_KEYS);\n\n    const bids = getHighestCpmBidsFromBidPool(bidsReceived, getHighestCpm);\n\n    // populate targeting keys for the remaining bids\n    return bids.map(bid => {\n      if (\n        bid.adserverTargeting && adUnitCodes &&\n        ((utils.isArray(adUnitCodes) && includes(adUnitCodes, bid.adUnitCode)) ||\n        (typeof adUnitCodes === 'string' && bid.adUnitCode === adUnitCodes))\n      ) {\n        return {\n          [bid.adUnitCode]: getTargetingMap(bid, standardKeys.filter(\n            key => typeof bid.adserverTargeting[key] !== 'undefined')\n          )\n        };\n      }\n    }).filter(bid => bid); // removes empty elements in array\n  }\n\n  function getTargetingMap(bid, keys) {\n    return keys.map(key => {\n      return {\n        [`${key}_${bid.bidderCode}`.substring(0, MAX_DFP_KEYLENGTH)]: [bid.adserverTargeting[key]]\n      };\n    });\n  }\n\n  targeting.isApntagDefined = function() {\n    if (window.apntag && utils.isFn(window.apntag.setKeywords)) {\n      return true;\n    }\n  };\n\n  return targeting;\n}\n\nexport const targeting = newTargeting(auctionManager);\n\n\n\n// WEBPACK FOOTER //\n// ./src/targeting.js","/**\n * Module for auction instances.\n *\n * In Prebid 0.x, pbjs had _bidsRequested and _bidsReceived as public properties.\n * Starting 1.0, Prebid will support concurrent auctions. Each auction instance will store private properties, bidsRequested and bidsReceived.\n *\n * AuctionManager will create instance of auction and will store all the auctions.\n *\n */\n\n/**\n  * @typedef {Object} AdUnit An object containing the adUnit configuration.\n  *\n  * @property {string} code A code which will be used to uniquely identify this bidder. This should be the same\n  *   one as is used in the call to registerBidAdapter\n  * @property {Array.<size>} sizes A list of size for adUnit.\n  * @property {object} params Any bidder-specific params which the publisher used in their bid request.\n  *   This is guaranteed to have passed the spec.areParamsValid() test.\n  */\n\n/**\n * @typedef {Array.<number>} size\n */\n\n/**\n * @typedef {Array.<string>} AdUnitCode\n */\n\n/**\n * @typedef {Object} BidRequest\n * //TODO add all properties\n */\n\n/**\n * @typedef {Object} BidReceived\n * //TODO add all properties\n */\n\n/**\n * @typedef {Object} Auction\n *\n * @property {function(): string} getAuctionStatus - returns the auction status which can be any one of 'started', 'in progress' or 'completed'\n * @property {function(): AdUnit[]} getAdUnits - return the adUnits for this auction instance\n * @property {function(): AdUnitCode[]} getAdUnitCodes - return the adUnitCodes for this auction instance\n * @property {function(): BidRequest[]} getBidRequests - get all bid requests for this auction instance\n * @property {function(): BidReceived[]} getBidsReceived - get all bid received for this auction instance\n * @property {function(): void} startAuctionTimer - sets the bidsBackHandler callback and starts the timer for auction\n * @property {function(): void} callBids - sends requests to all adapters for bids\n */\n\nimport { uniques, flatten, timestamp, adUnitsFilter, getBidderRequest, deepAccess } from './utils';\nimport { getPriceBucketString } from './cpmBucketManager';\nimport { getNativeTargeting } from './native';\nimport { getCacheUrl, store } from './videoCache';\nimport { Renderer } from 'src/Renderer';\nimport { config } from 'src/config';\nimport { userSync } from 'src/userSync';\nimport { createHook } from 'src/hook';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { OUTSTREAM } from './video';\n\nconst { syncUsers } = userSync;\nconst utils = require('./utils');\nconst adaptermanager = require('./adaptermanager');\nconst events = require('./events');\nconst CONSTANTS = require('./constants.json');\n\nexport const AUCTION_STARTED = 'started';\nexport const AUCTION_IN_PROGRESS = 'inProgress';\nexport const AUCTION_COMPLETED = 'completed';\n\n// register event for bid adjustment\nevents.on(CONSTANTS.EVENTS.BID_ADJUSTMENT, function (bid) {\n  adjustBids(bid);\n});\n\nconst MAX_REQUESTS_PER_ORIGIN = 4;\nconst outstandingRequests = {};\nconst sourceInfo = {};\nconst queuedCalls = [];\n\n/**\n  * Creates new auction instance\n  *\n  * @param {Object} requestConfig\n  * @param {AdUnit} requestConfig.adUnits\n  * @param {AdUnitCode} requestConfig.adUnitCode\n  *\n  * @returns {Auction} auction instance\n  */\nexport function newAuction({adUnits, adUnitCodes, callback, cbTimeout, labels}) {\n  let _adUnits = adUnits;\n  let _labels = labels;\n  let _adUnitCodes = adUnitCodes;\n  let _bidderRequests = [];\n  let _bidsReceived = [];\n  let _auctionStart;\n  let _auctionId = utils.generateUUID();\n  let _auctionStatus;\n  let _callback = callback;\n  let _timer;\n  let _timeout = cbTimeout;\n  let _winningBids = [];\n\n  function addBidRequests(bidderRequests) { _bidderRequests = _bidderRequests.concat(bidderRequests) };\n  function addBidReceived(bidsReceived) { _bidsReceived = _bidsReceived.concat(bidsReceived); }\n\n  function startAuctionTimer() {\n    const timedOut = true;\n    const timeoutCallback = executeCallback.bind(null, timedOut);\n    let timer = setTimeout(timeoutCallback, _timeout);\n    _timer = timer;\n  }\n\n  function executeCallback(timedOut, cleartimer) {\n    // clear timer when done calls executeCallback\n    if (cleartimer) {\n      clearTimeout(_timer);\n    }\n\n    if (_callback != null) {\n      let timedOutBidders = [];\n      if (timedOut) {\n        utils.logMessage(`Auction ${_auctionId} timedOut`);\n        timedOutBidders = getTimedOutBids(_bidderRequests, _bidsReceived);\n        if (timedOutBidders.length) {\n          events.emit(CONSTANTS.EVENTS.BID_TIMEOUT, timedOutBidders);\n        }\n      }\n\n      events.emit(CONSTANTS.EVENTS.AUCTION_END, {auctionId: _auctionId});\n\n      try {\n        _auctionStatus = AUCTION_COMPLETED;\n        const adUnitCodes = _adUnitCodes;\n        const bids = _bidsReceived\n          .filter(adUnitsFilter.bind(this, adUnitCodes))\n          .reduce(groupByPlacement, {});\n        _callback.apply(pbjs, [bids, timedOut]);\n      } catch (e) {\n        utils.logError('Error executing bidsBackHandler', null, e);\n      } finally {\n        // Calling timed out bidders\n        if (timedOutBidders.length) {\n          adaptermanager.callTimedOutBidders(adUnits, timedOutBidders, _timeout);\n        }\n        // Only automatically sync if the publisher has not chosen to \"enableOverride\"\n        let userSyncConfig = config.getConfig('userSync') || {};\n        if (!userSyncConfig.enableOverride) {\n          // Delay the auto sync by the config delay\n          syncUsers(userSyncConfig.syncDelay);\n        }\n      }\n      _callback = null;\n    }\n  }\n\n  function auctionDone(bidderCount) {\n    let doneCalled = 0;\n    return function() {\n      doneCalled++;\n      if (doneCalled === bidderCount) {\n        closeAuction();\n      }\n    }\n  }\n\n  function closeAuction() {\n    // when all bidders have called done callback atleast once it means auction is complete\n    utils.logInfo(`Bids Received for Auction with id: ${_auctionId}`, _bidsReceived);\n    _auctionStatus = AUCTION_COMPLETED;\n    executeCallback(false, true);\n  }\n\n  function callBids() {\n    _auctionStatus = AUCTION_STARTED;\n    _auctionStart = Date.now();\n\n    let bidRequests = adaptermanager.makeBidRequests(_adUnits, _auctionStart, _auctionId, _timeout, _labels);\n    utils.logInfo(`Bids Requested for Auction with id: ${_auctionId}`, bidRequests);\n    bidRequests.forEach(bidRequest => {\n      addBidRequests(bidRequest);\n    });\n\n    let requests = {};\n\n    let call = {\n      bidRequests,\n      run: () => {\n        startAuctionTimer();\n\n        _auctionStatus = AUCTION_IN_PROGRESS;\n\n        const auctionInit = {\n          timestamp: _auctionStart,\n          auctionId: _auctionId,\n          timeout: _timeout\n        };\n        events.emit(CONSTANTS.EVENTS.AUCTION_INIT, auctionInit);\n\n        let callbacks = auctionCallbacks(auctionDone(bidRequests.length), this);\n        let boundObj = {\n          auctionAddBidResponse: callbacks.addBidResponse\n        }\n        adaptermanager.callBids(_adUnits, bidRequests, addBidResponse.bind(boundObj), callbacks.adapterDone, {\n          request(source, origin) {\n            increment(outstandingRequests, origin);\n            increment(requests, source);\n\n            if (!sourceInfo[source]) {\n              sourceInfo[source] = {\n                SRA: true,\n                origin\n              };\n            }\n            if (requests[source] > 1) {\n              sourceInfo[source].SRA = false;\n            }\n          },\n          done(origin) {\n            outstandingRequests[origin]--;\n            if (queuedCalls[0]) {\n              if (runIfOriginHasCapacity(queuedCalls[0])) {\n                queuedCalls.shift();\n              }\n            }\n          }\n        }, _timeout);\n      }\n    };\n\n    if (!runIfOriginHasCapacity(call)) {\n      utils.logWarn('queueing auction due to limited endpoint capacity');\n      queuedCalls.push(call);\n    }\n\n    function runIfOriginHasCapacity(call) {\n      let hasCapacity = true;\n\n      let maxRequests = config.getConfig('maxRequestsPerOrigin') || MAX_REQUESTS_PER_ORIGIN;\n\n      call.bidRequests.some(bidRequest => {\n        let requests = 1;\n        let source = (typeof bidRequest.src !== 'undefined' && bidRequest.src === CONSTANTS.S2S.SRC) ? 's2s'\n          : bidRequest.bidderCode;\n        // if we have no previous info on this source just let them through\n        if (sourceInfo[source]) {\n          if (sourceInfo[source].SRA === false) {\n            // some bidders might use more than the MAX_REQUESTS_PER_ORIGIN in a single auction.  In those cases\n            // set their request count to MAX_REQUESTS_PER_ORIGIN so the auction isn't permanently queued waiting\n            // for capacity for that bidder\n            requests = Math.min(bidRequest.bids.length, maxRequests);\n          }\n          if (outstandingRequests[sourceInfo[source].origin] + requests > maxRequests) {\n            hasCapacity = false;\n          }\n        }\n        // return only used for terminating this .some() iteration early if it is determined we don't have capacity\n        return !hasCapacity;\n      });\n\n      if (hasCapacity) {\n        call.run();\n      }\n\n      return hasCapacity;\n    }\n\n    function increment(obj, prop) {\n      if (typeof obj[prop] === 'undefined') {\n        obj[prop] = 1\n      } else {\n        obj[prop]++;\n      }\n    }\n  }\n\n  function addWinningBid(winningBid) {\n    _winningBids = _winningBids.concat(winningBid);\n    adaptermanager.callBidWonBidder(winningBid.bidder, winningBid, adUnits);\n  }\n\n  return {\n    addBidReceived,\n    executeCallback,\n    callBids,\n    addWinningBid,\n    getWinningBids: () => _winningBids,\n    getTimeout: () => _timeout,\n    getAuctionId: () => _auctionId,\n    getAuctionStatus: () => _auctionStatus,\n    getAdUnits: () => _adUnits,\n    getAdUnitCodes: () => _adUnitCodes,\n    getBidRequests: () => _bidderRequests,\n    getBidsReceived: () => _bidsReceived,\n  }\n}\n\nexport const addBidResponse = createHook('asyncSeries', function(adUnitCode, bid) {\n  this.auctionAddBidResponse(adUnitCode, bid);\n}, 'addBidResponse');\n\nexport function auctionCallbacks(auctionDone, auctionInstance) {\n  let outstandingBidsAdded = 0;\n  let doneCalled = false;\n\n  function afterBidAdded() {\n    outstandingBidsAdded--;\n    if (doneCalled && outstandingBidsAdded === 0) {\n      auctionDone()\n    }\n  }\n\n  function addBidResponse(adUnitCode, bid) {\n    outstandingBidsAdded++;\n    let bidRequests = auctionInstance.getBidRequests();\n    let auctionId = auctionInstance.getAuctionId();\n\n    let bidRequest = getBidderRequest(bidRequests, bid.bidderCode, adUnitCode);\n    let bidResponse = getPreparedBidForAuction({adUnitCode, bid, bidRequest, auctionId});\n\n    if (bidResponse.mediaType === 'video') {\n      tryAddVideoBid(auctionInstance, bidResponse, afterBidAdded);\n    } else {\n      addBidToAuction(auctionInstance, bidResponse);\n      afterBidAdded();\n    }\n  }\n\n  function adapterDone() {\n    doneCalled = true;\n    if ((outstandingBidsAdded === 0)) {\n      auctionDone();\n    }\n  }\n\n  return {\n    addBidResponse,\n    adapterDone\n  }\n}\n\nfunction doCallbacksIfTimedout(auctionInstance, bidResponse) {\n  if (bidResponse.timeToRespond > auctionInstance.getTimeout() + config.getConfig('timeoutBuffer')) {\n    auctionInstance.executeCallback(true);\n  }\n}\n\n// Add a bid to the auction.\nfunction addBidToAuction(auctionInstance, bidResponse) {\n  events.emit(CONSTANTS.EVENTS.BID_RESPONSE, bidResponse);\n  auctionInstance.addBidReceived(bidResponse);\n\n  doCallbacksIfTimedout(auctionInstance, bidResponse);\n}\n\n// Video bids may fail if the cache is down, or there's trouble on the network.\nfunction tryAddVideoBid(auctionInstance, bidResponse, afterBidAdded) {\n  let addBid = true;\n  const context = deepAccess(bidResponse, 'context');\n\n  if (config.getConfig('cache.url') && context !== OUTSTREAM) {\n    if (!bidResponse.videoCacheKey) {\n      addBid = false;\n      store([bidResponse], function (error, cacheIds) {\n        if (error) {\n          utils.logWarn(`Failed to save to the video cache: ${error}. Video bid must be discarded.`);\n\n          doCallbacksIfTimedout(auctionInstance, bidResponse);\n        } else {\n          bidResponse.videoCacheKey = cacheIds[0].uuid;\n          if (!bidResponse.vastUrl) {\n            bidResponse.vastUrl = getCacheUrl(bidResponse.videoCacheKey);\n          }\n          addBidToAuction(auctionInstance, bidResponse);\n          afterBidAdded();\n        }\n      });\n    } else if (!bidResponse.vastUrl) {\n      utils.logError('videoCacheKey specified but not required vastUrl for video bid');\n      addBid = false;\n    }\n  }\n  if (addBid) {\n    addBidToAuction(auctionInstance, bidResponse);\n    afterBidAdded();\n  }\n}\n\n// Postprocess the bids so that all the universal properties exist, no matter which bidder they came from.\n// This should be called before addBidToAuction().\nfunction getPreparedBidForAuction({adUnitCode, bid, bidRequest, auctionId}) {\n  const start = bidRequest.start;\n\n  let bidObject = Object.assign({}, bid, {\n    auctionId,\n    responseTimestamp: timestamp(),\n    requestTimestamp: start,\n    cpm: parseFloat(bid.cpm) || 0,\n    bidder: bid.bidderCode,\n    adUnitCode\n  });\n\n  bidObject.timeToRespond = bidObject.responseTimestamp - bidObject.requestTimestamp;\n\n  // Let listeners know that now is the time to adjust the bid, if they want to.\n  //\n  // CAREFUL: Publishers rely on certain bid properties to be available (like cpm),\n  // but others to not be set yet (like priceStrings). See #1372 and #1389.\n  events.emit(CONSTANTS.EVENTS.BID_ADJUSTMENT, bidObject);\n\n  // a publisher-defined renderer can be used to render bids\n  const bidReq = bidRequest.bids && find(bidRequest.bids, bid => bid.adUnitCode == adUnitCode);\n  const adUnitRenderer = bidReq && bidReq.renderer;\n\n  if (adUnitRenderer && adUnitRenderer.url) {\n    bidObject.renderer = Renderer.install({ url: adUnitRenderer.url });\n    bidObject.renderer.setRender(adUnitRenderer.render);\n  }\n\n  // Use the config value 'mediaTypeGranularity' if it has been defined for mediaType, else use 'customPriceBucket'\n  const mediaTypeGranularity = config.getConfig(`mediaTypePriceGranularity.${bid.mediaType}`);\n\n  const priceStringsObj = getPriceBucketString(\n    bidObject.cpm,\n    (typeof mediaTypeGranularity === 'object') ? mediaTypeGranularity : config.getConfig('customPriceBucket'),\n    config.getConfig('currency.granularityMultiplier')\n  );\n  bidObject.pbLg = priceStringsObj.low;\n  bidObject.pbMg = priceStringsObj.med;\n  bidObject.pbHg = priceStringsObj.high;\n  bidObject.pbAg = priceStringsObj.auto;\n  bidObject.pbDg = priceStringsObj.dense;\n  bidObject.pbCg = priceStringsObj.custom;\n\n  // if there is any key value pairs to map do here\n  var keyValues;\n  if (bidObject.bidderCode && (bidObject.cpm > 0 || bidObject.dealId)) {\n    keyValues = getKeyValueTargetingPairs(bidObject.bidderCode, bidObject);\n  }\n\n  // use any targeting provided as defaults, otherwise just set from getKeyValueTargetingPairs\n  bidObject.adserverTargeting = Object.assign(bidObject.adserverTargeting || {}, keyValues);\n\n  return bidObject;\n}\n\nexport function getStandardBidderSettings(mediaType) {\n  // Use the config value 'mediaTypeGranularity' if it has been set for mediaType, else use 'priceGranularity'\n  const mediaTypeGranularity = config.getConfig(`mediaTypePriceGranularity.${mediaType}`);\n  const granularity = (typeof mediaType === 'string' && mediaTypeGranularity) ? ((typeof mediaTypeGranularity === 'string') ? mediaTypeGranularity : 'custom') : config.getConfig('priceGranularity');\n\n  let bidderSettings = pbjs.bidderSettings;\n  if (!bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD]) {\n    bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] = {};\n  }\n  if (!bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n    bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING] = [\n      {\n        key: 'hb_bidder',\n        val: function (bidResponse) {\n          return bidResponse.bidderCode;\n        }\n      }, {\n        key: 'hb_adid',\n        val: function (bidResponse) {\n          return bidResponse.adId;\n        }\n      }, {\n        key: 'hb_pb',\n        val: function (bidResponse) {\n          if (granularity === CONSTANTS.GRANULARITY_OPTIONS.AUTO) {\n            return bidResponse.pbAg;\n          } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.DENSE) {\n            return bidResponse.pbDg;\n          } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.LOW) {\n            return bidResponse.pbLg;\n          } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.MEDIUM) {\n            return bidResponse.pbMg;\n          } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.HIGH) {\n            return bidResponse.pbHg;\n          } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.CUSTOM) {\n            return bidResponse.pbCg;\n          }\n        }\n      }, {\n        key: 'hb_size',\n        val: function (bidResponse) {\n          return bidResponse.size;\n        }\n      }, {\n        key: 'hb_deal',\n        val: function (bidResponse) {\n          return bidResponse.dealId;\n        }\n      },\n      {\n        key: 'hb_source',\n        val: function (bidResponse) {\n          return bidResponse.source;\n        }\n      },\n      {\n        key: 'hb_format',\n        val: function (bidResponse) {\n          return bidResponse.mediaType;\n        }\n      },\n    ]\n  }\n  return bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD];\n}\n\nexport function getKeyValueTargetingPairs(bidderCode, custBidObj) {\n  if (!custBidObj) {\n    return {};\n  }\n\n  var keyValues = {};\n  var bidderSettings = pbjs.bidderSettings;\n\n  // 1) set the keys from \"standard\" setting or from prebid defaults\n  if (bidderSettings) {\n    // initialize default if not set\n    const standardSettings = getStandardBidderSettings(custBidObj.mediaType);\n    setKeys(keyValues, standardSettings, custBidObj);\n\n    // 2) set keys from specific bidder setting override if they exist\n    if (bidderCode && bidderSettings[bidderCode] && bidderSettings[bidderCode][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n      setKeys(keyValues, bidderSettings[bidderCode], custBidObj);\n      custBidObj.sendStandardTargeting = bidderSettings[bidderCode].sendStandardTargeting;\n    }\n  }\n\n  // set native key value targeting\n  if (custBidObj['native']) {\n    keyValues = Object.assign({}, keyValues, getNativeTargeting(custBidObj));\n  }\n\n  return keyValues;\n}\n\nfunction setKeys(keyValues, bidderSettings, custBidObj) {\n  var targeting = bidderSettings[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  custBidObj.size = custBidObj.getSize();\n\n  utils._each(targeting, function (kvPair) {\n    var key = kvPair.key;\n    var value = kvPair.val;\n\n    if (keyValues[key]) {\n      utils.logWarn('The key: ' + key + ' is getting ovewritten');\n    }\n\n    if (utils.isFn(value)) {\n      try {\n        value = value(custBidObj);\n      } catch (e) {\n        utils.logError('bidmanager', 'ERROR', e);\n      }\n    }\n\n    if (\n      ((typeof bidderSettings.suppressEmptyKeys !== 'undefined' && bidderSettings.suppressEmptyKeys === true) ||\n      key === 'hb_deal') && // hb_deal is suppressed automatically if not set\n      (\n        utils.isEmptyStr(value) ||\n        value === null ||\n        value === undefined\n      )\n    ) {\n      utils.logInfo(\"suppressing empty key '\" + key + \"' from adserver targeting\");\n    } else {\n      keyValues[key] = value;\n    }\n  });\n\n  return keyValues;\n}\n\nexport function adjustBids(bid) {\n  let code = bid.bidderCode;\n  let bidPriceAdjusted = bid.cpm;\n  let bidCpmAdjustment;\n  if (pbjs.bidderSettings) {\n    if (code && pbjs.bidderSettings[code] && typeof pbjs.bidderSettings[code].bidCpmAdjustment === 'function') {\n      bidCpmAdjustment = pbjs.bidderSettings[code].bidCpmAdjustment;\n    } else if (pbjs.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] && typeof pbjs.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment === 'function') {\n      bidCpmAdjustment = pbjs.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment;\n    }\n    if (bidCpmAdjustment) {\n      try {\n        bidPriceAdjusted = bidCpmAdjustment(bid.cpm, Object.assign({}, bid));\n      } catch (e) {\n        utils.logError('Error during bid adjustment', 'bidmanager.js', e);\n      }\n    }\n  }\n\n  if (bidPriceAdjusted >= 0) {\n    bid.cpm = bidPriceAdjusted;\n  }\n}\n\n/**\n * groupByPlacement is a reduce function that converts an array of Bid objects\n * to an object with placement codes as keys, with each key representing an object\n * with an array of `Bid` objects for that placement\n * @returns {*} as { [adUnitCode]: { bids: [Bid, Bid, Bid] } }\n */\nfunction groupByPlacement(bidsByPlacement, bid) {\n  if (!bidsByPlacement[bid.adUnitCode]) { bidsByPlacement[bid.adUnitCode] = { bids: [] }; }\n  bidsByPlacement[bid.adUnitCode].bids.push(bid);\n  return bidsByPlacement;\n}\n\n/**\n * Returns a list of bids that we haven't received a response yet where the bidder did not call done\n * @param {BidRequest[]} bidderRequests List of bids requested for auction instance\n * @param {BidReceived[]} bidsReceived List of bids received for auction instance\n *\n * @typedef {Object} TimedOutBid\n * @property {string} bidId The id representing the bid\n * @property {string} bidder The string name of the bidder\n * @property {string} adUnitCode The code used to uniquely identify the ad unit on the publisher's page\n * @property {string} auctionId The id representing the auction\n *\n * @return {Array<TimedOutBid>} List of bids that Prebid hasn't received a response for\n */\nfunction getTimedOutBids(bidderRequests, bidsReceived) {\n  const bidRequestedWithoutDoneCodes = bidderRequests\n    .filter(bidderRequest => !bidderRequest.doneCbCallCount)\n    .map(bid => bid.bidderCode)\n    .filter(uniques);\n\n  const bidReceivedCodes = bidsReceived\n    .map(bid => bid.bidder)\n    .filter(uniques);\n\n  const timedOutBidderCodes = bidRequestedWithoutDoneCodes\n    .filter(bidder => !includes(bidReceivedCodes, bidder));\n\n  const timedOutBids = bidderRequests\n    .map(bid => (bid.bids || []).filter(bid => includes(timedOutBidderCodes, bid.bidder)))\n    .reduce(flatten, [])\n    .map(bid => ({\n      bidId: bid.bidId,\n      bidder: bid.bidder,\n      adUnitCode: bid.adUnitCode,\n      auctionId: bid.auctionId,\n    }));\n\n  return timedOutBids;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/auction.js","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find.js\n// module id = 46\n// module chunks = 167","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 47\n// module chunks = 167","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 48\n// module chunks = 167","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 49\n// module chunks = 167","require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/_core').Array.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/includes.js\n// module id = 5\n// module chunks = 167","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 50\n// module chunks = 167","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 51\n// module chunks = 167","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 52\n// module chunks = 167","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 53\n// module chunks = 167","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 54\n// module chunks = 167","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 55\n// module chunks = 167","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 56\n// module chunks = 167","/** @module pbjs */\n\nimport { getGlobal } from './prebidGlobal';\nimport { flatten, uniques, isGptPubadsDefined, adUnitsFilter, removeRequestId, getLatestHighestCpmBid } from './utils';\nimport { listenMessagesFromCreative } from './secureCreatives';\nimport { userSync } from 'src/userSync.js';\nimport { loadScript } from './adloader';\nimport { config } from './config';\nimport { auctionManager } from './auctionManager';\nimport { targeting, getHighestCpmBidsFromBidPool, RENDERED, BID_TARGETING_SET } from './targeting';\nimport { createHook } from 'src/hook';\nimport { sessionLoader } from 'src/debugging';\nimport includes from 'core-js/library/fn/array/includes';\nimport { adunitCounter } from './adUnits';\n\nconst pbjs = getGlobal();\nconst CONSTANTS = require('./constants.json');\nconst utils = require('./utils.js');\nconst adaptermanager = require('./adaptermanager');\nconst bidfactory = require('./bidfactory');\nconst events = require('./events');\nconst { triggerUserSyncs } = userSync;\n\n/* private variables */\nconst { ADD_AD_UNITS, BID_WON, REQUEST_BIDS, SET_TARGETING, AD_RENDER_FAILED } = CONSTANTS.EVENTS;\nconst { PREVENT_WRITING_ON_MAIN_DOCUMENT, NO_AD, EXCEPTION, CANNOT_FIND_AD, MISSING_DOC_OR_ADID } = CONSTANTS.AD_RENDER_FAILED_REASON;\n\nconst eventValidators = {\n  bidWon: checkDefinedPlacement\n};\n\n// initialize existing debugging sessions if present\nsessionLoader();\n\n/* Public vars */\npbjs.bidderSettings = pbjs.bidderSettings || {};\n\n// let the world know we are loaded\npbjs.libLoaded = true;\n\n// version auto generated from build\npbjs.version = 'v1.25.0-pre';\nutils.logInfo('Prebid.js v1.25.0-pre loaded');\n\n// create adUnit array\npbjs.adUnits = pbjs.adUnits || [];\n\n// Allow publishers who enable user sync override to trigger their sync\npbjs.triggerUserSyncs = triggerUserSyncs;\n\nfunction checkDefinedPlacement(id) {\n  var adUnitCodes = auctionManager.getBidsRequested().map(bidSet => bidSet.bids.map(bid => bid.adUnitCode))\n    .reduce(flatten)\n    .filter(uniques);\n\n  if (!utils.contains(adUnitCodes, id)) {\n    utils.logError('The \"' + id + '\" placement is not defined.');\n    return;\n  }\n\n  return true;\n}\n\nfunction setRenderSize(doc, width, height) {\n  if (doc.defaultView && doc.defaultView.frameElement) {\n    doc.defaultView.frameElement.width = width;\n    doc.defaultView.frameElement.height = height;\n  }\n}\n\n/// ///////////////////////////////\n//                              //\n//    Start Public APIs         //\n//                              //\n/// ///////////////////////////////\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param  {string} [adunitCode] adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCodeStr\n * @return {Array}  returnObj return bids array\n */\npbjs.getAdserverTargetingForAdUnitCodeStr = function (adunitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargetingForAdUnitCodeStr', arguments);\n\n  // call to retrieve bids array\n  if (adunitCode) {\n    var res = pbjs.getAdserverTargetingForAdUnitCode(adunitCode);\n    return utils.transformAdServerTargetingObj(res);\n  } else {\n    utils.logMessage('Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode');\n  }\n};\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param adUnitCode {string} adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCode\n * @returns {Object}  returnObj return bids\n */\npbjs.getAdserverTargetingForAdUnitCode = function(adUnitCode) {\n  return pbjs.getAdserverTargeting(adUnitCode)[adUnitCode];\n};\n\n/**\n * returns all ad server targeting for all ad units\n * @return {Object} Map of adUnitCodes and targeting values []\n * @alias module:pbjs.getAdserverTargeting\n */\n\npbjs.getAdserverTargeting = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargeting', arguments);\n  return targeting.getAllTargeting(adUnitCode);\n};\n\n/**\n * This function returns the bid responses at the given moment.\n * @alias module:pbjs.getBidResponses\n * @return {Object}            map | object that contains the bidResponses\n */\n\npbjs.getBidResponses = function () {\n  utils.logInfo('Invoking pbjs.getBidResponses', arguments);\n  const responses = auctionManager.getBidsReceived()\n    .filter(adUnitsFilter.bind(this, auctionManager.getAdUnitCodes()));\n\n  // find the last auction id to get responses for most recent auction only\n  const currentAuctionId = responses && responses.length && responses[responses.length - 1].auctionId;\n\n  return responses\n    .map(bid => bid.adUnitCode)\n    .filter(uniques).map(adUnitCode => responses\n      .filter(bid => bid.auctionId === currentAuctionId && bid.adUnitCode === adUnitCode))\n    .filter(bids => bids && bids[0] && bids[0].adUnitCode)\n    .map(bids => {\n      return {\n        [bids[0].adUnitCode]: { bids: bids.map(removeRequestId) }\n      };\n    })\n    .reduce((a, b) => Object.assign(a, b), {});\n};\n\n/**\n * Returns bidResponses for the specified adUnitCode\n * @param  {string} adUnitCode adUnitCode\n * @alias module:pbjs.getBidResponsesForAdUnitCode\n * @return {Object}            bidResponse object\n */\n\npbjs.getBidResponsesForAdUnitCode = function (adUnitCode) {\n  const bids = auctionManager.getBidsReceived().filter(bid => bid.adUnitCode === adUnitCode);\n  return {\n    bids: bids.map(removeRequestId)\n  };\n};\n\n/**\n * Set query string targeting on one or more GPT ad units.\n * @param {(string|string[])} adUnit a single `adUnit.code` or multiple.\n * @param {function(object)} customSlotMatching gets a GoogleTag slot and returns a filter function for adUnitCode, so you can decide to match on either eg. return slot => { return adUnitCode => { return slot.getSlotElementId() === 'myFavoriteDivId'; } };\n * @alias module:pbjs.setTargetingForGPTAsync\n */\npbjs.setTargetingForGPTAsync = function (adUnit, customSlotMatching) {\n  utils.logInfo('Invoking pbjs.setTargetingForGPTAsync', arguments);\n  if (!isGptPubadsDefined()) {\n    utils.logError('window.googletag is not defined on the page');\n    return;\n  }\n\n  // get our ad unit codes\n  let targetingSet = targeting.getAllTargeting(adUnit);\n\n  // first reset any old targeting\n  targeting.resetPresetTargeting(adUnit);\n\n  // now set new targeting keys\n  targeting.setTargetingForGPT(targetingSet, customSlotMatching);\n\n  Object.keys(targetingSet).forEach((adUnitCode) => {\n    Object.keys(targetingSet[adUnitCode]).forEach((targetingKey) => {\n      if (targetingKey === 'hb_adid') {\n        auctionManager.setStatusForBids(targetingSet[adUnitCode][targetingKey], BID_TARGETING_SET);\n      }\n    });\n  });\n\n  // emit event\n  events.emit(SET_TARGETING, targetingSet);\n};\n\n/**\n * Set query string targeting on all AST (AppNexus Seller Tag) ad units. Note that this function has to be called after all ad units on page are defined. For working example code, see [Using Prebid.js with AppNexus Publisher Ad Server](http://prebid.org/dev-docs/examples/use-prebid-with-appnexus-ad-server.html).\n * @alias module:pbjs.setTargetingForAst\n */\npbjs.setTargetingForAst = function() {\n  utils.logInfo('Invoking pbjs.setTargetingForAn', arguments);\n  if (!targeting.isApntagDefined()) {\n    utils.logError('window.apntag is not defined on the page');\n    return;\n  }\n\n  targeting.setTargetingForAst();\n\n  // emit event\n  events.emit(SET_TARGETING, targeting.getAllTargeting());\n};\n\nfunction emitAdRenderFail(reason, message, bid) {\n  const data = {};\n\n  data.reason = reason;\n  data.message = message;\n  if (bid) {\n    data.bid = bid;\n  }\n\n  utils.logError(message);\n  events.emit(AD_RENDER_FAILED, data);\n}\n/**\n * This function will render the ad (based on params) in the given iframe document passed through.\n * Note that doc SHOULD NOT be the parent document page as we can't doc.write() asynchronously\n * @param  {HTMLDocument} doc document\n * @param  {string} id bid id to locate the ad\n * @alias module:pbjs.renderAd\n */\npbjs.renderAd = function (doc, id) {\n  utils.logInfo('Invoking pbjs.renderAd', arguments);\n  utils.logMessage('Calling renderAd with adId :' + id);\n\n  if (doc && id) {\n    try {\n      // lookup ad by ad Id\n      const bid = auctionManager.findBidByAdId(id);\n      if (bid) {\n        bid.status = RENDERED;\n        // replace macros according to openRTB with price paid = bid.cpm\n        bid.ad = utils.replaceAuctionPrice(bid.ad, bid.cpm);\n        bid.adUrl = utils.replaceAuctionPrice(bid.adUrl, bid.cpm);\n        // save winning bids\n        auctionManager.addWinningBid(bid);\n\n        // emit 'bid won' event here\n        events.emit(BID_WON, bid);\n\n        const { height, width, ad, mediaType, adUrl, renderer } = bid;\n\n        const creativeComment = document.createComment(`Creative ${bid.creativeId} served by ${bid.bidder} Prebid.js Header Bidding`);\n        utils.insertElement(creativeComment, doc, 'body');\n\n        if (renderer && renderer.url) {\n          renderer.render(bid);\n          console.log('>>>>>>', utils.inIframe(), mediaType);\n        } else if ((doc === document && !utils.inIframe()) || mediaType === 'video') {\n          const message = `Error trying to write ad. Ad render call ad id ${id} was prevented from writing to the main document.`;\n          emitAdRenderFail(PREVENT_WRITING_ON_MAIN_DOCUMENT, message, bid);\n        } else if (ad) {\n          doc.write(ad);\n          doc.close();\n          setRenderSize(doc, width, height);\n          utils.callBurl(bid);\n        } else if (adUrl) {\n          const iframe = utils.createInvisibleIframe();\n          iframe.height = height;\n          iframe.width = width;\n          iframe.style.display = 'inline';\n          iframe.style.overflow = 'hidden';\n          iframe.src = adUrl;\n\n          utils.insertElement(iframe, doc, 'body');\n          setRenderSize(doc, width, height);\n          utils.callBurl(bid);\n        } else {\n          const message = `Error trying to write ad. No ad for bid response id: ${id}`;\n          emitAdRenderFail(NO_AD, message, bid);\n        }\n      } else {\n        const message = `Error trying to write ad. Cannot find ad by given id : ${id}`;\n        emitAdRenderFail(CANNOT_FIND_AD, message);\n      }\n    } catch (e) {\n      const message = `Error trying to write ad Id :${id} to the page:${e.message}`;\n      emitAdRenderFail(EXCEPTION, message);\n    }\n  } else {\n    const message = `Error trying to write ad Id :${id} to the page. Missing document or adId`;\n    emitAdRenderFail(MISSING_DOC_OR_ADID, message);\n  }\n};\n\n/**\n * Remove adUnit from the pbjs configuration\n * @param  {string} adUnitCode the adUnitCode to remove\n * @alias module:pbjs.removeAdUnit\n */\npbjs.removeAdUnit = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.removeAdUnit', arguments);\n  if (adUnitCode) {\n    for (var i = 0; i < pbjs.adUnits.length; i++) {\n      if (pbjs.adUnits[i].code === adUnitCode) {\n        pbjs.adUnits.splice(i, 1);\n      }\n    }\n  }\n};\n\n/**\n * @param {Object} requestOptions\n * @param {function} requestOptions.bidsBackHandler\n * @param {number} requestOptions.timeout\n * @param {Array} requestOptions.adUnits\n * @param {Array} requestOptions.adUnitCodes\n * @param {Array} requestOptions.labels\n * @alias module:pbjs.requestBids\n */\npbjs.requestBids = createHook('asyncSeries', function ({ bidsBackHandler, timeout, adUnits, adUnitCodes, labels } = {}) {\n  events.emit(REQUEST_BIDS);\n  const cbTimeout = timeout || config.getConfig('bidderTimeout');\n  adUnits = adUnits || pbjs.adUnits;\n\n  utils.logInfo('Invoking pbjs.requestBids', arguments);\n\n  if (adUnitCodes && adUnitCodes.length) {\n    // if specific adUnitCodes supplied filter adUnits for those codes\n    adUnits = adUnits.filter(unit => includes(adUnitCodes, unit.code));\n  } else {\n    // otherwise derive adUnitCodes from adUnits\n    adUnitCodes = adUnits && adUnits.map(unit => unit.code);\n  }\n\n  /*\n   * for a given adunit which supports a set of mediaTypes\n   * and a given bidder which supports a set of mediaTypes\n   * a bidder is eligible to participate on the adunit\n   * if it supports at least one of the mediaTypes on the adunit\n   */\n  adUnits.forEach(adUnit => {\n    // get the adunit's mediaTypes, defaulting to banner if mediaTypes isn't present\n    const adUnitMediaTypes = Object.keys(adUnit.mediaTypes || {'banner': 'banner'});\n\n    // get the bidder's mediaTypes\n    const allBidders = adUnit.bids.map(bid => bid.bidder);\n    const bidderRegistry = adaptermanager.bidderRegistry;\n\n    const s2sConfig = config.getConfig('s2sConfig');\n    const s2sBidders = s2sConfig && s2sConfig.bidders;\n    const bidders = (s2sBidders) ? allBidders.filter(bidder => {\n      return !includes(s2sBidders, bidder);\n    }) : allBidders;\n\n    if (!adUnit.transactionId) {\n      adUnit.transactionId = utils.generateUUID();\n    }\n\n    bidders.forEach(bidder => {\n      const adapter = bidderRegistry[bidder];\n      const spec = adapter && adapter.getSpec && adapter.getSpec();\n      // banner is default if not specified in spec\n      const bidderMediaTypes = (spec && spec.supportedMediaTypes) || ['banner'];\n\n      // check if the bidder's mediaTypes are not in the adUnit's mediaTypes\n      const bidderEligible = adUnitMediaTypes.some(type => includes(bidderMediaTypes, type));\n      if (!bidderEligible) {\n        // drop the bidder from the ad unit if it's not compatible\n        utils.logWarn(utils.unsupportedBidderMessage(adUnit, bidder));\n        adUnit.bids = adUnit.bids.filter(bid => bid.bidder !== bidder);\n      }\n    });\n    adunitCounter.incrementCounter(adUnit.code);\n  });\n\n  if (!adUnits || adUnits.length === 0) {\n    utils.logMessage('No adUnits configured. No bids requested.');\n    if (typeof bidsBackHandler === 'function') {\n      // executeCallback, this will only be called in case of first request\n      try {\n        bidsBackHandler();\n      } catch (e) {\n        utils.logError('Error executing bidsBackHandler', null, e);\n      }\n    }\n    return;\n  }\n\n  const auction = auctionManager.createAuction({adUnits, adUnitCodes, callback: bidsBackHandler, cbTimeout, labels});\n  auction.callBids();\n  return auction;\n});\n\n/**\n *\n * Add adunit(s)\n * @param {Array|Object} adUnitArr Array of adUnits or single adUnit Object.\n * @alias module:pbjs.addAdUnits\n */\npbjs.addAdUnits = function (adUnitArr) {\n  utils.logInfo('Invoking pbjs.addAdUnits', arguments);\n  if (utils.isArray(adUnitArr)) {\n    pbjs.adUnits.push.apply(pbjs.adUnits, adUnitArr);\n  } else if (typeof adUnitArr === 'object') {\n    pbjs.adUnits.push(adUnitArr);\n  }\n  // emit event\n  events.emit(ADD_AD_UNITS);\n};\n\n/**\n * @param {string} event the name of the event\n * @param {Function} handler a callback to set on event\n * @param {string} id an identifier in the context of the event\n * @alias module:pbjs.onEvent\n *\n * This API call allows you to register a callback to handle a Prebid.js event.\n * An optional `id` parameter provides more finely-grained event callback registration.\n * This makes it possible to register callback events for a specific item in the\n * event context. For example, `bidWon` events will accept an `id` for ad unit code.\n * `bidWon` callbacks registered with an ad unit code id will be called when a bid\n * for that ad unit code wins the auction. Without an `id` this method registers the\n * callback for every `bidWon` event.\n *\n * Currently `bidWon` is the only event that accepts an `id` parameter.\n */\npbjs.onEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.onEvent', arguments);\n  if (!utils.isFn(handler)) {\n    utils.logError('The event handler provided is not a function and was not set on event \"' + event + '\".');\n    return;\n  }\n\n  if (id && !eventValidators[event].call(null, id)) {\n    utils.logError('The id provided is not valid for event \"' + event + '\" and no handler was set.');\n    return;\n  }\n\n  events.on(event, handler, id);\n};\n\n/**\n * @param {string} event the name of the event\n * @param {Function} handler a callback to remove from the event\n * @param {string} id an identifier in the context of the event (see `pbjs.onEvent`)\n * @alias module:pbjs.offEvent\n */\npbjs.offEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.offEvent', arguments);\n  if (id && !eventValidators[event].call(null, id)) {\n    return;\n  }\n\n  events.off(event, handler, id);\n};\n\n/*\n * Wrapper to register bidderAdapter externally (adaptermanager.registerBidAdapter())\n * @param  {Function} bidderAdaptor [description]\n * @param  {string} bidderCode [description]\n * @alias module:pbjs.registerBidAdapter\n */\npbjs.registerBidAdapter = function (bidderAdaptor, bidderCode) {\n  utils.logInfo('Invoking pbjs.registerBidAdapter', arguments);\n  try {\n    adaptermanager.registerBidAdapter(bidderAdaptor(), bidderCode);\n  } catch (e) {\n    utils.logError('Error registering bidder adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to register analyticsAdapter externally (adaptermanager.registerAnalyticsAdapter())\n * @param  {Object} options [description]\n * @alias module:pbjs.registerAnalyticsAdapter\n */\npbjs.registerAnalyticsAdapter = function (options) {\n  utils.logInfo('Invoking pbjs.registerAnalyticsAdapter', arguments);\n  try {\n    adaptermanager.registerAnalyticsAdapter(options);\n  } catch (e) {\n    utils.logError('Error registering analytics adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to bidfactory.createBid()\n * @param  {string} statusCode [description]\n * @alias module:pbjs.createBid\n * @return {Object} bidResponse [description]\n */\npbjs.createBid = function (statusCode) {\n  utils.logInfo('Invoking pbjs.createBid', arguments);\n  return bidfactory.createBid(statusCode);\n};\n\n/**\n * @deprecated this function will be removed in the next release. Prebid has deprected external JS loading.\n * @param  {string} tagSrc [description]\n * @param  {Function} callback [description]\n * @alias module:pbjs.loadScript\n */\npbjs.loadScript = function (tagSrc, callback, useCache) {\n  utils.logInfo('Invoking pbjs.loadScript', arguments);\n  loadScript(tagSrc, callback, useCache);\n};\n\n/**\n * Enable sending analytics data to the analytics provider of your\n * choice.\n *\n * For usage, see [Integrate with the Prebid Analytics\n * API](http://prebid.org/dev-docs/integrate-with-the-prebid-analytics-api.html).\n *\n * For a list of analytics adapters, see [Analytics for\n * Prebid](http://prebid.org/overview/analytics.html).\n * @param  {Object} config\n * @param {string} config.provider The name of the provider, e.g., `\"ga\"` for Google Analytics.\n * @param {Object} config.options The options for this particular analytics adapter.  This will likely vary between adapters.\n * @alias module:pbjs.enableAnalytics\n */\npbjs.enableAnalytics = function (config) {\n  if (config && !utils.isEmpty(config)) {\n    utils.logInfo('Invoking pbjs.enableAnalytics for: ', config);\n    adaptermanager.enableAnalytics(config);\n  } else {\n    utils.logError('pbjs.enableAnalytics should be called with option {}');\n  }\n};\n\n/**\n * @alias module:pbjs.aliasBidder\n */\npbjs.aliasBidder = function (bidderCode, alias) {\n  utils.logInfo('Invoking pbjs.aliasBidder', arguments);\n  if (bidderCode && alias) {\n    adaptermanager.aliasBidAdapter(bidderCode, alias);\n  } else {\n    utils.logError('bidderCode and alias must be passed as arguments', 'pbjs.aliasBidder');\n  }\n};\n\n/**\n * The bid response object returned by an external bidder adapter during the auction.\n * @typedef {Object} AdapterBidResponse\n * @property {string} pbAg Auto granularity price bucket; CPM <= 5 ? increment = 0.05 : CPM > 5 && CPM <= 10 ? increment = 0.10 : CPM > 10 && CPM <= 20 ? increment = 0.50 : CPM > 20 ? priceCap = 20.00.  Example: `\"0.80\"`.\n * @property {string} pbCg Custom price bucket.  For example setup, see {@link setPriceGranularity}.  Example: `\"0.84\"`.\n * @property {string} pbDg Dense granularity price bucket; CPM <= 3 ? increment = 0.01 : CPM > 3 && CPM <= 8 ? increment = 0.05 : CPM > 8 && CPM <= 20 ? increment = 0.50 : CPM > 20? priceCap = 20.00.  Example: `\"0.84\"`.\n * @property {string} pbLg Low granularity price bucket; $0.50 increment, capped at $5, floored to two decimal places.  Example: `\"0.50\"`.\n * @property {string} pbMg Medium granularity price bucket; $0.10 increment, capped at $20, floored to two decimal places.  Example: `\"0.80\"`.\n * @property {string} pbHg High granularity price bucket; $0.01 increment, capped at $20, floored to two decimal places.  Example: `\"0.84\"`.\n *\n * @property {string} bidder The string name of the bidder.  This *may* be the same as the `bidderCode`.  For For a list of all bidders and their codes, see [Bidders' Params](http://prebid.org/dev-docs/bidders.html).\n * @property {string} bidderCode The unique string that identifies this bidder.  For a list of all bidders and their codes, see [Bidders' Params](http://prebid.org/dev-docs/bidders.html).\n *\n * @property {string} requestId The [UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier) representing the bid request.\n * @property {number} requestTimestamp The time at which the bid request was sent out, expressed in milliseconds.\n * @property {number} responseTimestamp The time at which the bid response was received, expressed in milliseconds.\n * @property {number} timeToRespond How long it took for the bidder to respond with this bid, expressed in milliseconds.\n *\n * @property {string} size The size of the ad creative, expressed in `\"AxB\"` format, where A and B are numbers of pixels.  Example: `\"320x50\"`.\n * @property {string} width The width of the ad creative in pixels.  Example: `\"320\"`.\n * @property {string} height The height of the ad creative in pixels.  Example: `\"50\"`.\n *\n * @property {string} ad The actual ad creative content, often HTML with CSS, JavaScript, and/or links to additional content.  Example: `\"<div id='beacon_-YQbipJtdxmMCgEPHExLhmqzEm' style='position: absolute; left: 0px; top: 0px; visibility: hidden;'><img src='http://aplus-...'/></div><iframe src=\\\"http://aax-us-east.amazon-adsystem.com/e/is/8dcfcd...\" width=\\\"728\\\" height=\\\"90\\\" frameborder=\\\"0\\\" ...></iframe>\",`.\n * @property {number} ad_id The ad ID of the creative, as understood by the bidder's system.  Used by the line item's [creative in the ad server](http://prebid.org/adops/send-all-bids-adops.html#step-3-add-a-creative).\n * @property {string} adUnitCode The code used to uniquely identify the ad unit on the publisher's page.\n *\n * @property {string} statusMessage The status of the bid.  Allowed values: `\"Bid available\"` or `\"Bid returned empty or error response\"`.\n * @property {number} cpm The exact bid price from the bidder, expressed to the thousandths place.  Example: `\"0.849\"`.\n *\n * @property {Object} adserverTargeting An object whose values represent the ad server's targeting on the bid.\n * @property {string} adserverTargeting.hb_adid The ad ID of the creative, as understood by the ad server.\n * @property {string} adserverTargeting.hb_pb The price paid to show the creative, as logged in the ad server.\n * @property {string} adserverTargeting.hb_bidder The winning bidder whose ad creative will be served by the ad server.\n*/\n\n/**\n * Get all of the bids that have been rendered.  Useful for [troubleshooting your integration](http://prebid.org/dev-docs/prebid-troubleshooting-guide.html).\n * @return {Array<AdapterBidResponse>} A list of bids that have been rendered.\n*/\npbjs.getAllWinningBids = function () {\n  return auctionManager.getAllWinningBids()\n    .map(removeRequestId);\n};\n\n/**\n * Get all of the bids that have won their respective auctions.\n * @return {Array<AdapterBidResponse>} A list of bids that have won their respective auctions.\n */\npbjs.getAllPrebidWinningBids = function () {\n  return auctionManager.getBidsReceived()\n    .filter(bid => bid.status === BID_TARGETING_SET)\n    .map(removeRequestId);\n};\n\n/**\n * Get array of highest cpm bids for all adUnits, or highest cpm bid\n * object for the given adUnit\n * @param {string} adUnitCode - optional ad unit code\n * @alias module:pbjs.getHighestCpmBids\n * @return {Array} array containing highest cpm bid object(s)\n */\npbjs.getHighestCpmBids = function (adUnitCode) {\n  let bidsReceived = getHighestCpmBidsFromBidPool(auctionManager.getBidsReceived(), getLatestHighestCpmBid);\n  return targeting.getWinningBids(adUnitCode, bidsReceived)\n    .map(removeRequestId);\n};\n\n/**\n * Mark the winning bid as used, should only be used in conjunction with video\n * @typedef {Object} MarkBidRequest\n * @property {string} adUnitCode The ad unit code\n * @property {string} adId The id representing the ad we want to mark\n *\n * @alias module:pbjs.markWinningBidAsUsed\n*/\npbjs.markWinningBidAsUsed = function (markBidRequest) {\n  let bids = [];\n\n  if (markBidRequest.adUnitCode && markBidRequest.adId) {\n    bids = auctionManager.getBidsReceived()\n      .filter(bid => bid.adId === markBidRequest.adId && bid.adUnitCode === markBidRequest.adUnitCode);\n  } else if (markBidRequest.adUnitCode) {\n    bids = targeting.getWinningBids(markBidRequest.adUnitCode);\n  } else if (markBidRequest.adId) {\n    bids = auctionManager.getBidsReceived().filter(bid => bid.adId === markBidRequest.adId);\n  } else {\n    utils.logWarn('Inproper usage of markWinningBidAsUsed. It\\'ll need an adUnitCode and/or adId to function.');\n  }\n\n  if (bids.length > 0) {\n    bids[0].status = RENDERED;\n  }\n};\n\n/**\n * Get Prebid config options\n * @param {Object} options\n * @alias module:pbjs.getConfig\n */\npbjs.getConfig = config.getConfig;\n\n/**\n * Set Prebid config options.\n * (Added in version 0.27.0).\n *\n * `setConfig` is designed to allow for advanced configuration while\n * reducing the surface area of the public API.  For more information\n * about the move to `setConfig` (and the resulting deprecations of\n * some other public methods), see [the Prebid 1.0 public API\n * proposal](https://gist.github.com/mkendall07/51ee5f6b9f2df01a89162cf6de7fe5b6).\n *\n * #### Troubleshooting your configuration\n *\n * If you call `pbjs.setConfig` without an object, e.g.,\n *\n * `pbjs.setConfig('debug', 'true'))`\n *\n * then Prebid.js will print an error to the console that says:\n *\n * ```\n * ERROR: setConfig options must be an object\n * ```\n *\n * If you don't see that message, you can assume the config object is valid.\n *\n * @param {Object} options Global Prebid configuration object. Must be JSON - no JavaScript functions are allowed.\n * @param {string} options.bidderSequence The order in which bidders are called.  Example: `pbjs.setConfig({ bidderSequence: \"fixed\" })`.  Allowed values: `\"fixed\"` (order defined in `adUnit.bids` array on page), `\"random\"`.\n * @param {boolean} options.debug Turn debug logging on/off. Example: `pbjs.setConfig({ debug: true })`.\n * @param {string} options.priceGranularity The bid price granularity to use.  Example: `pbjs.setConfig({ priceGranularity: \"medium\" })`. Allowed values: `\"low\"` ($0.50), `\"medium\"` ($0.10), `\"high\"` ($0.01), `\"auto\"` (sliding scale), `\"dense\"` (like `\"auto\"`, with smaller increments at lower CPMs), or a custom price bucket object, e.g., `{ \"buckets\" : [{\"min\" : 0,\"max\" : 20,\"increment\" : 0.1,\"cap\" : true}]}`.\n * @param {boolean} options.enableSendAllBids Turn \"send all bids\" mode on/off.  Example: `pbjs.setConfig({ enableSendAllBids: true })`.\n * @param {number} options.bidderTimeout Set a global bidder timeout, in milliseconds.  Example: `pbjs.setConfig({ bidderTimeout: 3000 })`.  Note that it's still possible for a bid to get into the auction that responds after this timeout. This is due to how [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout) works in JS: it queues the callback in the event loop in an approximate location that should execute after this time but it is not guaranteed.  For more information about the asynchronous event loop and `setTimeout`, see [How JavaScript Timers Work](https://johnresig.com/blog/how-javascript-timers-work/).\n * @param {string} options.publisherDomain The publisher's domain where Prebid is running, for cross-domain iFrame communication.  Example: `pbjs.setConfig({ publisherDomain: \"https://www.theverge.com\" })`.\n * @param {number} options.cookieSyncDelay A delay (in milliseconds) for requesting cookie sync to stay out of the critical path of page load.  Example: `pbjs.setConfig({ cookieSyncDelay: 100 })`.\n * @param {Object} options.s2sConfig The configuration object for [server-to-server header bidding](http://prebid.org/dev-docs/get-started-with-prebid-server.html).  Example:\n * @alias module:pbjs.setConfig\n * ```\n * pbjs.setConfig({\n *     s2sConfig: {\n *         accountId: '1',\n *         enabled: true,\n *         bidders: ['appnexus', 'pubmatic'],\n *         timeout: 1000,\n *         adapter: 'prebidServer',\n *         endpoint: 'https://prebid.adnxs.com/pbs/v1/auction'\n *     }\n * })\n * ```\n */\npbjs.setConfig = config.setConfig;\n\npbjs.que.push(() => listenMessagesFromCreative());\n\n/**\n * This queue lets users load Prebid asynchronously, but run functions the same way regardless of whether it gets loaded\n * before or after their script executes. For example, given the code:\n *\n * <script src=\"url/to/Prebid.js\" async></script>\n * <script>\n *   var pbjs = pbjs || {};\n *   pbjs.cmd = pbjs.cmd || [];\n *   pbjs.cmd.push(functionToExecuteOncePrebidLoads);\n * </script>\n *\n * If the page's script runs before prebid loads, then their function gets added to the queue, and executed\n * by prebid once it's done loading. If it runs after prebid loads, then this monkey-patch causes their\n * function to execute immediately.\n *\n * @memberof pbjs\n * @param  {function} command A function which takes no arguments. This is guaranteed to run exactly once, and only after\n *                            the Prebid script has been fully loaded.\n * @alias module:pbjs.cmd.push\n */\npbjs.cmd.push = function(command) {\n  if (typeof command === 'function') {\n    try {\n      command.call();\n    } catch (e) {\n      utils.logError('Error processing command :', e.message, e.stack);\n    }\n  } else {\n    utils.logError('Commands written into pbjs.cmd.push must be wrapped in a function');\n  }\n};\n\npbjs.que.push = pbjs.cmd.push;\n\nfunction processQueue(queue) {\n  queue.forEach(function(cmd) {\n    if (typeof cmd.called === 'undefined') {\n      try {\n        cmd.call();\n        cmd.called = true;\n      } catch (e) {\n        utils.logError('Error processing command :', 'prebid.js', e);\n      }\n    }\n  });\n}\n\n/**\n * @alias module:pbjs.processQueue\n */\npbjs.processQueue = function() {\n  processQueue(pbjs.que);\n  processQueue(pbjs.cmd);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebid.js","/* Secure Creatives\n  Provides support for rendering creatives into cross domain iframes such as SafeFrame to prevent\n   access to a publisher page from creative payloads.\n */\n\nimport events from './events';\nimport { fireNativeTrackers } from './native';\nimport { EVENTS } from './constants';\nimport { isSlotMatchingAdUnitCode } from './utils';\nimport { auctionManager } from './auctionManager';\nimport find from 'core-js/library/fn/array/find';\n\nconst BID_WON = EVENTS.BID_WON;\n\nexport function listenMessagesFromCreative() {\n  addEventListener('message', receiveMessage, false);\n}\n\nfunction receiveMessage(ev) {\n  var key = ev.message ? 'message' : 'data';\n  var data = {};\n  try {\n    data = JSON.parse(ev[key]);\n  } catch (e) {\n    return;\n  }\n\n  if (data && data.adId) {\n    const adObject = find(auctionManager.getBidsReceived(), function (bid) {\n      return bid.adId === data.adId;\n    });\n\n    if (data.message === 'Prebid Request') {\n      sendAdToCreative(adObject, data.adServerDomain, ev.source);\n\n      // save winning bids\n      auctionManager.addWinningBid(adObject);\n\n      events.emit(BID_WON, adObject);\n    }\n\n    // handle this script from native template in an ad server\n    // window.parent.postMessage(JSON.stringify({\n    //   message: 'Prebid Native',\n    //   adId: '%%PATTERN:hb_adid%%'\n    // }), '*');\n    if (data.message === 'Prebid Native') {\n      fireNativeTrackers(data, adObject);\n      auctionManager.addWinningBid(adObject);\n      events.emit(BID_WON, adObject);\n    }\n  }\n}\n\nfunction sendAdToCreative(adObject, remoteDomain, source) {\n  const { adId, ad, adUrl, width, height } = adObject;\n\n  if (adId) {\n    resizeRemoteCreative(adObject);\n    source.postMessage(JSON.stringify({\n      message: 'Prebid Response',\n      ad,\n      adUrl,\n      adId,\n      width,\n      height\n    }), remoteDomain);\n  }\n}\n\nfunction resizeRemoteCreative({ adUnitCode, width, height }) {\n  // resize both container div + iframe\n  ['div', 'iframe'].forEach(elmType => {\n    let elementStyle = getElementByAdUnit(elmType).style;\n    elementStyle.width = width + 'px';\n    elementStyle.height = height + 'px';\n  });\n  function getElementByAdUnit(elmType) {\n    return document.getElementById(find(window.googletag.pubads().getSlots().filter(isSlotMatchingAdUnitCode(adUnitCode)), slot => slot)\n      .getSlotElementId()).querySelector(elmType);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/secureCreatives.js","\nimport { config } from 'src/config';\nimport { logMessage as utilsLogMessage, logWarn as utilsLogWarn } from 'src/utils';\nimport { addBidResponse } from 'src/auction';\n\nconst OVERRIDE_KEY = 'pbjs:debugging';\n\nexport let boundHook;\n\nfunction logMessage(msg) {\n  utilsLogMessage('DEBUG: ' + msg);\n}\n\nfunction logWarn(msg) {\n  utilsLogWarn('DEBUG: ' + msg);\n}\n\nfunction enableOverrides(overrides, fromSession = false) {\n  config.setConfig({'debug': true});\n  logMessage(`bidder overrides enabled${fromSession ? ' from session' : ''}`);\n\n  if (boundHook) {\n    addBidResponse.removeHook(boundHook);\n  }\n\n  boundHook = addBidResponseHook.bind(null, overrides);\n  addBidResponse.addHook(boundHook, 5);\n}\n\nexport function disableOverrides() {\n  if (boundHook) {\n    addBidResponse.removeHook(boundHook);\n    logMessage('bidder overrides disabled');\n  }\n}\n\nexport function addBidResponseHook(overrides, adUnitCode, bid, next) {\n  if (Array.isArray(overrides.bidders) && overrides.bidders.indexOf(bid.bidderCode) === -1) {\n    logWarn(`bidder '${bid.bidderCode}' excluded from auction by bidder overrides`);\n    return;\n  }\n\n  if (Array.isArray(overrides.bids)) {\n    overrides.bids.forEach(overrideBid => {\n      if (overrideBid.bidder && overrideBid.bidder !== bid.bidderCode) {\n        return;\n      }\n      if (overrideBid.adUnitCode && overrideBid.adUnitCode !== adUnitCode) {\n        return;\n      }\n\n      bid = Object.assign({}, bid);\n\n      Object.keys(overrideBid).filter(key => ['bidder', 'adUnitCode'].indexOf(key) === -1).forEach((key) => {\n        let value = overrideBid[key];\n        logMessage(`bidder overrides changed '${adUnitCode}/${bid.bidderCode}' bid.${key} from '${bid[key]}' to '${value}'`);\n        bid[key] = value;\n      });\n    });\n  }\n\n  next(adUnitCode, bid);\n}\n\nexport function getConfig(debugging) {\n  if (!debugging.enabled) {\n    disableOverrides();\n    try {\n      window.sessionStorage.removeItem(OVERRIDE_KEY);\n    } catch (e) {}\n  } else {\n    try {\n      window.sessionStorage.setItem(OVERRIDE_KEY, JSON.stringify(debugging));\n    } catch (e) {}\n    enableOverrides(debugging);\n  }\n}\nconfig.getConfig('debugging', ({debugging}) => getConfig(debugging));\n\nexport function sessionLoader(storage) {\n  let overrides;\n  try {\n    storage = storage || window.sessionStorage;\n    overrides = JSON.parse(storage.getItem(OVERRIDE_KEY));\n  } catch (e) {\n  }\n  if (overrides) {\n    enableOverrides(overrides, true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/debugging.js","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-create.js\n// module id = 57\n// module chunks = 167","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-constructor.js\n// module id = 58\n// module chunks = 167","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2018 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 59\n// module chunks = 167","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 60\n// module chunks = 167","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 61\n// module chunks = 167","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.array.includes.js\n// module id = 62\n// module chunks = 167","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 63\n// module chunks = 167","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 64\n// module chunks = 167","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 65\n// module chunks = 167","module.exports = clone;\n\n/*\n  Identical to `just-extend(true, {}, obj1)`\n\n  var arr = [1, 2, 3];\n  var subObj = {aa: 1};\n  var obj = {a: 3, b: 5, c: arr, d: subObj};\n  var objClone = clone(obj);\n  arr.push(4);\n  subObj.bb = 2;\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4], d: {aa: 1}}  \n  objClone; // {a: 3, b: 5, c: [1, 2, 3], d: {aa: 1, bb: 2}}\n*/\n\nfunction clone(obj) {\n  var result = Array.isArray(obj) ? [] : {};\n  for (var key in obj) {\n    // include prototype properties\n    var value = obj[key];\n    if (value && typeof value == 'object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/just-clone/index.js\n// module id = 66\n// module chunks = 167","import { config } from 'src/config';\nimport { logWarn } from 'src/utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nlet sizeConfig = [];\n\n/**\n * @typedef {object} SizeConfig\n *\n * @property {string} [mediaQuery] A CSS media query string that will to be interpreted by window.matchMedia.  If the\n *  media query matches then the this config will be active and sizesSupported will filter bid and adUnit sizes.  If\n *  this property is not present then this SizeConfig will only be active if triggered manually by a call to\n *  pbjs.setConfig({labels:['label']) specifying one of the labels present on this SizeConfig.\n * @property {Array<Array>} sizesSupported The sizes to be accepted if this SizeConfig is enabled.\n * @property {Array<string>} labels The active labels to match this SizeConfig to an adUnits and/or bidders.\n */\n\n/**\n *\n * @param {Array<SizeConfig>} config\n */\nexport function setSizeConfig(config) {\n  sizeConfig = config;\n}\nconfig.getConfig('sizeConfig', config => setSizeConfig(config.sizeConfig));\n\n/**\n * Resolves the unique set of the union of all sizes and labels that are active from a SizeConfig.mediaQuery match\n * @param {Array<string>} labels Labels specified on adUnit or bidder\n * @param {boolean} labelAll if true, all labels must match to be enabled\n * @param {Array<string>} activeLabels Labels passed in through requestBids\n * @param {Array<Array<number>>} sizes Sizes specified on adUnit\n * @param {Array<SizeConfig>} configs\n * @returns {{labels: Array<string>, sizes: Array<Array<number>>}}\n */\nexport function resolveStatus({labels = [], labelAll = false, activeLabels = []} = {}, sizes = [], configs = sizeConfig) {\n  let maps = evaluateSizeConfig(configs);\n\n  let filteredSizes;\n  if (maps.shouldFilter) {\n    filteredSizes = sizes.filter(size => maps.sizesSupported[size]);\n  } else {\n    filteredSizes = sizes;\n  }\n\n  return {\n    active: filteredSizes.length > 0 && (\n      labels.length === 0 || (\n        (!labelAll && (\n          labels.some(label => maps.labels[label]) ||\n          labels.some(label => includes(activeLabels, label))\n        )) ||\n        (labelAll && (\n          labels.reduce((result, label) => !result ? result : (\n            maps.labels[label] || includes(activeLabels, label)\n          ), true)\n        ))\n      )\n    ),\n    sizes: filteredSizes\n  };\n}\n\nfunction evaluateSizeConfig(configs) {\n  return configs.reduce((results, config) => {\n    if (\n      typeof config === 'object' &&\n      typeof config.mediaQuery === 'string'\n    ) {\n      if (matchMedia(config.mediaQuery).matches) {\n        if (Array.isArray(config.sizesSupported)) {\n          results.shouldFilter = true;\n        }\n        ['labels', 'sizesSupported'].forEach(\n          type => (config[type] || []).forEach(\n            thing => results[type][thing] = true\n          )\n        );\n      }\n    } else {\n      logWarn('sizeConfig rule missing required property \"mediaQuery\"');\n    }\n    return results;\n  }, {\n    labels: {},\n    sizesSupported: {},\n    shouldFilter: false\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sizeMapping.js","import { logWarn } from './utils';\n\nexport function detectReferer(win) {\n  function getLevels() {\n    let levels = walkUpWindows();\n    let ancestors = getAncestorOrigins();\n\n    if (ancestors) {\n      for (let i = 0, l = ancestors.length; i < l; i++) {\n        levels[i].ancestor = ancestors[i];\n      }\n    }\n    return levels;\n  }\n\n  function getAncestorOrigins() {\n    try {\n      if (!win.location.ancestorOrigins) {\n        return;\n      }\n      return win.location.ancestorOrigins;\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  function getPubUrlStack(levels) {\n    let stack = [];\n    let defUrl = null;\n    let encodedUrl = null;\n    let frameLocation = null;\n    let prevFrame = null;\n    let prevRef = null;\n    let ancestor = null;\n    let detectedRefererUrl = null;\n\n    let i;\n    for (i = levels.length - 1; i >= 0; i--) {\n      try {\n        frameLocation = levels[i].location;\n      } catch (e) {\n        // Ignore error\n      }\n\n      if (frameLocation) {\n        encodedUrl = encodeURIComponent(frameLocation);\n        stack.push(encodedUrl);\n        if (!detectedRefererUrl) {\n          detectedRefererUrl = encodedUrl;\n        }\n      } else if (i !== 0) {\n        prevFrame = levels[i - 1];\n        try {\n          prevRef = prevFrame.referrer;\n          ancestor = prevFrame.ancestor;\n        } catch (e) {\n          // Ignore error\n        }\n\n        if (prevRef) {\n          encodedUrl = encodeURIComponent(prevRef);\n          stack.push(encodedUrl);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = encodedUrl;\n          }\n        } else if (ancestor) {\n          encodedUrl = encodeURIComponent(ancestor);\n          stack.push(encodedUrl);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = encodedUrl;\n          }\n        } else {\n          stack.push(defUrl);\n        }\n      } else {\n        stack.push(defUrl);\n      }\n    }\n    return {\n      stack,\n      detectedRefererUrl\n    };\n  }\n\n  function walkUpWindows() {\n    let acc = [];\n    let currentWindow;\n    do {\n      try {\n        currentWindow = currentWindow ? currentWindow.parent : win;\n        try {\n          acc.push({\n            referrer: currentWindow.document.referrer || null,\n            location: currentWindow.location.href || null,\n            isTop: (currentWindow == win.top)\n          });\n        } catch (e) {\n          acc.push({\n            referrer: null,\n            location: null,\n            isTop: (currentWindow == win.top)\n          });\n          logWarn('Trying to access cross domain iframe. Continuing without referrer and location');\n        }\n      } catch (e) {\n        acc.push({\n          referrer: null,\n          location: null,\n          isTop: false\n        });\n        return acc;\n      }\n    } while (currentWindow != win.top);\n    return acc;\n  }\n\n  /**\n   * Referer info\n   * @typedef {Object} refererInfo\n   * @property {string} referer detected top url\n   * @property {boolean} reachedTop whether prebid was able to walk upto top window or not\n   * @property {number} numIframes number of iframes\n   * @property {string} stack comma separated urls of all origins\n   */\n\n  /**\n   * Get referer info\n   * @returns {refererInfo}\n   */\n  function refererInfo() {\n    try {\n      let levels = getLevels();\n      let numIframes = levels.length - 1;\n      let reachedTop = (levels[numIframes].location !== null ||\n        (numIframes > 0 && levels[numIframes - 1].referrer !== null));\n      let stackInfo = getPubUrlStack(levels);\n\n      return {\n        referer: stackInfo.detectedRefererUrl,\n        reachedTop,\n        numIframes,\n        stack: stackInfo.stack,\n      };\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  return refererInfo;\n}\n\nexport const getRefererInfo = detectReferer(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/refererDetection.js","import {parse as parseURL, format as formatURL} from './url';\nimport { config } from 'src/config';\n\nvar utils = require('./utils');\n\nconst XHR_DONE = 4;\n\n/**\n * Simple IE9+ and cross-browser ajax request function\n * Note: x-domain requests in IE9 do not support the use of cookies\n *\n * @param url string url\n * @param callback {object | function} callback\n * @param data mixed data\n * @param options object\n */\nexport const ajax = ajaxBuilder();\n\nexport function ajaxBuilder(timeout = 3000, {request, done} = {}) {\n  return function(url, callback, data, options = {}) {\n    try {\n      let x;\n      let method = options.method || (data ? 'POST' : 'GET');\n      let parser = document.createElement('a');\n      parser.href = url;\n\n      let callbacks = typeof callback === 'object' && callback !== null ? callback : {\n        success: function() {\n          utils.logMessage('xhr success');\n        },\n        error: function(e) {\n          utils.logError('xhr error', null, e);\n        }\n      };\n\n      if (typeof callback === 'function') {\n        callbacks.success = callback;\n      }\n\n      x = new window.XMLHttpRequest();\n\n      x.onreadystatechange = function () {\n        if (x.readyState === XHR_DONE) {\n          if (typeof done === 'function') {\n            done(parser.origin);\n          }\n          let status = x.status;\n          if ((status >= 200 && status < 300) || status === 304) {\n            callbacks.success(x.responseText, x);\n          } else {\n            callbacks.error(x.statusText, x);\n          }\n        }\n      };\n\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.ontimeout = function () {\n          utils.logError('  xhr timeout after ', x.timeout, 'ms');\n        };\n      }\n\n      if (method === 'GET' && data) {\n        let urlInfo = parseURL(url, options);\n        Object.assign(urlInfo.search, data);\n        url = formatURL(urlInfo);\n      }\n\n      x.open(method, url, true);\n      // IE needs timoeut to be set after open - see #1410\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.timeout = timeout;\n      }\n\n      if (options.withCredentials) {\n        x.withCredentials = true;\n      }\n      utils._each(options.customHeaders, (value, header) => {\n        x.setRequestHeader(header, value);\n      });\n      if (options.preflight) {\n        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n      x.setRequestHeader('Content-Type', options.contentType || 'text/plain');\n\n      if (typeof request === 'function') {\n        request(parser.origin);\n      }\n\n      if (method === 'POST' && data) {\n        x.send(data);\n      } else {\n        x.send();\n      }\n    } catch (error) {\n      utils.logError('xhr construction', error);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","/** @module adaptermanger */\n\nimport { flatten, getBidderCodes, getDefinedParams, shuffle, timestamp } from './utils';\nimport { resolveStatus } from './sizeMapping';\nimport { processNativeAdUnitParams, nativeAdapters } from './native';\nimport { newBidder } from './adapters/bidderFactory';\nimport { ajaxBuilder } from 'src/ajax';\nimport { config, RANDOM } from 'src/config';\nimport includes from 'core-js/library/fn/array/includes';\nimport find from 'core-js/library/fn/array/find';\nimport { adunitCounter } from './adUnits';\nimport { getRefererInfo } from './refererDetection';\n\nvar utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\nvar events = require('./events');\nlet s2sTestingModule; // store s2sTesting module if it's loaded\n\nvar _bidderRegistry = {};\nexports.bidderRegistry = _bidderRegistry;\nexports.aliasRegistry = {};\n\nlet _s2sConfig = {};\nconfig.getConfig('s2sConfig', config => {\n  _s2sConfig = config.s2sConfig;\n});\n\nvar _analyticsRegistry = {};\n\n/**\n * @typedef {object} LabelDescriptor\n * @property {boolean} labelAll describes whether or not this object expects all labels to match, or any label to match\n * @property {Array<string>} labels the labels listed on the bidder or adUnit\n * @property {Array<string>} activeLabels the labels specified as being active by requestBids\n */\n\n/**\n * Returns object describing the status of labels on the adUnit or bidder along with labels passed into requestBids\n * @param bidOrAdUnit the bidder or adUnit to get label info on\n * @param activeLabels the labels passed to requestBids\n * @returns {LabelDescriptor}\n */\nfunction getLabels(bidOrAdUnit, activeLabels) {\n  if (bidOrAdUnit.labelAll) {\n    return {labelAll: true, labels: bidOrAdUnit.labelAll, activeLabels};\n  }\n  return {labelAll: false, labels: bidOrAdUnit.labelAny, activeLabels};\n}\n\nfunction getBids({bidderCode, auctionId, bidderRequestId, adUnits, labels}) {\n  return adUnits.reduce((result, adUnit) => {\n    let bannerSizes = utils.deepAccess(adUnit, 'mediaTypes.banner.sizes');\n\n    let {active, sizes: filteredAdUnitSizes} = resolveStatus(\n      getLabels(adUnit, labels),\n      bannerSizes || adUnit.sizes\n    );\n\n    if (active) {\n      result.push(adUnit.bids.filter(bid => bid.bidder === bidderCode)\n        .reduce((bids, bid) => {\n          const nativeParams =\n            adUnit.nativeParams || utils.deepAccess(adUnit, 'mediaTypes.native');\n          if (nativeParams) {\n            bid = Object.assign({}, bid, {\n              nativeParams: processNativeAdUnitParams(nativeParams),\n            });\n          }\n\n          bid = Object.assign({}, bid, getDefinedParams(adUnit, [\n            'mediaType',\n            'renderer'\n          ]));\n\n          let {active, sizes} = resolveStatus(getLabels(bid, labels), filteredAdUnitSizes);\n\n          if (adUnit.mediaTypes) {\n            if (utils.isValidMediaTypes(adUnit.mediaTypes)) {\n              if (bannerSizes) {\n                adUnit.mediaTypes.banner.sizes = sizes;\n              }\n\n              bid = Object.assign({}, bid, {\n                mediaTypes: adUnit.mediaTypes\n              });\n            } else {\n              utils.logError(\n                `mediaTypes is not correctly configured for adunit ${adUnit.code}`\n              );\n            }\n          }\n\n          if (active) {\n            bids.push(Object.assign({}, bid, {\n              adUnitCode: adUnit.code,\n              transactionId: adUnit.transactionId,\n              sizes: sizes,\n              bidId: bid.bid_id || utils.getUniqueIdentifierStr(),\n              bidderRequestId,\n              auctionId,\n              bidRequestsCount: adunitCounter.getCounter(adUnit.code),\n            }));\n          }\n          return bids;\n        }, [])\n      );\n    }\n    return result;\n  }, []).reduce(flatten, []).filter(val => val !== '');\n}\n\nfunction getAdUnitCopyForPrebidServer(adUnits) {\n  let adaptersServerSide = _s2sConfig.bidders;\n  let adUnitsCopy = utils.deepClone(adUnits);\n\n  adUnitsCopy.forEach((adUnit) => {\n    // filter out client side bids\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return includes(adaptersServerSide, bid.bidder) && (!doingS2STesting() || bid.finalSource !== s2sTestingModule.CLIENT);\n    }).map((bid) => {\n      bid.bid_id = utils.getUniqueIdentifierStr();\n      return bid;\n    });\n  });\n\n  // don't send empty requests\n  adUnitsCopy = adUnitsCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n  return adUnitsCopy;\n}\n\nfunction getAdUnitCopyForClientAdapters(adUnits) {\n  let adUnitsClientCopy = utils.deepClone(adUnits);\n  // filter out s2s bids\n  adUnitsClientCopy.forEach((adUnit) => {\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return !doingS2STesting() || bid.finalSource !== s2sTestingModule.SERVER;\n    })\n  });\n\n  // don't send empty requests\n  adUnitsClientCopy = adUnitsClientCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n\n  return adUnitsClientCopy;\n}\n\nexports.gdprDataHandler = {\n  consentData: null,\n  setConsentData: function(consentInfo) {\n    this.consentData = consentInfo;\n  },\n  getConsentData: function() {\n    return this.consentData;\n  }\n};\n\nexports.makeBidRequests = function(adUnits, auctionStart, auctionId, cbTimeout, labels) {\n  let bidRequests = [];\n\n  adUnits = exports.checkBidRequestSizes(adUnits);\n\n  let bidderCodes = getBidderCodes(adUnits);\n  if (config.getConfig('bidderSequence') === RANDOM) {\n    bidderCodes = shuffle(bidderCodes);\n  }\n  const refererInfo = getRefererInfo();\n\n  let clientBidderCodes = bidderCodes;\n  let clientTestAdapters = [];\n  if (_s2sConfig.enabled) {\n    // if s2sConfig.bidderControl testing is turned on\n    if (doingS2STesting()) {\n      // get all adapters doing client testing\n      clientTestAdapters = s2sTestingModule.getSourceBidderMap(adUnits)[s2sTestingModule.CLIENT];\n    }\n\n    // these are called on the s2s adapter\n    let adaptersServerSide = _s2sConfig.bidders;\n\n    // don't call these client side (unless client request is needed for testing)\n    clientBidderCodes = bidderCodes.filter((elm) => {\n      return !includes(adaptersServerSide, elm) || includes(clientTestAdapters, elm);\n    });\n\n    let adUnitsS2SCopy = getAdUnitCopyForPrebidServer(adUnits);\n    let tid = utils.generateUUID();\n    adaptersServerSide.forEach(bidderCode => {\n      const bidderRequestId = utils.getUniqueIdentifierStr();\n      const bidderRequest = {\n        bidderCode,\n        auctionId,\n        bidderRequestId,\n        tid,\n        bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': adUnitsS2SCopy, labels}),\n        auctionStart: auctionStart,\n        timeout: _s2sConfig.timeout,\n        src: CONSTANTS.S2S.SRC,\n        refererInfo\n      };\n      if (bidderRequest.bids.length !== 0) {\n        bidRequests.push(bidderRequest);\n      }\n    });\n\n    // update the s2sAdUnits object and remove all bids that didn't pass sizeConfig/label checks from getBids()\n    // this is to keep consistency and only allow bids/adunits that passed the checks to go to pbs\n    adUnitsS2SCopy.forEach((adUnitCopy) => {\n      let validBids = adUnitCopy.bids.filter((adUnitBid) => {\n        return find(bidRequests, request => {\n          return find(request.bids, (reqBid) => reqBid.bidId === adUnitBid.bid_id);\n        });\n      });\n      adUnitCopy.bids = validBids;\n    });\n\n    bidRequests.forEach(request => {\n      request.adUnitsS2SCopy = adUnitsS2SCopy.filter(adUnitCopy => adUnitCopy.bids.length > 0);\n    });\n  }\n\n  // client adapters\n  let adUnitsClientCopy = getAdUnitCopyForClientAdapters(adUnits);\n  clientBidderCodes.forEach(bidderCode => {\n    const bidderRequestId = utils.getUniqueIdentifierStr();\n    const bidderRequest = {\n      bidderCode,\n      auctionId,\n      bidderRequestId,\n      bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': adUnitsClientCopy, labels}),\n      auctionStart: auctionStart,\n      timeout: cbTimeout,\n      refererInfo\n    };\n    const adapter = _bidderRegistry[bidderCode];\n    if (!adapter) {\n      utils.logError(`Trying to make a request for bidder that does not exist: ${bidderCode}`);\n    }\n\n    if (adapter && bidderRequest.bids && bidderRequest.bids.length !== 0) {\n      bidRequests.push(bidderRequest);\n    }\n  });\n\n  if (exports.gdprDataHandler.getConsentData()) {\n    bidRequests.forEach(bidRequest => {\n      bidRequest['gdprConsent'] = exports.gdprDataHandler.getConsentData();\n    });\n  }\n  return bidRequests;\n};\n\nexports.checkBidRequestSizes = (adUnits) => {\n  function isArrayOfNums(val) {\n    return Array.isArray(val) && val.length === 2 && utils.isInteger(val[0]) && utils.isInteger(val[1]);\n  }\n\n  adUnits.forEach((adUnit) => {\n    const mediaTypes = adUnit.mediaTypes;\n    const normalizedSize = utils.getAdUnitSizes(adUnit);\n\n    if (mediaTypes && mediaTypes.banner) {\n      const banner = mediaTypes.banner;\n      if (banner.sizes) {\n        // make sure we always send [[h,w]] format\n        banner.sizes = normalizedSize;\n        adUnit.sizes = normalizedSize;\n      } else {\n        utils.logError('Detected a mediaTypes.banner object did not include sizes.  This is a required field for the mediaTypes.banner object.  Removing invalid mediaTypes.banner object from request.');\n        delete adUnit.mediaTypes.banner;\n      }\n    } else if (adUnit.sizes) {\n      utils.logWarn('Usage of adUnits.sizes will eventually be deprecated.  Please define size dimensions within the corresponding area of the mediaTypes.<object> (eg mediaTypes.banner.sizes).');\n      adUnit.sizes = normalizedSize;\n    }\n\n    if (mediaTypes && mediaTypes.video) {\n      const video = mediaTypes.video;\n      if (video.playerSize) {\n        if (Array.isArray(video.playerSize) && video.playerSize.length === 1 && video.playerSize.every(isArrayOfNums)) {\n          adUnit.sizes = video.playerSize;\n        } else if (isArrayOfNums(video.playerSize)) {\n          let newPlayerSize = [];\n          newPlayerSize.push(video.playerSize);\n          utils.logInfo(`Transforming video.playerSize from ${video.playerSize} to ${newPlayerSize} so it's in the proper format.`);\n          adUnit.sizes = video.playerSize = newPlayerSize;\n        } else {\n          utils.logError('Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request.');\n          delete adUnit.mediaTypes.video.playerSize;\n        }\n      }\n    }\n\n    if (mediaTypes && mediaTypes.native) {\n      const native = mediaTypes.native;\n      if (native.image && native.image.sizes && !Array.isArray(native.image.sizes)) {\n        utils.logError('Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request.');\n        delete adUnit.mediaTypes.native.image.sizes;\n      }\n      if (native.image && native.image.aspect_ratios && !Array.isArray(native.image.aspect_ratios)) {\n        utils.logError('Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request.');\n        delete adUnit.mediaTypes.native.image.aspect_ratios;\n      }\n      if (native.icon && native.icon.sizes && !Array.isArray(native.icon.sizes)) {\n        utils.logError('Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request.');\n        delete adUnit.mediaTypes.native.icon.sizes;\n      }\n    }\n  });\n  return adUnits;\n}\n\nexports.callBids = (adUnits, bidRequests, addBidResponse, doneCb, requestCallbacks, requestBidsTimeout) => {\n  if (!bidRequests.length) {\n    utils.logWarn('callBids executed with no bidRequests.  Were they filtered by labels or sizing?');\n    return;\n  }\n\n  let [clientBidRequests, serverBidRequests] = bidRequests.reduce((partitions, bidRequest) => {\n    partitions[Number(typeof bidRequest.src !== 'undefined' && bidRequest.src === CONSTANTS.S2S.SRC)].push(bidRequest);\n    return partitions;\n  }, [[], []]);\n\n  if (serverBidRequests.length) {\n    // s2s should get the same client side timeout as other client side requests.\n    const s2sAjax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, 's2s'),\n      done: requestCallbacks.done\n    } : undefined);\n    let adaptersServerSide = _s2sConfig.bidders;\n    const s2sAdapter = _bidderRegistry[_s2sConfig.adapter];\n    let tid = serverBidRequests[0].tid;\n    let adUnitsS2SCopy = serverBidRequests[0].adUnitsS2SCopy;\n\n    if (s2sAdapter) {\n      let s2sBidRequest = {tid, 'ad_units': adUnitsS2SCopy};\n      if (s2sBidRequest.ad_units.length) {\n        let doneCbs = serverBidRequests.map(bidRequest => {\n          bidRequest.start = timestamp();\n          return doneCb;\n        });\n\n        // only log adapters that actually have adUnit bids\n        let allBidders = s2sBidRequest.ad_units.reduce((adapters, adUnit) => {\n          return adapters.concat((adUnit.bids || []).reduce((adapters, bid) => { return adapters.concat(bid.bidder) }, []));\n        }, []);\n        utils.logMessage(`CALLING S2S HEADER BIDDERS ==== ${adaptersServerSide.filter(adapter => {\n          return includes(allBidders, adapter);\n        }).join(',')}`);\n\n        // fire BID_REQUESTED event for each s2s bidRequest\n        serverBidRequests.forEach(bidRequest => {\n          events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n        });\n\n        // make bid requests\n        s2sAdapter.callBids(\n          s2sBidRequest,\n          serverBidRequests,\n          addBidResponse,\n          () => doneCbs.forEach(done => done()),\n          s2sAjax\n        );\n      }\n    }\n  }\n\n  // handle client adapter requests\n  clientBidRequests.forEach(bidRequest => {\n    bidRequest.start = timestamp();\n    // TODO : Do we check for bid in pool from here and skip calling adapter again ?\n    const adapter = _bidderRegistry[bidRequest.bidderCode];\n    utils.logMessage(`CALLING BIDDER ======= ${bidRequest.bidderCode}`);\n    events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n    bidRequest.doneCbCallCount = 0;\n    let ajax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, bidRequest.bidderCode),\n      done: requestCallbacks.done\n    } : undefined);\n    adapter.callBids(bidRequest, addBidResponse, doneCb, ajax);\n  });\n}\n\nfunction doingS2STesting() {\n  return _s2sConfig && _s2sConfig.enabled && _s2sConfig.testing && s2sTestingModule;\n}\n\nfunction getSupportedMediaTypes(bidderCode) {\n  let result = [];\n  if (includes(exports.videoAdapters, bidderCode)) result.push('video');\n  if (includes(nativeAdapters, bidderCode)) result.push('native');\n  return result;\n}\n\nexports.videoAdapters = []; // added by adapterLoader for now\n\nexports.registerBidAdapter = function (bidAdaptor, bidderCode, {supportedMediaTypes = []} = {}) {\n  if (bidAdaptor && bidderCode) {\n    if (typeof bidAdaptor.callBids === 'function') {\n      _bidderRegistry[bidderCode] = bidAdaptor;\n\n      if (includes(supportedMediaTypes, 'video')) {\n        exports.videoAdapters.push(bidderCode);\n      }\n      if (includes(supportedMediaTypes, 'native')) {\n        nativeAdapters.push(bidderCode);\n      }\n    } else {\n      utils.logError('Bidder adaptor error for bidder code: ' + bidderCode + 'bidder must implement a callBids() function');\n    }\n  } else {\n    utils.logError('bidAdaptor or bidderCode not specified');\n  }\n};\n\nexports.aliasBidAdapter = function (bidderCode, alias) {\n  let existingAlias = _bidderRegistry[alias];\n\n  if (typeof existingAlias === 'undefined') {\n    let bidAdaptor = _bidderRegistry[bidderCode];\n    if (typeof bidAdaptor === 'undefined') {\n      // check if alias is part of s2sConfig and allow them to register if so (as base bidder may be s2s-only)\n      const s2sConfig = config.getConfig('s2sConfig');\n      const s2sBidders = s2sConfig && s2sConfig.bidders;\n\n      if (!(s2sBidders && includes(s2sBidders, alias))) {\n        utils.logError('bidderCode \"' + bidderCode + '\" is not an existing bidder.', 'adaptermanager.aliasBidAdapter');\n      } else {\n        exports.aliasRegistry[alias] = bidderCode;\n      }\n    } else {\n      try {\n        let newAdapter;\n        let supportedMediaTypes = getSupportedMediaTypes(bidderCode);\n        // Have kept old code to support backward compatibilitiy.\n        // Remove this if loop when all adapters are supporting bidderFactory. i.e When Prebid.js is 1.0\n        if (bidAdaptor.constructor.prototype != Object.prototype) {\n          newAdapter = new bidAdaptor.constructor();\n          newAdapter.setBidderCode(alias);\n        } else {\n          let spec = bidAdaptor.getSpec();\n          newAdapter = newBidder(Object.assign({}, spec, { code: alias }));\n          exports.aliasRegistry[alias] = bidderCode;\n        }\n        this.registerBidAdapter(newAdapter, alias, {\n          supportedMediaTypes\n        });\n      } catch (e) {\n        utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adaptermanager.aliasBidAdapter');\n      }\n    }\n  } else {\n    utils.logMessage('alias name \"' + alias + '\" has been already specified.');\n  }\n};\n\nexports.registerAnalyticsAdapter = function ({adapter, code}) {\n  if (adapter && code) {\n    if (typeof adapter.enableAnalytics === 'function') {\n      adapter.code = code;\n      _analyticsRegistry[code] = adapter;\n    } else {\n      utils.logError(`Prebid Error: Analytics adaptor error for analytics \"${code}\"\n        analytics adapter must implement an enableAnalytics() function`);\n    }\n  } else {\n    utils.logError('Prebid Error: analyticsAdapter or analyticsCode not specified');\n  }\n};\n\nexports.enableAnalytics = function (config) {\n  if (!utils.isArray(config)) {\n    config = [config];\n  }\n\n  utils._each(config, adapterConfig => {\n    var adapter = _analyticsRegistry[adapterConfig.provider];\n    if (adapter) {\n      adapter.enableAnalytics(adapterConfig);\n    } else {\n      utils.logError(`Prebid Error: no analytics adapter found in registry for\n        ${adapterConfig.provider}.`);\n    }\n  });\n};\n\nexports.getBidAdapter = function(bidder) {\n  return _bidderRegistry[bidder];\n};\n\n// the s2sTesting module is injected when it's loaded rather than being imported\n// importing it causes the packager to include it even when it's not explicitly included in the build\nexports.setS2STestingModule = function (module) {\n  s2sTestingModule = module;\n};\n\nfunction tryCallBidderMethod(bidder, method, param) {\n  try {\n    const adapter = _bidderRegistry[bidder];\n    const spec = adapter.getSpec();\n    if (spec && spec[method] && typeof spec[method] === 'function') {\n      utils.logInfo(`Invoking ${bidder}.${method}`);\n      spec[method](param);\n    }\n  } catch (e) {\n    utils.logWarn(`Error calling ${method} of ${bidder}`);\n  }\n}\n\nexports.callTimedOutBidders = function(adUnits, timedOutBidders, cbTimeout) {\n  timedOutBidders = timedOutBidders.map((timedOutBidder) => {\n    // Adding user configured params & timeout to timeout event data\n    timedOutBidder.params = utils.getUserConfiguredParams(adUnits, timedOutBidder.adUnitCode, timedOutBidder.bidder);\n    timedOutBidder.timeout = cbTimeout;\n    return timedOutBidder;\n  });\n  timedOutBidders = utils.groupBy(timedOutBidders, 'bidder');\n\n  Object.keys(timedOutBidders).forEach((bidder) => {\n    tryCallBidderMethod(bidder, 'onTimeout', timedOutBidders[bidder]);\n  });\n}\n\nexports.callBidWonBidder = function(bidder, bid, adUnits) {\n  // Adding user configured params to bidWon event data\n  bid.params = utils.getUserConfiguredParams(adUnits, bid.adUnitCode, bid.bidder);\n  tryCallBidderMethod(bidder, 'onBidWon', bid);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adaptermanager.js","/**\n * events.js\n */\nvar utils = require('./utils');\nvar CONSTANTS = require('./constants');\nvar slice = Array.prototype.slice;\nvar push = Array.prototype.push;\n\n// define entire events\n// var allEvents = ['bidRequested','bidResponse','bidWon','bidTimeout'];\nvar allEvents = utils._map(CONSTANTS.EVENTS, function (v) {\n  return v;\n});\n\nvar idPaths = CONSTANTS.EVENT_ID_PATHS;\n\n// keep a record of all events fired\nvar eventsFired = [];\n\nmodule.exports = (function () {\n  var _handlers = {};\n  var _public = {};\n\n  /**\n   *\n   * @param {String} eventString  The name of the event.\n   * @param {Array} args  The payload emitted with the event.\n   * @private\n   */\n  function _dispatch(eventString, args) {\n    utils.logMessage('Emitting event for: ' + eventString);\n\n    var eventPayload = args[0] || {};\n    var idPath = idPaths[eventString];\n    var key = eventPayload[idPath];\n    var event = _handlers[eventString] || { que: [] };\n    var eventKeys = utils._map(event, function (v, k) {\n      return k;\n    });\n\n    var callbacks = [];\n\n    // record the event:\n    eventsFired.push({\n      eventType: eventString,\n      args: eventPayload,\n      id: key\n    });\n\n    /** Push each specific callback to the `callbacks` array.\n     * If the `event` map has a key that matches the value of the\n     * event payload id path, e.g. `eventPayload[idPath]`, then apply\n     * each function in the `que` array as an argument to push to the\n     * `callbacks` array\n     * */\n    if (key && utils.contains(eventKeys, key)) {\n      push.apply(callbacks, event[key].que);\n    }\n\n    /** Push each general callback to the `callbacks` array. */\n    push.apply(callbacks, event.que);\n\n    /** call each of the callbacks */\n    utils._each(callbacks, function (fn) {\n      if (!fn) return;\n      try {\n        fn.apply(null, args);\n      } catch (e) {\n        utils.logError('Error executing handler:', 'events.js', e);\n      }\n    });\n  }\n\n  function _checkAvailableEvent(event) {\n    return utils.contains(allEvents, event);\n  }\n\n  _public.on = function (eventString, handler, id) {\n    // check whether available event or not\n    if (_checkAvailableEvent(eventString)) {\n      var event = _handlers[eventString] || { que: [] };\n\n      if (id) {\n        event[id] = event[id] || { que: [] };\n        event[id].que.push(handler);\n      } else {\n        event.que.push(handler);\n      }\n\n      _handlers[eventString] = event;\n    } else {\n      utils.logError('Wrong event name : ' + eventString + ' Valid event names :' + allEvents);\n    }\n  };\n\n  _public.emit = function (event) {\n    var args = slice.call(arguments, 1);\n    _dispatch(event, args);\n  };\n\n  _public.off = function (eventString, handler, id) {\n    var event = _handlers[eventString];\n\n    if (utils.isEmpty(event) || (utils.isEmpty(event.que) && utils.isEmpty(event[id]))) {\n      return;\n    }\n\n    if (id && (utils.isEmpty(event[id]) || utils.isEmpty(event[id].que))) {\n      return;\n    }\n\n    if (id) {\n      utils._each(event[id].que, function (_handler) {\n        var que = event[id].que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    } else {\n      utils._each(event.que, function (_handler) {\n        var que = event.que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    }\n\n    _handlers[eventString] = event;\n  };\n\n  _public.get = function () {\n    return _handlers;\n  };\n\n  /**\n   * This method can return a copy of all the events fired\n   * @return {Array} array of events fired\n   */\n  _public.getEvents = function () {\n    var arrayCopy = [];\n    utils._each(eventsFired, function (value) {\n      var newProp = Object.assign({}, value);\n      arrayCopy.push(newProp);\n    });\n\n    return arrayCopy;\n  };\n\n  return _public;\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","import { uniques } from 'src/utils';\nconst { registerBidder } = require('../src/adapters/bidderFactory');\nconst { config } = require('../src/config');\nconst BIDDER_CODE = '33across';\nconst END_POINT = 'https://ssc.33across.com/api/v1/hb';\nconst SYNC_ENDPOINT = 'https://de.tynt.com/deb/v2?m=xch&rt=html';\n\nconst adapterState = {};\n\n// All this assumes that only one bid is ever returned by ttx\nfunction _createBidResponse(response) {\n  return {\n    requestId: response.id,\n    bidderCode: BIDDER_CODE,\n    cpm: response.seatbid[0].bid[0].price,\n    width: response.seatbid[0].bid[0].w,\n    height: response.seatbid[0].bid[0].h,\n    ad: response.seatbid[0].bid[0].adm,\n    ttl: response.seatbid[0].bid[0].ttl || 60,\n    creativeId: response.seatbid[0].bid[0].crid,\n    currency: response.cur,\n    netRevenue: true\n  }\n}\n\n// Infer the necessary data from valid bid for a minimal ttxRequest and create HTTP request\n// NOTE: At this point, TTX only accepts request for a single impression\nfunction _createServerRequest(bidRequest, gdprConsent) {\n  const ttxRequest = {};\n  const params = bidRequest.params;\n\n  /*\n   * Infer data for the request payload\n   */\n  ttxRequest.imp = [];\n  ttxRequest.imp[0] = {\n    banner: {\n      format: bidRequest.sizes.map(_getFormatSize)\n    },\n    ext: {\n      ttx: {\n        prod: params.productId\n      }\n    }\n  }\n  ttxRequest.site = { id: params.siteId };\n\n  // Go ahead send the bidId in request to 33exchange so it's kept track of in the bid response and\n  // therefore in ad targetting process\n  ttxRequest.id = bidRequest.bidId;\n\n  // Set GDPR related fields\n  ttxRequest.user = {\n    ext: {\n      consent: gdprConsent.consentString\n    }\n  }\n  ttxRequest.regs = {\n    ext: {\n      gdpr: (gdprConsent.gdprApplies === true) ? 1 : 0\n    }\n  }\n\n  // Finally, set the openRTB 'test' param if this is to be a test bid\n  if (params.test === 1) {\n    ttxRequest.test = 1;\n  }\n\n  /*\n   * Now construct the full server request\n   */\n  const options = {\n    contentType: 'text/plain',\n    withCredentials: true\n  };\n  // Allow the ability to configure the HB endpoint for testing purposes.\n  const ttxSettings = config.getConfig('ttxSettings');\n  const url = (ttxSettings && ttxSettings.url) || END_POINT;\n\n  // Return the server request\n  return {\n    'method': 'POST',\n    'url': url,\n    'data': JSON.stringify(ttxRequest),\n    'options': options\n  }\n}\n\n// Sync object will always be of type iframe for TTX\nfunction _createSync(siteId) {\n  const ttxSettings = config.getConfig('ttxSettings');\n  const syncUrl = (ttxSettings && ttxSettings.syncUrl) || SYNC_ENDPOINT;\n\n  return {\n    type: 'iframe',\n    url: `${syncUrl}&id=${siteId}`\n  }\n}\n\nfunction _getFormatSize(sizeArr) {\n  return {\n    w: sizeArr[0],\n    h: sizeArr[1],\n    ext: {}\n  }\n}\n\nfunction isBidRequestValid(bid) {\n  if (bid.bidder !== BIDDER_CODE || typeof bid.params === 'undefined') {\n    return false;\n  }\n\n  if (typeof bid.params.siteId === 'undefined' || typeof bid.params.productId === 'undefined') {\n    return false;\n  }\n\n  return true;\n}\n\n// NOTE: With regards to gdrp consent data,\n// - the server independently infers gdpr applicability therefore, setting the default value to false\n// - the server, at this point, also doesn't need the consent string to handle gdpr compliance. So passing\n//    value whether set or not, for the sake of future dev.\nfunction buildRequests(bidRequests, bidderRequest) {\n  const gdprConsent = Object.assign({ consentString: undefined, gdprApplies: false }, bidderRequest && bidderRequest.gdprConsent)\n\n  adapterState.uniqueSiteIds = bidRequests.map(req => req.params.siteId).filter(uniques);\n\n  return bidRequests.map((req) => {\n    return _createServerRequest(req, gdprConsent);\n  });\n}\n\n// NOTE: At this point, the response from 33exchange will only ever contain one bid i.e. the highest bid\nfunction interpretResponse(serverResponse, bidRequest) {\n  const bidResponses = [];\n\n  // If there are bids, look at the first bid of the first seatbid (see NOTE above for assumption about ttx)\n  if (serverResponse.body.seatbid.length > 0 && serverResponse.body.seatbid[0].bid.length > 0) {\n    bidResponses.push(_createBidResponse(serverResponse.body));\n  }\n\n  return bidResponses;\n}\n\n// Register one sync per unique guid\n// NOTE: If gdpr applies do not sync\nfunction getUserSyncs(syncOptions, responses, gdprConsent) {\n  if (gdprConsent && gdprConsent.gdprApplies === true) {\n    return []\n  } else {\n    return (syncOptions.iframeEnabled) ? adapterState.uniqueSiteIds.map(_createSync) : ([]);\n  }\n}\n\nconst spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse,\n  getUserSyncs\n}\n\nregisterBidder(spec);\n\nmodule.exports = spec;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/33acrossBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\n\nconst A4G_BIDDER_CODE = 'a4g';\nconst A4G_CURRENCY = 'USD';\nconst A4G_DEFAULT_BID_URL = '//ads.ad4game.com/v1/bid';\nconst A4G_TTL = 120;\n\nconst LOCATION_PARAM_NAME = 'siteurl';\nconst ID_PARAM_NAME = 'id';\nconst IFRAME_PARAM_NAME = 'if';\nconst ZONE_ID_PARAM_NAME = 'zoneId';\nconst SIZE_PARAM_NAME = 'size';\n\nconst ARRAY_PARAM_SEPARATOR = ';';\nconst ARRAY_SIZE_SEPARATOR = ',';\nconst SIZE_SEPARATOR = 'x';\n\nexport const spec = {\n  code: A4G_BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return bid.params && !!bid.params.zoneId;\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    let deliveryUrl = '';\n    const idParams = [];\n    const sizeParams = [];\n    const zoneIds = [];\n\n    utils._each(validBidRequests, function(bid) {\n      if (!deliveryUrl && typeof bid.params.deliveryUrl === 'string') {\n        deliveryUrl = bid.params.deliveryUrl;\n      }\n      idParams.push(bid.bidId);\n      sizeParams.push(bid.sizes.map(size => size.join(SIZE_SEPARATOR)).join(ARRAY_SIZE_SEPARATOR));\n      zoneIds.push(bid.params.zoneId);\n    });\n\n    if (!deliveryUrl) {\n      deliveryUrl = A4G_DEFAULT_BID_URL;\n    }\n\n    let data = {\n      [IFRAME_PARAM_NAME]: 0,\n      [LOCATION_PARAM_NAME]: utils.getTopWindowUrl(),\n      [SIZE_PARAM_NAME]: sizeParams.join(ARRAY_PARAM_SEPARATOR),\n      [ID_PARAM_NAME]: idParams.join(ARRAY_PARAM_SEPARATOR),\n      [ZONE_ID_PARAM_NAME]: zoneIds.join(ARRAY_PARAM_SEPARATOR)\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      data.gdpr = {\n        applies: bidderRequest.gdprConsent.gdprApplies,\n        consent: bidderRequest.gdprConsent.consentString\n      };\n    }\n\n    return {\n      method: 'GET',\n      url: deliveryUrl,\n      data: data\n    };\n  },\n\n  interpretResponse: function(serverResponses, request) {\n    const bidResponses = [];\n    utils._each(serverResponses.body, function(response) {\n      if (response.cpm > 0) {\n        const bidResponse = {\n          requestId: response.id,\n          creativeId: response.id,\n          adId: response.id,\n          cpm: response.cpm,\n          width: response.width,\n          height: response.height,\n          currency: A4G_CURRENCY,\n          netRevenue: true,\n          ttl: A4G_TTL,\n          ad: response.ad\n        };\n        bidResponses.push(bidResponse);\n      }\n    });\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/a4gBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'aardvark';\nconst DEFAULT_ENDPOINT = 'bidder.rtk.io';\nconst SYNC_ENDPOINT = 'sync.rtk.io';\nconst AARDVARK_TTL = 300;\nconst AARDVARK_CURRENCY = 'USD';\n\nlet hasSynced = false;\n\nexport function resetUserSync() {\n  hasSynced = false;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: function(bid) {\n    return ((typeof bid.params.ai === 'string') && !!bid.params.ai.length &&\n        (typeof bid.params.sc === 'string') && !!bid.params.sc.length);\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    var auctionCodes = [];\n    var requests = [];\n    var requestsMap = {};\n    var referer = utils.getTopWindowUrl();\n    var pageCategories = [];\n\n    if (window.top.rtkcategories && Array.isArray(window.top.rtkcategories)) {\n      pageCategories = window.top.rtkcategories;\n    }\n\n    utils._each(validBidRequests, function(b) {\n      var rMap = requestsMap[b.params.ai];\n      if (!rMap) {\n        rMap = {\n          shortCodes: [],\n          payload: {\n            version: 1,\n            jsonp: false,\n            rtkreferer: referer\n          },\n          endpoint: DEFAULT_ENDPOINT\n        };\n\n        if (pageCategories && pageCategories.length) {\n          rMap.payload.categories = pageCategories.slice(0);\n        }\n\n        if (b.params.categories && b.params.categories.length) {\n          rMap.payload.categories = rMap.payload.categories || []\n          utils._each(b.params.categories, function(cat) {\n            rMap.payload.categories.push(cat);\n          });\n        }\n\n        if (bidderRequest && bidderRequest.gdprConsent) {\n          rMap.payload.gdpr = false;\n          if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n            rMap.payload.gdpr = bidderRequest.gdprConsent.gdprApplies;\n          }\n          if (rMap.payload.gdpr) {\n            rMap.payload.consent = bidderRequest.gdprConsent.consentString;\n          }\n        }\n\n        requestsMap[b.params.ai] = rMap;\n        auctionCodes.push(b.params.ai);\n      }\n\n      rMap.shortCodes.push(b.params.sc);\n      rMap.payload[b.params.sc] = b.bidId;\n\n      if ((typeof b.params.host === 'string') && b.params.host.length &&\n          (b.params.host !== rMap.endpoint)) {\n        rMap.endpoint = b.params.host;\n      }\n    });\n\n    utils._each(auctionCodes, function(auctionId) {\n      var req = requestsMap[auctionId];\n      requests.push({\n        method: 'GET',\n        url: `//${req.endpoint}/${auctionId}/${req.shortCodes.join('_')}/aardvark`,\n        data: req.payload,\n        bidderRequest\n      });\n    });\n\n    return requests;\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    var bidResponses = [];\n\n    if (!Array.isArray(serverResponse.body)) {\n      serverResponse.body = [serverResponse.body];\n    }\n\n    utils._each(serverResponse.body, function(rawBid) {\n      var cpm = +(rawBid.cpm || 0);\n\n      if (!cpm) {\n        return;\n      }\n\n      var bidResponse = {\n        requestId: rawBid.cid,\n        cpm: cpm,\n        width: rawBid.width || 0,\n        height: rawBid.height || 0,\n        currency: rawBid.currency ? rawBid.currency : AARDVARK_CURRENCY,\n        netRevenue: rawBid.netRevenue ? rawBid.netRevenue : true,\n        ttl: rawBid.ttl ? rawBid.ttl : AARDVARK_TTL,\n        creativeId: rawBid.creativeId || 0\n      };\n\n      if (rawBid.hasOwnProperty('dealId')) {\n        bidResponse.dealId = rawBid.dealId\n      }\n\n      switch (rawBid.media) {\n        case 'banner':\n          bidResponse.ad = rawBid.adm + utils.createTrackPixelHtml(decodeURIComponent(rawBid.nurl));\n          break;\n\n        default:\n          return utils.logError('bad Aardvark response (media)', rawBid);\n      }\n\n      bidResponses.push(bidResponse);\n    });\n\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    const syncs = [];\n    var url = '//' + SYNC_ENDPOINT + '/cs';\n    var gdprApplies = false;\n    if (gdprConsent && (typeof gdprConsent.gdprApplies === 'boolean')) {\n      gdprApplies = gdprConsent.gdprApplies;\n    }\n\n    if (syncOptions.iframeEnabled) {\n      if (!hasSynced) {\n        hasSynced = true;\n        if (gdprApplies) {\n          url = url + '?g=1&c=' + encodeURIComponent(gdprConsent.consentString);\n        }\n        syncs.push({\n          type: 'iframe',\n          url: url\n        });\n      }\n    } else {\n      utils.logWarn('Aardvark: Please enable iframe based user sync.');\n    }\n    return syncs;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/aardvarkBidAdapter.js","'use strict';\n\nimport * as utils from 'src/utils';\nimport {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'adbutler';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  pageID: Math.floor(Math.random() * 10e6),\n\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.accountID && bid.params.zoneID);\n  },\n\n  buildRequests: function (validBidRequests) {\n    var i;\n    var zoneID;\n    var bidRequest;\n    var accountID;\n    var keyword;\n    var domain;\n    var requestURI;\n    var serverRequests = [];\n    var zoneCounters = {};\n\n    for (i = 0; i < validBidRequests.length; i++) {\n      bidRequest = validBidRequests[i];\n      zoneID = utils.getBidIdParameter('zoneID', bidRequest.params);\n      accountID = utils.getBidIdParameter('accountID', bidRequest.params);\n      keyword = utils.getBidIdParameter('keyword', bidRequest.params);\n      domain = utils.getBidIdParameter('domain', bidRequest.params);\n\n      if (!(zoneID in zoneCounters)) {\n        zoneCounters[zoneID] = 0;\n      }\n\n      if (typeof domain === 'undefined' || domain.length === 0) {\n        domain = 'servedbyadbutler.com';\n      }\n\n      requestURI = location.protocol + '//' + domain + '/adserve/;type=hbr;';\n      requestURI += 'ID=' + encodeURIComponent(accountID) + ';';\n      requestURI += 'setID=' + encodeURIComponent(zoneID) + ';';\n      requestURI += 'pid=' + encodeURIComponent(spec.pageID) + ';';\n      requestURI += 'place=' + encodeURIComponent(zoneCounters[zoneID]) + ';';\n\n      // append the keyword for targeting if one was passed in\n      if (keyword !== '') {\n        requestURI += 'kw=' + encodeURIComponent(keyword) + ';';\n      }\n\n      zoneCounters[zoneID]++;\n      serverRequests.push({\n        method: 'GET',\n        url: requestURI,\n        data: {},\n        bidRequest: bidRequest\n      });\n    }\n    return serverRequests;\n  },\n\n  interpretResponse: function (serverResponse, bidRequest) {\n    var bidObj = bidRequest.bidRequest;\n    var bidResponses = [];\n    var bidResponse = {};\n    var isCorrectSize = false;\n    var isCorrectCPM = true;\n    var CPM;\n    var minCPM;\n    var maxCPM;\n    var width;\n    var height;\n\n    serverResponse = serverResponse.body;\n    if (serverResponse && serverResponse.status === 'SUCCESS' && bidObj) {\n      CPM = serverResponse.cpm;\n      minCPM = utils.getBidIdParameter('minCPM', bidObj.params);\n      maxCPM = utils.getBidIdParameter('maxCPM', bidObj.params);\n      width = parseInt(serverResponse.width);\n      height = parseInt(serverResponse.height);\n\n      // Ensure response CPM is within the given bounds\n      if (minCPM !== '' && CPM < parseFloat(minCPM)) {\n        isCorrectCPM = false;\n      }\n      if (maxCPM !== '' && CPM > parseFloat(maxCPM)) {\n        isCorrectCPM = false;\n      }\n\n      // Ensure that response ad matches one of the placement sizes.\n      utils._each(bidObj.sizes, function (size) {\n        if (width === size[0] && height === size[1]) {\n          isCorrectSize = true;\n        }\n      });\n      if (isCorrectCPM && isCorrectSize) {\n        bidResponse.requestId = bidObj.bidId;\n        bidResponse.bidderCode = spec.code;\n        bidResponse.creativeId = serverResponse.placement_id;\n        bidResponse.cpm = CPM;\n        bidResponse.width = width;\n        bidResponse.height = height;\n        bidResponse.ad = serverResponse.ad_code;\n        bidResponse.ad += spec.addTrackingPixels(serverResponse.tracking_pixels);\n        bidResponse.currency = 'USD';\n        bidResponse.netRevenue = true;\n        bidResponse.ttl = config.getConfig('_bidderTimeout');\n        bidResponse.referrer = utils.getTopWindowUrl();\n        bidResponses.push(bidResponse);\n      }\n    }\n    return bidResponses;\n  },\n\n  addTrackingPixels: function (trackingPixels) {\n    var trackingPixelMarkup = '';\n    utils._each(trackingPixels, function (pixelURL) {\n      var trackingPixel = '<img height=\"0\" width=\"0\" border=\"0\" style=\"display:none;\" src=\"';\n      trackingPixel += pixelURL;\n      trackingPixel += '\">';\n\n      trackingPixelMarkup += trackingPixel;\n    });\n    return trackingPixelMarkup;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adbutlerBidAdapter.js","'use strict';\n\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'adform';\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [ BANNER, VIDEO ],\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.mid);\n  },\n  buildRequests: function (validBidRequests, bidderRequest) {\n    var i, l, j, k, bid, _key, _value, reqParams, netRevenue, gdprObject;\n    var request = [];\n    var globalParams = [ [ 'adxDomain', 'adx.adform.net' ], [ 'fd', 1 ], [ 'url', null ], [ 'tid', null ] ];\n    var bids = JSON.parse(JSON.stringify(validBidRequests));\n    var bidder = (bids[0] && bids[0].bidder) || BIDDER_CODE\n    for (i = 0, l = bids.length; i < l; i++) {\n      bid = bids[i];\n      if ((bid.params.priceType === 'net') || (bid.params.pt === 'net')) {\n        netRevenue = 'net';\n      }\n      for (j = 0, k = globalParams.length; j < k; j++) {\n        _key = globalParams[j][0];\n        _value = bid[_key] || bid.params[_key];\n        if (_value) {\n          bid[_key] = bid.params[_key] = null;\n          globalParams[j][1] = _value;\n        }\n      }\n      reqParams = bid.params;\n      reqParams.transactionId = bid.transactionId;\n      request.push(formRequestUrl(reqParams));\n    }\n\n    request.unshift('//' + globalParams[0][1] + '/adx/?rp=4');\n    netRevenue = netRevenue || 'gross';\n    request.push('pt=' + netRevenue);\n    request.push('stid=' + validBidRequests[0].auctionId);\n\n    if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.gdprApplies) {\n      gdprObject = {\n        gdpr: bidderRequest.gdprConsent.gdprApplies,\n        gdpr_consent: bidderRequest.gdprConsent.consentString\n      };\n      request.push('gdpr=' + gdprObject.gdpr);\n      request.push('gdpr_consent=' + gdprObject.gdpr_consent);\n    }\n\n    for (i = 1, l = globalParams.length; i < l; i++) {\n      _key = globalParams[i][0];\n      _value = globalParams[i][1];\n      if (_value) {\n        request.push(_key + '=' + encodeURIComponent(_value));\n      }\n    }\n\n    return {\n      method: 'GET',\n      url: request.join('&'),\n      bids: validBidRequests,\n      netRevenue: netRevenue,\n      bidder,\n      gdpr: gdprObject\n    };\n\n    function formRequestUrl(reqData) {\n      var key;\n      var url = [];\n\n      for (key in reqData) {\n        if (reqData.hasOwnProperty(key) && reqData[key]) { url.push(key, '=', reqData[key], '&'); }\n      }\n\n      return encodeURIComponent(btoa(url.join('').slice(0, -1)));\n    }\n  },\n  interpretResponse: function (serverResponse, bidRequest) {\n    const VALID_RESPONSES = {\n      banner: 1,\n      vast_content: 1,\n      vast_url: 1\n    };\n    var bidObject, response, bid, type;\n    var bidRespones = [];\n    var bids = bidRequest.bids;\n    var responses = serverResponse.body;\n    for (var i = 0; i < responses.length; i++) {\n      response = responses[i];\n      type = response.response === 'banner' ? BANNER : VIDEO;\n      bid = bids[i];\n      if (VALID_RESPONSES[response.response] && (verifySize(response, bid.sizes) || type === VIDEO)) {\n        bidObject = {\n          requestId: bid.bidId,\n          cpm: response.win_bid,\n          width: response.width,\n          height: response.height,\n          creativeId: bid.bidId,\n          dealId: response.deal_id,\n          currency: response.win_cur,\n          netRevenue: bidRequest.netRevenue !== 'gross',\n          ttl: 360,\n          ad: response.banner,\n          bidderCode: bidRequest.bidder,\n          transactionId: bid.transactionId,\n          vastUrl: response.vast_url,\n          vastXml: response.vast_content,\n          mediaType: type\n        };\n        if (bidRequest.gdpr) {\n          bidObject.gdpr = bidRequest.gdpr.gdpr;\n          bidObject.gdpr_consent = bidRequest.gdpr.gdpr_consent;\n        }\n        bidRespones.push(bidObject);\n      }\n    }\n    return bidRespones;\n\n    function verifySize(adItem, validSizes) {\n      for (var j = 0, k = validSizes.length; j < k; j++) {\n        if (adItem.width == validSizes[j][0] &&\n            adItem.height == validSizes[j][1]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adformBidAdapter.js","import * as utils from 'src/utils';\n// import {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER, NATIVE} from 'src/mediaTypes';\nconst ADG_BIDDER_CODE = 'adgeneration';\n\nexport const spec = {\n  code: ADG_BIDDER_CODE,\n  aliases: ['adg'], // short code\n  supportedMediaTypes: [BANNER, NATIVE],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.id);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests) {\n    let serverRequests = [];\n    for (let i = 0, len = validBidRequests.length; i < len; i++) {\n      const validReq = validBidRequests[i];\n      const DEBUG_URL = 'http://api-test.scaleout.jp/adsv/v1';\n      const URL = 'https://d.socdm.com/adsv/v1';\n      const url = validReq.params.debug ? DEBUG_URL : URL;\n      let data = ``;\n      data = utils.tryAppendQueryString(data, 'posall', 'SSPLOC');\n      const id = utils.getBidIdParameter('id', validReq.params);\n      data = utils.tryAppendQueryString(data, 'id', id);\n      data = utils.tryAppendQueryString(data, 'sdktype', '0');\n      data = utils.tryAppendQueryString(data, 'hb', 'true');\n      data = utils.tryAppendQueryString(data, 't', 'json3');\n      data = utils.tryAppendQueryString(data, 'transactionid', validReq.transactionId);\n\n      // nativevideo\n      if (!validReq.mediaTypes || !validReq.mediaTypes.native) {\n        data = utils.tryAppendQueryString(data, 'imark', '1');\n      }\n\n      // remove the trailing \"&\"\n      if (data.lastIndexOf('&') === data.length - 1) {\n        data = data.substring(0, data.length - 1);\n      }\n      serverRequests.push({\n        method: 'GET',\n        url: url,\n        data: data,\n        bidRequest: validBidRequests[i]\n      });\n    }\n    return serverRequests;\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @param {BidRequest} bidRequests\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequests) {\n    const body = serverResponse.body;\n    if (!body.results || body.results.length < 1) {\n      return [];\n    }\n    const bidRequest = bidRequests.bidRequest;\n    if (!bidRequest.mediaTypes || bidRequest.mediaTypes.banner) {\n      if (!body.w || !body.h) {\n        return [];\n      }\n    }\n    const bidResponse = {\n      requestId: bidRequest.bidId,\n      cpm: body.cpm || 0,\n      width: body.w ? body.w : 1,\n      height: body.h ? body.h : 1,\n      creativeId: body.creativeid || '',\n      dealId: body.dealid || '',\n      currency: 'JPY',\n      netRevenue: true,\n      ttl: body.ttl || 10,\n      referrer: utils.getTopWindowUrl(),\n    };\n    if (bidRequest.mediaTypes && bidRequest.mediaTypes.native) {\n      bidResponse.native = createNativeAd(body);\n      bidResponse.mediaType = NATIVE;\n    } else {\n      // banner\n      bidResponse.ad = createAd(body, bidRequest);\n    }\n    return [bidResponse];\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function (syncOptions, serverResponses) {\n    const syncs = [];\n    return syncs;\n  }\n};\n\nfunction createAd(body, bidRequest) {\n  let ad = body.ad;\n  if (body.vastxml && body.vastxml.length > 0) {\n    ad = `<body><div id=\"apvad-${bidRequest.bidId}\"></div>${createAPVTag()}${insertVASTMethod(bidRequest.bidId, body.vastxml)}</body>`;\n  }\n  ad = appendChildToBody(ad, body.beacon);\n  if (removeWrapper(ad)) return removeWrapper(ad);\n  return ad;\n}\n\nfunction createNativeAd(body) {\n  let native = {};\n  if (body.native_ad && body.native_ad.assets.length > 0) {\n    const assets = body.native_ad.assets;\n    for (let i = 0, len = assets.length; i < len; i++) {\n      switch (assets[i].id) {\n        case 1:\n          native.title = assets[i].title.text;\n          break;\n        case 2:\n          native.image = {\n            url: assets[i].img.url,\n            height: assets[i].img.h,\n            width: assets[i].img.w,\n          };\n          break;\n        case 3:\n          native.icon = {\n            url: assets[i].img.url,\n            height: assets[i].img.h,\n            width: assets[i].img.w,\n          };\n          break;\n        case 4:\n          native.sponsoredBy = assets[i].data.value;\n          break;\n        case 5:\n          native.body = assets[i].data.value;\n          break;\n        case 6:\n          native.cta = assets[i].data.value;\n          break;\n      }\n    }\n    native.clickUrl = body.native_ad.link.url;\n    native.clickTrackers = body.native_ad.link.clicktrackers || [];\n    native.impressionTrackers = body.native_ad.imptrackers || [];\n    if (body.beaconurl && body.beaconurl != '') {\n      native.impressionTrackers.push(body.beaconurl)\n    }\n  }\n  return native;\n}\n\nfunction appendChildToBody(ad, data) {\n  return ad.replace(/<\\/\\s?body>/, `${data}</body>`);\n}\n\nfunction createAPVTag() {\n  const APVURL = 'https://cdn.apvdr.com/js/VideoAd.min.js';\n  let apvScript = document.createElement('script');\n  apvScript.type = 'text/javascript';\n  apvScript.id = 'apv';\n  apvScript.src = APVURL;\n  return apvScript.outerHTML;\n}\n\nfunction insertVASTMethod(targetId, vastXml) {\n  let apvVideoAdParam = {\n    s: targetId\n  };\n  let script = document.createElement(`script`);\n  script.type = 'text/javascript';\n  script.innerHTML = `(function(){ new APV.VideoAd(${JSON.stringify(apvVideoAdParam)}).load('${vastXml.replace(/\\r?\\n/g, '')}'); })();`;\n  return script.outerHTML;\n}\n\n/**\n *\n * @param ad\n */\nfunction removeWrapper(ad) {\n  const bodyIndex = ad.indexOf('<body>');\n  const lastBodyIndex = ad.lastIndexOf('</body>');\n  if (bodyIndex === -1 || lastBodyIndex === -1) return false;\n  return ad.substr(bodyIndex, lastBodyIndex).replace('<body>', '').replace('</body>', '');\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adgenerationBidAdapter.js","import CONSTANTS from './constants';\nimport { ajax } from './ajax';\n\nconst events = require('./events');\nconst utils = require('./utils');\n\nconst {\n  EVENTS: {\n    AUCTION_INIT,\n    AUCTION_END,\n    BID_REQUESTED,\n    BID_TIMEOUT,\n    BID_RESPONSE,\n    BID_WON,\n    BID_ADJUSTMENT,\n    BIDDER_DONE,\n    SET_TARGETING,\n    AD_RENDER_FAILED\n  }\n} = CONSTANTS;\n\nconst ENDPOINT = 'endpoint';\nconst BUNDLE = 'bundle';\n\nvar _sampled = true;\n\nexport default function AnalyticsAdapter({ url, analyticsType, global, handler }) {\n  var _queue = [];\n  var _eventCount = 0;\n  var _enableCheck = true;\n  var _handlers;\n\n  if (analyticsType === ENDPOINT || BUNDLE) {\n    _emptyQueue();\n  }\n\n  return {\n    track: _track,\n    enqueue: _enqueue,\n    enableAnalytics: _enable,\n    disableAnalytics: _disable,\n    getAdapterType: () => analyticsType,\n    getGlobal: () => global,\n    getHandler: () => handler,\n    getUrl: () => url\n  };\n\n  function _track({ eventType, args }) {\n    if (this.getAdapterType() === BUNDLE) {\n      window[global](handler, eventType, args);\n    }\n\n    if (this.getAdapterType() === ENDPOINT) {\n      _callEndpoint(...arguments);\n    }\n  }\n\n  function _callEndpoint({ eventType, args, callback }) {\n    ajax(url, callback, JSON.stringify({ eventType, args }));\n  }\n\n  function _enqueue({ eventType, args }) {\n    const _this = this;\n\n    if (global && window[global] && eventType && args) {\n      this.track({ eventType, args });\n    } else {\n      _queue.push(function () {\n        _eventCount++;\n        _this.track({ eventType, args });\n      });\n    }\n  }\n\n  function _enable(config) {\n    var _this = this;\n\n    if (typeof config === 'object' && typeof config.options === 'object') {\n      _sampled = typeof config.options.sampling === 'undefined' || Math.random() < parseFloat(config.options.sampling);\n    } else {\n      _sampled = true;\n    }\n\n    if (_sampled) {\n      // first send all events fired before enableAnalytics called\n      events.getEvents().forEach(event => {\n        if (!event) {\n          return;\n        }\n\n        const { eventType, args } = event;\n\n        if (eventType !== BID_TIMEOUT) {\n          _enqueue.call(_this, { eventType, args });\n        }\n      });\n\n      // Next register event listeners to send data immediately\n\n      _handlers = {\n        [BID_REQUESTED]: args => this.enqueue({ eventType: BID_REQUESTED, args }),\n        [BID_RESPONSE]: args => this.enqueue({ eventType: BID_RESPONSE, args }),\n        [BID_TIMEOUT]: args => this.enqueue({ eventType: BID_TIMEOUT, args }),\n        [BID_WON]: args => this.enqueue({ eventType: BID_WON, args }),\n        [BID_ADJUSTMENT]: args => this.enqueue({ eventType: BID_ADJUSTMENT, args }),\n        [BIDDER_DONE]: args => this.enqueue({ eventType: BIDDER_DONE, args }),\n        [SET_TARGETING]: args => this.enqueue({ eventType: SET_TARGETING, args }),\n        [AUCTION_END]: args => this.enqueue({ eventType: AUCTION_END, args }),\n        [AD_RENDER_FAILED]: args => this.enqueue({ eventType: AD_RENDER_FAILED, args }),\n        [AUCTION_INIT]: args => {\n          args.config = typeof config === 'object' ? config.options || {} : {}; // enableAnaltyics configuration object\n          this.enqueue({ eventType: AUCTION_INIT, args });\n        }\n      };\n\n      utils._each(_handlers, (handler, event) => {\n        events.on(event, handler);\n      });\n    } else {\n      utils.logMessage(`Analytics adapter for \"${global}\" disabled by sampling`);\n    }\n\n    // finally set this function to return log message, prevents multiple adapter listeners\n    this._oldEnable = this.enableAnalytics;\n    this.enableAnalytics = function _enable() {\n      return utils.logMessage(`Analytics adapter for \"${global}\" already enabled, unnecessary call to \\`enableAnalytics\\`.`);\n    };\n  }\n\n  function _disable() {\n    utils._each(_handlers, (handler, event) => {\n      events.off(event, handler);\n    });\n    this.enableAnalytics = this._oldEnable ? this._oldEnable : _enable;\n  }\n\n  function _emptyQueue() {\n    if (_enableCheck) {\n      for (var i = 0; i < _queue.length; i++) {\n        _queue[i]();\n      }\n\n      // override push to execute the command immediately from now on\n      _queue.push = function (fn) {\n        fn();\n      };\n\n      _enableCheck = false;\n    }\n\n    utils.logMessage(`event count sent to ${global}: ${_eventCount}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/AnalyticsAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport CONSTANTS from 'src/constants.json';\nimport adaptermanager from 'src/adaptermanager';\nimport {parse} from 'src/url';\nimport * as utils from 'src/utils';\nimport {ajax} from 'src/ajax';\n\nconst ANALYTICS_VERSION = '1.0.0';\nconst DEFAULT_QUEUE_TIMEOUT = 4000;\nconst DEFAULT_HOST = 'tag.adkernel.com';\n\nconst ADK_HB_EVENTS = {\n  AUCTION_INIT: 'auctionInit',\n  BID_REQUEST: 'bidRequested',\n  BID_RESPONSE: 'bidResponse',\n  BID_WON: 'bidWon',\n  AUCTION_END: 'auctionEnd',\n  TIMEOUT: 'adapterTimedOut'\n};\n\nfunction buildRequestTemplate(pubId) {\n  const url = utils.getTopWindowUrl();\n  const ref = utils.getTopWindowReferrer();\n  const topLocation = utils.getTopWindowLocation();\n\n  return {\n    ver: ANALYTICS_VERSION,\n    domain: topLocation.hostname,\n    path: topLocation.pathname,\n    accId: pubId,\n    env: {\n      screen: {\n        w: window.screen.width,\n        h: window.screen.height\n      },\n      lang: navigator.language\n    },\n    src: getUmtSource(url, ref)\n  }\n}\n\nlet analyticsAdapter = Object.assign(adapter({analyticsType: 'endpoint'}),\n  {\n    track({ eventType, args }) {\n      if (!analyticsAdapter.context) {\n        return;\n      }\n      let handler = null;\n      switch (eventType) {\n        case CONSTANTS.EVENTS.AUCTION_INIT:\n          if (analyticsAdapter.context.queue) {\n            analyticsAdapter.context.queue.init();\n          }\n          handler = trackAuctionInit;\n          break;\n        case CONSTANTS.EVENTS.BID_REQUESTED:\n          handler = trackBidRequest;\n          break;\n        case CONSTANTS.EVENTS.BID_RESPONSE:\n          handler = trackBidResponse;\n          break;\n        case CONSTANTS.EVENTS.BID_WON:\n          handler = trackBidWon;\n          break;\n        case CONSTANTS.EVENTS.BID_TIMEOUT:\n          handler = trackBidTimeout;\n          break;\n        case CONSTANTS.EVENTS.AUCTION_END:\n          handler = trackAuctionEnd;\n          break;\n      }\n      if (handler) {\n        let events = handler(args);\n        if (analyticsAdapter.context.queue) {\n          analyticsAdapter.context.queue.push(events);\n        }\n        if (eventType === CONSTANTS.EVENTS.AUCTION_END) {\n          sendAll();\n        }\n      }\n    }\n  });\n\nanalyticsAdapter.context = {};\n\nanalyticsAdapter.originEnableAnalytics = analyticsAdapter.enableAnalytics;\n\nanalyticsAdapter.enableAnalytics = (config) => {\n  if (!config.options.pubId) {\n    utils.logError('PubId is not defined. Analytics won\\'t work');\n    return;\n  }\n  analyticsAdapter.context = {\n    host: config.options.host || DEFAULT_HOST,\n    pubId: config.options.pubId,\n    requestTemplate: buildRequestTemplate(config.options.pubId),\n    queue: new ExpiringQueue(sendAll, config.options.queueTimeout || DEFAULT_QUEUE_TIMEOUT)\n  };\n  analyticsAdapter.originEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: analyticsAdapter,\n  code: 'adkernelAdn'\n});\n\nexport default analyticsAdapter;\n\nfunction sendAll() {\n  let events = analyticsAdapter.context.queue.popAll();\n  if (events.length !== 0) {\n    let req = Object.assign({}, analyticsAdapter.context.requestTemplate, {hb_ev: events});\n    ajax(`//${analyticsAdapter.context.host}/hb-analytics`, () => {\n    }, JSON.stringify(req));\n  }\n}\n\nfunction trackAuctionInit() {\n  analyticsAdapter.context.auctionTimeStart = Date.now();\n  const event = createHbEvent(undefined, ADK_HB_EVENTS.AUCTION_INIT);\n  return [event];\n}\n\nfunction trackBidRequest(args) {\n  return args.bids.map(bid =>\n    createHbEvent(args.bidderCode, ADK_HB_EVENTS.BID_REQUEST, bid.adUnitCode));\n}\n\nfunction trackBidResponse(args) {\n  const event = createHbEvent(args.bidderCode, ADK_HB_EVENTS.BID_RESPONSE,\n    args.adUnitCode, args.cpm, args.timeToRespond / 1000);\n  return [event];\n}\n\nfunction trackBidWon(args) {\n  const event = createHbEvent(args.bidderCode, ADK_HB_EVENTS.BID_WON, args.adUnitCode, args.cpm);\n  return [event];\n}\n\nfunction trackAuctionEnd(args) {\n  const event = createHbEvent(undefined, ADK_HB_EVENTS.AUCTION_END, undefined,\n    undefined, (Date.now() - analyticsAdapter.context.auctionTimeStart) / 1000);\n  return [event];\n}\n\nfunction trackBidTimeout(args) {\n  return args.map(bidderName => createHbEvent(bidderName, ADK_HB_EVENTS.TIMEOUT));\n}\n\nfunction createHbEvent(adapter, event, tagid = undefined, value = 0, time = 0) {\n  let ev = { event: event };\n  if (adapter) {\n    ev.adapter = adapter\n  }\n  if (tagid) {\n    ev.tagid = tagid;\n  }\n  if (value) {\n    ev.val = value;\n  }\n  if (time) {\n    ev.time = time;\n  }\n  return ev;\n}\n\nconst UTM_TAGS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content',\n  'utm_c1', 'utm_c2', 'utm_c3', 'utm_c4', 'utm_c5'];\nconst ADKERNEL_PREBID_KEY = 'adk_dpt_analytics';\nconst DIRECT = '(direct)';\nconst REFERRAL = '(referral)';\nconst ORGANIC = '(organic)';\n\nexport let storage = {\n  getItem: (name) => {\n    return localStorage.getItem(name);\n  },\n  setItem: (name, value) => {\n    localStorage.setItem(name, value);\n  }\n};\n\nexport function getUmtSource(pageUrl, referrer) {\n  let prevUtm = getPreviousTrafficSource();\n  let currUtm = getCurrentTrafficSource(pageUrl, referrer);\n  let [updated, actual] = chooseActualUtm(prevUtm, currUtm);\n  if (updated) {\n    storeUtm(actual);\n  }\n  return actual;\n\n  function getPreviousTrafficSource() {\n    let val = storage.getItem(ADKERNEL_PREBID_KEY);\n    if (!val) {\n      return getDirect();\n    }\n    return JSON.parse(val);\n  }\n\n  function getCurrentTrafficSource(pageUrl, referrer) {\n    var source = getUTM(pageUrl);\n    if (source) {\n      return source;\n    }\n    if (referrer) {\n      let se = getSearchEngine(referrer);\n      if (se) {\n        return asUtm(se, ORGANIC, ORGANIC);\n      }\n      let parsedUrl = parse(pageUrl);\n      let [refHost, refPath] = getReferrer(referrer);\n      if (refHost && refHost !== parsedUrl.hostname) {\n        return asUtm(refHost, REFERRAL, REFERRAL, '', refPath);\n      }\n    }\n    return getDirect();\n  }\n\n  function getSearchEngine(pageUrl) {\n    let engines = {\n      'google': /^https?\\:\\/\\/(?:www\\.)?(?:google\\.(?:com?\\.)?(?:com|cat|[a-z]{2})|g.cn)\\//i,\n      'yandex': /^https?\\:\\/\\/(?:www\\.)?ya(?:ndex\\.(?:com|net)?\\.?(?:asia|mobi|org|[a-z]{2})?|\\.ru)\\//i,\n      'bing': /^https?\\:\\/\\/(?:www\\.)?bing\\.com\\//i,\n      'duckduckgo': /^https?\\:\\/\\/(?:www\\.)?duckduckgo\\.com\\//i,\n      'ask': /^https?\\:\\/\\/(?:www\\.)?ask\\.com\\//i,\n      'yahoo': /^https?\\:\\/\\/(?:[-a-z]+\\.)?(?:search\\.)?yahoo\\.com\\//i\n    };\n\n    for (let engine in engines) {\n      if (engines.hasOwnProperty(engine) && engines[engine].test(pageUrl)) {\n        return engine;\n      }\n    }\n  }\n\n  function getReferrer(referrer) {\n    let ref = parse(referrer);\n    return [ref.hostname, ref.pathname];\n  }\n\n  function getUTM(pageUrl) {\n    let urlParameters = parse(pageUrl).search;\n    if (!urlParameters['utm_campaign'] || !urlParameters['utm_source']) {\n      return;\n    }\n    let utmArgs = [];\n    utils._each(UTM_TAGS, (utmTagName) => {\n      let utmValue = urlParameters[utmTagName] || '';\n      utmArgs.push(utmValue);\n    });\n    return asUtm.apply(this, utmArgs);\n  }\n\n  function getDirect() {\n    return asUtm(DIRECT, DIRECT, DIRECT);\n  }\n\n  function storeUtm(utm) {\n    let val = JSON.stringify(utm);\n    storage.setItem(ADKERNEL_PREBID_KEY, val);\n  }\n\n  function asUtm(source, medium, campaign, term = '', content = '', c1 = '', c2 = '', c3 = '', c4 = '', c5 = '') {\n    let result = {\n      source: source,\n      medium: medium,\n      campaign: campaign\n    };\n    if (term) {\n      result.term = term;\n    }\n    if (content) {\n      result.content = content;\n    }\n    if (c1) {\n      result.c1 = c1;\n    }\n    if (c2) {\n      result.c2 = c2;\n    }\n    if (c3) {\n      result.c3 = c3;\n    }\n    if (c4) {\n      result.c4 = c4;\n    }\n    if (c5) {\n      result.c5 = c5;\n    }\n    return result;\n  }\n\n  function chooseActualUtm(prev, curr) {\n    if (ord(prev) < ord(curr)) {\n      return [true, curr];\n    } if (ord(prev) > ord(curr)) {\n      return [false, prev];\n    } else {\n      if (prev.campaign === REFERRAL && prev.content !== curr.content) {\n        return [true, curr];\n      } else if (prev.campaign === ORGANIC && prev.source !== curr.source) {\n        return [true, curr];\n      } else if (isCampaignTraffic(prev) && (prev.campaign !== curr.campaign || prev.source !== curr.source)) {\n        return [true, curr];\n      }\n    }\n    return [false, prev];\n  }\n\n  function ord(utm) {\n    switch (utm.campaign) {\n      case DIRECT:\n        return 0;\n      case ORGANIC:\n        return 1;\n      case REFERRAL:\n        return 2;\n      default:\n        return 3;\n    }\n  }\n\n  function isCampaignTraffic(utm) {\n    return [DIRECT, REFERRAL, ORGANIC].indexOf(utm.campaign) === -1;\n  }\n}\n\n/**\n * Expiring queue implementation. Fires callback on elapsed timeout since last last update or creation.\n * @param callback\n * @param ttl\n * @constructor\n */\nexport function ExpiringQueue(callback, ttl) {\n  let queue = [];\n  let timeoutId;\n\n  this.push = (event) => {\n    if (event instanceof Array) {\n      queue.push.apply(queue, event);\n    } else {\n      queue.push(event);\n    }\n    reset();\n  };\n\n  this.popAll = () => {\n    let result = queue;\n    queue = [];\n    reset();\n    return result;\n  };\n\n  /**\n   * For test/debug purposes only\n   * @return {Array}\n   */\n  this.peekAll = () => {\n    return queue;\n  };\n\n  this.init = reset;\n\n  function reset() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      if (queue.length) {\n        callback();\n      }\n    }, ttl);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adkernelAdnAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER, VIDEO} from 'src/mediaTypes';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst DEFAULT_ADKERNEL_DSP_DOMAIN = 'tag.adkernel.com';\nconst VIDEO_TARGETING = ['mimes', 'protocols', 'api'];\nconst DEFAULT_MIMES = ['video/mp4', 'video/webm', 'application/x-shockwave-flash', 'application/javascript'];\nconst DEFAULT_PROTOCOLS = [2, 3, 5, 6];\nconst DEFAULT_APIS = [1, 2];\n\nfunction isRtbDebugEnabled() {\n  return utils.getTopWindowLocation().href.indexOf('adk_debug=true') !== -1;\n}\n\nfunction buildImp(bidRequest) {\n  let imp = {\n    id: bidRequest.bidId,\n    tagid: bidRequest.adUnitCode\n  };\n  if (bidRequest.mediaType === BANNER || utils.deepAccess(bidRequest, `mediaTypes.banner`) ||\n    (bidRequest.mediaTypes === undefined && bidRequest.mediaType === undefined)) {\n    let sizes = canonicalizeSizesArray(bidRequest.sizes);\n    imp.banner = {\n      format: utils.parseSizesInput(sizes)\n    }\n  } else if (bidRequest.mediaType === VIDEO || utils.deepAccess(bidRequest, `mediaTypes.video`)) {\n    let size = canonicalizeSizesArray(bidRequest.sizes)[0];\n    imp.video = {\n      w: size[0],\n      h: size[1],\n      mimes: DEFAULT_MIMES,\n      protocols: DEFAULT_PROTOCOLS,\n      api: DEFAULT_APIS\n    };\n    if (bidRequest.params.video) {\n      Object.keys(bidRequest.params.video)\n        .filter(param => includes(VIDEO_TARGETING, param))\n        .forEach(param => imp.video[param] = bidRequest.params.video[param]);\n    }\n  }\n  return imp;\n}\n\n/**\n * Convert input array of sizes to canonical form Array[Array[Number]]\n * @param sizes\n * @return Array[Array[Number]]\n */\nfunction canonicalizeSizesArray(sizes) {\n  if (sizes.length === 2 && !utils.isArray(sizes[0])) {\n    return [sizes];\n  }\n  return sizes;\n}\n\nfunction buildRequestParams(tags, auctionId, transactionId, gdprConsent) {\n  let req = {\n    id: auctionId,\n    tid: transactionId,\n    site: buildSite(),\n    imp: tags\n  };\n\n  if (gdprConsent && (gdprConsent.gdprApplies !== undefined || gdprConsent.consentString !== undefined)) {\n    req.user = {};\n    if (gdprConsent.gdprApplies !== undefined) {\n      req.user.gdpr = ~~(gdprConsent.gdprApplies);\n    }\n    if (gdprConsent.consentString !== undefined) {\n      req.user.consent = gdprConsent.consentString;\n    }\n  }\n  return req;\n}\n\nfunction buildSite() {\n  let loc = utils.getTopWindowLocation();\n  let result = {\n    page: loc.href,\n    ref: utils.getTopWindowReferrer(),\n    secure: ~~(loc.protocol === 'https:')\n  };\n  let keywords = document.getElementsByTagName('meta')['keywords'];\n  if (keywords && keywords.content) {\n    result.keywords = keywords.content;\n  }\n  return result;\n}\n\nfunction buildBid(tag) {\n  let bid = {\n    requestId: tag.impid,\n    bidderCode: spec.code,\n    cpm: tag.bid,\n    width: tag.w,\n    height: tag.h,\n    creativeId: tag.crid,\n    currency: 'USD',\n    ttl: 720,\n    netRevenue: true\n  };\n  if (tag.tag) {\n    bid.ad = `<!DOCTYPE html><html><head><title></title><body style='margin:0px;padding:0px;'>${tag.tag}</body></head>`;\n    bid.mediaType = BANNER;\n  } else if (tag.vast_url) {\n    bid.vastUrl = tag.vast_url;\n    bid.mediaType = VIDEO;\n  }\n  return bid;\n}\n\nexport const spec = {\n  code: 'adkernelAdn',\n  supportedMediaTypes: [BANNER, VIDEO],\n\n  isBidRequestValid: function(bidRequest) {\n    return 'params' in bidRequest && (typeof bidRequest.params.host === 'undefined' || typeof bidRequest.params.host === 'string') &&\n      typeof bidRequest.params.pubId === 'number';\n  },\n\n  buildRequests: function(bidRequests, bidderRequest) {\n    let dispatch = bidRequests.map(buildImp)\n      .reduce((acc, curr, index) => {\n        let bidRequest = bidRequests[index];\n        let pubId = bidRequest.params.pubId;\n        let host = bidRequest.params.host || DEFAULT_ADKERNEL_DSP_DOMAIN;\n        acc[host] = acc[host] || {};\n        acc[host][pubId] = acc[host][pubId] || [];\n        acc[host][pubId].push(curr);\n        return acc;\n      }, {});\n    let auctionId = bidderRequest.auctionId;\n    let gdprConsent = bidderRequest.gdprConsent;\n    let transactionId = bidderRequest.transactionId;\n    let requests = [];\n    Object.keys(dispatch).forEach(host => {\n      Object.keys(dispatch[host]).forEach(pubId => {\n        let request = buildRequestParams(dispatch[host][pubId], auctionId, transactionId, gdprConsent);\n        requests.push({\n          method: 'POST',\n          url: `//${host}/tag?account=${pubId}&pb=1${isRtbDebugEnabled() ? '&debug=1' : ''}`,\n          data: JSON.stringify(request)\n        })\n      });\n    });\n    return requests;\n  },\n\n  interpretResponse: function(serverResponse) {\n    let response = serverResponse.body;\n    if (!response.tags) {\n      return [];\n    }\n    if (response.debug) {\n      utils.logInfo(`ADKERNEL DEBUG:\\n${response.debug}`);\n    }\n    return response.tags.map(buildBid);\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (!syncOptions.iframeEnabled || !serverResponses || serverResponses.length === 0) {\n      return [];\n    }\n    return serverResponses.filter(rps => rps.body && rps.body.syncpages)\n      .map(rsp => rsp.body.syncpages)\n      .reduce((a, b) => a.concat(b), [])\n      .map(syncUrl => ({type: 'iframe', url: syncUrl}));\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adkernelAdnBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst VIDEO_TARGETING = ['mimes', 'minduration', 'maxduration', 'protocols',\n  'startdelay', 'linearity', 'boxingallowed', 'playbackmethod', 'delivery',\n  'pos', 'api', 'ext'];\nconst VERSION = '1.3';\n\n/**\n * Adapter for requesting bids from AdKernel white-label display platform\n */\nexport const spec = {\n\n  code: 'adkernel',\n  aliases: ['headbidding'],\n  supportedMediaTypes: [BANNER, VIDEO],\n  isBidRequestValid: function(bidRequest) {\n    return 'params' in bidRequest && typeof bidRequest.params.host !== 'undefined' &&\n      'zoneId' in bidRequest.params && !isNaN(Number(bidRequest.params.zoneId));\n  },\n  buildRequests: function(bidRequests, bidderRequest) {\n    let impDispatch = dispatchImps(bidRequests);\n    const gdprConsent = bidderRequest.gdprConsent;\n    const auctionId = bidderRequest.auctionId;\n    const requests = [];\n    Object.keys(impDispatch).forEach(host => {\n      Object.keys(impDispatch[host]).forEach(zoneId => {\n        const request = buildRtbRequest(impDispatch[host][zoneId], auctionId, gdprConsent);\n        requests.push({\n          method: 'GET',\n          url: `${window.location.protocol}//${host}/rtbg`,\n          data: {\n            zone: Number(zoneId),\n            ad_type: 'rtb',\n            v: VERSION,\n            r: JSON.stringify(request)\n          }\n        });\n      });\n    });\n    return requests;\n  },\n  interpretResponse: function(serverResponse, request) {\n    let response = serverResponse.body;\n    if (!response.seatbid) {\n      return [];\n    }\n\n    let rtbRequest = JSON.parse(request.data.r);\n    let rtbImps = rtbRequest.imp;\n    let rtbBids = response.seatbid\n      .map(seatbid => seatbid.bid)\n      .reduce((a, b) => a.concat(b), []);\n\n    return rtbBids.map(rtbBid => {\n      let imp = find(rtbImps, imp => imp.id === rtbBid.impid);\n      let prBid = {\n        requestId: rtbBid.impid,\n        cpm: rtbBid.price,\n        creativeId: rtbBid.crid,\n        currency: 'USD',\n        ttl: 360,\n        netRevenue: true\n      };\n      if ('banner' in imp) {\n        prBid.mediaType = BANNER;\n        prBid.width = rtbBid.w;\n        prBid.height = rtbBid.h;\n        prBid.ad = formatAdMarkup(rtbBid);\n      }\n      if ('video' in imp) {\n        prBid.mediaType = VIDEO;\n        prBid.vastUrl = rtbBid.nurl;\n        prBid.width = imp.video.w;\n        prBid.height = imp.video.h;\n      }\n      return prBid;\n    });\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (!syncOptions.iframeEnabled || !serverResponses || serverResponses.length === 0) {\n      return [];\n    }\n    return serverResponses.filter(rsp => rsp.body && rsp.body.ext && rsp.body.ext.adk_usersync)\n      .map(rsp => rsp.body.ext.adk_usersync)\n      .reduce((a, b) => a.concat(b), [])\n      .map(syncUrl => ({type: 'iframe', url: syncUrl}));\n  }\n};\n\nregisterBidder(spec);\n\n/**\n *  Dispatch impressions by ad network host and zone\n */\nfunction dispatchImps(bidRequests) {\n  return bidRequests.map(buildImp)\n    .reduce((acc, curr, index) => {\n      let bidRequest = bidRequests[index];\n      let zoneId = bidRequest.params.zoneId;\n      let host = bidRequest.params.host;\n      acc[host] = acc[host] || {};\n      acc[host][zoneId] = acc[host][zoneId] || [];\n      acc[host][zoneId].push(curr);\n      return acc;\n    }, {});\n}\n\n/**\n *  Builds parameters object for single impression\n */\nfunction buildImp(bidRequest) {\n  const imp = {\n    'id': bidRequest.bidId,\n    'tagid': bidRequest.adUnitCode\n  };\n\n  if (bidRequest.mediaType === BANNER || utils.deepAccess(bidRequest, `mediaTypes.banner`) ||\n    (bidRequest.mediaTypes === undefined && bidRequest.mediaType === undefined)) {\n    let sizes = canonicalizeSizesArray(bidRequest.sizes);\n    imp.banner = {\n      format: sizes.map(s => ({'w': s[0], 'h': s[1]})),\n      topframe: 0\n    };\n  } else if (bidRequest.mediaType === VIDEO || utils.deepAccess(bidRequest, 'mediaTypes.video')) {\n    let size = canonicalizeSizesArray(bidRequest.sizes)[0];\n    imp.video = {\n      w: size[0],\n      h: size[1]\n    };\n    if (bidRequest.params.video) {\n      Object.keys(bidRequest.params.video)\n        .filter(param => includes(VIDEO_TARGETING, param))\n        .forEach(param => imp.video[param] = bidRequest.params.video[param]);\n    }\n  }\n  if (utils.getTopWindowLocation().protocol === 'https:') {\n    imp.secure = 1;\n  }\n  return imp;\n}\n\n/**\n * Convert input array of sizes to canonical form Array[Array[Number]]\n * @param sizes\n * @return Array[Array[Number]]\n */\nfunction canonicalizeSizesArray(sizes) {\n  if (sizes.length == 2 && !utils.isArray(sizes[0])) {\n    return [sizes];\n  }\n  return sizes;\n}\n\n/**\n * Builds complete rtb request\n * @param imps collection of impressions\n * @param auctionId\n * @param gdprConsent\n */\nfunction buildRtbRequest(imps, auctionId, gdprConsent) {\n  let req = {\n    'id': auctionId,\n    'imp': imps,\n    'site': createSite(),\n    'at': 1,\n    'device': {\n      'ip': 'caller',\n      'ua': 'caller',\n      'js': 1,\n      'language': getLanguage()\n    },\n    'ext': {\n      'adk_usersync': 1\n    }\n  };\n  if (utils.getDNT()) {\n    req.device.dnt = 1;\n  }\n  if (gdprConsent && gdprConsent.gdprApplies !== undefined) {\n    req.regs = {ext: {gdpr: Number(gdprConsent.gdprApplies)}};\n  }\n  if (gdprConsent && gdprConsent.consentString !== undefined) {\n    req.user = {ext: {consent: gdprConsent.consentString}};\n  }\n  return req;\n}\n\nfunction getLanguage() {\n  const language = navigator.language ? 'language' : 'userLanguage';\n  return navigator[language].split('-')[0];\n}\n\n/**\n * Creates site description object\n */\nfunction createSite() {\n  var location = utils.getTopWindowLocation();\n  return {\n    'domain': location.hostname,\n    'page': location.href.split('?')[0]\n  };\n}\n\n/**\n *  Format creative with optional nurl call\n *  @param bid rtb Bid object\n */\nfunction formatAdMarkup(bid) {\n  var adm = bid.adm;\n  if ('nurl' in bid) {\n    adm += utils.createTrackPixelHtml(`${bid.nurl}&px=1`);\n  }\n  return `<!DOCTYPE html><html><head><title></title><body style='margin:0px;padding:0px;'>${adm}</body></head>`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adkernelBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'admatic';\nconst ENDPOINT_URL = '//ads4.admatic.com.tr/prebid/v3/bidrequest';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['admatic'], // short code\n  /**\n  * Determines whether or not the given bid request is valid.\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.pid && bid.params.wid && bid.params.url);\n  },\n  /**\n  * Make a server request from the list of BidRequests.\n  *\n  * @param {validBidRequests[]} - an array of bids\n  * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: function (validBidRequests) {\n    const payload = {\n      request: []\n    };\n\n    for (var i = 0; i < validBidRequests.length; i++) {\n      var validBidRequest = validBidRequests[i];\n      payload.auctionId = validBidRequest.auctionId;\n      payload.bidder = validBidRequest.bidder;\n      payload.bidderRequestId = validBidRequest.bidderRequestId;\n      payload.pid = validBidRequest.params.pid;\n      payload.wid = validBidRequest.params.wid;\n      payload.url = validBidRequest.params.url;\n\n      var request = {\n        adUnitCode: validBidRequest.adUnitCode,\n        bidId: validBidRequest.bidId,\n        transactionId: validBidRequest.transactionId,\n        priceType: validBidRequest.params.priceType,\n        sizes: transformSizes(validBidRequest.sizes)\n      }\n\n      payload.request.push(request);\n    }\n\n    const payloadString = JSON.stringify(payload);\n\n    return {\n      method: 'POST',\n      url: ENDPOINT_URL,\n      data: payloadString,\n      bidder: 'admatic',\n      bids: validBidRequests\n    };\n  },\n\n  /**\n  * Unpack the response from the server into a list of bids.\n  *\n  * @param {ServerResponse} serverResponse A successful response from the server.\n  * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const serverBody = serverResponse.body;\n    const bidResponses = [];\n\n    if (serverBody) {\n      if (serverBody.tags && serverBody.tags.length > 0) {\n        serverBody.tags.forEach(serverBid => {\n          if (serverBid != null) {\n            if (serverBid.cpm !== 0) {\n              const bidResponse = {\n                requestId: serverBid.bidId,\n                cpm: serverBid.cpm,\n                width: serverBid.width,\n                height: serverBid.height,\n                creativeId: serverBid.creativeId,\n                dealId: serverBid.dealId,\n                currency: serverBid.currency,\n                netRevenue: serverBid.netRevenue,\n                ttl: serverBid.ttl,\n                referrer: serverBid.referrer,\n                ad: serverBid.ad\n              };\n\n              bidResponses.push(bidResponse);\n            }\n          }\n        });\n      }\n    }\n\n    return bidResponses;\n  },\n  /**\n  * Register the user sync pixels which should be dropped after the auction.\n  *\n  * @param {SyncOptions} syncOptions Which user syncs are allowed?\n  * @param {ServerResponse[]} serverResponses List of server's responses.\n  * @return {UserSync[]} The user syncs which should be dropped.\n  */\n  getUserSyncs: function (syncOptions, serverResponses) {\n    const syncs = [];\n    if (syncOptions.iframeEnabled) {\n      syncs.push({\n        type: 'iframe',\n        url: '//ads4.admatic.com.tr/prebid/static/usersync/v3/async_usersync.html'\n      });\n    }\n\n    if (syncOptions.pixelEnabled && serverResponses.length > 0) {\n      syncs.push({\n        type: 'image',\n        url: 'https://ads5.admatic.com.tr/prebid/v3/bidrequest/usersync'\n      });\n    }\n    return syncs;\n  }\n}\n\n/* Turn bid request sizes into ut-compatible format */\nfunction transformSizes(requestSizes) {\n  let sizes = [];\n  let sizeObj = {};\n\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 && !utils.isArray(requestSizes[0])) {\n    sizeObj.width = parseInt(requestSizes[0], 10);\n    sizeObj.height = parseInt(requestSizes[1], 10);\n    sizes.push(sizeObj);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      sizeObj = {};\n      sizeObj.width = parseInt(size[0], 10);\n      sizeObj.height = parseInt(size[1], 10);\n      sizes.push(sizeObj);\n    }\n  }\n\n  return sizes;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/admaticBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'admixer';\nconst ENDPOINT_URL = '//inv-nets.admixer.net/prebid.1.0.aspx';\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: [],\n  supportedMediaTypes: ['banner', 'video'],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!bid.params.zone;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {bidderRequest} - bidderRequest.bids[] is an array of AdUnits and bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidderRequest) {\n    const payload = {\n      imps: [],\n      referrer: encodeURIComponent(utils.getTopWindowUrl()),\n    };\n    bidderRequest.forEach((bid) => {\n      if (bid.bidder === BIDDER_CODE) {\n        payload.imps.push(bid);\n      }\n    });\n    const payloadString = JSON.stringify(payload);\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: `data=${payloadString}`,\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    // loop through serverResponses {\n    try {\n      serverResponse = serverResponse.body;\n      serverResponse.forEach((bidResponse) => {\n        const bidResp = {\n          requestId: bidResponse.bidId,\n          cpm: bidResponse.cpm,\n          width: bidResponse.width,\n          height: bidResponse.height,\n          ad: bidResponse.ad,\n          ttl: bidResponse.ttl,\n          creativeId: bidResponse.creativeId,\n          netRevenue: bidResponse.netRevenue,\n          currency: bidResponse.currency,\n          vastUrl: bidResponse.vastUrl,\n        };\n        bidResponses.push(bidResp);\n      });\n    } catch (e) {\n      utils.logError(e);\n    }\n    return bidResponses;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/admixerBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'adocean';\n\nfunction buildEndpointUrl(emiter, payload) {\n  let payloadString = '';\n  utils._each(payload, function(v, k) {\n    if (payloadString.length) {\n      payloadString += '&';\n    }\n    payloadString += k + '=' + encodeURIComponent(v);\n  });\n\n  return 'https://' + emiter + '/ad.json?' + payloadString;\n}\n\nfunction buildRequest(masterBidRequests, masterId, gdprConsent) {\n  const firstBid = masterBidRequests[0];\n  const payload = {\n    id: masterId,\n  };\n  if (gdprConsent) {\n    payload.gdpr_consent = gdprConsent.consentString || undefined;\n    payload.gdpr = gdprConsent.gdprApplies ? 1 : 0;\n  }\n\n  const bidIdMap = {};\n\n  utils._each(masterBidRequests, function(v) {\n    bidIdMap[v.params.slaveId] = v.bidId;\n  });\n\n  return {\n    method: 'GET',\n    url: buildEndpointUrl(firstBid.params.emiter, payload),\n    data: {},\n    bidIdMap: bidIdMap\n  };\n}\n\nfunction assignToMaster(bidRequest, bidRequestsByMaster) {\n  const masterId = bidRequest.params.masterId;\n  bidRequestsByMaster[masterId] = bidRequestsByMaster[masterId] || [];\n  bidRequestsByMaster[masterId].push(bidRequest);\n}\n\nfunction interpretResponse(placementResponse, bidRequest, bids) {\n  if (!placementResponse.error) {\n    let adCode = '<script type=\"application/javascript\">(function(){var wu=\"' + (placementResponse.winUrl || '') + '\",su=\"' + (placementResponse.statsUrl || '') + '\".replace(/\\\\[TIMESTAMP\\\\]/,(new Date()).getTime());';\n    adCode += 'if(navigator.sendBeacon){if(wu){navigator.sendBeacon(wu)||((new Image(1,1)).src=wu)};if(su){navigator.sendBeacon(su)||((new Image(1,1)).src=su)}}';\n    adCode += 'else{if(wu){(new Image(1,1)).src=wu;}if(su){(new Image(1,1)).src=su;}}';\n    adCode += '})();<\\/script>';\n    adCode += decodeURIComponent(placementResponse.code);\n\n    const bid = {\n      ad: adCode,\n      cpm: parseFloat(placementResponse.price),\n      currency: placementResponse.currency,\n      height: parseInt(placementResponse.height, 10),\n      requestId: bidRequest.bidIdMap[placementResponse.id],\n      width: parseInt(placementResponse.width, 10),\n      netRevenue: false,\n      ttl: parseInt(placementResponse.ttl),\n      creativeId: placementResponse.crid\n    };\n\n    bids.push(bid);\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.slaveId && bid.params.masterId && bid.params.emiter);\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const bidRequestsByMaster = {};\n    let requests = [];\n\n    utils._each(validBidRequests, function(bidRequest) {\n      assignToMaster(bidRequest, bidRequestsByMaster);\n    });\n    requests = utils._map(bidRequestsByMaster, function(requests, masterId) {\n      return buildRequest(requests, masterId, bidderRequest.gdprConsent);\n    });\n\n    return requests;\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    let bids = [];\n\n    if (utils.isArray(serverResponse.body)) {\n      utils._each(serverResponse.body, function(placementResponse) {\n        interpretResponse(placementResponse, bidRequest, bids);\n      });\n    }\n\n    return bids;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adoceanBidAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport CONSTANTS from 'src/constants.json';\nimport adaptermanager from 'src/adaptermanager';\nimport { logInfo } from 'src/utils';\nimport find from 'core-js/library/fn/array/find';\nimport findIndex from 'core-js/library/fn/array/find-index';\n\n// Events used in adomik analytics adapter\nconst auctionInit = CONSTANTS.EVENTS.AUCTION_INIT;\nconst auctionEnd = CONSTANTS.EVENTS.AUCTION_END;\nconst bidRequested = CONSTANTS.EVENTS.BID_REQUESTED;\nconst bidResponse = CONSTANTS.EVENTS.BID_RESPONSE;\nconst bidWon = CONSTANTS.EVENTS.BID_WON;\nconst bidTimeout = CONSTANTS.EVENTS.BID_TIMEOUT;\n\nlet adomikAdapter = Object.assign(adapter({}),\n  {\n    // Track every event needed\n    track({ eventType, args }) {\n      switch (eventType) {\n        case auctionInit:\n          adomikAdapter.initializeBucketEvents()\n          adomikAdapter.currentContext.id = args.auctionId\n          break;\n\n        case bidTimeout:\n          adomikAdapter.currentContext.timeouted = true;\n          break;\n\n        case bidResponse:\n          adomikAdapter.bucketEvents.push({\n            type: 'response',\n            event: adomikAdapter.buildBidResponse(args)\n          });\n          break;\n\n        case bidWon:\n          adomikAdapter.sendWonEvent({\n            id: args.adId,\n            placementCode: args.adUnitCode\n          });\n          break;\n\n        case bidRequested:\n          args.bids.forEach(function(bid) {\n            adomikAdapter.bucketEvents.push({\n              type: 'request',\n              event: {\n                bidder: bid.bidder.toUpperCase(),\n                placementCode: bid.placementCode\n              }\n            });\n          });\n          break;\n\n        case auctionEnd:\n          if (adomikAdapter.bucketEvents.length > 0) {\n            adomikAdapter.sendTypedEvent();\n          }\n          break;\n      }\n    }\n  }\n);\n\nadomikAdapter.initializeBucketEvents = function() {\n  adomikAdapter.bucketEvents = [];\n}\n\nadomikAdapter.sendTypedEvent = function() {\n  const groupedTypedEvents = adomikAdapter.buildTypedEvents();\n\n  const bulkEvents = {\n    uid: adomikAdapter.currentContext.uid,\n    ahbaid: adomikAdapter.currentContext.id,\n    hostname: window.location.hostname,\n    eventsByPlacementCode: groupedTypedEvents.map(function(typedEventsByType) {\n      let sizes = [];\n      const eventKeys = ['request', 'response', 'winner'];\n      let events = {};\n\n      eventKeys.forEach((eventKey) => {\n        events[`${eventKey}s`] = [];\n        if (typedEventsByType[eventKey] !== undefined) {\n          typedEventsByType[eventKey].forEach((typedEvent) => {\n            if (typedEvent.event.size !== undefined) {\n              const size = adomikAdapter.sizeUtils.handleSize(sizes, typedEvent.event.size);\n              if (size !== null) {\n                sizes = [...sizes, size];\n              }\n            }\n            events[`${eventKey}s`] = [...events[`${eventKey}s`], typedEvent.event];\n          });\n        }\n      });\n\n      return {\n        placementCode: typedEventsByType.placementCode,\n        sizes,\n        events\n      };\n    })\n  };\n\n  const stringBulkEvents = JSON.stringify(bulkEvents)\n  logInfo('Events sent to adomik prebid analytic ' + stringBulkEvents);\n\n  // Encode object in base64\n  const encodedBuf = window.btoa(stringBulkEvents);\n\n  // Create final url and split it in 1600 characters max (+endpoint length)\n  const encodedUri = encodeURIComponent(encodedBuf);\n  const splittedUrl = encodedUri.match(/.{1,1600}/g);\n\n  splittedUrl.forEach((split, i) => {\n    const partUrl = `${split}&id=${adomikAdapter.currentContext.id}&part=${i}&on=${splittedUrl.length - 1}`;\n    const img = new Image(1, 1);\n    img.src = 'https://' + adomikAdapter.currentContext.url + '/?q=' + partUrl;\n  })\n};\n\nadomikAdapter.sendWonEvent = function (wonEvent) {\n  const stringWonEvent = JSON.stringify(wonEvent)\n  logInfo('Won event sent to adomik prebid analytic ' + wonEvent);\n\n  // Encode object in base64\n  const encodedBuf = window.btoa(stringWonEvent);\n  const encodedUri = encodeURIComponent(encodedBuf);\n  const img = new Image(1, 1);\n  img.src = `https://${adomikAdapter.currentContext.url}/?q=${encodedUri}&id=${adomikAdapter.currentContext.id}&won=true`\n}\n\nadomikAdapter.buildBidResponse = function (bid) {\n  return {\n    bidder: bid.bidderCode.toUpperCase(),\n    placementCode: bid.adUnitCode,\n    id: bid.adId,\n    status: (bid.statusMessage === 'Bid available') ? 'VALID' : 'EMPTY_OR_ERROR',\n    cpm: parseFloat(bid.cpm),\n    size: {\n      width: Number(bid.width),\n      height: Number(bid.height)\n    },\n    timeToRespond: bid.timeToRespond,\n    afterTimeout: adomikAdapter.currentContext.timeouted\n  };\n}\n\nadomikAdapter.sizeUtils = {\n  sizeAlreadyExists: (sizes, typedEventSize) => {\n    return find(sizes, (size) => size.height === typedEventSize.height && size.width === typedEventSize.width);\n  },\n  formatSize: (typedEventSize) => {\n    return {\n      width: Number(typedEventSize.width),\n      height: Number(typedEventSize.height)\n    };\n  },\n  handleSize: (sizes, typedEventSize) => {\n    let formattedSize = null;\n    if (adomikAdapter.sizeUtils.sizeAlreadyExists(sizes, typedEventSize) === undefined) {\n      formattedSize = adomikAdapter.sizeUtils.formatSize(typedEventSize);\n    }\n    return formattedSize;\n  }\n};\n\nadomikAdapter.buildTypedEvents = function () {\n  const groupedTypedEvents = [];\n  adomikAdapter.bucketEvents.forEach(function(typedEvent, i) {\n    const [placementCode, type] = [typedEvent.event.placementCode, typedEvent.type];\n    let existTypedEvent = findIndex(groupedTypedEvents, (groupedTypedEvent) => groupedTypedEvent.placementCode === placementCode);\n\n    if (existTypedEvent === -1) {\n      groupedTypedEvents.push({\n        placementCode: placementCode,\n        [type]: [typedEvent]\n      });\n      existTypedEvent = groupedTypedEvents.length - 1;\n    }\n\n    if (groupedTypedEvents[existTypedEvent][type]) {\n      groupedTypedEvents[existTypedEvent][type] = [...groupedTypedEvents[existTypedEvent][type], typedEvent];\n    } else {\n      groupedTypedEvents[existTypedEvent][type] = [typedEvent];\n    }\n  });\n\n  return groupedTypedEvents;\n}\n\nadomikAdapter.adapterEnableAnalytics = adomikAdapter.enableAnalytics;\n\nadomikAdapter.enableAnalytics = function (config) {\n  adomikAdapter.currentContext = {};\n\n  const initOptions = config.options;\n  if (initOptions) {\n    adomikAdapter.currentContext = {\n      uid: initOptions.id,\n      url: initOptions.url,\n      id: '',\n      timeouted: false,\n    }\n    logInfo('Adomik Analytics enabled with config', initOptions);\n    adomikAdapter.adapterEnableAnalytics(config);\n  }\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: adomikAdapter,\n  code: 'adomik'\n});\n\nexport default adomikAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adomikAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst RTB_URL = '/rtb/getbid.php?rtbprovider=prebid';\nconst SCRIPT_URL = '/adasync.min.js';\nexport const spec = {\n  code: 'adspirit',\n  aliases: ['xapadsmedia', 'connectad'],\n  isBidRequestValid: function(bid) {\n    let host = spec.getBidderHost(bid);\n    if (!host) return false;\n    if (!bid.params.placementId) return false;\n    return true;\n  },\n  buildRequests: function(validBidRequests) {\n    let requests = [];\n    let bidRequest;\n    let reqUrl;\n    let placementId;\n    for (let i = 0; i < validBidRequests.length; i++) {\n      bidRequest = validBidRequests[i];\n      bidRequest.adspiritConId = spec.genAdConId(bidRequest);\n      reqUrl = spec.getBidderHost(bidRequest);\n      placementId = utils.getBidIdParameter('placementId', bidRequest.params);\n      reqUrl = '//' + reqUrl + RTB_URL + '&pid=' + placementId + '&ref=' + encodeURIComponent(utils.getTopWindowUrl()) + '&scx=' + (screen.width) + '&scy=' + (screen.height) + '&wcx=' + ('innerWidth' in window ? window.innerWidth : page.clientWidth) + '&wcy=' + ('innerHeight' in window ? window.innerHeight : page.clientHeight) + '&async=' + bidRequest.adspiritConId + '&t=' + Math.round(Math.random() * 100000);\n      requests.push({\n        method: 'GET',\n        url: reqUrl,\n        data: {},\n        bidRequest: bidRequest\n      });\n    }\n    return requests;\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    let bidObj = bidRequest.bidRequest;\n\n    if (!serverResponse || !serverResponse.body || !bidObj) {\n      utils.logWarn(`No valid bids from ${spec.code} bidder!`);\n      return [];\n    }\n    let adData = serverResponse.body;\n    let cpm = adData.cpm;\n    if (!cpm) return [];\n\n    let host = spec.getBidderHost(bidObj);\n    let adm = '<scr' + 'ipt>window.inDapIF=false</scr' + 'ipt><scr' + 'ipt src=\"//' + host + SCRIPT_URL + '\"></scr' + 'ipt>' + '<ins id=\"' + bidObj.adspiritConId + '\"></ins>' + adData.adm;\n    const bidResponse = {\n      requestId: bidObj.bidId,\n      cpm: cpm,\n      width: adData.w,\n      height: adData.h,\n      creativeId: bidObj.params.placementId,\n      currency: 'EUR',\n      netRevenue: true,\n      ttl: 300,\n      ad: adm\n    };\n    bidResponses.push(bidResponse);\n    return bidResponses;\n  },\n  getBidderHost: function(bid) {\n    if (bid.bidder === 'adspirit') return utils.getBidIdParameter('host', bid.params);\n    if (bid.bidder === 'connectad') return 'connected-by.connectad.io';\n    if (bid.bidder === 'xapadsmedia') return 'dsp.xapads.com';\n    return null;\n  },\n  genAdConId: function(bid) {\n    return bid.bidder + Math.round(Math.random() * 100000);\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adspiritBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {VIDEO, BANNER} from 'src/mediaTypes';\nimport {Renderer} from 'src/Renderer';\nimport findIndex from 'core-js/library/fn/array/find-index';\n\nconst URL = '//hb.adtelligent.com/auction/';\nconst OUTSTREAM_SRC = '//player.adtelligent.com/outstream-unit/2.01/outstream.min.js';\nconst BIDDER_CODE = 'adtelligent';\nconst OUTSTREAM = 'outstream';\nconst DISPLAY = 'display';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [VIDEO, BANNER],\n  isBidRequestValid: function (bid) {\n    return bid && bid.params && bid.params.aid;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests\n   * @param bidRequests\n   * @param bidderRequest\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    return {\n      data: bidToTag(bidRequests),\n      bidderRequest,\n      method: 'GET',\n      url: URL\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids\n   * @param serverResponse\n   * @param bidderRequest\n   * @return {Bid[]} An array of bids which were nested inside the server\n   */\n  interpretResponse: function (serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    let bids = [];\n\n    if (!utils.isArray(serverResponse)) {\n      return parseRTBResponse(serverResponse, bidderRequest);\n    }\n\n    serverResponse.forEach(serverBidResponse => {\n      bids = utils.flatten(bids, parseRTBResponse(serverBidResponse, bidderRequest));\n    });\n\n    return bids;\n  }\n};\n\nfunction parseRTBResponse(serverResponse, bidderRequest) {\n  const isInvalidValidResp = !serverResponse || !serverResponse.bids || !serverResponse.bids.length;\n\n  let bids = [];\n\n  if (isInvalidValidResp) {\n    let extMessage = serverResponse && serverResponse.ext && serverResponse.ext.message ? `: ${serverResponse.ext.message}` : '';\n    let errorMessage = `in response for ${bidderRequest.bidderCode} adapter ${extMessage}`;\n\n    utils.logError(errorMessage);\n\n    return bids;\n  }\n\n  serverResponse.bids.forEach(serverBid => {\n    const requestId = findIndex(bidderRequest.bids, (bidRequest) => {\n      return bidRequest.bidId === serverBid.requestId;\n    });\n\n    if (serverBid.cpm !== 0 && requestId !== -1) {\n      const bid = createBid(serverBid, getMediaType(bidderRequest.bids[requestId]));\n\n      bids.push(bid);\n    }\n  });\n\n  return bids;\n}\n\nfunction bidToTag(bidRequests) {\n  let tag = {\n    domain: utils.getTopWindowLocation().hostname\n  };\n\n  for (let i = 0, length = bidRequests.length; i < length; i++) {\n    Object.assign(tag, prepareRTBRequestParams(i, bidRequests[i]));\n  }\n\n  return tag;\n}\n\n/**\n * Parse mediaType\n * @param _index {number}\n * @param bid {object}\n * @returns {object}\n */\nfunction prepareRTBRequestParams(_index, bid) {\n  const mediaType = utils.deepAccess(bid, 'mediaTypes.video') ? VIDEO : DISPLAY;\n  const index = !_index ? '' : `${_index + 1}`;\n\n  return {\n    ['callbackId' + index]: bid.bidId,\n    ['aid' + index]: bid.params.aid,\n    ['ad_type' + index]: mediaType,\n    ['sizes' + index]: utils.parseSizesInput(bid.sizes).join()\n  };\n}\n\n/**\n * Prepare all parameters for request\n * @param bidderRequest {object}\n * @returns {object}\n */\nfunction getMediaType(bidderRequest) {\n  const videoMediaType = utils.deepAccess(bidderRequest, 'mediaTypes.video');\n  const context = utils.deepAccess(bidderRequest, 'mediaTypes.video.context');\n\n  return !videoMediaType ? DISPLAY : context === OUTSTREAM ? OUTSTREAM : VIDEO;\n}\n\n/**\n * Configure new bid by response\n * @param bidResponse {object}\n * @param mediaType {Object}\n * @returns {object}\n */\nfunction createBid(bidResponse, mediaType) {\n  let bid = {\n    requestId: bidResponse.requestId,\n    creativeId: bidResponse.cmpId,\n    height: bidResponse.height,\n    currency: bidResponse.cur,\n    width: bidResponse.width,\n    cpm: bidResponse.cpm,\n    netRevenue: true,\n    mediaType,\n    ttl: 3600\n  };\n\n  if (mediaType === DISPLAY) {\n    return Object.assign(bid, {\n      ad: bidResponse.ad\n    });\n  }\n\n  Object.assign(bid, {\n    vastUrl: bidResponse.vastUrl\n  });\n\n  if (mediaType === OUTSTREAM) {\n    Object.assign(bid, {\n      mediaType: 'video',\n      adResponse: bidResponse,\n      renderer: newRenderer(bidResponse.requestId)\n    });\n  }\n\n  return bid;\n}\n\n/**\n * Create Adtelligent renderer\n * @param requestId\n * @returns {*}\n */\nfunction newRenderer(requestId) {\n  const renderer = Renderer.install({\n    id: requestId,\n    url: OUTSTREAM_SRC,\n    loaded: false\n  });\n\n  renderer.setRender(outstreamRender);\n\n  return renderer;\n}\n\n/**\n * Initialise Adtelligent outstream\n * @param bid\n */\nfunction outstreamRender(bid) {\n  bid.renderer.push(() => {\n    window.VOutstreamAPI.initOutstreams([{\n      width: bid.width,\n      height: bid.height,\n      vastUrl: bid.vastUrl,\n      elId: bid.adUnitCode\n    }]);\n  });\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adtelligentBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes'\n\nexport const BIDDER_CODE = 'aduptech';\nexport const PUBLISHER_PLACEHOLDER = '{PUBLISHER}';\nexport const ENDPOINT_URL = window.location.protocol + '//rtb.d.adup-tech.com/prebid/' + PUBLISHER_PLACEHOLDER + '_bid';\nexport const ENDPOINT_METHOD = 'POST';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: (bid) => {\n    return !!(bid &&\n      bid.sizes &&\n      bid.sizes.length > 0 &&\n      bid.params &&\n      bid.params.publisher &&\n      bid.params.placement);\n  },\n\n  buildRequests: (validBidRequests, bidderRequest) => {\n    const bidRequests = [];\n\n    // collect GDPR information\n    let gdpr = null;\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      gdpr = {\n        consentString: bidderRequest.gdprConsent.consentString,\n        consentRequired: (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true\n      };\n    }\n\n    validBidRequests.forEach((bidRequest) => {\n      bidRequests.push({\n        url: ENDPOINT_URL.replace(PUBLISHER_PLACEHOLDER, encodeURIComponent(bidRequest.params.publisher)),\n        method: ENDPOINT_METHOD,\n        data: {\n          pageUrl: utils.getTopWindowUrl(),\n          referrer: utils.getTopWindowReferrer(),\n          bidId: bidRequest.bidId,\n          auctionId: bidRequest.auctionId,\n          transactionId: bidRequest.transactionId,\n          adUnitCode: bidRequest.adUnitCode,\n          sizes: bidRequest.sizes,\n          params: bidRequest.params,\n          gdpr: gdpr\n        }\n      });\n    });\n\n    return bidRequests;\n  },\n\n  interpretResponse: (response) => {\n    const bidResponses = [];\n\n    if (!response.body || !response.body.bid || !response.body.creative) {\n      return bidResponses;\n    }\n\n    bidResponses.push({\n      requestId: response.body.bid.bidId,\n      cpm: response.body.bid.price,\n      netRevenue: response.body.bid.net,\n      currency: response.body.bid.currency,\n      ttl: response.body.bid.ttl,\n      creativeId: response.body.creative.id,\n      width: response.body.creative.width,\n      height: response.body.creative.height,\n      ad: response.body.creative.html\n    });\n\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/aduptechBidAdapter.js","import { ajax } from 'src/ajax';\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\nimport * as url from 'src/url';\nimport * as utils from 'src/utils';\n\nconst emptyUrl = '';\nconst analyticsType = 'endpoint';\nconst adxcgAnalyticsVersion = 'v2.01';\n\nvar adxcgAnalyticsAdapter = Object.assign(adapter(\n  {\n    emptyUrl,\n    analyticsType\n  }), {\n  track ({eventType, args}) {\n    switch (eventType) {\n      case CONSTANTS.EVENTS.AUCTION_INIT:\n        adxcgAnalyticsAdapter.context.events.auctionInit = mapAuctionInit(args);\n        adxcgAnalyticsAdapter.context.auctionTimestamp = args.timestamp;\n        break;\n      case CONSTANTS.EVENTS.BID_REQUESTED:\n        adxcgAnalyticsAdapter.context.auctionId = args.auctionId;\n        adxcgAnalyticsAdapter.context.events.bidRequests.push(mapBidRequested(args));\n        break;\n      case CONSTANTS.EVENTS.BID_ADJUSTMENT:\n        break;\n      case CONSTANTS.EVENTS.BID_TIMEOUT:\n        adxcgAnalyticsAdapter.context.events.bidTimeout = args.map(item => item.bidder).filter(utils.uniques);\n        break;\n      case CONSTANTS.EVENTS.BIDDER_DONE:\n        break;\n      case CONSTANTS.EVENTS.BID_RESPONSE:\n        adxcgAnalyticsAdapter.context.events.bidResponses.push(mapBidResponse(args, eventType));\n        break;\n      case CONSTANTS.EVENTS.BID_WON:\n        let outData2 = {bidWons: mapBidWon(args)};\n        send(outData2);\n        break;\n      case CONSTANTS.EVENTS.AUCTION_END:\n        send(adxcgAnalyticsAdapter.context.events);\n        break;\n    }\n  }\n\n});\n\nfunction mapAuctionInit (auctionInit) {\n  return {\n    timeout: auctionInit.timeout\n  };\n}\n\nfunction mapBidRequested (bidRequests) {\n  return {\n    bidderCode: bidRequests.bidderCode,\n    time: bidRequests.start,\n    bids: bidRequests.bids.map(function (bid) {\n      return {\n        transactionId: bid.transactionId,\n        adUnitCode: bid.adUnitCode,\n        bidId: bid.bidId,\n        start: bid.startTime,\n        sizes: utils.parseSizesInput(bid.sizes).toString(),\n        params: bid.params\n      };\n    }),\n  };\n}\n\nfunction mapBidResponse (bidResponse, eventType) {\n  return {\n    bidderCode: bidResponse.bidder,\n    transactionId: bidResponse.transactionId,\n    adUnitCode: bidResponse.adUnitCode,\n    statusMessage: bidResponse.statusMessage,\n    mediaType: bidResponse.mediaType,\n    renderedSize: bidResponse.size,\n    cpm: bidResponse.cpm,\n    currency: bidResponse.currency,\n    netRevenue: bidResponse.netRevenue,\n    timeToRespond: bidResponse.timeToRespond,\n    bidId: eventType === CONSTANTS.EVENTS.BID_TIMEOUT ? bidResponse.bidId : bidResponse.requestId,\n    dealId: bidResponse.dealId,\n    status: bidResponse.status,\n    creativeId: bidResponse.creativeId.toString()\n  };\n}\n\nfunction mapBidWon (bidResponse) {\n  return [{\n    bidderCode: bidResponse.bidder,\n    adUnitCode: bidResponse.adUnitCode,\n    statusMessage: bidResponse.statusMessage,\n    mediaType: bidResponse.mediaType,\n    renderedSize: bidResponse.size,\n    cpm: bidResponse.cpm,\n    currency: bidResponse.currency,\n    netRevenue: bidResponse.netRevenue,\n    timeToRespond: bidResponse.timeToRespond,\n    bidId: bidResponse.requestId,\n    dealId: bidResponse.dealId,\n    status: bidResponse.status,\n    creativeId: bidResponse.creativeId.toString()\n  }];\n}\n\nfunction send (data) {\n  let location = utils.getTopWindowLocation();\n  let secure = location.protocol === 'https:';\n\n  let adxcgAnalyticsRequestUrl = url.format({\n    protocol: secure ? 'https' : 'http',\n    hostname: adxcgAnalyticsAdapter.context.host,\n    pathname: '/pbrx/v2',\n    search: {\n      pid: adxcgAnalyticsAdapter.context.initOptions.publisherId,\n      aid: adxcgAnalyticsAdapter.context.auctionId,\n      ats: adxcgAnalyticsAdapter.context.auctionTimestamp,\n      aav: adxcgAnalyticsVersion,\n      iob: intersectionObserverAvailable(window) ? '1' : '0',\n      pbv: pbjs.version,\n      sz: window.screen.width + 'x' + window.screen.height\n    }\n  });\n\n  ajax(adxcgAnalyticsRequestUrl, undefined, JSON.stringify(data), {\n    contentType: 'text/plain',\n    method: 'POST',\n    withCredentials: true\n  });\n}\n\nfunction intersectionObserverAvailable (win) {\n  return win && win.IntersectionObserver && win.IntersectionObserverEntry &&\n    win.IntersectionObserverEntry.prototype && 'intersectionRatio' in win.IntersectionObserverEntry.prototype;\n}\n\nadxcgAnalyticsAdapter.context = {};\nadxcgAnalyticsAdapter.originEnableAnalytics = adxcgAnalyticsAdapter.enableAnalytics;\nadxcgAnalyticsAdapter.enableAnalytics = function (config) {\n  if (!config.options.publisherId) {\n    utils.logError('PublisherId option is not defined. Analytics won\\'t work');\n    return;\n  }\n\n  let secure = location.protocol === 'https:';\n  adxcgAnalyticsAdapter.context = {\n    events: {\n      bidRequests: [],\n      bidResponses: []\n    },\n    initOptions: config.options,\n    host: config.options.host || (secure ? 'hbarxs.adxcg.net' : 'hbarx.adxcg.net')\n  };\n\n  adxcgAnalyticsAdapter.originEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: adxcgAnalyticsAdapter,\n  code: 'adxcg'\n});\n\nexport default adxcgAnalyticsAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adxcgAnalyticsAdapter.js","import { config } from 'src/config'\nimport * as utils from 'src/utils'\nimport * as url from 'src/url'\nimport { registerBidder } from 'src/adapters/bidderFactory'\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes'\nimport includes from 'core-js/library/fn/array/includes'\n\n/**\n * Adapter for requesting bids from adxcg.net\n * updated to latest prebid repo on 2017.10.20\n * updated for gdpr compliance on 2018.05.22 -requires gdpr compliance module\n * updated to pass aditional auction and impression level parameters. added pass for video targeting parameters\n */\n\nconst BIDDER_CODE = 'adxcg'\nconst SUPPORTED_AD_TYPES = [BANNER, VIDEO, NATIVE]\nconst SOURCE = 'pbjs10'\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration', 'startdelay', 'skippable', 'playback_method', 'frameworks']\nconst USER_PARAMS_AUCTION = ['forcedDspIds', 'forcedCampaignIds', 'forcedCreativeIds', 'gender', 'dnt', 'language']\nconst USER_PARAMS_BID = ['lineparam1', 'lineparam2', 'lineparam3']\nconst BIDADAPTERVERSION = 'r20180703PB10'\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: SUPPORTED_AD_TYPES,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    if (!bid || !bid.params) {\n      utils.logWarn(BIDDER_CODE + ': Missing bid parameters')\n      return false\n    }\n\n    if (!utils.isStr(bid.params.adzoneid)) {\n      utils.logWarn(BIDDER_CODE + ': adzoneid must be specified as a string')\n      return false\n    }\n\n    if (isVideoRequest(bid)) {\n      if (!bid.params.video.mimes) {\n        // Give a warning but let it pass\n        utils.logWarn(BIDDER_CODE + ': mimes should be specified for videos')\n      } else if (!utils.isArray(bid.params.video.mimes) || !bid.params.video.mimes.every(s => utils.isStr(s))) {\n        utils.logWarn(BIDDER_CODE + ': mimes must be an array of strings')\n        return false\n      }\n\n      const context = utils.deepAccess(bid, 'mediaTypes.video.context')\n      if (context !== 'instream') {\n        utils.logWarn(BIDDER_CODE + ': video context must be valid - instream')\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * an array of validBidRequests\n   * Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests, bidderRequest) {\n    utils.logMessage(`buildRequests: ${JSON.stringify(validBidRequests)}`)\n\n    let location = utils.getTopWindowLocation()\n    let secure = location.protocol === 'https:'\n    let dt = new Date()\n    let ratio = window.devicePixelRatio || 1\n    let iobavailable = window && window.IntersectionObserver && window.IntersectionObserverEntry && window.IntersectionObserverEntry.prototype && 'intersectionRatio' in window.IntersectionObserverEntry.prototype\n\n    let bt = config.getConfig('bidderTimeout')\n    if (window.PREBID_TIMEOUT) {\n      bt = Math.min(window.PREBID_TIMEOUT, bt)\n    }\n\n    let requestUrl = url.parse(location.href)\n    requestUrl.search = null\n    requestUrl.hash = null\n\n    // add common parameters\n    let beaconParams = {\n      renderformat: 'javascript',\n      ver: BIDADAPTERVERSION,\n      url: encodeURIComponent(utils.getTopWindowUrl()),\n      secure: secure ? '1' : '0',\n      source: SOURCE,\n      uw: window.screen.width,\n      uh: window.screen.height,\n      dpr: ratio,\n      bt: bt,\n      isinframe: utils.inIframe(),\n      cookies: utils.checkCookieSupport() ? '1' : '0',\n      tz: dt.getTimezoneOffset(),\n      dt: utils.timestamp(),\n      iob: iobavailable ? '1' : '0',\n      pbjs: '1.25.0-pre',\n      rndid: Math.floor(Math.random() * (999999 - 100000 + 1)) + 100000\n    }\n\n    if (utils.getTopWindowReferrer()) {\n      beaconParams.ref = encodeURIComponent(utils.getTopWindowReferrer())\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.gdprApplies) {\n      beaconParams.gdpr = bidderRequest.gdprConsent.gdprApplies ? '1' : '0'\n      beaconParams.gdpr_consent = bidderRequest.gdprConsent.consentString\n    }\n\n    let biddercustom = config.getConfig(BIDDER_CODE)\n    if (biddercustom) {\n      Object.keys(biddercustom)\n        .filter(param => includes(USER_PARAMS_AUCTION, param))\n        .forEach(param => beaconParams[param] = encodeURIComponent(biddercustom[param]))\n    }\n\n    // per impression parameters\n    let adZoneIds = []\n    let prebidBidIds = []\n    let sizes = []\n    let bidfloors = []\n\n    validBidRequests.forEach((bid, index) => {\n      adZoneIds.push(utils.getBidIdParameter('adzoneid', bid.params))\n      prebidBidIds.push(bid.bidId)\n      sizes.push(utils.parseSizesInput(bid.sizes).join('|'))\n\n      let bidfloor = utils.getBidIdParameter('bidfloor', bid.params) || 0\n      bidfloors.push(bidfloor)\n      // copy video params\n      if (isVideoRequest(bid)) {\n        if (bid.params.video) {\n          Object.keys(bid.params.video)\n            .filter(param => includes(VIDEO_TARGETING, param))\n            .forEach(param => beaconParams['video.' + param + '.' + index] = encodeURIComponent(bid.params.video[param]))\n        }\n        // copy video context params\n        beaconParams['video.context' + '.' + index] = utils.deepAccess(bid, 'mediaTypes.video.context')\n      }\n\n      // copy all custom parameters impression level parameters not supported above\n      let customBidParams = utils.getBidIdParameter('custom', bid.params) || {}\n      if (customBidParams) {\n        Object.keys(customBidParams)\n          .filter(param => includes(USER_PARAMS_BID, param))\n          .forEach(param => beaconParams[param + '.' + index] = encodeURIComponent(customBidParams[param]))\n      }\n    })\n\n    beaconParams.adzoneid = adZoneIds.join(',')\n    beaconParams.format = sizes.join(',')\n    beaconParams.prebidBidIds = prebidBidIds.join(',')\n    beaconParams.bidfloors = bidfloors.join(',')\n\n    let adxcgRequestUrl = url.format({\n      protocol: secure ? 'https' : 'http',\n      hostname: secure ? 'hbps.adxcg.net' : 'hbp.adxcg.net',\n      pathname: '/get/adi',\n      search: beaconParams\n    })\n\n    return {\n      contentType: 'text/plain',\n      method: 'GET',\n      url: adxcgRequestUrl,\n      withCredentials: true\n    }\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {bidRequests[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse:\n\n    function (serverResponse, bidRequests) {\n      let bids = []\n\n      serverResponse = serverResponse.body\n      if (serverResponse) {\n        serverResponse.forEach(serverResponseOneItem => {\n          let bid = {}\n\n          bid.requestId = serverResponseOneItem.bidId\n          bid.cpm = serverResponseOneItem.cpm\n          bid.creativeId = parseInt(serverResponseOneItem.creativeId)\n          bid.currency = serverResponseOneItem.currency ? serverResponseOneItem.currency : 'USD'\n          bid.netRevenue = serverResponseOneItem.netRevenue ? serverResponseOneItem.netRevenue : true\n          bid.ttl = serverResponseOneItem.ttl ? serverResponseOneItem.ttl : 300\n\n          if (serverResponseOneItem.deal_id != null && serverResponseOneItem.deal_id.trim().length > 0) {\n            bid.dealId = serverResponseOneItem.deal_id\n          }\n\n          if (serverResponseOneItem.ad) {\n            bid.ad = serverResponseOneItem.ad\n          } else if (serverResponseOneItem.vastUrl) {\n            bid.vastUrl = serverResponseOneItem.vastUrl\n            bid.mediaType = 'video'\n          } else if (serverResponseOneItem.nativeResponse) {\n            bid.mediaType = 'native'\n\n            let nativeResponse = serverResponseOneItem.nativeResponse\n\n            bid['native'] = {\n              clickUrl: encodeURIComponent(nativeResponse.link.url),\n              impressionTrackers: nativeResponse.imptrackers\n            }\n\n            nativeResponse.assets.forEach(asset => {\n              if (asset.title && asset.title.text) {\n                bid['native'].title = asset.title.text\n              }\n\n              if (asset.img && asset.img.url) {\n                bid['native'].image = asset.img.url\n              }\n\n              if (asset.data && asset.data.label === 'DESC' && asset.data.value) {\n                bid['native'].body = asset.data.value\n              }\n\n              if (asset.data && asset.data.label === 'SPONSORED' && asset.data.value) {\n                bid['native'].sponsoredBy = asset.data.value\n              }\n            })\n          }\n\n          bid.width = serverResponseOneItem.width\n          bid.height = serverResponseOneItem.height\n          utils.logMessage(`submitting bid[${serverResponseOneItem.bidId}]: ${JSON.stringify(bid)}`)\n          bids.push(bid)\n        })\n      } else {\n        utils.logMessage(`empty bid response`)\n      }\n      return bids\n    },\n\n  getUserSyncs: function (syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//cdn.adxcg.net/pb-sync.html'\n      }]\n    }\n  }\n}\n\nfunction isVideoRequest (bid) {\n  return bid.mediaType === 'video' || !!utils.deepAccess(bid, 'mediaTypes.video')\n}\n\nregisterBidder(spec)\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adxcgBidAdapter.js","import * as utils from 'src/utils';\nimport { format } from 'src/url';\n// import { config } from 'src/config';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport find from 'core-js/library/fn/array/find';\n\nconst VERSION = '1.0';\nconst BIDDER_CODE = 'adyoulike';\nconst DEFAULT_DC = 'hb-api';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['ayl'], // short code\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    const sizes = getSize(bid.sizes);\n    if (!bid.params || !bid.params.placement || !sizes.width || !sizes.height) {\n      return false;\n    }\n    return true;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {bidRequests} - bidRequests.bids[] is an array of AdUnits and bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    let dcHostname = getHostname(bidRequests);\n    const payload = {\n      Version: VERSION,\n      Bids: bidRequests.reduce((accumulator, bid) => {\n        let size = getSize(bid.sizes);\n        accumulator[bid.bidId] = {};\n        accumulator[bid.bidId].PlacementID = bid.params.placement;\n        accumulator[bid.bidId].TransactionID = bid.transactionId;\n        accumulator[bid.bidId].Width = size.width;\n        accumulator[bid.bidId].Height = size.height;\n        return accumulator;\n      }, {}),\n      PageRefreshed: getPageRefreshed()\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.gdprConsent = {\n        consentString: bidderRequest.gdprConsent.consentString,\n        consentRequired: (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true\n      };\n    }\n\n    const data = JSON.stringify(payload);\n    const options = {\n      withCredentials: true\n    };\n\n    return {\n      method: 'POST',\n      url: createEndpoint(dcHostname),\n      data,\n      options\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    // For this adapter, serverResponse is a list\n    serverResponse.body.forEach(response => {\n      const bid = createBid(response);\n      if (bid) {\n        bidResponses.push(bid);\n      }\n    });\n    return bidResponses;\n  }\n}\n\n/* Get hostname from bids */\nfunction getHostname(bidderRequest) {\n  let dcHostname = find(bidderRequest, bid => bid.params.DC);\n  if (dcHostname) {\n    return ('-' + dcHostname.params.DC);\n  }\n  return '';\n}\n\n/* Get current page referrer url */\nfunction getReferrerUrl() {\n  let referer = '';\n  if (window.self !== window.top) {\n    try {\n      referer = window.top.document.referrer;\n    } catch (e) { }\n  } else {\n    referer = document.referrer;\n  }\n  return referer;\n}\n\n/* Get current page canonical url */\nfunction getCanonicalUrl() {\n  let link;\n  if (window.self !== window.top) {\n    try {\n      link = window.top.document.head.querySelector('link[rel=\"canonical\"][href]');\n    } catch (e) { }\n  } else {\n    link = document.head.querySelector('link[rel=\"canonical\"][href]');\n  }\n\n  if (link) {\n    return link.href;\n  }\n  return '';\n}\n\n/* Get information on page refresh */\nfunction getPageRefreshed() {\n  try {\n    if (performance && performance.navigation) {\n      return performance.navigation.type === performance.navigation.TYPE_RELOAD;\n    }\n  } catch (e) { }\n  return false;\n}\n\n/* Create endpoint url */\nfunction createEndpoint(host) {\n  return format({\n    protocol: (document.location.protocol === 'https:') ? 'https' : 'http',\n    host: `${DEFAULT_DC}${host}.omnitagjs.com`,\n    pathname: '/hb-api/prebid/v1',\n    search: createEndpointQS()\n  });\n}\n\n/* Create endpoint query string */\nfunction createEndpointQS() {\n  const qs = {};\n\n  const ref = getReferrerUrl();\n  if (ref) {\n    qs.RefererUrl = encodeURIComponent(ref);\n  }\n\n  const can = getCanonicalUrl();\n  if (can) {\n    qs.CanonicalUrl = encodeURIComponent(can);\n  }\n\n  return qs;\n}\n\n/* Get parsed size from request size */\nfunction getSize(requestSizes) {\n  const parsed = {};\n  const size = utils.parseSizesInput(requestSizes)[0];\n\n  if (typeof size !== 'string') {\n    return parsed;\n  }\n\n  const parsedSize = size.toUpperCase().split('X');\n  const width = parseInt(parsedSize[0], 10);\n  if (width) {\n    parsed.width = width;\n  }\n\n  const height = parseInt(parsedSize[1], 10);\n  if (height) {\n    parsed.height = height;\n  }\n\n  return parsed;\n}\n\n/* Create bid from response */\nfunction createBid(response) {\n  if (!response || !response.Ad) {\n    return\n  }\n\n  return {\n    requestId: response.BidID,\n    bidderCode: spec.code,\n    width: response.Width,\n    height: response.Height,\n    ad: response.Ad,\n    ttl: 3600,\n    creativeId: response.CreativeID,\n    cpm: response.Price,\n    netRevenue: true,\n    currency: 'USD'\n  };\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/adyoulikeBidAdapter.js","import { Renderer } from 'src/Renderer';\nimport * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { VIDEO, BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'aja';\nconst URL = '//ad.as.amanad.adtdp.com/v2/prebid';\nconst SDK_TYPE = 5;\nconst AD_TYPE = {\n  BANNER: 1,\n  NATIVE: 2,\n  VIDEO: 3,\n};\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [VIDEO, BANNER],\n\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.asi);\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    var bidRequests = [];\n    for (var i = 0, len = validBidRequests.length; i < len; i++) {\n      var bid = validBidRequests[i];\n      var queryString = '';\n      const asi = utils.getBidIdParameter('asi', bid.params);\n      queryString = utils.tryAppendQueryString(queryString, 'asi', asi);\n      queryString = utils.tryAppendQueryString(queryString, 'skt', SDK_TYPE);\n      queryString = utils.tryAppendQueryString(queryString, 'prebid_id', bid.bidId);\n      queryString = utils.tryAppendQueryString(queryString, 'prebid_ver', '1.25.0-pre');\n\n      bidRequests.push({\n        method: 'GET',\n        url: URL,\n        data: queryString\n      });\n    }\n\n    return bidRequests;\n  },\n\n  interpretResponse: function(bidderResponse, request) {\n    const bidderResponseBody = bidderResponse.body;\n\n    if (!bidderResponseBody.is_ad_return) {\n      return [];\n    }\n\n    const ad = bidderResponseBody.ad;\n\n    const bid = {\n      requestId: ad.prebid_id,\n      cpm: ad.price,\n      creativeId: ad.creative_id,\n      dealId: ad.deal_id,\n      currency: ad.currency || 'USD',\n      netRevenue: true,\n      ttl: 300, // 5 minutes\n    }\n\n    if (AD_TYPE.VIDEO === ad.ad_type) {\n      const videoAd = bidderResponseBody.ad.video;\n      Object.assign(bid, {\n        vastXml: videoAd.vtag,\n        width: videoAd.w,\n        height: videoAd.h,\n        renderer: newRenderer(bidderResponseBody),\n        adResponse: bidderResponseBody,\n        mediaType: VIDEO\n      });\n    } else if (AD_TYPE.BANNER === ad.ad_type) {\n      const bannerAd = bidderResponseBody.ad.banner;\n      Object.assign(bid, {\n        width: bannerAd.w,\n        height: bannerAd.h,\n        ad: bannerAd.tag,\n        mediaType: BANNER\n      });\n      try {\n        bannerAd.imps.forEach(impTracker => {\n          const tracker = utils.createTrackPixelHtml(impTracker);\n          bid.ad += tracker;\n        });\n      } catch (error) {\n        utils.logError('Error appending tracking pixel', error);\n      }\n    }\n\n    return [bid];\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const syncs = [];\n    if (syncOptions.pixelEnabled) {\n      const bidderResponseBody = serverResponses[0].body;\n      if (bidderResponseBody.syncs) {\n        bidderResponseBody.syncs.forEach(sync => {\n          syncs.push({\n            type: 'image',\n            url: sync\n          });\n        });\n      }\n    }\n\n    return syncs;\n  },\n}\n\nfunction newRenderer(bidderResponse) {\n  const renderer = Renderer.install({\n    id: bidderResponse.ad.prebid_id,\n    url: bidderResponse.ad.video.purl,\n    loaded: false,\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on newRenderer', err);\n  }\n\n  return renderer;\n}\n\nfunction outstreamRender(bid) {\n  bid.renderer.push(() => {\n    window.aja_vast_player.init({\n      vast_tag: bid.adResponse.ad.video.vtag,\n      ad_unit_code: bid.adUnitCode, // target div id to render video\n      width: bid.width,\n      height: bid.height,\n      progress: bid.adResponse.ad.video.progress,\n      loop: bid.adResponse.ad.video.loop,\n      inread: bid.adResponse.ad.video.inread\n    });\n  });\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/ajaBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER } from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport find from 'core-js/library/fn/array/find';\n\nconst VERSION = '1.1';\n\n/**\n * Adapter for requesting bids from andbeyond white-label display platform\n */\nexport const spec = {\n\n  code: 'andbeyond',\n  aliases: ['headbidding'],\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid: function(bidRequest) {\n    return 'params' in bidRequest && typeof bidRequest.params.host !== 'undefined' &&\n      'zoneId' in bidRequest.params && !isNaN(Number(bidRequest.params.zoneId));\n  },\n  buildRequests: function(bidRequests) {\n    let auctionId;\n    let dispatch = bidRequests.map(buildImp)\n      .reduce((acc, curr, index) => {\n        let bidRequest = bidRequests[index];\n        let zoneId = bidRequest.params.zoneId;\n        let host = bidRequest.params.host;\n        acc[host] = acc[host] || {};\n        acc[host][zoneId] = acc[host][zoneId] || [];\n        acc[host][zoneId].push(curr);\n        auctionId = bidRequest.bidderRequestId;\n        return acc;\n      }, {});\n    let requests = [];\n    Object.keys(dispatch).forEach(host => {\n      Object.keys(dispatch[host]).forEach(zoneId => {\n        const request = buildRtbRequest(dispatch[host][zoneId], auctionId);\n        requests.push({\n          method: 'GET',\n          url: `${window.location.protocol}//${host}/rtbg`,\n          data: {\n            zone: Number(zoneId),\n            ad_type: 'rtb',\n            v: VERSION,\n            r: JSON.stringify(request)\n          }\n        });\n      });\n    });\n    return requests;\n  },\n  interpretResponse: function(serverResponse, request) {\n    let response = serverResponse.body;\n    if (!response.seatbid) {\n      return [];\n    }\n\n    let rtbRequest = JSON.parse(request.data.r);\n    let rtbImps = rtbRequest.imp;\n    let rtbBids = response.seatbid\n      .map(seatbid => seatbid.bid)\n      .reduce((a, b) => a.concat(b), []);\n\n    return rtbBids.map(rtbBid => {\n      let imp = find(rtbImps, imp => imp.id === rtbBid.impid);\n      let prBid = {\n        requestId: rtbBid.impid,\n        cpm: rtbBid.price,\n        creativeId: rtbBid.crid,\n        currency: 'USD',\n        ttl: 360,\n        netRevenue: true\n      };\n      if ('banner' in imp) {\n        prBid.mediaType = BANNER;\n        prBid.width = rtbBid.w;\n        prBid.height = rtbBid.h;\n        prBid.ad = formatAdMarkup(rtbBid);\n      }\n      return prBid;\n    });\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (!syncOptions.iframeEnabled || !serverResponses || serverResponses.length === 0) {\n      return [];\n    }\n    return serverResponses.filter(rsp => rsp.body && rsp.body.ext && rsp.body.ext.adk_usersync)\n      .map(rsp => rsp.body.ext.adk_usersync)\n      .reduce((a, b) => a.concat(b), [])\n      .map(syncUrl => ({type: 'iframe', url: syncUrl}));\n  }\n};\n\nregisterBidder(spec);\n\n/**\n *  Builds parameters object for single impression\n */\nfunction buildImp(bid) {\n  const sizes = bid.sizes;\n  const imp = {\n    'id': bid.bidId,\n    'tagid': bid.placementCode\n  };\n\n  imp.banner = {\n    format: sizes.map(s => ({'w': s[0], 'h': s[1]})),\n    topframe: 0\n  };\n  if (utils.getTopWindowLocation().protocol === 'https:') {\n    imp.secure = 1;\n  }\n  return imp;\n}\n\n/**\n * Builds complete rtb request\n * @param imps collection of impressions\n * @param auctionId\n */\nfunction buildRtbRequest(imps, auctionId) {\n  let req = {\n    'id': auctionId,\n    'imp': imps,\n    'site': createSite(),\n    'at': 1,\n    'device': {\n      'ip': 'caller',\n      'ua': 'caller',\n      'js': 1,\n      'language': getLanguage()\n    },\n    'ext': {\n      'adk_usersync': 1\n    }\n  };\n  if (utils.getDNT()) {\n    req.device.dnt = 1;\n  }\n  return req;\n}\n\nfunction getLanguage() {\n  const language = navigator.language ? 'language' : 'userLanguage';\n  return navigator[language].split('-')[0];\n}\n\n/**\n * Creates site description object\n */\nfunction createSite() {\n  var location = utils.getTopWindowLocation();\n  return {\n    'domain': location.hostname,\n    'page': location.href.split('?')[0]\n  };\n}\n\n/**\n *  Format creative with optional nurl call\n *  @param bid rtb Bid object\n */\nfunction formatAdMarkup(bid) {\n  var adm = bid.adm;\n  if ('nurl' in bid) {\n    adm += utils.createTrackPixelHtml(`${bid.nurl}&px=1`);\n  }\n  return `<!DOCTYPE html><html><head><title></title><body style='margin:0px;padding:0px;'>${adm}</body></head>`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/andbeyondBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nimport { EVENTS } from 'src/constants.json';\nimport { BANNER } from 'src/mediaTypes';\n\nconst AOL_BIDDERS_CODES = {\n  AOL: 'aol',\n  ONEMOBILE: 'onemobile',\n  ONEDISPLAY: 'onedisplay'\n};\n\nconst AOL_ENDPOINTS = {\n  DISPLAY: {\n    GET: 'display-get'\n  },\n  MOBILE: {\n    GET: 'mobile-get',\n    POST: 'mobile-post'\n  }\n};\n\nconst SYNC_TYPES = {\n  IFRAME: {\n    TAG: 'iframe',\n    TYPE: 'iframe'\n  },\n  IMAGE: {\n    TAG: 'img',\n    TYPE: 'image'\n  }\n};\n\nconst pubapiTemplate = template`//${'host'}/pubapi/3.0/${'network'}/${'placement'}/${'pageid'}/${'sizeid'}/ADTECH;v=2;cmd=bid;cors=yes;alias=${'alias'};misc=${'misc'};${'dynamicParams'}`;\nconst nexageBaseApiTemplate = template`//${'host'}/bidRequest?`;\nconst nexageGetApiTemplate = template`dcn=${'dcn'}&pos=${'pos'}&cmd=bid${'dynamicParams'}`;\nconst MP_SERVER_MAP = {\n  us: 'adserver-us.adtech.advertising.com',\n  eu: 'adserver-eu.adtech.advertising.com',\n  as: 'adserver-as.adtech.advertising.com'\n};\nconst NEXAGE_SERVER = 'hb.nexage.com';\nconst ONE_DISPLAY_TTL = 60;\nconst ONE_MOBILE_TTL = 3600;\n\npbjs.aolGlobals = {\n  pixelsDropped: false\n};\n\nconst NUMERIC_VALUES = {\n  TRUE: 1,\n  FALSE: 0\n};\n\nlet showCpmAdjustmentWarning = (function() {\n  let showCpmWarning = true;\n\n  return function() {\n    let bidderSettings = pbjs.bidderSettings;\n    if (showCpmWarning && bidderSettings && bidderSettings.aol &&\n      typeof bidderSettings.aol.bidCpmAdjustment === 'function') {\n      utils.logWarn(\n        'bidCpmAdjustment is active for the AOL adapter. ' +\n        'As of Prebid 0.14, AOL can bid in net  please contact your accounts team to enable.'\n      );\n      showCpmWarning = false; // warning is shown at most once\n    }\n  };\n})();\n\nfunction template(strings, ...keys) {\n  return function(...values) {\n    let dict = values[values.length - 1] || {};\n    let result = [strings[0]];\n    keys.forEach(function(key, i) {\n      let value = utils.isInteger(key) ? values[key] : dict[key];\n      result.push(value, strings[i + 1]);\n    });\n    return result.join('');\n  };\n}\n\nfunction parsePixelItems(pixels) {\n  let itemsRegExp = /(img|iframe)[\\s\\S]*?src\\s*=\\s*(\"|')(.*?)\\2/gi;\n  let tagNameRegExp = /\\w*(?=\\s)/;\n  let srcRegExp = /src=(\"|')(.*?)\\1/;\n  let pixelsItems = [];\n\n  if (pixels) {\n    let matchedItems = pixels.match(itemsRegExp);\n    if (matchedItems) {\n      matchedItems.forEach(item => {\n        let tagName = item.match(tagNameRegExp)[0];\n        let url = item.match(srcRegExp)[2];\n\n        if (tagName && tagName) {\n          pixelsItems.push({\n            type: tagName === SYNC_TYPES.IMAGE.TAG ? SYNC_TYPES.IMAGE.TYPE : SYNC_TYPES.IFRAME.TYPE,\n            url: url\n          });\n        }\n      });\n    }\n  }\n\n  return pixelsItems;\n}\n\nfunction _isMarketplaceBidder(bidder) {\n  return bidder === AOL_BIDDERS_CODES.AOL || bidder === AOL_BIDDERS_CODES.ONEDISPLAY;\n}\n\nfunction _isOneMobileBidder(bidderCode) {\n  return bidderCode === AOL_BIDDERS_CODES.AOL || bidderCode === AOL_BIDDERS_CODES.ONEMOBILE;\n}\n\nfunction _isNexageRequestPost(bid) {\n  if (_isOneMobileBidder(bid.bidder) && bid.params.id && bid.params.imp && bid.params.imp[0]) {\n    let imp = bid.params.imp[0];\n    return imp.id && imp.tagid &&\n      ((imp.banner && imp.banner.w && imp.banner.h) ||\n        (imp.video && imp.video.mimes && imp.video.minduration && imp.video.maxduration));\n  }\n}\n\nfunction _isNexageRequestGet(bid) {\n  return _isOneMobileBidder(bid.bidder) && bid.params.dcn && bid.params.pos;\n}\n\nfunction isMarketplaceBid(bid) {\n  return _isMarketplaceBidder(bid.bidder) && bid.params.placement && bid.params.network;\n}\n\nfunction isMobileBid(bid) {\n  return _isNexageRequestGet(bid) || _isNexageRequestPost(bid);\n}\n\nfunction resolveEndpointCode(bid) {\n  if (_isNexageRequestGet(bid)) {\n    return AOL_ENDPOINTS.MOBILE.GET;\n  } else if (_isNexageRequestPost(bid)) {\n    return AOL_ENDPOINTS.MOBILE.POST;\n  } else if (isMarketplaceBid(bid)) {\n    return AOL_ENDPOINTS.DISPLAY.GET;\n  }\n}\n\nexport const spec = {\n  code: AOL_BIDDERS_CODES.AOL,\n  aliases: [AOL_BIDDERS_CODES.ONEMOBILE, AOL_BIDDERS_CODES.ONEDISPLAY],\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid(bid) {\n    return isMarketplaceBid(bid) || isMobileBid(bid);\n  },\n  buildRequests(bids, bidderRequest) {\n    let consentData = bidderRequest ? bidderRequest.gdprConsent : null;\n\n    return bids.map(bid => {\n      const endpointCode = resolveEndpointCode(bid);\n\n      if (endpointCode) {\n        return this.formatBidRequest(endpointCode, bid, consentData);\n      }\n    });\n  },\n  interpretResponse({body}, bidRequest) {\n    showCpmAdjustmentWarning();\n\n    if (!body) {\n      utils.logError('Empty bid response', bidRequest.bidderCode, body);\n    } else {\n      let bid = this._parseBidResponse(body, bidRequest);\n\n      if (bid) {\n        return bid;\n      }\n    }\n  },\n  getUserSyncs(options, bidResponses) {\n    let bidResponse = bidResponses[0];\n\n    if (config.getConfig('aol.userSyncOn') === EVENTS.BID_RESPONSE) {\n      if (!pbjs.aolGlobals.pixelsDropped && bidResponse && bidResponse.ext && bidResponse.ext.pixels) {\n        pbjs.aolGlobals.pixelsDropped = true;\n\n        return parsePixelItems(bidResponse.ext.pixels);\n      }\n    }\n\n    return [];\n  },\n\n  formatBidRequest(endpointCode, bid, consentData) {\n    let bidRequest;\n\n    switch (endpointCode) {\n      case AOL_ENDPOINTS.DISPLAY.GET:\n        bidRequest = {\n          url: this.buildMarketplaceUrl(bid, consentData),\n          method: 'GET',\n          ttl: ONE_DISPLAY_TTL\n        };\n        break;\n\n      case AOL_ENDPOINTS.MOBILE.GET:\n        bidRequest = {\n          url: this.buildOneMobileGetUrl(bid, consentData),\n          method: 'GET',\n          ttl: ONE_MOBILE_TTL\n        };\n        break;\n\n      case AOL_ENDPOINTS.MOBILE.POST:\n        bidRequest = {\n          url: this.buildOneMobileBaseUrl(bid),\n          method: 'POST',\n          ttl: ONE_MOBILE_TTL,\n          data: this.buildOpenRtbRequestData(bid, consentData),\n          options: {\n            contentType: 'application/json',\n            customHeaders: {\n              'x-openrtb-version': '2.2'\n            }\n          }\n        };\n        break;\n    }\n\n    bidRequest.bidderCode = bid.bidder;\n    bidRequest.bidId = bid.bidId;\n    bidRequest.userSyncOn = bid.params.userSyncOn;\n\n    return bidRequest;\n  },\n  buildMarketplaceUrl(bid, consentData) {\n    const params = bid.params;\n    const serverParam = params.server;\n    let regionParam = params.region || 'us';\n    let server;\n\n    if (!MP_SERVER_MAP.hasOwnProperty(regionParam)) {\n      utils.logWarn(`Unknown region '${regionParam}' for AOL bidder.`);\n      regionParam = 'us'; // Default region.\n    }\n\n    if (serverParam) {\n      server = serverParam;\n    } else {\n      server = MP_SERVER_MAP[regionParam];\n    }\n\n    // Set region param, used by AOL analytics.\n    params.region = regionParam;\n\n    return pubapiTemplate({\n      host: server,\n      network: params.network,\n      placement: parseInt(params.placement),\n      pageid: params.pageId || 0,\n      sizeid: params.sizeId || 0,\n      alias: params.alias || utils.getUniqueIdentifierStr(),\n      misc: new Date().getTime(), // cache busting\n      dynamicParams: this.formatMarketplaceDynamicParams(params, consentData)\n    });\n  },\n  buildOneMobileGetUrl(bid, consentData) {\n    let {dcn, pos, ext} = bid.params;\n    let nexageApi = this.buildOneMobileBaseUrl(bid);\n    if (dcn && pos) {\n      let dynamicParams = this.formatOneMobileDynamicParams(ext, consentData);\n      nexageApi += nexageGetApiTemplate({dcn, pos, dynamicParams});\n    }\n    return nexageApi;\n  },\n  buildOneMobileBaseUrl(bid) {\n    return nexageBaseApiTemplate({\n      host: bid.params.host || NEXAGE_SERVER\n    });\n  },\n  formatMarketplaceDynamicParams(params = {}, consentData) {\n    let queryParams = {};\n\n    if (params.bidFloor) {\n      queryParams.bidfloor = params.bidFloor;\n    }\n\n    Object.assign(queryParams, this.formatKeyValues(params.keyValues));\n    Object.assign(queryParams, this.formatConsentData(consentData));\n\n    let paramsFormatted = '';\n    utils._each(queryParams, (value, key) => {\n      paramsFormatted += `${key}=${encodeURIComponent(value)};`;\n    });\n\n    return paramsFormatted;\n  },\n  formatOneMobileDynamicParams(params = {}, consentData) {\n    if (this.isSecureProtocol()) {\n      params.secure = NUMERIC_VALUES.TRUE;\n    }\n\n    Object.assign(params, this.formatConsentData(consentData));\n\n    let paramsFormatted = '';\n    utils._each(params, (value, key) => {\n      paramsFormatted += `&${key}=${encodeURIComponent(value)}`;\n    });\n\n    return paramsFormatted;\n  },\n  buildOpenRtbRequestData(bid, consentData) {\n    let openRtbObject = {\n      id: bid.params.id,\n      imp: bid.params.imp\n    };\n\n    if (this.isConsentRequired(consentData)) {\n      openRtbObject.regs = {\n        ext: {\n          gdpr: NUMERIC_VALUES.TRUE\n        }\n      };\n\n      if (consentData.consentString) {\n        openRtbObject.user = {\n          ext: {\n            consent: consentData.consentString\n          }\n        };\n      }\n    }\n\n    return openRtbObject;\n  },\n  isConsentRequired(consentData) {\n    return !!(consentData && consentData.gdprApplies);\n  },\n  formatKeyValues(keyValues) {\n    let keyValuesHash = {};\n\n    utils._each(keyValues, (value, key) => {\n      keyValuesHash[`kv${key}`] = value;\n    });\n\n    return keyValuesHash;\n  },\n  formatConsentData(consentData) {\n    let params = {};\n\n    if (this.isConsentRequired(consentData)) {\n      params.gdpr = NUMERIC_VALUES.TRUE;\n\n      if (consentData.consentString) {\n        params.euconsent = consentData.consentString;\n      }\n    }\n\n    return params;\n  },\n\n  _parseBidResponse(response, bidRequest) {\n    let bidData;\n\n    try {\n      bidData = response.seatbid[0].bid[0];\n    } catch (e) {\n      return;\n    }\n\n    let cpm;\n\n    if (bidData.ext && bidData.ext.encp) {\n      cpm = bidData.ext.encp;\n    } else {\n      cpm = bidData.price;\n\n      if (cpm === null || isNaN(cpm)) {\n        utils.logError('Invalid price in bid response', AOL_BIDDERS_CODES.AOL, bid);\n        return;\n      }\n    }\n\n    let bidResponse = {\n      bidderCode: bidRequest.bidderCode,\n      requestId: bidRequest.bidId,\n      ad: bidData.adm,\n      cpm: cpm,\n      width: bidData.w,\n      height: bidData.h,\n      creativeId: bidData.crid || 0,\n      pubapiId: response.id,\n      currency: response.cur || 'USD',\n      dealId: bidData.dealid,\n      netRevenue: true,\n      ttl: bidRequest.ttl\n    };\n\n    if (response.ext && response.ext.pixels) {\n      if (config.getConfig('aol.userSyncOn') !== EVENTS.BID_RESPONSE) {\n        bidResponse.ad += this.formatPixels(response.ext.pixels);\n      }\n    }\n\n    return bidResponse;\n  },\n  formatPixels(pixels) {\n    let formattedPixels = pixels.replace(/<\\/?script( type=('|\")text\\/javascript('|\")|)?>/g, '');\n\n    return '<script>var w=window,prebid;' +\n      'for(var i=0;i<10;i++){w = w.parent;prebid=w.pbjs;' +\n      'if(prebid && prebid.aolGlobals && !prebid.aolGlobals.pixelsDropped){' +\n      'try{prebid.aolGlobals.pixelsDropped=true;' + formattedPixels + 'break;}' +\n      'catch(e){continue;}' +\n      '}}</script>';\n  },\n  isOneMobileBidder: _isOneMobileBidder,\n  isSecureProtocol() {\n    return document.location.protocol === 'https:';\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/aolBidAdapter.js","/**\n * appnexus.js - AppNexus Prebid Analytics Adapter\n */\n\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\n\nvar appnexusAdapter = adapter({\n  global: 'AppNexusPrebidAnalytics',\n  handler: 'on',\n  analyticsType: 'bundle'\n});\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: appnexusAdapter,\n  code: 'appnexus'\n});\n\nexport default appnexusAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/appnexusAnalyticsAdapter.js","import { Renderer } from 'src/Renderer';\nimport * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'appnexus';\nconst URL = '//ib.adnxs.com/ut/v3/prebid';\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\nconst USER_PARAMS = ['age', 'external_uid', 'segments', 'gender', 'dnt', 'language'];\nconst APP_DEVICE_PARAMS = ['geo', 'device_id']; // appid is collected separately\nconst NATIVE_MAPPING = {\n  body: 'description',\n  cta: 'ctatext',\n  image: {\n    serverName: 'main_image',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  icon: {\n    serverName: 'icon',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  sponsoredBy: 'sponsored_by',\n};\nconst SOURCE = 'pbjs';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['appnexusAst', 'brealtime', 'emxdigital', 'pagescience', 'defymedia', 'gourmetads', 'matomy', 'featureforward', 'oftmedia', 'districtm'],\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId || (bid.params.member && bid.params.invCode));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    const tags = bidRequests.map(bidToTag);\n    const userObjBid = find(bidRequests, hasUserInfo);\n    let userObj;\n    if (userObjBid) {\n      userObj = {};\n      Object.keys(userObjBid.params.user)\n        .filter(param => includes(USER_PARAMS, param))\n        .forEach(param => userObj[param] = userObjBid.params.user[param]);\n    }\n\n    const appDeviceObjBid = find(bidRequests, hasAppDeviceInfo);\n    let appDeviceObj;\n    if (appDeviceObjBid && appDeviceObjBid.params && appDeviceObjBid.params.app) {\n      appDeviceObj = {};\n      Object.keys(appDeviceObjBid.params.app)\n        .filter(param => includes(APP_DEVICE_PARAMS, param))\n        .forEach(param => appDeviceObj[param] = appDeviceObjBid.params.app[param]);\n    }\n\n    const appIdObjBid = find(bidRequests, hasAppId);\n    let appIdObj;\n    if (appIdObjBid && appIdObjBid.params && appDeviceObjBid.params.app && appDeviceObjBid.params.app.id) {\n      appIdObj = {\n        appid: appIdObjBid.params.app.id\n      };\n    }\n\n    const memberIdBid = find(bidRequests, hasMemberId);\n    const member = memberIdBid ? parseInt(memberIdBid.params.member, 10) : 0;\n\n    const payload = {\n      tags: [...tags],\n      user: userObj,\n      sdk: {\n        source: SOURCE,\n        version: '1.25.0-pre'\n      }\n    };\n    if (member > 0) {\n      payload.member_id = member;\n    }\n\n    if (appDeviceObjBid) {\n      payload.device = appDeviceObj\n    }\n    if (appIdObjBid) {\n      payload.app = appIdObj;\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      // note - objects for impbus use underscore instead of camelCase\n      payload.gdpr_consent = {\n        consent_string: bidderRequest.gdprConsent.consentString,\n        consent_required: bidderRequest.gdprConsent.gdprApplies\n      };\n    }\n\n    if (bidderRequest && bidderRequest.refererInfo) {\n      let refererinfo = {\n        rd_ref: bidderRequest.refererInfo.referer,\n        rd_top: bidderRequest.refererInfo.reachedTop,\n        rd_ifs: bidderRequest.refererInfo.numIframes,\n        rd_stk: bidderRequest.refererInfo.stack.join(',')\n      }\n      payload.referrer_detection = refererinfo;\n    }\n\n    const payloadString = JSON.stringify(payload);\n    return {\n      method: 'POST',\n      url: URL,\n      data: payloadString,\n      bidderRequest\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (serverResponse.tags) {\n      serverResponse.tags.forEach(serverBid => {\n        const rtbBid = getRtbBid(serverBid);\n        if (rtbBid) {\n          if (rtbBid.cpm !== 0 && includes(this.supportedMediaTypes, rtbBid.ad_type)) {\n            const bid = newBid(serverBid, rtbBid, bidderRequest);\n            bid.mediaType = parseMediaType(rtbBid);\n            bids.push(bid);\n          }\n        }\n      });\n    }\n    return bids;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      }];\n    }\n  },\n\n  transformBidParams: function(params, isOpenRtb) {\n    params = utils.convertTypes({\n      'member': 'string',\n      'invCode': 'string',\n      'placementId': 'number',\n      'keywords': utils.transformBidderParamKeywords\n    }, params);\n\n    if (isOpenRtb) {\n      params.use_pmt_rule = (typeof params.usePaymentRule === 'boolean') ? params.usePaymentRule : false;\n      if (params.usePaymentRule) { delete params.usePaymentRule; }\n\n      Object.keys(params).forEach(paramKey => {\n        let convertedKey = utils.convertCamelToUnderscore(paramKey);\n        if (convertedKey !== paramKey) {\n          params[convertedKey] = params[paramKey];\n          delete params[paramKey];\n        }\n      });\n    }\n\n    return params;\n  }\n}\n\nfunction newRenderer(adUnitCode, rtbBid, rendererOptions = {}) {\n  const renderer = Renderer.install({\n    id: rtbBid.renderer_id,\n    url: rtbBid.renderer_url,\n    config: rendererOptions,\n    loaded: false,\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  renderer.setEventHandlers({\n    impression: () => utils.logMessage('AppNexus outstream video impression event'),\n    loaded: () => utils.logMessage('AppNexus outstream video loaded event'),\n    ended: () => {\n      utils.logMessage('AppNexus outstream renderer video event');\n      document.querySelector(`#${adUnitCode}`).style.display = 'none';\n    }\n  });\n  return renderer;\n}\n\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @param rtbBid\n * @param bidderRequest\n * @return Bid\n */\nfunction newBid(serverBid, rtbBid, bidderRequest) {\n  const bid = {\n    requestId: serverBid.uuid,\n    cpm: rtbBid.cpm,\n    creativeId: rtbBid.creative_id,\n    dealId: rtbBid.deal_id,\n    currency: 'USD',\n    netRevenue: true,\n    ttl: 300,\n    appnexus: {\n      buyerMemberId: rtbBid.buyer_member_id\n    }\n  };\n\n  if (rtbBid.rtb.video) {\n    Object.assign(bid, {\n      width: rtbBid.rtb.video.player_width,\n      height: rtbBid.rtb.video.player_height,\n      vastUrl: rtbBid.rtb.video.asset_url,\n      vastImpUrl: rtbBid.notify_url,\n      ttl: 3600\n    });\n    // This supports Outstream Video\n    if (rtbBid.renderer_url) {\n      const rendererOptions = utils.deepAccess(\n        bidderRequest.bids[0],\n        'renderer.options'\n      );\n\n      Object.assign(bid, {\n        adResponse: serverBid,\n        renderer: newRenderer(bid.adUnitCode, rtbBid, rendererOptions)\n      });\n      bid.adResponse.ad = bid.adResponse.ads[0];\n      bid.adResponse.ad.video = bid.adResponse.ad.rtb.video;\n    }\n  } else if (rtbBid.rtb[NATIVE]) {\n    const nativeAd = rtbBid.rtb[NATIVE];\n    bid[NATIVE] = {\n      title: nativeAd.title,\n      body: nativeAd.desc,\n      cta: nativeAd.ctatext,\n      sponsoredBy: nativeAd.sponsored,\n      clickUrl: nativeAd.link.url,\n      clickTrackers: nativeAd.link.click_trackers,\n      impressionTrackers: nativeAd.impression_trackers,\n      javascriptTrackers: nativeAd.javascript_trackers,\n    };\n    if (nativeAd.main_img) {\n      bid['native'].image = {\n        url: nativeAd.main_img.url,\n        height: nativeAd.main_img.height,\n        width: nativeAd.main_img.width,\n      };\n    }\n    if (nativeAd.icon) {\n      bid['native'].icon = {\n        url: nativeAd.icon.url,\n        height: nativeAd.icon.height,\n        width: nativeAd.icon.width,\n      };\n    }\n  } else {\n    Object.assign(bid, {\n      width: rtbBid.rtb.banner.width,\n      height: rtbBid.rtb.banner.height,\n      ad: rtbBid.rtb.banner.content\n    });\n    try {\n      const url = rtbBid.rtb.trackers[0].impression_urls[0];\n      const tracker = utils.createTrackPixelHtml(url);\n      bid.ad += tracker;\n    } catch (error) {\n      utils.logError('Error appending tracking pixel', error);\n    }\n  }\n\n  return bid;\n}\n\nfunction bidToTag(bid) {\n  const tag = {};\n  tag.sizes = transformSizes(bid.sizes);\n  tag.primary_size = tag.sizes[0];\n  tag.ad_types = [];\n  tag.uuid = bid.bidId;\n  if (bid.params.placementId) {\n    tag.id = parseInt(bid.params.placementId, 10);\n  } else {\n    tag.code = bid.params.invCode;\n  }\n  tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\n  tag.use_pmt_rule = bid.params.usePaymentRule || false\n  tag.prebid = true;\n  tag.disable_psa = true;\n  if (bid.params.reserve) {\n    tag.reserve = bid.params.reserve;\n  }\n  if (bid.params.position) {\n    tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\n  }\n  if (bid.params.trafficSourceCode) {\n    tag.traffic_source_code = bid.params.trafficSourceCode;\n  }\n  if (bid.params.privateSizes) {\n    tag.private_sizes = transformSizes(bid.params.privateSizes);\n  }\n  if (bid.params.supplyType) {\n    tag.supply_type = bid.params.supplyType;\n  }\n  if (bid.params.pubClick) {\n    tag.pubclick = bid.params.pubClick;\n  }\n  if (bid.params.extInvCode) {\n    tag.ext_inv_code = bid.params.extInvCode;\n  }\n  if (bid.params.externalImpId) {\n    tag.external_imp_id = bid.params.externalImpId;\n  }\n  if (!utils.isEmpty(bid.params.keywords)) {\n    tag.keywords = utils.transformBidderParamKeywords(bid.params.keywords);\n  }\n\n  if (bid.mediaType === NATIVE || utils.deepAccess(bid, `mediaTypes.${NATIVE}`)) {\n    tag.ad_types.push(NATIVE);\n\n    if (bid.nativeParams) {\n      const nativeRequest = buildNativeRequest(bid.nativeParams);\n      tag[NATIVE] = {layouts: [nativeRequest]};\n    }\n  }\n\n  const videoMediaType = utils.deepAccess(bid, `mediaTypes.${VIDEO}`);\n  const context = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n  if (bid.mediaType === VIDEO || videoMediaType) {\n    tag.ad_types.push(VIDEO);\n  }\n\n  // instream gets vastUrl, outstream gets vastXml\n  if (bid.mediaType === VIDEO || (videoMediaType && context !== 'outstream')) {\n    tag.require_asset_url = true;\n  }\n\n  if (bid.params.video) {\n    tag.video = {};\n    // place any valid video params on the tag\n    Object.keys(bid.params.video)\n      .filter(param => includes(VIDEO_TARGETING, param))\n      .forEach(param => tag.video[param] = bid.params.video[param]);\n  }\n\n  if (\n    (utils.isEmpty(bid.mediaType) && utils.isEmpty(bid.mediaTypes)) ||\n    (bid.mediaType === BANNER || (bid.mediaTypes && bid.mediaTypes[BANNER]))\n  ) {\n    tag.ad_types.push(BANNER);\n  }\n\n  return tag;\n}\n\n/* Turn bid request sizes into ut-compatible format */\nfunction transformSizes(requestSizes) {\n  let sizes = [];\n  let sizeObj = {};\n\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    sizeObj.width = parseInt(requestSizes[0], 10);\n    sizeObj.height = parseInt(requestSizes[1], 10);\n    sizes.push(sizeObj);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      sizeObj = {};\n      sizeObj.width = parseInt(size[0], 10);\n      sizeObj.height = parseInt(size[1], 10);\n      sizes.push(sizeObj);\n    }\n  }\n\n  return sizes;\n}\n\nfunction hasUserInfo(bid) {\n  return !!bid.params.user;\n}\n\nfunction hasMemberId(bid) {\n  return !!parseInt(bid.params.member, 10);\n}\n\nfunction hasAppDeviceInfo(bid) {\n  if (bid.params) {\n    return !!bid.params.app\n  }\n}\n\nfunction hasAppId(bid) {\n  if (bid.params && bid.params.app) {\n    return !!bid.params.app.id\n  }\n  return !!bid.params.app\n}\n\nfunction getRtbBid(tag) {\n  return tag && tag.ads && tag.ads.length && find(tag.ads, ad => ad.rtb);\n}\n\nfunction buildNativeRequest(params) {\n  const request = {};\n\n  // map standard prebid native asset identifier to /ut parameters\n  // e.g., tag specifies `body` but /ut only knows `description`.\n  // mapping may be in form {tag: '<server name>'} or\n  // {tag: {serverName: '<server name>', requiredParams: {...}}}\n  Object.keys(params).forEach(key => {\n    // check if one of the <server name> forms is used, otherwise\n    // a mapping wasn't specified so pass the key straight through\n    const requestKey =\n      (NATIVE_MAPPING[key] && NATIVE_MAPPING[key].serverName) ||\n      NATIVE_MAPPING[key] ||\n      key;\n\n    // required params are always passed on request\n    const requiredParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].requiredParams;\n    request[requestKey] = Object.assign({}, requiredParams, params[key]);\n\n    // minimum params are passed if no non-required params given on adunit\n    const minimumParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].minimumParams;\n\n    if (requiredParams && minimumParams) {\n      // subtract required keys from adunit keys\n      const adunitKeys = Object.keys(params[key]);\n      const requiredKeys = Object.keys(requiredParams);\n      const remaining = adunitKeys.filter(key => !includes(requiredKeys, key));\n\n      // if none are left over, the minimum params needs to be sent\n      if (remaining.length === 0) {\n        request[requestKey] = Object.assign({}, request[requestKey], minimumParams);\n      }\n    }\n  });\n\n  return request;\n}\n\nfunction outstreamRender(bid) {\n  // push to render queue because ANOutstreamVideo may not be loaded yet\n  bid.renderer.push(() => {\n    window.ANOutstreamVideo.renderAd({\n      tagId: bid.adResponse.tag_id,\n      sizes: [bid.getSize().split('x')],\n      targetId: bid.adUnitCode, // target div id to render video\n      uuid: bid.adResponse.uuid,\n      adResponse: bid.adResponse,\n      rendererOptions: bid.renderer.getConfig()\n    }, handleOutstreamRendererEvents.bind(null, bid));\n  });\n}\n\nfunction handleOutstreamRendererEvents(bid, id, eventName) {\n  bid.renderer.handleVideoEvent({ id, eventName });\n}\n\nfunction parseMediaType(rtbBid) {\n  const adType = rtbBid.ad_type;\n  if (adType === VIDEO) {\n    return VIDEO;\n  } else if (adType === NATIVE) {\n    return NATIVE;\n  } else {\n    return BANNER;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/appnexusBidAdapter.js","import * as utils from 'src/utils';\nimport {BANNER} from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\n\nconst BIDDER_CODE = 'arteebee';\n\nconst DEFAULT_HOST = 'bidder.mamrtb.com';\n\nconst DEFAULT_SSP = 'arteebee';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid: function (bidRequest) {\n    return 'params' in bidRequest && bidRequest.params.pub !== undefined &&\n      bidRequest.params.source !== undefined;\n  },\n  buildRequests: function (validBidRequests, bidderRequest) {\n    var requests = [];\n\n    for (let i = 0; i < validBidRequests.length; i++) {\n      let prebidReq = makePrebidRequest(validBidRequests[i], bidderRequest);\n      if (prebidReq) {\n        requests.push(prebidReq);\n      }\n    }\n\n    return requests;\n  },\n  interpretResponse: function (serverResponse, bidRequest) {\n    var rtbResp = serverResponse.body;\n\n    if ((!rtbResp) || (!rtbResp.seatbid)) {\n      return [];\n    }\n\n    let bidResponses = [];\n\n    for (let i = 0; i < rtbResp.seatbid.length; i++) {\n      let seatbid = rtbResp.seatbid[i];\n      for (let j = 0; j < seatbid.bid.length; j++) {\n        let bid = seatbid.bid[j];\n        let bidResponse = {\n          requestId: bid.impid,\n          cpm: bid.price,\n          width: bid.w,\n          height: bid.h,\n          mediaType: BANNER,\n          creativeId: bid.crid,\n          currency: 'USD',\n          netRevenue: true,\n          ttl: bid.exp,\n          ad: bid.adm\n        };\n        bidResponses.push(bidResponse);\n      }\n    }\n    return bidResponses;\n  },\n  getUserSyncs: function (syncOptions, serverResponses, gdprConsent) {\n    return [];\n  }\n}\n\nregisterBidder(spec);\n\nfunction makePrebidRequest(req, bidderRequest) {\n  var host = req.params.host || DEFAULT_HOST;\n  var ssp = req.params.ssp || DEFAULT_SSP;\n\n  var url = window.location.protocol + '//' + host + '/rtb/bid/' + ssp + '?type=json&register=0';\n\n  const payload = makeRtbRequest(req, bidderRequest);\n  const payloadString = JSON.stringify(payload);\n\n  return {\n    method: 'POST',\n    url: url,\n    data: payloadString\n  };\n}\n\nfunction makeRtbRequest(req, bidderRequest) {\n  var auctionId = req.bidderRequestId;\n\n  var imp = [];\n  imp.push(makeImp(req));\n\n  var rtbReq = {\n    'id': auctionId,\n    'imp': imp,\n    'site': makeSite(req),\n    'device': makeDevice(),\n    'at': 1,\n    'tmax': config.getConfig('bidderTimeout')\n  };\n\n  if (req.params.coppa) {\n    rtbReq.regs = {coppa: 1};\n  }\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    if ((typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') && bidderRequest.gdprConsent.gdprApplies) {\n      if (!rtbReq.regs) {\n        rtbReq.regs = {};\n      }\n      rtbReq.regs['ext'] = {'gdpr': 1};\n    }\n    if ((typeof bidderRequest.gdprConsent.consentString === 'string') && bidderRequest.gdprConsent.consentString) {\n      rtbReq['user'] = {'ext': {'consent': bidderRequest.gdprConsent.consentString}};\n    }\n  }\n\n  if (req.params.test) {\n    rtbReq.test = 1;\n  }\n\n  return rtbReq;\n}\n\nfunction makeImp(req) {\n  var imp = {\n    'id': req.bidId,\n    'tagid': req.placementCode\n  };\n\n  if (window.location.protocol === 'https:') {\n    imp.secure = 1;\n  }\n\n  imp.banner = makeBanner(req);\n\n  return imp;\n}\n\nfunction makeBanner(req) {\n  var format = [];\n\n  for (let i = 0; i < req.sizes.length; i++) {\n    format.push({\n      w: req.sizes[i][0],\n      h: req.sizes[i][1]\n    });\n  }\n  return {\n    'format': format\n  };\n}\n\nfunction makeSite(req) {\n  var params = req.params;\n\n  var site = {\n    'id': params.source,\n    'page': utils.getTopWindowUrl(),\n    'ref': utils.getTopWindowReferrer(),\n    'publisher': makePublisher(req)\n  };\n\n  return site;\n}\n\nfunction makePublisher(req) {\n  var params = req.params;\n\n  var publisher = {\n    'id': params.pub,\n    'domain': getDomain(config.getConfig('publisherDomain'))\n  };\n\n  return publisher;\n}\n\nfunction getDomain(url) {\n  var a = document.createElement('a');\n  a.href = url;\n\n  return a.host;\n}\n\nfunction makeDevice() {\n  var device = {\n    'ua': 'caller',\n    'ip': 'caller',\n    'js': 1\n  };\n\n  return device;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/arteebeeBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'atomx';\n\nfunction getDomain() {\n  var domain = '';\n\n  try {\n    if ((domain === '') && (window.top == window)) {\n      domain = window.location.href;\n    }\n\n    if ((domain === '') && (window.top == window.parent)) {\n      domain = document.referrer;\n    }\n\n    if (domain == '') {\n      var atomxt = 'atomxtest';\n\n      // It should be impossible to change the window.location.ancestorOrigins.\n      window.location.ancestorOrigins[0] = atomxt;\n      if (window.location.ancestorOrigins[0] != atomxt) {\n        var ancestorOrigins = window.location.ancestorOrigins;\n\n        // If the length is 0 we are a javascript tag running in the main domain.\n        // But window.top != window or window.location.hostname is empty.\n        if (ancestorOrigins.length == 0) {\n          // This browser is so fucked up, just return an empty string.\n          return '';\n        }\n\n        // ancestorOrigins is an array where [0] is our own window.location\n        // and [length-1] is the top window.location.\n        domain = ancestorOrigins[ancestorOrigins.length - 1];\n      }\n    }\n  } catch (unused) {\n  }\n\n  if (domain === '') {\n    domain = document.referrer;\n  }\n\n  if (domain === '') {\n    domain = window.location.href;\n  }\n\n  return domain.substr(0, 512);\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: function(bid) {\n    return bid.params && (!!bid.params.id);\n  },\n\n  buildRequests: function(validBidRequests) {\n    return validBidRequests.map(bidRequest => {\n      return {\n        method: 'GET',\n        url: location.protocol + '//p.ato.mx/placement',\n        data: {\n          v: 12,\n          id: bidRequest.params.id,\n          size: utils.parseSizesInput(bidRequest.sizes)[0],\n          prebid: bidRequest.bidId,\n          b: 0,\n          h: '7t3y9',\n          type: 'javascript',\n          screen: window.screen.width + 'x' + window.screen.height + 'x' + window.screen.colorDepth,\n          timezone: new Date().getTimezoneOffset(),\n          domain: getDomain(),\n          r: document.referrer.substr(0, 512),\n        },\n      };\n    });\n  },\n\n  interpretResponse: function (serverResponse, bidRequest) {\n    const body = serverResponse.body;\n    const res = {\n      requestId: body.code,\n      cpm: body.cpm * 1000,\n      width: body.width,\n      height: body.height,\n      creativeId: body.creative_id,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 60,\n    };\n\n    if (body.adm) {\n      res.ad = body.adm;\n    } else {\n      res.adUrl = body.url;\n    }\n\n    return [res];\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses) {\n    return [];\n  },\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/atomxBidAdapter.js","/**\n * @file AudienceNetwork adapter.\n */\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { formatQS } from 'src/url';\nimport { generateUUID, getTopWindowUrl, isSafariBrowser, convertTypes } from 'src/utils';\nimport findIndex from 'core-js/library/fn/array/find-index';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst code = 'audienceNetwork';\nconst currency = 'USD';\nconst method = 'GET';\nconst url = 'https://an.facebook.com/v2/placementbid.json';\nconst supportedMediaTypes = ['banner', 'video'];\nconst netRevenue = true;\nconst hbBidder = 'fan';\nconst ttl = 600;\nconst videoTtl = 3600;\nconst platver = '1.25.0-pre';\nconst platform = '241394079772386';\nconst adapterver = '1.0.1';\n\n/**\n * Does this bid request contain valid parameters?\n * @param {Object} bid\n * @returns {Boolean}\n */\nconst isBidRequestValid = bid =>\n  typeof bid.params === 'object' &&\n  typeof bid.params.placementId === 'string' &&\n  bid.params.placementId.length > 0 &&\n  Array.isArray(bid.sizes) && bid.sizes.length > 0 &&\n  (isFullWidth(bid.params.format) ? bid.sizes.map(flattenSize).some(size => size === '300x250') : true) &&\n  (isValidNonSizedFormat(bid.params.format) || bid.sizes.map(flattenSize).some(isValidSize));\n\n/**\n * Flattens a 2-element [W, H] array as a 'WxH' string,\n * otherwise passes value through.\n * @param {Array|String} size\n * @returns {String}\n */\nconst flattenSize = size =>\n  (Array.isArray(size) && size.length === 2) ? `${size[0]}x${size[1]}` : size;\n\n/**\n * Expands a 'WxH' string as a 2-element [W, H] array\n * @param {String} size\n * @returns {Array}\n */\nconst expandSize = size => size.split('x').map(Number);\n\n/**\n * Is this a valid slot size?\n * @param {String} size\n * @returns {Boolean}\n */\nconst isValidSize = size => includes(['300x250', '320x50'], size);\n\n/**\n * Is this a valid, non-sized format?\n * @param {String} size\n * @returns {Boolean}\n */\nconst isValidNonSizedFormat = format => includes(['video', 'native'], format);\n\n/**\n * Is this a valid size and format?\n * @param {String} size\n * @returns {Boolean}\n */\nconst isValidSizeAndFormat = (size, format) =>\n  (isFullWidth(format) && flattenSize(size) === '300x250') ||\n  isValidNonSizedFormat(format) ||\n  isValidSize(flattenSize(size));\n\n/**\n * Is this a video format?\n * @param {String} format\n * @returns {Boolean}\n */\nconst isVideo = format => format === 'video';\n\n/**\n * Is this a fullwidth format?\n * @param {String} format\n * @returns {Boolean}\n */\nconst isFullWidth = format => format === 'fullwidth';\n\n/**\n * Which SDK version should be used for this format?\n * @param {String} format\n * @returns {String}\n */\nconst sdkVersion = format => isVideo(format) ? '' : '5.5.web';\n\n/**\n * Which platform identifier should be used?\n * @param {Array<String>} platforms Possible platform identifiers\n * @returns {String} First valid platform found, or default if none found\n */\nconst findPlatform = platforms => [...platforms.filter(Boolean), platform][0];\n\n/**\n * Does the search part of the URL contain \"anhb_testmode\"\n * and therefore indicate testmode should be used?\n * @returns {String} \"true\" or \"false\"\n */\nconst isTestmode = () => Boolean(\n  window && window.location &&\n  typeof window.location.search === 'string' &&\n  window.location.search.indexOf('anhb_testmode') !== -1\n).toString();\n\n/**\n * Generate ad HTML for injection into an iframe\n * @param {String} placementId\n * @param {String} format\n * @param {String} bidId\n * @returns {String} HTML\n */\nconst createAdHtml = (placementId, format, bidId) => {\n  const nativeStyle = format === 'native' ? '<script>window.onload=function(){if(parent){var o=document.getElementsByTagName(\"head\")[0];var s=parent.document.getElementsByTagName(\"style\");for(var i=0;i<s.length;i++)o.appendChild(s[i].cloneNode(true));}}</script>' : '';\n  const nativeContainer = format === 'native' ? '<div class=\"thirdPartyRoot\"><a class=\"fbAdLink\"><div class=\"fbAdMedia thirdPartyMediaClass\"></div><div class=\"fbAdSubtitle thirdPartySubtitleClass\"></div><div class=\"fbDefaultNativeAdWrapper\"><div class=\"fbAdCallToAction thirdPartyCallToActionClass\"></div><div class=\"fbAdTitle thirdPartyTitleClass\"></div></div></a></div>' : '';\n  return `<html><head>${nativeStyle}</head><body><div style=\"display:none;position:relative;\">\n<script type='text/javascript'>var data = {placementid:'${placementId}',format:'${format}',bidid:'${bidId}',onAdLoaded:function(e){console.log('Audience Network [${placementId}] ad loaded');e.style.display = 'block';},onAdError:function(c,m){console.log('Audience Network [${placementId}] error (' + c + ') ' + m);}};\n(function(a,b,c){var d='https://www.facebook.com',e='https://connect.facebook.net/en_US/fbadnw55.js',f={iframeLoaded:true,xhrLoaded:true},g=a.data,h=function(){if(Date.now){return Date.now();}else return +new Date();},i=function(aa){var ba=d+'/audience_network/client_event',ca={cb:h(),event_name:'ADNW_ADERROR',ad_pivot_type:'audience_network_mobile_web',sdk_version:'5.5.web',app_id:g.placementid.split('_')[0],publisher_id:g.placementid.split('_')[1],error_message:aa},da=[];for(var ea in ca)da.push(encodeURIComponent(ea)+'='+encodeURIComponent(ca[ea]));var fa=ba+'?'+da.join('&'),ga=new XMLHttpRequest();ga.open('GET',fa,true);ga.send();if(g.onAdError)g.onAdError('1000','Internal error.');},j=function(){if(b.currentScript){return b.currentScript;}else{var aa=b.getElementsByTagName('script');return aa[aa.length-1];}},k=function(aa){try{return aa.document.referrer;}catch(ba){}return '';},l=function(){var aa=a,ba=[aa];try{while(aa!==aa.parent&&aa.parent.document)ba.push(aa=aa.parent);}catch(ca){}return ba.reverse();},m=function(){var aa=l();for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=ca.ADNW||{};ca.ADNW=da;if(!ca.ADNW)continue;return da.v55=da.v55||{ads:[],window:ca};}throw new Error('no_writable_global');},n=function(aa){var ba=aa.indexOf('/',aa.indexOf('://')+3);if(ba===-1)return aa;return aa.substring(0,ba);},o=function(aa){return aa.location.href||k(aa);},p=function(aa){if(aa.sdkLoaded)return;var ba=aa.window.document,ca=ba.createElement('iframe');ca.name='fbadnw';ca.style.display='none';ba.body.appendChild(ca);var da=ca.contentDocument.createElement('script');da.src=e;da.async=true;ca.contentDocument.body.appendChild(da);aa.sdkLoaded=true;},q=function(aa){var ba=/^https?:\\\\/\\\\/www\\\\.google(\\\\.com?)?\\\\.\\\\w{2,3}$/;return !!aa.match(ba);},r=function(aa){return !!aa.match(/cdn\\\\.ampproject\\\\.org$/);},s=function(){var aa=c.ancestorOrigins||[],ba=aa[aa.length-1]||c.origin,ca=aa[aa.length-2]||c.origin;if(q(ba)&&r(ca)){return n(ca);}else return n(ba);},t=function(aa){try{return JSON.parse(aa);}catch(ba){i(ba.message);throw ba;}},u=function(aa,ba,ca){if(!aa.iframe){var da=ca.createElement('iframe');da.src=d+'/audiencenetwork/iframe/';da.style.display='none';ca.body.appendChild(da);aa.iframe=da;aa.iframeAppendedTime=h();aa.iframeData={};}ba.iframe=aa.iframe;ba.iframeData=aa.iframeData;ba.tagJsIframeAppendedTime=aa.iframeAppendedTime||0;},v=function(aa){var ba=d+'/audiencenetwork/xhr/?sdk=5.5.web';for(var ca in aa)if(typeof aa[ca]!=='function')ba+='&'+ca+'='+encodeURIComponent(aa[ca]);var da=new XMLHttpRequest();da.open('GET',ba,true);da.withCredentials=true;da.onreadystatechange=function(){if(da.readyState===4){var ea=t(da.response);aa.events.push({name:'xhrLoaded',source:aa.iframe.contentWindow,data:ea,postMessageTimestamp:h(),receivedTimestamp:h()});}};da.send();},w=function(aa,ba){var ca=d+'/audiencenetwork/xhriframe/?sdk=5.5.web';for(var da in ba)if(typeof ba[da]!=='function')ca+='&'+da+'='+encodeURIComponent(ba[da]);var ea=b.createElement('iframe');ea.src=ca;ea.style.display='none';b.body.appendChild(ea);ba.iframe=ea;ba.iframeData={};ba.tagJsIframeAppendedTime=h();},x=function(aa){var ba=function(event){try{var da=event.data;if(da.name in f)aa.events.push({name:da.name,source:event.source,data:da.data});}catch(ea){}},ca=aa.iframe.contentWindow.parent;ca.addEventListener('message',ba,false);},y=function(aa){if(aa.context&&aa.context.sourceUrl)return true;try{return !!JSON.parse(decodeURI(aa.name)).ampcontextVersion;}catch(ba){return false;}},z=function(aa){var ba=h(),ca=l()[0],da=j().parentElement,ea=ca!=a.top,fa=ca.$sf&&ca.$sf.ext,ga=o(ca),ha=m();p(ha);var ia={amp:y(ca),events:[],tagJsInitTime:ba,rootElement:da,iframe:null,tagJsIframeAppendedTime:ha.iframeAppendedTime||0,url:ga,domain:s(),channel:n(o(ca)),width:screen.width,height:screen.height,pixelratio:a.devicePixelRatio,placementindex:ha.ads.length,crossdomain:ea,safeframe:!!fa,placementid:g.placementid,format:g.format||'300x250',testmode:!!g.testmode,onAdLoaded:g.onAdLoaded,onAdError:g.onAdError};if(g.bidid)ia.bidid=g.bidid;if(ea){w(ha,ia);}else{u(ha,ia,ca.document);v(ia);}; x(ia);ia.rootElement.dataset.placementid=ia.placementid;ha.ads.push(ia);};try{z();}catch(aa){i(aa.message||aa);throw aa;}})(window,document,location);\n</script>\n${nativeContainer}</div></body></html>`;\n};\n\n/**\n * Get the current window location URL correctly encoded for use in a URL query string.\n * @returns {String} URI-encoded URL\n */\nconst getTopWindowUrlEncoded = () => encodeURIComponent(getTopWindowUrl());\n\n/**\n * Convert each bid request to a single URL to fetch those bids.\n * @param {Array} bids - list of bids\n * @param {String} bids[].placementCode - Prebid placement identifier\n * @param {Object} bids[].params\n * @param {String} bids[].params.placementId - Audience Network placement identifier\n * @param {String} bids[].params.platform - Audience Network platform identifier (optional)\n * @param {String} bids[].params.format - Optional format, one of 'video', 'native' or 'fullwidth' if set\n * @param {Array} bids[].sizes - list of desired advert sizes\n * @param {Array} bids[].sizes[] - Size arrays [h,w]: should include one of [300, 250], [320, 50]: first matched size is used\n * @returns {Array<Object>} List of URLs to fetch, plus formats and sizes for later use with interpretResponse\n */\nconst buildRequests = bids => {\n  // Build lists of placementids, adformats, sizes and SDK versions\n  const placementids = [];\n  const adformats = [];\n  const sizes = [];\n  const sdk = [];\n  const platforms = [];\n  const requestIds = [];\n\n  bids.forEach(bid => bid.sizes\n    .map(flattenSize)\n    .filter(size => isValidSizeAndFormat(size, bid.params.format))\n    .slice(0, 1)\n    .forEach(size => {\n      placementids.push(bid.params.placementId);\n      adformats.push(bid.params.format || size);\n      sizes.push(size);\n      sdk.push(sdkVersion(bid.params.format));\n      platforms.push(bid.params.platform);\n      requestIds.push(bid.bidId);\n    })\n  );\n\n  // Build URL\n  const testmode = isTestmode();\n  const pageurl = getTopWindowUrlEncoded();\n  const platform = findPlatform(platforms);\n  const search = {\n    placementids,\n    adformats,\n    testmode,\n    pageurl,\n    sdk,\n    adapterver,\n    platform,\n    platver\n  };\n  const video = findIndex(adformats, isVideo);\n  if (video !== -1) {\n    [search.playerwidth, search.playerheight] = expandSize(sizes[video]);\n  }\n  if (isSafariBrowser()) {\n    search.cb = generateUUID();\n  }\n  const data = formatQS(search);\n\n  return [{ adformats, data, method, requestIds, sizes, url }];\n};\n\n/**\n * Convert a server response to a bid response.\n * @param {Object} response - object representing the response\n * @param {Object} response.body - response body, already converted from JSON\n * @param {Object} bidRequests - the original bid requests\n * @param {Array} bidRequest.adformats - list of formats for the original bid requests\n * @param {Array} bidRequest.sizes - list of sizes fot the original bid requests\n * @returns {Array<Object>} A list of bid response objects\n */\nconst interpretResponse = ({ body }, { adformats, requestIds, sizes }) => {\n  const { bids = {} } = body;\n  return Object.keys(bids)\n    // extract Array of bid responses\n    .map(placementId => bids[placementId])\n    // flatten\n    .reduce((a, b) => a.concat(b), [])\n    // transform to bidResponse\n    .map((bid, i) => {\n      const {\n        bid_id: fbBidid,\n        placement_id: creativeId,\n        bid_price_cents: cpm\n      } = bid;\n\n      const format = adformats[i];\n      const [width, height] = expandSize(flattenSize(sizes[i]));\n      const ad = createAdHtml(creativeId, format, fbBidid);\n      const requestId = requestIds[i];\n\n      const bidResponse = {\n        // Prebid attributes\n        requestId,\n        cpm: cpm / 100,\n        width,\n        height,\n        ad,\n        ttl,\n        creativeId,\n        netRevenue,\n        currency,\n        // Audience Network attributes\n        hb_bidder: hbBidder,\n        fb_bidid: fbBidid,\n        fb_format: format,\n        fb_placementid: creativeId\n      };\n      // Video attributes\n      if (isVideo(format)) {\n        const pageurl = getTopWindowUrlEncoded();\n        bidResponse.mediaType = 'video';\n        bidResponse.vastUrl = `https://an.facebook.com/v1/instream/vast.xml?placementid=${creativeId}&pageurl=${pageurl}&playerwidth=${width}&playerheight=${height}&bidid=${fbBidid}`;\n        bidResponse.ttl = videoTtl;\n      }\n      return bidResponse;\n    });\n};\n\n/**\n * Covert bid param types for S2S\n * @param {Object} params bid params\n * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n * @return {Object} params bid params\n */\nconst transformBidParams = (params, isOpenRtb) => {\n  return convertTypes({\n    'placementId': 'string'\n  }, params);\n}\n\nexport const spec = {\n  code,\n  supportedMediaTypes,\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse,\n  transformBidParams\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/audienceNetworkBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { Renderer } from 'src/Renderer';\nimport { VIDEO, BANNER } from 'src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst ADAPTER_VERSION = '1.2';\nconst ADAPTER_NAME = 'BFIO_PREBID';\nconst OUTSTREAM = 'outstream';\n\nexport const VIDEO_ENDPOINT = '//reachms.bfmio.com/bid.json?exchange_id=';\nexport const BANNER_ENDPOINT = '//display.bfmio.com/prebid_display';\nexport const OUTSTREAM_SRC = '//player-cdn.beachfrontmedia.com/playerapi/loader/outstream.js';\n\nexport const VIDEO_TARGETING = ['mimes'];\nexport const DEFAULT_MIMES = ['video/mp4', 'application/javascript'];\n\nlet appId = '';\n\nexport const spec = {\n  code: 'beachfront',\n  supportedMediaTypes: [ VIDEO, BANNER ],\n\n  isBidRequestValid(bid) {\n    return !!(isVideoBidValid(bid) || isBannerBidValid(bid));\n  },\n\n  buildRequests(bids, bidderRequest) {\n    let requests = [];\n    let videoBids = bids.filter(bid => isVideoBidValid(bid));\n    let bannerBids = bids.filter(bid => isBannerBidValid(bid));\n    videoBids.forEach(bid => {\n      appId = getVideoBidParam(bid, 'appId');\n      requests.push({\n        method: 'POST',\n        url: VIDEO_ENDPOINT + appId,\n        data: createVideoRequestData(bid, bidderRequest),\n        bidRequest: bid\n      });\n    });\n    if (bannerBids.length) {\n      appId = getBannerBidParam(bannerBids[0], 'appId');\n      requests.push({\n        method: 'POST',\n        url: BANNER_ENDPOINT,\n        data: createBannerRequestData(bannerBids, bidderRequest),\n        bidRequest: bannerBids\n      });\n    }\n    return requests;\n  },\n\n  interpretResponse(response, { bidRequest }) {\n    response = response.body;\n\n    if (isVideoBid(bidRequest)) {\n      if (!response || !response.url || !response.bidPrice) {\n        utils.logWarn(`No valid video bids from ${spec.code} bidder`);\n        return [];\n      }\n      let sizes = getVideoSizes(bidRequest);\n      let firstSize = getFirstSize(sizes);\n      let context = utils.deepAccess(bidRequest, 'mediaTypes.video.context');\n      return {\n        requestId: bidRequest.bidId,\n        bidderCode: spec.code,\n        vastUrl: response.url,\n        cpm: response.bidPrice,\n        width: firstSize.w,\n        height: firstSize.h,\n        creativeId: response.cmpId,\n        renderer: context === OUTSTREAM ? createRenderer(bidRequest) : null,\n        mediaType: VIDEO,\n        currency: 'USD',\n        netRevenue: true,\n        ttl: 300\n      };\n    } else {\n      if (!response || !response.length) {\n        utils.logWarn(`No valid banner bids from ${spec.code} bidder`);\n        return [];\n      }\n      return response\n        .filter(bid => bid.adm)\n        .map((bid) => {\n          let request = find(bidRequest, req => req.adUnitCode === bid.slot);\n          return {\n            requestId: request.bidId,\n            bidderCode: spec.code,\n            ad: bid.adm,\n            creativeId: bid.crid,\n            cpm: bid.price,\n            width: bid.w,\n            height: bid.h,\n            mediaType: BANNER,\n            currency: 'USD',\n            netRevenue: true,\n            ttl: 300\n          };\n        });\n    }\n  },\n\n  getUserSyncs(syncOptions, serverResponses = [], gdprConsent = {}) {\n    let syncs = [];\n    let { gdprApplies, consentString } = gdprConsent;\n    let bannerResponse = find(serverResponses, (res) => utils.isArray(res.body));\n\n    if (bannerResponse) {\n      if (syncOptions.iframeEnabled) {\n        bannerResponse.body\n          .filter(bid => bid.sync)\n          .forEach(bid => {\n            syncs.push({\n              type: 'iframe',\n              url: bid.sync\n            });\n          });\n      }\n    } else if (syncOptions.iframeEnabled) {\n      syncs.push({\n        type: 'iframe',\n        url: `//sync.bfmio.com/sync_iframe?ifg=1&id=${appId}&gdpr=${gdprApplies ? 1 : 0}&gc=${consentString || ''}&gce=1`\n      });\n    } else if (syncOptions.pixelEnabled) {\n      syncs.push({\n        type: 'image',\n        url: `//sync.bfmio.com/syncb?pid=144&id=${appId}&gdpr=${gdprApplies ? 1 : 0}&gc=${consentString || ''}&gce=1`\n      });\n    }\n\n    return syncs;\n  }\n};\n\nfunction createRenderer(bidRequest) {\n  const renderer = Renderer.install({\n    id: bidRequest.bidId,\n    url: OUTSTREAM_SRC,\n    loaded: false\n  });\n\n  renderer.setRender(outstreamRender);\n\n  return renderer;\n}\n\nfunction outstreamRender(bid) {\n  bid.renderer.push(() => {\n    window.Beachfront.Player(bid.adUnitCode, {\n      ad_tag_url: bid.vastUrl,\n      width: bid.width,\n      height: bid.height,\n      expand_in_view: false,\n      collapse_on_complete: true\n    });\n  });\n}\n\nfunction getFirstSize(sizes) {\n  return (sizes && sizes.length) ? sizes[0] : { w: undefined, h: undefined };\n}\n\nfunction parseSizes(sizes) {\n  return utils.parseSizesInput(sizes).map(size => {\n    let [ width, height ] = size.split('x');\n    return {\n      w: parseInt(width, 10) || undefined,\n      h: parseInt(height, 10) || undefined\n    };\n  });\n}\n\nfunction getVideoSizes(bid) {\n  return parseSizes(utils.deepAccess(bid, 'mediaTypes.video.playerSize') || bid.sizes);\n}\n\nfunction getBannerSizes(bid) {\n  return parseSizes(utils.deepAccess(bid, 'mediaTypes.banner.sizes') || bid.sizes);\n}\n\nfunction getOsVersion() {\n  let clientStrings = [\n    { s: 'Android', r: /Android/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'Linux', r: /(Linux|X11)/ },\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'Search Bot', r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/ }\n  ];\n  let cs = find(clientStrings, cs => cs.r.test(navigator.userAgent));\n  return cs ? cs.s : 'unknown';\n}\n\nfunction isMobile() {\n  return (/(ios|ipod|ipad|iphone|android)/i).test(navigator.userAgent);\n}\n\nfunction isConnectedTV() {\n  return (/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\\.tv|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b)/i).test(navigator.userAgent);\n}\n\nfunction getDoNotTrack() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNoTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\nfunction isVideoBid(bid) {\n  return utils.deepAccess(bid, 'mediaTypes.video');\n}\n\nfunction isBannerBid(bid) {\n  return utils.deepAccess(bid, 'mediaTypes.banner') || !isVideoBid(bid);\n}\n\nfunction getVideoBidParam(bid, key) {\n  return utils.deepAccess(bid, 'params.video.' + key) || utils.deepAccess(bid, 'params.' + key);\n}\n\nfunction getBannerBidParam(bid, key) {\n  return utils.deepAccess(bid, 'params.banner.' + key) || utils.deepAccess(bid, 'params.' + key);\n}\n\nfunction isVideoBidValid(bid) {\n  return isVideoBid(bid) && getVideoBidParam(bid, 'appId') && getVideoBidParam(bid, 'bidfloor');\n}\n\nfunction isBannerBidValid(bid) {\n  return isBannerBid(bid) && getBannerBidParam(bid, 'appId') && getBannerBidParam(bid, 'bidfloor');\n}\n\nfunction getVideoTargetingParams(bid) {\n  return Object.keys(Object(bid.params.video))\n    .filter(param => includes(VIDEO_TARGETING, param))\n    .reduce((obj, param) => {\n      obj[ param ] = bid.params.video[ param ];\n      return obj;\n    }, {});\n}\n\nfunction createVideoRequestData(bid, bidderRequest) {\n  let sizes = getVideoSizes(bid);\n  let firstSize = getFirstSize(sizes);\n  let video = getVideoTargetingParams(bid);\n  let appId = getVideoBidParam(bid, 'appId');\n  let bidfloor = getVideoBidParam(bid, 'bidfloor');\n  let topLocation = utils.getTopWindowLocation();\n  let payload = {\n    isPrebid: true,\n    appId: appId,\n    domain: document.location.hostname,\n    id: utils.getUniqueIdentifierStr(),\n    imp: [{\n      video: Object.assign({\n        w: firstSize.w,\n        h: firstSize.h,\n        mimes: DEFAULT_MIMES\n      }, video),\n      bidfloor: bidfloor,\n      secure: topLocation.protocol === 'https:' ? 1 : 0\n    }],\n    site: {\n      page: topLocation.href,\n      domain: topLocation.hostname\n    },\n    device: {\n      ua: navigator.userAgent,\n      language: navigator.language,\n      devicetype: isMobile() ? 1 : isConnectedTV() ? 3 : 2,\n      dnt: getDoNotTrack() ? 1 : 0,\n      js: 1,\n      geo: {}\n    },\n    regs: {},\n    user: {},\n    cur: ['USD']\n  };\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    let { gdprApplies, consentString } = bidderRequest.gdprConsent;\n    payload.regs.ext = { gdpr: gdprApplies ? 1 : 0 };\n    payload.user.ext = { consent: consentString };\n  }\n\n  return payload;\n}\n\nfunction createBannerRequestData(bids, bidderRequest) {\n  let topLocation = utils.getTopWindowLocation();\n  let referrer = utils.getTopWindowReferrer();\n  let slots = bids.map(bid => {\n    return {\n      slot: bid.adUnitCode,\n      id: getBannerBidParam(bid, 'appId'),\n      bidfloor: getBannerBidParam(bid, 'bidfloor'),\n      sizes: getBannerSizes(bid)\n    };\n  });\n  let payload = {\n    slots: slots,\n    page: topLocation.href,\n    domain: topLocation.hostname,\n    search: topLocation.search,\n    secure: topLocation.protocol === 'https:' ? 1 : 0,\n    referrer: referrer,\n    ua: navigator.userAgent,\n    deviceOs: getOsVersion(),\n    isMobile: isMobile() ? 1 : 0,\n    dnt: getDoNotTrack() ? 1 : 0,\n    adapterVersion: ADAPTER_VERSION,\n    adapterName: ADAPTER_NAME\n  };\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    let { gdprApplies, consentString } = bidderRequest.gdprConsent;\n    payload.gdpr = gdprApplies ? 1 : 0;\n    payload.gdprConsent = consentString;\n  }\n\n  return payload;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/beachfrontBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'between';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['btw'],\n  supportedMediaTypes: ['banner'],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True  if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.w && bid.params.h && bid.params.s);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests) {\n    let requests = [];\n    validBidRequests.forEach(i => {\n      let params = {\n        jst: 'hb',\n        ord: Math.random() * 10000000000000000,\n        tz: getTz(),\n        fl: getFl(),\n        rr: getRr(),\n        w: i.params.w,\n        h: i.params.h,\n        s: i.params.s,\n        bidid: i.bidId,\n        transactionid: i.transactionId,\n        auctionid: i.auctionId\n      };\n      if (i.params.itu !== undefined) {\n        params.itu = i.params.itu;\n      }\n      if (i.params.cur !== undefined) {\n        params.cur = i.params.cur;\n      }\n      if (i.params.subid !== undefined) {\n        params.subid = i.params.subid;\n      }\n      if (i.params.click3rd !== undefined) {\n        params.click3rd = i.params.click3rd;\n      }\n      if (i.params.pubdata !== undefined) {\n        for (let key in i.params.pubdata) {\n          params['pubside_macro[' + key + ']'] = encodeURIComponent(i.params.pubdata[key]);\n        }\n      }\n      requests.push({method: 'GET', url: 'https://ads.betweendigital.com/adjson', data: params})\n    })\n    return requests;\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    for (var i = 0; i < serverResponse.body.length; i++) {\n      let bidResponse = {\n        requestId: serverResponse.body[i].bidid,\n        cpm: serverResponse.body[i].cpm || 0,\n        width: serverResponse.body[i].w,\n        height: serverResponse.body[i].h,\n        ttl: serverResponse.body[i].ttl,\n        creativeId: serverResponse.body[i].creativeid,\n        currency: serverResponse.body[i].currency || 'RUB',\n        netRevenue: serverResponse.body[i].netRevenue || true,\n        ad: serverResponse.body[i].ad\n      };\n      bidResponses.push(bidResponse);\n    }\n    return bidResponses;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function(syncOptions, serverResponses) {\n    let syncs = []\n    /* console.log(syncOptions,serverResponses)\n     if (syncOptions.iframeEnabled) {\n      syncs.push({\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      });\n    }\n     if (syncOptions.pixelEnabled && serverResponses.length > 0) {\n      syncs.push({\n        type: 'image',\n        url: serverResponses[0].body.userSync.url\n      });\n    } */\n\n    // syncs.push({\n    //   type: 'iframe',\n    //   url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n    // });\n    syncs.push({\n      type: 'iframe',\n      url: 'http://ads.betweendigital.com/sspmatch-iframe'\n    });\n    return syncs;\n  }\n}\n\nfunction getRr() {\n  try {\n    var td = top.document;\n    var rr = td.referrer;\n  } catch (err) { return false }\n\n  if (typeof rr != 'undefined' && rr.length > 0) {\n    return encodeURIComponent(rr);\n  } else if (typeof rr != 'undefined' && rr == '') {\n    return 'direct';\n  }\n}\n\nfunction getFl() {\n  if (navigator.plugins !== undefined && navigator.plugins !== null) {\n    if (navigator.plugins['Shockwave Flash'] !== undefined && navigator.plugins['Shockwave Flash'] !== null && typeof navigator.plugins['Shockwave Flash'] === 'object') {\n      var description = navigator.plugins['Shockwave Flash'].description;\n      if (description && !(navigator.mimeTypes !== undefined && navigator.mimeTypes['application/x-shockwave-flash'] && !navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin)) {\n        description = description.replace(/^.*\\s+(\\S+\\s+\\S+$)/, '$1').replace(/^(.*)\\..*$/, '$1');\n\n        return parseInt(description, 10);\n      }\n    }\n  }\n\n  return 0;\n}\n\nfunction getTz() {\n  return new Date().getTimezoneOffset();\n}\n\n/*\nfunction get_pubdata(adds) {\n  if (adds !== undefined && adds.pubdata !== undefined) {\n    let index = 0;\n    let url = '';\n    for(var key in adds.pubdata) {\n      if (index == 0) {\n        url = url + encodeURIComponent('pubside_macro[' + key + ']') + '=' + encodeURIComponent(adds.pubdata[key]);\n        index++;\n      } else {\n        url = url + '&' + encodeURIComponent('pubside_macro[' + key + ']') + '=' + encodeURIComponent(adds.pubdata[key]);\n      }\n    }\n    return url;\n  }\n}\n*/\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/betweenBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'bizzclick';\nconst URL = '//supply.bizzclick.com/?c=o&m=multi';\nconst URL_SYNC = '//supply.bizzclick.com/?c=o&m=cookie';\n\nfunction isBidResponseValid(bid) {\n  if (!bid.requestId || !bid.cpm || !bid.creativeId || !bid.ttl || !bid.currency) {\n    return false;\n  }\n  switch (bid.mediaType) {\n    case BANNER:\n      return Boolean(bid.width && bid.height && bid.ad);\n    case VIDEO:\n      return Boolean(bid.vastUrl);\n    case NATIVE:\n      return Boolean(bid.native);\n  }\n  return false;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: (bid) => {\n    return Boolean(bid.bidId && bid.params && !isNaN(bid.params.placementId) && bid.params.type);\n  },\n\n  /**\n    * Make a server request from the list of BidRequests.\n    *\n    * @param {BidRequest[]} validBidRequests A non-empty list of valid bid requests that should be sent to the Server.\n    * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests) => {\n    let winTop = window;\n    try {\n      window.top.location.toString();\n      winTop = window.top;\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    const location = utils.getTopWindowLocation();\n    const placements = [];\n    const len = validBidRequests.length;\n    for (let i = 0; i < len; i++) {\n      const bid = validBidRequests[i];\n      const placement = {\n        placementId: bid.params.placementId,\n        bidId: bid.bidId,\n        sizes: bid.sizes,\n        type: bid.params.type\n      };\n      placements.push(placement);\n    }\n    return {\n      method: 'POST',\n      url: URL,\n      data: {\n        'deviceWidth': winTop.screen.width,\n        'deviceHeight': winTop.screen.height,\n        'secure': (location.protocol === 'https:') ? 1 : 0,\n        'host': location.host,\n        'page': location.pathname,\n        'placements': placements\n      }\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: (bidResponses) => {\n    const res = [];\n    bidResponses = bidResponses.body;\n    const len = bidResponses.length;\n    for (let i = 0; i < len; i++) {\n      const bid = bidResponses[i];\n      if (isBidResponseValid(bid)) {\n        res.push(bid);\n      }\n    }\n    return res;\n  },\n\n  getUserSyncs: () => {\n    return [{\n      type: 'image',\n      url: URL_SYNC\n    }];\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/bizzclickBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'brainy';\nconst BASE_URL = '//proparm.jp/ssp/p/pbjs';\n\n/**\n * Check if the browser supports flash\n * 0 is return if it dosen't support flash\n * @return      {int} Flash version\n */\n/**\n * \n * 0\n * @return      {int} \n */\nfunction _getFlash() {\n  try {\n    var _mac = (navigator.userAgent.indexOf('Mac') != -1);\n    if (document.all) {\n      if (_mac) {\n        if (window['sample']) {\n          return ((window['sample'].FlashVersion() & 0xffff0000) >> 16);\n        }\n      } else {\n        var _axo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n        return Math.floor(_axo.FlashVersion() / 0x10000);\n      }\n    } else {\n      if (navigator.plugins && navigator.plugins['Shockwave Flash']) {\n        var info = navigator.plugins['Shockwave Flash'].description.split(' ');\n        var _v = parseInt(info[2]);\n        if (!isNaN(_v)) {\n          return _v;\n        }\n      }\n    }\n  } catch (e) {}\n  return 0;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  /**\n   * Check if the bid account ID and slotID is valid\n   * @param {object} bid the brainy bid to validate\n   * @return {boolean}\n   */\n  /**\n   * adUnits.bid\n   * @param  {object} bid \n   * @return {boolean}\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.accountID && bid.params.slotID);\n  },\n\n  /**\n   * Format the bid request object for our endpoint\n   * @param  {BidRequest[]} bidRequests Array of brainy bidders\n   * @return object of parameters for Prebid AJAX request\n   */\n  /**\n   * brainy\n   * @param  {BidRequest[]} bidRequests \n   * @return Prebid AJAX\n   */\n  buildRequests: function(validBidRequests) {\n    var bidRequests = [];\n    for (var i = 0, len = validBidRequests.length; i < len; i++) {\n      var bid = validBidRequests[i];\n      var accountID = utils.getBidIdParameter('accountID', bid.params);\n      var slotID = utils.getBidIdParameter('slotID', bid.params);\n      var url = utils.getTopWindowUrl();\n      var flash = _getFlash();\n      var nocache = new Date().getTime() + Math.floor(Math.random() * 100000000);\n      var requestURL;\n\n      requestURL = '_aid=' + accountID + '&';\n      requestURL += '_slot=' + slotID + '&';\n      requestURL += '_url=' + url + '&';\n      requestURL += '_flash=' + flash + '&';\n      requestURL += '_nocache=' + nocache;\n\n      bidRequests.push({\n        method: 'GET',\n        url: BASE_URL,\n        data: requestURL,\n        bidRequest: bid\n      })\n    }\n    return bidRequests;\n  },\n\n  /**\n   * Format brainy responses as Prebid bid responses\n   * @param  {String} brainyResponseObj A successful response from brainy.\n   * @param  {object} request           Object received from web page\n   * @return {object}                   An array of formatted bids.\n   */\n  /**\n   * brainySSP\n   * @param  {String} brainyResponseObj SSP\n   * @param  {object} request           \n   * @return {object}                   bidResponses\n   */\n  interpretResponse: function (brainyResponseObj, request) {\n    var bidResponses = [];\n    var bidRequest = request.bidRequest;\n    var responseBody = brainyResponseObj ? brainyResponseObj.body : {};\n\n    bidResponses.push({\n      requestId: bidRequest.bidId,\n      cpm: responseBody.cpm || 0,\n      width: responseBody.width,\n      height: responseBody.height,\n      creativeId: responseBody.adID,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 1000,\n      mediaType: BANNER,\n      ad: responseBody.src\n    });\n\n    return bidResponses;\n  },\n\n  /**\n   * SyncURLURL\n   * @param  {object} syncOptions     Sync\n   * @param  {object} serverResponses SSP\n   * @return {object}                 URL\n   */\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const syncs = [];\n    if (syncOptions.pixelEnabled) {\n      const brainyResponseObj = serverResponses[0].body;\n      if (!brainyResponseObj) {\n        return [];\n      }\n      if (brainyResponseObj.syncUrl && brainyResponseObj.syncUrl != 'null' && brainyResponseObj.syncUrl.length > 0) {\n        syncs.push({\n          type: 'image',\n          url: brainyResponseObj.syncUrl\n        });\n      }\n    }\n    return syncs;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/brainyBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER, NATIVE} from 'src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\n\nconst BIDDER_CODE = 'bridgewell';\nconst REQUEST_ENDPOINT = '//rec.scupio.com/recweb/prebid.aspx?cb=' + Math.random();\nconst BIDDER_VERSION = '0.0.2';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    let valid = false;\n    let typeOfCpmWeight;\n\n    if (bid && bid.params) {\n      if (bid.params.ChannelID) {\n        // cpmWeight is optinal parameter and should above than zero\n        typeOfCpmWeight = typeof bid.params.cpmWeight;\n        if (typeOfCpmWeight === 'undefined') {\n          bid.params.cpmWeight = 1;\n          valid = true;\n        } else if (typeOfCpmWeight === 'number' && bid.params.cpmWeight > 0) {\n          valid = true;\n        } else {\n          valid = false;\n        }\n      }\n    }\n\n    return valid;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests) {\n    const adUnits = [];\n    utils._each(validBidRequests, function(bid) {\n      adUnits.push({\n        ChannelID: bid.params.ChannelID,\n        mediaTypes: bid.mediaTypes || {\n          banner: {\n            sizes: bid.sizes\n          }\n        }\n      });\n    });\n\n    return {\n      method: 'POST',\n      url: REQUEST_ENDPOINT,\n      data: {\n        version: {\n          prebid: '1.25.0-pre',\n          bridgewell: BIDDER_VERSION\n        },\n        inIframe: utils.inIframe(),\n        url: utils.getTopWindowUrl(),\n        referrer: utils.getTopWindowReferrer(),\n        adUnits: adUnits\n      },\n      validBidRequests: validBidRequests\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param {*} bidRequest\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n\n    // map responses to requests\n    utils._each(bidRequest.validBidRequests, function(req) {\n      const bidResponse = {};\n\n      if (!serverResponse.body) {\n        return;\n      }\n\n      let matchedResponse = find(serverResponse.body, function(res) {\n        let valid = false;\n\n        if (!!res && !res.consumed) { // response exists and not consumed\n          if (res.width && res.height) {\n            let mediaTypes = req.mediaTypes;\n            // for prebid 1.0 and later usage, mediaTypes.banner.sizes\n            let sizes = mediaTypes && mediaTypes.banner && mediaTypes.banner.sizes ? mediaTypes.banner.sizes : req.sizes;\n            if (sizes) {\n              let sizeValid;\n              let width = res.width;\n              let height = res.height;\n              // check response size validation\n              if (typeof sizes[0] === 'number') { // for foramt Array[Number] check\n                sizeValid = width === sizes[0] && height === sizes[1];\n              } else { // for format Array[Array[Number]] check\n                sizeValid = find(sizes, function(size) {\n                  return (width === size[0] && height === size[1]);\n                });\n              }\n\n              if (sizeValid || (mediaTypes && mediaTypes.native)) { // dont care native sizes\n                valid = true;\n              }\n            }\n          }\n        }\n\n        return valid;\n      });\n\n      if (matchedResponse) {\n        matchedResponse.consumed = true;\n\n        // check required parameters\n        if (typeof matchedResponse.cpm !== 'number') {\n          return;\n        } else if (typeof matchedResponse.netRevenue !== 'boolean') {\n          return;\n        } else if (typeof matchedResponse.currency !== 'string') {\n          return;\n        } else if (typeof matchedResponse.mediaType !== 'string') {\n          return;\n        }\n\n        bidResponse.requestId = req.bidId;\n        bidResponse.cpm = matchedResponse.cpm * req.params.cpmWeight;\n        bidResponse.width = matchedResponse.width;\n        bidResponse.height = matchedResponse.height;\n        bidResponse.ttl = matchedResponse.ttl;\n        bidResponse.creativeId = matchedResponse.id;\n        bidResponse.netRevenue = matchedResponse.netRevenue;\n        bidResponse.currency = matchedResponse.currency;\n        bidResponse.mediaType = matchedResponse.mediaType;\n\n        // check required parameters by matchedResponse.mediaType\n        switch (matchedResponse.mediaType) {\n          case BANNER:\n            // check banner required parameters\n            if (typeof matchedResponse.ad !== 'string') {\n              return;\n            }\n\n            bidResponse.ad = matchedResponse.ad;\n            break;\n          case NATIVE:\n            // check native required parameters\n            if (!matchedResponse.native) {\n              return;\n            }\n\n            let reqNativeLayout = req.mediaTypes.native;\n            let resNative = matchedResponse.native;\n\n            // check title\n            let title = reqNativeLayout.title;\n            if (title && title.required) {\n              if (typeof resNative.title !== 'string') {\n                return;\n              } else if (title.len && title.len < resNative.title.length) {\n                return;\n              }\n            }\n\n            // check body\n            let body = reqNativeLayout.body;\n            if (body && body.required) {\n              if (typeof resNative.body !== 'string') {\n                return;\n              }\n            }\n\n            // check image\n            let image = reqNativeLayout.image;\n            if (image && image.required) {\n              if (resNative.image) {\n                if (typeof resNative.image.url !== 'string') { // check image url\n                  return;\n                } else {\n                  if (resNative.image.width !== image.sizes[0] || resNative.image.height !== image.sizes[1]) { // check image sizes\n                    return;\n                  }\n                }\n              } else {\n                return;\n              }\n            }\n\n            // check sponsoredBy\n            let sponsoredBy = reqNativeLayout.sponsoredBy;\n            if (sponsoredBy && sponsoredBy.required) {\n              if (typeof resNative.sponsoredBy !== 'string') {\n                return;\n              }\n            }\n\n            // check icon\n            let icon = reqNativeLayout.icon;\n            if (icon && icon.required) {\n              if (resNative.icon) {\n                if (typeof resNative.icon.url !== 'string') { // check icon url\n                  return;\n                } else {\n                  if (resNative.icon.width !== icon.sizes[0] || resNative.icon.height !== icon.sizes[0]) { // check image sizes\n                    return;\n                  }\n                }\n              } else {\n                return;\n              }\n            }\n\n            // check clickUrl\n            if (typeof resNative.clickUrl !== 'string') {\n              return;\n            }\n\n            // check clickTracker\n            let clickTrackers = resNative.clickTrackers;\n            if (clickTrackers) {\n              if (clickTrackers.length === 0) {\n                return;\n              }\n            } else {\n              return;\n            }\n\n            // check impressionTrackers\n            let impressionTrackers = resNative.impressionTrackers;\n            if (impressionTrackers) {\n              if (impressionTrackers.length === 0) {\n                return;\n              }\n            } else {\n              return;\n            }\n\n            bidResponse.native = matchedResponse.native;\n\n            break;\n\n          default: // response mediaType is not supported\n            return;\n        }\n\n        bidResponses.push(bidResponse);\n      }\n    });\n\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/bridgewellBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\nimport { userSync } from 'src/userSync';\n\nconst BIDDER_CODE = 'c1x';\nconst URL = 'https://ht.c1exchange.com/ht';\nconst PIXEL_ENDPOINT = '//px.c1exchange.com/pubpixel/';\nconst LOG_MSG = {\n  invalidBid: 'C1X: [ERROR] bidder returns an invalid bid',\n  noSite: 'C1X: [ERROR] no site id supplied',\n  noBid: 'C1X: [INFO] creating a NO bid for Adunit: ',\n  bidWin: 'C1X: [INFO] creating a bid for Adunit: '\n};\n\n/**\n * Adapter for requesting bids from C1X header tag server.\n * v3.1 (c) C1X Inc., 2018\n */\n\nexport const c1xAdapter = {\n  code: BIDDER_CODE,\n\n  // check the bids sent to c1x bidder\n  isBidRequestValid: function(bid) {\n    const siteId = bid.params.siteId || '';\n    if (!siteId) {\n      utils.logError(LOG_MSG.noSite);\n    }\n    return !!(bid.adUnitCode && siteId);\n  },\n\n  buildRequests: function(bidRequests, bidderRequest) {\n    let payload = {};\n    let tagObj = {};\n    let pixelUrl = '';\n    const adunits = bidRequests.length;\n    const rnd = new Date().getTime();\n    const c1xTags = bidRequests.map(bidToTag);\n    const bidIdTags = bidRequests.map(bidToShortTag); // include only adUnitCode and bidId from request obj\n\n    // flattened tags in a tag object\n    tagObj = c1xTags.reduce((current, next) => Object.assign(current, next));\n    const pixelId = tagObj.pixelId;\n    const useSSL = document.location.protocol;\n\n    payload = {\n      adunits: adunits.toString(),\n      rnd: rnd.toString(),\n      response: 'json',\n      compress: 'gzip'\n    }\n\n    // for GDPR support\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload['consent_string'] = bidderRequest.gdprConsent.consentString;\n      payload['consent_required'] = (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies.toString() : 'true'\n      ;\n    }\n\n    if (pixelId) {\n      pixelUrl = (useSSL ? 'https:' : 'http:') + PIXEL_ENDPOINT + pixelId;\n      if (payload.consent_required) {\n        pixelUrl += '&gdpr=' + (bidderRequest.gdprConsent.gdprApplies ? 1 : 0);\n        pixelUrl += '&consent=' + encodeURIComponent(bidderRequest.gdprConsent.consentString || '');\n      }\n      userSync.registerSync('image', BIDDER_CODE, pixelUrl);\n    }\n\n    Object.assign(payload, tagObj);\n\n    let payloadString = stringifyPayload(payload);\n    // ServerRequest object\n    return {\n      method: 'GET',\n      url: URL,\n      data: payloadString,\n      bids: bidIdTags\n    };\n  },\n\n  interpretResponse: function(serverResponse, requests) {\n    serverResponse = serverResponse.body;\n    requests = requests.bids || [];\n    const currency = 'USD';\n    const bidResponses = [];\n    let netRevenue = false;\n\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = serverResponse.error;\n      utils.logError(LOG_MSG.invalidBid + errorMessage);\n      return bidResponses;\n    } else {\n      serverResponse.forEach(bid => {\n        if (bid.bid) {\n          if (bid.bidType === 'NET_BID') {\n            netRevenue = !netRevenue;\n          }\n          const curBid = {\n            width: bid.width,\n            height: bid.height,\n            cpm: bid.cpm,\n            ad: bid.ad,\n            creativeId: bid.crid,\n            currency: currency,\n            ttl: 300,\n            netRevenue: netRevenue\n          };\n\n          for (let i = 0; i < requests.length; i++) {\n            if (bid.adId === requests[i].adUnitCode) {\n              curBid.requestId = requests[i].bidId;\n            }\n          }\n          utils.logInfo(LOG_MSG.bidWin + bid.adId + ' size: ' + curBid.width + 'x' + curBid.height);\n          bidResponses.push(curBid);\n        } else {\n          // no bid\n          utils.logInfo(LOG_MSG.noBid + bid.adId);\n        }\n      });\n    }\n\n    return bidResponses;\n  }\n}\n\nfunction bidToTag(bid, index) {\n  const tag = {};\n  const adIndex = 'a' + (index + 1).toString(); // ad unit id for c1x\n  const sizeKey = adIndex + 's';\n  const priceKey = adIndex + 'p';\n  // TODO: Multiple Floor Prices\n\n  const sizesArr = bid.sizes;\n  const floorPriceMap = bid.params.floorPriceMap || '';\n  tag['site'] = bid.params.siteId || '';\n\n  // prevent pixelId becoming undefined when publishers don't fill this param in ad units they have on the same page\n  if (bid.params.pixelId) {\n    tag['pixelId'] = bid.params.pixelId\n  }\n\n  tag[adIndex] = bid.adUnitCode;\n  tag[sizeKey] = sizesArr.reduce((prev, current) => prev + (prev === '' ? '' : ',') + current.join('x'), '');\n\n  const newSizeArr = tag[sizeKey].split(',');\n  if (floorPriceMap) {\n    newSizeArr.forEach(size => {\n      if (size in floorPriceMap) {\n        tag[priceKey] = floorPriceMap[size].toString();\n      } // we only accept one cpm price in floorPriceMap\n    });\n  }\n  if (bid.params.pageurl) {\n    tag['pageurl'] = bid.params.pageurl;\n  }\n\n  return tag;\n}\n\nfunction bidToShortTag(bid) {\n  const tag = {};\n  tag.adUnitCode = bid.adUnitCode;\n  tag.bidId = bid.bidId;\n\n  return tag;\n}\n\nfunction stringifyPayload(payload) {\n  let payloadString = '';\n  payloadString = JSON.stringify(payload).replace(/\":\"|\",\"|{\"|\"}/g, (foundChar) => {\n    if (foundChar == '\":\"') return '=';\n    else if (foundChar == '\",\"') return '&';\n    else return '';\n  });\n  return payloadString;\n}\n\nregisterBidder(c1xAdapter);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/c1xBidAdapter.js","import * as utils from 'src/utils'\nimport { registerBidder } from 'src/adapters/bidderFactory'\nimport { config } from 'src/config'\nconst BIDDER_CODE = 'ccx'\nconst BID_URL = 'https://delivery.clickonometrics.pl/ortb/prebid/bid'\nconst SUPPORTED_VIDEO_PROTOCOLS = [2, 3, 5, 6]\nconst SUPPORTED_VIDEO_MIMES = ['video/mp4', 'video/x-flv']\nconst SUPPORTED_VIDEO_PLAYBACK_METHODS = [1, 2, 3, 4]\n\nfunction _getDeviceObj () {\n  let device = {}\n  device.w = screen.width\n  device.y = screen.height\n  device.ua = navigator.userAgent\n  return device\n}\n\nfunction _getSiteObj () {\n  let site = {}\n  let url = config.getConfig('pageUrl') || utils.getTopWindowUrl()\n  if (url.length > 0) {\n    url = url.split('?')[0]\n  }\n  site.page = url\n\n  return site\n}\n\nfunction _validateSizes (sizeObj, type) {\n  if (!utils.isArray(sizeObj) || typeof sizeObj[0] === 'undefined') {\n    return false\n  }\n\n  if (type === 'video' && (!utils.isArray(sizeObj[0]) || sizeObj[0].length !== 2)) {\n    return false\n  }\n\n  let result = true\n\n  if (type === 'banner') {\n    utils._each(sizeObj, function (size) {\n      if (!utils.isArray(size) || (size.length !== 2)) {\n        result = false\n      }\n    })\n    return result\n  }\n\n  if (type === 'old') {\n    if (!utils.isArray(sizeObj[0]) && sizeObj.length !== 2) {\n      result = false\n    } else if (utils.isArray(sizeObj[0])) {\n      utils._each(sizeObj, function (size) {\n        if (!utils.isArray(size) || (size.length !== 2)) {\n          result = false\n        }\n      })\n    }\n    return result;\n  }\n\n  return true\n}\n\nfunction _buildBid (bid) {\n  let placement = {}\n  placement.id = bid.bidId\n  placement.secure = 1\n\n  let sizes = utils.deepAccess(bid, 'mediaTypes.banner.sizes') || utils.deepAccess(bid, 'mediaTypes.video.playerSize') || utils.deepAccess(bid, 'sizes')\n\n  if (utils.deepAccess(bid, 'mediaTypes.banner') || utils.deepAccess(bid, 'mediaType') === 'banner' || (!utils.deepAccess(bid, 'mediaTypes.video') && !utils.deepAccess(bid, 'mediaType'))) {\n    placement.banner = {'format': []}\n    if (utils.isArray(sizes[0])) {\n      utils._each(sizes, function (size) {\n        placement.banner.format.push({'w': size[0], 'h': size[1]})\n      })\n    } else {\n      placement.banner.format.push({'w': sizes[0], 'h': sizes[1]})\n    }\n  } else if (utils.deepAccess(bid, 'mediaTypes.video') || utils.deepAccess(bid, 'mediaType') === 'video') {\n    placement.video = {}\n\n    if (typeof sizes !== 'undefined') {\n      if (utils.isArray(sizes[0])) {\n        placement.video.w = sizes[0][0]\n        placement.video.h = sizes[0][1]\n      } else {\n        placement.video.w = sizes[0]\n        placement.video.h = sizes[1]\n      }\n    }\n\n    placement.video.protocols = utils.deepAccess(bid, 'params.video.protocols') || SUPPORTED_VIDEO_PROTOCOLS\n    placement.video.mimes = utils.deepAccess(bid, 'params.video.mimes') || SUPPORTED_VIDEO_MIMES\n    placement.video.playbackmethod = utils.deepAccess(bid, 'params.video.playbackmethod') || SUPPORTED_VIDEO_PLAYBACK_METHODS\n    placement.video.skip = utils.deepAccess(bid, 'params.video.skip') || 0\n    if (placement.video.skip === 1 && utils.deepAccess(bid, 'params.video.skipafter')) {\n      placement.video.skipafter = utils.deepAccess(bid, 'params.video.skipafter')\n    }\n  }\n\n  placement.ext = {'pid': bid.params.placementId}\n\n  return placement\n}\n\nfunction _buildResponse (bid, currency, ttl) {\n  let resp = {\n    requestId: bid.impid,\n    cpm: bid.price,\n    width: bid.w,\n    height: bid.h,\n    creativeId: bid.crid,\n    netRevenue: false,\n    ttl: ttl,\n    currency: currency\n  }\n\n  if (bid.ext.type === 'video') {\n    resp.vastXml = bid.adm\n  } else {\n    resp.ad = bid.adm\n  }\n\n  if (utils.deepAccess(bid, 'dealid')) {\n    resp.dealId = bid.dealid\n  }\n\n  return resp\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: ['banner', 'video'],\n\n  isBidRequestValid: function (bid) {\n    if (!utils.deepAccess(bid, 'params.placementId')) {\n      utils.logWarn('placementId param is reqeuired.')\n      return false\n    }\n    if (utils.deepAccess(bid, 'mediaTypes.banner.sizes')) {\n      let isValid = _validateSizes(bid.mediaTypes.banner.sizes, 'banner')\n      if (!isValid) {\n        utils.logWarn('Bid sizes are invalid.')\n      }\n      return isValid\n    } else if (utils.deepAccess(bid, 'mediaTypes.video.playerSize')) {\n      let isValid = _validateSizes(bid.mediaTypes.video.playerSize, 'video')\n      if (!isValid) {\n        utils.logWarn('Bid sizes are invalid.')\n      }\n      return isValid\n    } else if (utils.deepAccess(bid, 'sizes')) {\n      let isValid = _validateSizes(bid.sizes, 'old')\n      if (!isValid) {\n        utils.logWarn('Bid sizes are invalid.')\n      }\n      return isValid\n    } else {\n      utils.logWarn('Bid sizes are required.')\n      return false\n    }\n  },\n  buildRequests: function (validBidRequests, bidderRequest) {\n    // check if validBidRequests is not empty\n    if (validBidRequests.length > 0) {\n      let requestBody = {}\n      requestBody.imp = []\n      requestBody.site = _getSiteObj()\n      requestBody.device = _getDeviceObj()\n      requestBody.id = bidderRequest.bids[0].auctionId\n      requestBody.ext = {'ce': (utils.cookiesAreEnabled() ? 1 : 0)}\n      utils._each(validBidRequests, function (bid) {\n        requestBody.imp.push(_buildBid(bid))\n      })\n      // Return the server request\n      return {\n        'method': 'POST',\n        'url': BID_URL,\n        'data': JSON.stringify(requestBody)\n      }\n    }\n  },\n  interpretResponse: function (serverResponse, request) {\n    const bidResponses = []\n\n    // response is not empty (HTTP 204)\n    if (!utils.isEmpty(serverResponse.body)) {\n      utils._each(serverResponse.body.seatbid, function (seatbid) {\n        utils._each(seatbid.bid, function (bid) {\n          bidResponses.push(_buildResponse(bid, serverResponse.body.cur, serverResponse.body.ext.ttl))\n        })\n      })\n    }\n\n    return bidResponses\n  },\n  getUserSyncs: function (syncOptions, serverResponses) {\n    const syncs = []\n\n    if (utils.deepAccess(serverResponses[0], 'body.ext.usersync') && !utils.isEmpty(serverResponses[0].body.ext.usersync)) {\n      utils._each(serverResponses[0].body.ext.usersync, function (match) {\n        if ((syncOptions.iframeEnabled && match.type === 'iframe') || (syncOptions.pixelEnabled && match.type === 'image')) {\n          syncs.push({\n            type: match.type,\n            url: match.url\n          })\n        }\n      })\n    }\n\n    return syncs\n  }\n}\nregisterBidder(spec)\n\n\n\n// WEBPACK FOOTER //\n// ./modules/ccxBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER, NATIVE} from 'src/mediaTypes';\nconst BIDDER_CODE = 'clickforce';\nconst ENDPOINT_URL = '//ad.doublemax.net/adserver/prebid.json?cb=' + new Date().getTime() + '&hb=1&ver=1.21';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, NATIVE],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return bid && bid.params && !!bid.params.zone;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests) {\n    const bidParams = [];\n    utils._each(validBidRequests, function(bid) {\n      bidParams.push({\n        z: bid.params.zone,\n        bidId: bid.bidId\n      });\n    });\n    return {\n      method: 'POST',\n      url: ENDPOINT_URL,\n      data: bidParams,\n      validBidRequests: validBidRequests\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param {*} bidRequest\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const cfResponses = [];\n    const bidRequestList = [];\n\n    if (typeof bidRequest != 'undefined') {\n      utils._each(bidRequest.validBidRequests, function(req) {\n        bidRequestList[req.bidId] = req;\n      });\n    }\n\n    utils._each(serverResponse.body, function(response) {\n      if (response.requestId != null) {\n        // native ad size\n        if (response.width == 3) {\n          cfResponses.push({\n            requestId: response.requestId,\n            cpm: response.cpm,\n            width: response.width,\n            height: response.height,\n            creativeId: response.creativeId,\n            currency: response.currency,\n            netRevenue: response.netRevenue,\n            ttl: response.ttl,\n            native: {\n              title: response.tag.content.title,\n              body: response.tag.content.content,\n              image: {\n                url: response.tag.content.image,\n                height: 900,\n                width: 1600\n              },\n              icon: {\n                url: response.tag.content.icon,\n                height: 900,\n                width: 900\n              },\n              clickUrl: response.tag.cu,\n              cta: response.tag.content.button_text,\n              sponsoredBy: response.tag.content.advertiser,\n              impressionTrackers: response.tag.iu,\n            },\n            mediaType: 'native',\n          });\n        } else {\n          // display ad\n          cfResponses.push({\n            requestId: response.requestId,\n            cpm: response.cpm,\n            width: response.width,\n            height: response.height,\n            creativeId: response.creativeId,\n            currency: response.currency,\n            netRevenue: response.netRevenue,\n            ttl: response.ttl,\n            ad: response.tag,\n            mediaType: 'banner',\n          });\n        }\n      }\n    });\n    return cfResponses;\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: 'https://cdn.doublemax.net/js/capmapping.htm'\n      }]\n    } else if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: 'https://c.doublemax.net/cm'\n      }]\n    }\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/clickforceBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'colossusssp';\nconst URL = '//colossusssp.com/?c=o&m=multi';\nconst URL_SYNC = '//colossusssp.com/?c=o&m=cookie';\n\nfunction isBidResponseValid(bid) {\n  if (!bid.requestId || !bid.cpm || !bid.creativeId || !bid.ttl || !bid.currency) {\n    return false;\n  }\n\n  switch (bid.mediaType) {\n    case BANNER:\n      return Boolean(bid.width && bid.height && bid.ad);\n    case VIDEO:\n      return Boolean(bid.vastUrl);\n    case NATIVE:\n      return Boolean(bid.native);\n    default:\n      return false;\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: (bid) => {\n    return Boolean(bid.bidId && bid.params && !isNaN(bid.params.placement_id));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests A non-empty list of valid bid requests that should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests) => {\n    let winTop = window;\n    try {\n      window.top.location.toString();\n      winTop = window.top;\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    let location = utils.getTopWindowLocation();\n    let placements = [];\n    let request = {\n      'deviceWidth': winTop.screen.width,\n      'deviceHeight': winTop.screen.height,\n      'language': (navigator && navigator.language) ? navigator.language : '',\n      'secure': location.protocol === 'https:' ? 1 : 0,\n      'host': location.host,\n      'page': location.pathname,\n      'placements': placements\n    };\n    for (let i = 0; i < validBidRequests.length; i++) {\n      let bid = validBidRequests[i];\n      let placement = {\n        placementId: bid.params.placement_id,\n        bidId: bid.bidId,\n        sizes: bid.sizes,\n        traffic: bid.params.traffic || BANNER\n      };\n      placements.push(placement);\n    }\n    return {\n      method: 'POST',\n      url: URL,\n      data: request\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: (serverResponse) => {\n    let response = [];\n    try {\n      serverResponse = serverResponse.body;\n      for (let i = 0; i < serverResponse.length; i++) {\n        let resItem = serverResponse[i];\n        if (isBidResponseValid(resItem)) {\n          response.push(resItem);\n        }\n      }\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    return response;\n  },\n\n  getUserSyncs: () => {\n    return [{\n      type: 'image',\n      url: URL_SYNC\n    }];\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/colossussspBidAdapter.js","/**\n * This module adds GDPR consentManagement support to prebid.js.  It interacts with\n * supported CMPs (Consent Management Platforms) to grab the user's consent information\n * and make it available for any GDPR supported adapters to read/pass this information to\n * their system.\n */\nimport * as utils from 'src/utils';\nimport { config } from 'src/config';\nimport { gdprDataHandler } from 'src/adaptermanager';\nimport includes from 'core-js/library/fn/array/includes';\nimport strIncludes from 'core-js/library/fn/string/includes';\n\nconst DEFAULT_CMP = 'iab';\nconst DEFAULT_CONSENT_TIMEOUT = 10000;\nconst DEFAULT_ALLOW_AUCTION_WO_CONSENT = true;\n\nexport let userCMP;\nexport let consentTimeout;\nexport let allowAuction;\nexport let staticConsentData;\n\nlet consentData;\n\n// add new CMPs here, with their dedicated lookup function\nconst cmpCallMap = {\n  'iab': lookupIabConsent,\n  'static': lookupStaticConsentData\n};\n\n/**\n * This function reads the consent string from the config to obtain the consent information of the user.\n * @param {function(string)} cmpSuccess acts as a success callback when the value is read from config; pass along consentObject (string) from CMP\n * @param {function(string)} cmpError acts as an error callback while interacting with the config string; pass along an error message (string)\n * @param {object} hookConfig contains module related variables (see comment in requestBidsHook function)\n */\nfunction lookupStaticConsentData(cmpSuccess, cmpError, hookConfig) {\n  cmpSuccess(staticConsentData, hookConfig);\n}\n\n/**\n * This function handles interacting with an IAB compliant CMP to obtain the consent information of the user.\n * Given the async nature of the CMP's API, we pass in acting success/error callback functions to exit this function\n * based on the appropriate result.\n * @param {function(string)} cmpSuccess acts as a success callback when CMP returns a value; pass along consentObject (string) from CMP\n * @param {function(string)} cmpError acts as an error callback while interacting with CMP; pass along an error message (string)\n * @param {object} hookConfig contains module related variables (see comment in requestBidsHook function)\n */\nfunction lookupIabConsent(cmpSuccess, cmpError, hookConfig) {\n  function handleCmpResponseCallbacks() {\n    const cmpResponse = {};\n\n    function afterEach() {\n      if (cmpResponse.getConsentData && cmpResponse.getVendorConsents) {\n        cmpSuccess(cmpResponse, hookConfig);\n      }\n    }\n\n    return {\n      consentDataCallback: function(consentResponse) {\n        cmpResponse.getConsentData = consentResponse;\n        afterEach();\n      },\n      vendorConsentsCallback: function(consentResponse) {\n        cmpResponse.getVendorConsents = consentResponse;\n        afterEach();\n      }\n    }\n  }\n\n  let callbackHandler = handleCmpResponseCallbacks();\n  let cmpCallbacks = {};\n  let cmpFunction;\n\n  // to collect the consent information from the user, we perform two calls to the CMP in parallel:\n  // first to collect the user's consent choices represented in an encoded string (via getConsentData)\n  // second to collect the user's full unparsed consent information (via getVendorConsents)\n\n  // the following code also determines where the CMP is located and uses the proper workflow to communicate with it:\n  // check to see if CMP is found on the same window level as prebid and call it directly if so\n  // check to see if prebid is in a safeframe (with CMP support)\n  // else assume prebid may be inside an iframe and use the IAB CMP locator code to see if CMP's located in a higher parent window. this works in cross domain iframes\n  // if the CMP is not found, the iframe function will call the cmpError exit callback to abort the rest of the CMP workflow\n  try {\n    cmpFunction = window.__cmp || utils.getWindowTop().__cmp;\n  } catch (e) {}\n\n  if (utils.isFn(cmpFunction)) {\n    cmpFunction('getConsentData', null, callbackHandler.consentDataCallback);\n    cmpFunction('getVendorConsents', null, callbackHandler.vendorConsentsCallback);\n  } else if (inASafeFrame() && typeof window.$sf.ext.cmp === 'function') {\n    callCmpWhileInSafeFrame('getConsentData', callbackHandler.consentDataCallback);\n    callCmpWhileInSafeFrame('getVendorConsents', callbackHandler.vendorConsentsCallback);\n  } else {\n    // find the CMP frame\n    let f = window;\n    let cmpFrame;\n    while (!cmpFrame) {\n      try {\n        if (f.frames['__cmpLocator']) cmpFrame = f;\n      } catch (e) {}\n      if (f === window.top) break;\n      f = f.parent;\n    }\n\n    if (!cmpFrame) {\n      return cmpError('CMP not found.', hookConfig);\n    }\n\n    callCmpWhileInIframe('getConsentData', cmpFrame, callbackHandler.consentDataCallback);\n    callCmpWhileInIframe('getVendorConsents', cmpFrame, callbackHandler.vendorConsentsCallback);\n  }\n\n  function inASafeFrame() {\n    return !!(window.$sf && window.$sf.ext);\n  }\n\n  function callCmpWhileInSafeFrame(commandName, callback) {\n    function sfCallback(msgName, data) {\n      if (msgName === 'cmpReturn') {\n        let responseObj = (commandName === 'getConsentData') ? data.vendorConsentData : data.vendorConsents;\n        callback(responseObj);\n      }\n    }\n\n    // find sizes from adUnits object\n    let adUnits = hookConfig.adUnits;\n    let width = 1;\n    let height = 1;\n    if (Array.isArray(adUnits) && adUnits.length > 0) {\n      let sizes = utils.getAdUnitSizes(adUnits[0]);\n      width = sizes[0][0];\n      height = sizes[0][1];\n    }\n\n    window.$sf.ext.register(width, height, sfCallback);\n    window.$sf.ext.cmp(commandName);\n  }\n\n  function callCmpWhileInIframe(commandName, cmpFrame, moduleCallback) {\n    /* Setup up a __cmp function to do the postMessage and stash the callback.\n      This function behaves (from the caller's perspective identicially to the in-frame __cmp call */\n    window.__cmp = function(cmd, arg, callback) {\n      let callId = Math.random() + '';\n      let msg = {__cmpCall: {\n        command: cmd,\n        parameter: arg,\n        callId: callId\n      }};\n      cmpCallbacks[callId] = callback;\n      cmpFrame.postMessage(msg, '*');\n    }\n\n    /** when we get the return message, call the stashed callback */\n    window.addEventListener('message', readPostMessageResponse, false);\n\n    // call CMP\n    window.__cmp(commandName, null, cmpIframeCallback);\n\n    function readPostMessageResponse(event) {\n      let json = (typeof event.data === 'string' && strIncludes(event.data, 'cmpReturn')) ? JSON.parse(event.data) : event.data;\n      if (json.__cmpReturn && json.__cmpReturn.callId) {\n        let i = json.__cmpReturn;\n        // TODO - clean up this logic (move listeners?); we have duplicate messages responses because 2 eventlisteners are active from the 2 cmp requests running in parallel\n        if (typeof cmpCallbacks[i.callId] !== 'undefined') {\n          cmpCallbacks[i.callId](i.returnValue, i.success);\n          delete cmpCallbacks[i.callId];\n        }\n      }\n    }\n\n    function removePostMessageListener() {\n      window.removeEventListener('message', readPostMessageResponse, false);\n    }\n\n    function cmpIframeCallback(consentObject) {\n      removePostMessageListener();\n      moduleCallback(consentObject);\n    }\n  }\n}\n\n/**\n * If consentManagement module is enabled (ie included in setConfig), this hook function will attempt to fetch the\n * user's encoded consent string from the supported CMP.  Once obtained, the module will store this\n * data as part of a gdprConsent object which gets transferred to adaptermanager's gdprDataHandler object.\n * This information is later added into the bidRequest object for any supported adapters to read/pass along to their system.\n * @param {object} reqBidsConfigObj required; This is the same param that's used in pbjs.requestBids.\n * @param {function} fn required; The next function in the chain, used by hook.js\n */\nexport function requestBidsHook(reqBidsConfigObj, fn) {\n  // preserves all module related variables for the current auction instance (used primiarily for concurrent auctions)\n  const hookConfig = {\n    context: this,\n    args: arguments,\n    nextFn: fn,\n    adUnits: reqBidsConfigObj.adUnits || pbjs.adUnits,\n    bidsBackHandler: reqBidsConfigObj.bidsBackHandler,\n    haveExited: false,\n    timer: null\n  };\n\n  // in case we already have consent (eg during bid refresh)\n  if (consentData) {\n    return exitModule(null, hookConfig);\n  }\n\n  if (!includes(Object.keys(cmpCallMap), userCMP)) {\n    utils.logWarn(`CMP framework (${userCMP}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);\n    return hookConfig.nextFn.apply(hookConfig.context, hookConfig.args);\n  }\n\n  cmpCallMap[userCMP].call(this, processCmpData, cmpFailed, hookConfig);\n\n  // only let this code run if module is still active (ie if the callbacks used by CMPs haven't already finished)\n  if (!hookConfig.haveExited) {\n    if (consentTimeout === 0) {\n      processCmpData(undefined, hookConfig);\n    } else {\n      hookConfig.timer = setTimeout(cmpTimedOut.bind(null, hookConfig), consentTimeout);\n    }\n  }\n}\n\n/**\n * This function checks the consent data provided by CMP to ensure it's in an expected state.\n * If it's bad, we exit the module depending on config settings.\n * If it's good, then we store the value and exits the module.\n * @param {object} consentObject required; object returned by CMP that contains user's consent choices\n * @param {object} hookConfig contains module related variables (see comment in requestBidsHook function)\n */\nfunction processCmpData(consentObject, hookConfig) {\n  let gdprApplies = consentObject && consentObject.getConsentData && consentObject.getConsentData.gdprApplies;\n  if (\n    (typeof gdprApplies !== 'boolean') ||\n    (gdprApplies === true &&\n      !(utils.isStr(consentObject.getConsentData.consentData) &&\n        utils.isPlainObject(consentObject.getVendorConsents) &&\n        Object.keys(consentObject.getVendorConsents).length > 1\n      )\n    )\n  ) {\n    cmpFailed(`CMP returned unexpected value during lookup process.`, hookConfig, consentObject);\n  } else {\n    clearTimeout(hookConfig.timer);\n    storeConsentData(consentObject);\n\n    exitModule(null, hookConfig);\n  }\n}\n\n/**\n * General timeout callback when interacting with CMP takes too long.\n */\nfunction cmpTimedOut(hookConfig) {\n  cmpFailed('CMP workflow exceeded timeout threshold.', hookConfig);\n}\n\n/**\n * This function contains the controlled steps to perform when there's a problem with CMP.\n * @param {string} errMsg required; should be a short descriptive message for why the failure/issue happened.\n * @param {object} hookConfig contains module related variables (see comment in requestBidsHook function)\n * @param {object} extraArgs contains additional data that's passed along in the error/warning messages for easier debugging\n*/\nfunction cmpFailed(errMsg, hookConfig, extraArgs) {\n  clearTimeout(hookConfig.timer);\n\n  // still set the consentData to undefined when there is a problem as per config options\n  if (allowAuction) {\n    storeConsentData(undefined);\n  }\n  exitModule(errMsg, hookConfig, extraArgs);\n}\n\n/**\n * Stores CMP data locally in module and then invokes gdprDataHandler.setConsentData() to make information available in adaptermanger.js for later in the auction\n * @param {object} cmpConsentObject required; an object representing user's consent choices (can be undefined in certain use-cases for this function only)\n */\nfunction storeConsentData(cmpConsentObject) {\n  consentData = {\n    consentString: (cmpConsentObject) ? cmpConsentObject.getConsentData.consentData : undefined,\n    vendorData: (cmpConsentObject) ? cmpConsentObject.getVendorConsents : undefined,\n    gdprApplies: (cmpConsentObject) ? cmpConsentObject.getConsentData.gdprApplies : undefined\n  };\n  gdprDataHandler.setConsentData(consentData);\n}\n\n/**\n * This function handles the exit logic for the module.\n * There are several paths in the module's logic to call this function and we only allow 1 of the 3 potential exits to happen before suppressing others.\n *\n * We prevent multiple exits to avoid conflicting messages in the console depending on certain scenarios.\n * One scenario could be auction was canceled due to timeout with CMP being reached.\n * While the timeout is the accepted exit and runs first, the CMP's callback still tries to process the user's data (which normally leads to a good exit).\n * In this case, the good exit will be suppressed since we already decided to cancel the auction.\n *\n * Three exit paths are:\n * 1. good exit where auction runs (CMP data is processed normally).\n * 2. bad exit but auction still continues (warning message is logged, CMP data is undefined and still passed along).\n * 3. bad exit with auction canceled (error message is logged).\n * @param {string} errMsg optional; only to be used when there was a 'bad' exit.  String is a descriptive message for the failure/issue encountered.\n * @param {object} hookConfig contains module related variables (see comment in requestBidsHook function)\n * @param {object} extraArgs contains additional data that's passed along in the error/warning messages for easier debugging\n */\nfunction exitModule(errMsg, hookConfig, extraArgs) {\n  if (hookConfig.haveExited === false) {\n    hookConfig.haveExited = true;\n\n    let context = hookConfig.context;\n    let args = hookConfig.args;\n    let nextFn = hookConfig.nextFn;\n\n    if (errMsg) {\n      if (allowAuction) {\n        utils.logWarn(errMsg + ' Resuming auction without consent data as per consentManagement config.', extraArgs);\n        nextFn.apply(context, args);\n      } else {\n        utils.logError(errMsg + ' Canceling auction as per consentManagement config.', extraArgs);\n        if (typeof hookConfig.bidsBackHandler === 'function') {\n          hookConfig.bidsBackHandler();\n        } else {\n          utils.logError('Error executing bidsBackHandler');\n        }\n      }\n    } else {\n      nextFn.apply(context, args);\n    }\n  }\n}\n\n/**\n * Simply resets the module's consentData variable back to undefined, mainly for testing purposes\n */\nexport function resetConsentData() {\n  consentData = undefined;\n  gdprDataHandler.setConsentData(null);\n}\n\n/**\n * A configuration function that initializes some module variables, as well as add a hook into the requestBids function\n * @param {object} config required; consentManagement module config settings; cmp (string), timeout (int), allowAuctionWithoutConsent (boolean)\n */\nexport function setConfig(config) {\n  if (utils.isStr(config.cmpApi)) {\n    userCMP = config.cmpApi;\n  } else {\n    userCMP = DEFAULT_CMP;\n    utils.logInfo(`consentManagement config did not specify cmp.  Using system default setting (${DEFAULT_CMP}).`);\n  }\n\n  if (utils.isNumber(config.timeout)) {\n    consentTimeout = config.timeout;\n  } else {\n    consentTimeout = DEFAULT_CONSENT_TIMEOUT;\n    utils.logInfo(`consentManagement config did not specify timeout.  Using system default setting (${DEFAULT_CONSENT_TIMEOUT}).`);\n  }\n\n  if (typeof config.allowAuctionWithoutConsent === 'boolean') {\n    allowAuction = config.allowAuctionWithoutConsent;\n  } else {\n    allowAuction = DEFAULT_ALLOW_AUCTION_WO_CONSENT;\n    utils.logInfo(`consentManagement config did not specify allowAuctionWithoutConsent.  Using system default setting (${DEFAULT_ALLOW_AUCTION_WO_CONSENT}).`);\n  }\n\n  utils.logInfo('consentManagement module has been activated...');\n\n  if (userCMP === 'static') {\n    if (utils.isPlainObject(config.consentData)) {\n      staticConsentData = config.consentData;\n      consentTimeout = 0;\n    } else {\n      utils.logError(`consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.`);\n    }\n  }\n  pbjs.requestBids.addHook(requestBidsHook, 50);\n}\nconfig.getConfig('consentManagement', config => setConfig(config.consentManagement));\n\n\n\n// WEBPACK FOOTER //\n// ./modules/consentManagement.js","require('../../modules/es6.string.includes');\nmodule.exports = require('../../modules/_core').String.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/string/includes.js\n// module id = 176\n// module chunks = 1","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.includes.js\n// module id = 177\n// module chunks = 1","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-context.js\n// module id = 178\n// module chunks = 1","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-regexp.js\n// module id = 179\n// module chunks = 1","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails-is-regexp.js\n// module id = 180\n// module chunks = 1","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'consumable';\n\nconst BASE_URI = 'https://e.serverbid.com/api/v2'\n\nlet siteId = 0;\nlet bidder = 'consumable';\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.networkId && bid.params.siteId && bid.params.unitId && bid.params.unitName);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n\n  buildRequests: function(validBidRequests) {\n    // Do we need to group by bidder? i.e. to make multiple requests for\n    // different endpoints.\n\n    let ret = {\n      method: 'POST',\n      url: '',\n      data: '',\n      bidRequest: []\n    };\n\n    if (validBidRequests.length < 1) {\n      return ret;\n    }\n\n    // These variables are used in creating the user sync URL.\n    siteId = validBidRequests[0].params.siteId;\n    bidder = validBidRequests[0].bidder;\n\n    const data = Object.assign({\n      placements: [],\n      time: Date.now(),\n      user: {},\n      url: utils.getTopWindowUrl(),\n      referrer: document.referrer,\n      enableBotFiltering: true,\n      includePricingData: true,\n      parallel: true\n    }, validBidRequests[0].params);\n\n    validBidRequests.map(bid => {\n      const placement = Object.assign({\n        divName: bid.bidId,\n        adTypes: bid.adTypes || getSize(bid.sizes)\n      }, bid.params);\n\n      if (placement.networkId && placement.siteId && placement.unitId && placement.unitName) {\n        data.placements.push(placement);\n      }\n    });\n\n    ret.data = JSON.stringify(data);\n    ret.bidRequest = validBidRequests;\n    ret.url = BASE_URI;\n\n    return ret;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    let bid;\n    let bids;\n    let bidId;\n    let bidObj;\n    let bidResponses = [];\n\n    bids = bidRequest.bidRequest;\n\n    serverResponse = (serverResponse || {}).body;\n    for (let i = 0; i < bids.length; i++) {\n      bid = {};\n      bidObj = bids[i];\n      bidId = bidObj.bidId;\n\n      if (serverResponse) {\n        const decision = serverResponse.decisions && serverResponse.decisions[bidId];\n        const price = decision && decision.pricing && decision.pricing.clearPrice;\n\n        if (decision && price) {\n          bid.requestId = bidId;\n          bid.cpm = price;\n          bid.width = decision.width;\n          bid.height = decision.height;\n          bid.unitId = bidObj.params.unitId;\n          bid.unitName = bidObj.params.unitName;\n          bid.ad = retrieveAd(decision, bid.unitId, bid.unitName);\n          bid.currency = 'USD';\n          bid.creativeId = decision.adId;\n          bid.ttl = 360;\n          bid.netRevenue = true;\n          bid.referrer = utils.getTopWindowUrl();\n\n          bidResponses.push(bid);\n        }\n      }\n    }\n\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//s.zkcdn.net/ss/' + siteId + '.html'\n      }];\n    } else {\n      utils.logWarn(bidder + ': Please enable iframe based user syncing.');\n    }\n  }\n};\n\nconst sizeMap = [\n  null,\n  '120x90',\n  '120x90',\n  '468x60',\n  '728x90',\n  '300x250',\n  '160x600',\n  '120x600',\n  '300x100',\n  '180x150',\n  '336x280',\n  '240x400',\n  '234x60',\n  '88x31',\n  '120x60',\n  '120x240',\n  '125x125',\n  '220x250',\n  '250x250',\n  '250x90',\n  '0x0',\n  '200x90',\n  '300x50',\n  '320x50',\n  '320x480',\n  '185x185',\n  '620x45',\n  '300x125',\n  '800x250'\n];\n\nsizeMap[77] = '970x90';\nsizeMap[123] = '970x250';\nsizeMap[43] = '300x600';\nsizeMap[286] = '970x66';\nsizeMap[3230] = '970x280';\nsizeMap[429] = '486x60';\nsizeMap[374] = '700x500';\nsizeMap[934] = '300x1050';\nsizeMap[1578] = '320x100';\nsizeMap[331] = '320x250';\nsizeMap[3301] = '320x267';\nsizeMap[2730] = '728x250';\n\nfunction getSize(sizes) {\n  const result = [];\n  sizes.forEach(function(size) {\n    const index = sizeMap.indexOf(size[0] + 'x' + size[1]);\n    if (index >= 0) {\n      result.push(index);\n    }\n  });\n  return result;\n}\n\nfunction retrieveAd(decision, unitId, unitName) {\n  let oad = decision.contents && decision.contents[0] && decision.contents[0].body + utils.createTrackPixelHtml(decision.impressionUrl);\n  let cb = Math.round(new Date().getTime());\n  let ad = '<script type=\\'text/javascript\\'>document.write(\\'<div id=\\\"' + unitName + '-' + unitId + '\\\">\\');</script>' + oad;\n  ad += '<script type=\\'text/javascript\\'>document.write(\\'</div>\\');</script>';\n  ad += '<script type=\\'text/javascript\\'>document.write(\\'<div class=\\\"' + unitName + '\\\"></div>\\');</script>';\n  ad += '<script type=\\'text/javascript\\'>document.write(\\'<scr\\'+\\'ipt type=\\\"text/javascript\\\" src=\\\"https://yummy.consumable.com/' + unitId + '/' + unitName + '/widget/unit.js?cb=' + cb + '\\\" charset=\\\"utf-8\\\" async></scr\\'+\\'ipt>\\');</script>'\n\n  return ad;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/consumableBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'contentignite';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  pageID: Math.floor(Math.random() * 10e6),\n\n  isBidRequestValid: (bid) => {\n    return !!(bid.params.accountID && bid.params.zoneID);\n  },\n\n  buildRequests: (validBidRequests) => {\n    let i;\n    let zoneID;\n    let bidRequest;\n    let accountID;\n    let keyword;\n    let requestURI;\n    const serverRequests = [];\n    const zoneCounters = {};\n\n    for (i = 0; i < validBidRequests.length; i++) {\n      bidRequest = validBidRequests[i];\n      zoneID = utils.getBidIdParameter('zoneID', bidRequest.params);\n      accountID = utils.getBidIdParameter('accountID', bidRequest.params);\n      keyword = utils.getBidIdParameter('keyword', bidRequest.params);\n\n      if (!(zoneID in zoneCounters)) {\n        zoneCounters[zoneID] = 0;\n      }\n\n      requestURI =\n        location.protocol + '//serve.connectignite.com/adserve/;type=hbr;';\n      requestURI += `ID=${encodeURIComponent(accountID)};`;\n      requestURI += `setID=${encodeURIComponent(zoneID)};`;\n      requestURI += `pid=${spec.pageID};`;\n      requestURI += `place=${encodeURIComponent(zoneCounters[zoneID])};`;\n\n      // append the keyword for targeting if one was passed in\n      if (keyword !== '') {\n        requestURI += `kw=${encodeURIComponent(keyword)};`;\n      }\n\n      zoneCounters[zoneID]++;\n      serverRequests.push({\n        method: 'GET',\n        url: requestURI,\n        data: {},\n        bidRequest: bidRequest\n      });\n    }\n    return serverRequests;\n  },\n\n  // tslint:disable-next-line:cyclomatic-complexity\n  interpretResponse: (serverResponse, bidRequest) => {\n    const bidObj = bidRequest.bidRequest;\n    const bidResponses = [];\n    const bidResponse = {};\n    let isCorrectSize = false;\n    let isCorrectCPM = true;\n    let cpm;\n    let minCPM;\n    let maxCPM;\n    let width;\n    let height;\n\n    serverResponse = serverResponse.body;\n    if (serverResponse && serverResponse.status === 'SUCCESS' && bidObj) {\n      cpm = serverResponse.cpm;\n      minCPM = utils.getBidIdParameter('minCPM', bidObj.params);\n      maxCPM = utils.getBidIdParameter('maxCPM', bidObj.params);\n      width = parseInt(serverResponse.width);\n      height = parseInt(serverResponse.height);\n\n      // Ensure response CPM is within the given bounds\n      if (minCPM !== '' && cpm < parseFloat(minCPM)) {\n        isCorrectCPM = false;\n        utils.logWarn('ContentIgnite: CPM did not meet minCPM requirements.');\n      } else if (maxCPM !== '' && cpm > parseFloat(maxCPM)) {\n        isCorrectCPM = false;\n        utils.logWarn('ContentIgnite: CPM did not meet maxCPM requirements.');\n      }\n\n      // Ensure that response ad matches one of the placement sizes.\n      utils._each(bidObj.sizes, (size) => {\n        if (width === size[0] && height === size[1]) {\n          isCorrectSize = true;\n        } else {\n          utils.logWarn(\n            'ContentIgnite: Returned ad is of a different size to that requested.'\n          );\n        }\n      });\n      if (isCorrectCPM && isCorrectSize) {\n        bidResponse.requestId = bidObj.bidId;\n        bidResponse.creativeId = serverResponse.placement_id;\n        bidResponse.cpm = cpm;\n        bidResponse.width = width;\n        bidResponse.height = height;\n        bidResponse.ad = serverResponse.ad_code;\n        bidResponse.currency = 'USD';\n        bidResponse.netRevenue = true;\n        bidResponse.ttl = config.getConfig('_bidderTimeout');\n        bidResponse.referrer = utils.getTopWindowUrl();\n        bidResponses.push(bidResponse);\n      }\n    }\n    return bidResponses;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/contentigniteBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'conversant';\nconst URL = '//web.hb.ad.cpe.dotomi.com/s2s/header/24';\nconst VERSION = '2.2.3';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['cnvr'], // short code\n  supportedMediaTypes: [BANNER, VIDEO],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid - The bid params to validate.\n   * @return {boolean} True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    if (!bid || !bid.params) {\n      utils.logWarn(BIDDER_CODE + ': Missing bid parameters');\n      return false;\n    }\n\n    if (!utils.isStr(bid.params.site_id)) {\n      utils.logWarn(BIDDER_CODE + ': site_id must be specified as a string')\n      return false;\n    }\n\n    if (isVideoRequest(bid)) {\n      if (!bid.params.mimes) {\n        // Give a warning but let it pass\n        utils.logWarn(BIDDER_CODE + ': mimes should be specified for videos');\n      } else if (!utils.isArray(bid.params.mimes) || !bid.params.mimes.every(s => utils.isStr(s))) {\n        utils.logWarn(BIDDER_CODE + ': mimes must be an array of strings');\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return {ServerRequest} Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const loc = utils.getTopWindowLocation();\n    const page = loc.href;\n    const isPageSecure = (loc.protocol === 'https:') ? 1 : 0;\n    let siteId = '';\n    let requestId = '';\n    let pubcid = null;\n\n    const conversantImps = validBidRequests.map(function(bid) {\n      const bidfloor = utils.getBidIdParameter('bidfloor', bid.params);\n      const secure = isPageSecure || (utils.getBidIdParameter('secure', bid.params) ? 1 : 0);\n\n      siteId = utils.getBidIdParameter('site_id', bid.params);\n      requestId = bid.auctionId;\n\n      const format = convertSizes(bid.sizes);\n\n      const imp = {\n        id: bid.bidId,\n        secure: secure,\n        bidfloor: bidfloor || 0,\n        displaymanager: 'Prebid.js',\n        displaymanagerver: VERSION\n      };\n\n      copyOptProperty(bid.params, 'tag_id', imp, 'tagid');\n\n      if (isVideoRequest(bid)) {\n        const video = {\n          w: format[0].w,\n          h: format[0].h\n        };\n\n        copyOptProperty(bid.params, 'position', video, 'pos');\n        copyOptProperty(bid.params, 'mimes', video);\n        copyOptProperty(bid.params, 'maxduration', video);\n        copyOptProperty(bid.params, 'protocols', video);\n        copyOptProperty(bid.params, 'api', video);\n\n        imp.video = video;\n      } else {\n        const banner = {format: format};\n\n        copyOptProperty(bid.params, 'position', banner, 'pos');\n\n        imp.banner = banner;\n      }\n\n      if (bid.crumbs && bid.crumbs.pubcid) {\n        pubcid = bid.crumbs.pubcid;\n      }\n\n      return imp;\n    });\n\n    const payload = {\n      id: requestId,\n      imp: conversantImps,\n      site: {\n        id: siteId,\n        mobile: document.querySelector('meta[name=\"viewport\"][content*=\"width=device-width\"]') !== null ? 1 : 0,\n        page: page\n      },\n      device: getDevice(),\n      at: 1\n    };\n\n    let userExt = {};\n\n    // Add GDPR flag and consent string\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      userExt.consent = bidderRequest.gdprConsent.consentString;\n\n      if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n        payload.regs = {\n          ext: {\n            gdpr: (bidderRequest.gdprConsent.gdprApplies ? 1 : 0)\n          }\n        };\n      }\n    }\n\n    // Add common id if available\n    if (pubcid) {\n      userExt.fpc = pubcid;\n    }\n\n    // Only add the user object if it's not empty\n    if (!utils.isEmpty(userExt)) {\n      payload.user = {ext: userExt};\n    }\n\n    return {\n      method: 'POST',\n      url: URL,\n      data: payload,\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    const requestMap = {};\n    serverResponse = serverResponse.body;\n\n    if (bidRequest && bidRequest.data && bidRequest.data.imp) {\n      utils._each(bidRequest.data.imp, imp => requestMap[imp.id] = imp);\n    }\n\n    if (serverResponse && utils.isArray(serverResponse.seatbid)) {\n      utils._each(serverResponse.seatbid, function(bidList) {\n        utils._each(bidList.bid, function(conversantBid) {\n          const responseCPM = parseFloat(conversantBid.price);\n          if (responseCPM > 0.0 && conversantBid.impid) {\n            const responseAd = conversantBid.adm || '';\n            const responseNurl = conversantBid.nurl || '';\n            const request = requestMap[conversantBid.impid];\n\n            const bid = {\n              requestId: conversantBid.impid,\n              currency: serverResponse.cur || 'USD',\n              cpm: responseCPM,\n              creativeId: conversantBid.crid || '',\n              ttl: 300,\n              netRevenue: true\n            };\n\n            if (request.video) {\n              bid.vastUrl = responseAd;\n              bid.mediaType = 'video';\n              bid.width = request.video.w;\n              bid.height = request.video.h;\n            } else {\n              bid.ad = responseAd + '<img src=\"' + responseNurl + '\" />';\n              bid.width = conversantBid.w;\n              bid.height = conversantBid.h;\n            }\n\n            bidResponses.push(bid);\n          }\n        })\n      });\n    }\n\n    return bidResponses;\n  },\n\n  /**\n   * Covert bid param types for S2S\n   * @param {Object} params bid params\n   * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n   * @return {Object} params bid params\n   */\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'site_id': 'string',\n      'secure': 'number',\n      'mobile': 'number'\n    }, params);\n  }\n};\n\n/**\n * Determine do-not-track state\n *\n * @returns {boolean}\n */\nfunction getDNT() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNoTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\n/**\n * Return openrtb device object that includes ua, width, and height.\n *\n * @returns {Device} Openrtb device object\n */\nfunction getDevice() {\n  const language = navigator.language ? 'language' : 'userLanguage';\n  return {\n    h: screen.height,\n    w: screen.width,\n    dnt: getDNT() ? 1 : 0,\n    language: navigator[language].split('-')[0],\n    make: navigator.vendor ? navigator.vendor : '',\n    ua: navigator.userAgent\n  };\n}\n\n/**\n * Convert arrays of widths and heights to an array of objects with w and h properties.\n *\n * [[300, 250], [300, 600]] => [{w: 300, h: 250}, {w: 300, h: 600}]\n *\n * @param {number[2][]|number[2]} bidSizes - arrays of widths and heights\n * @returns {object[]} Array of objects with w and h\n */\nfunction convertSizes(bidSizes) {\n  let format;\n\n  if (bidSizes.length === 2 && typeof bidSizes[0] === 'number' && typeof bidSizes[1] === 'number') {\n    format = [{w: bidSizes[0], h: bidSizes[1]}];\n  } else {\n    format = utils._map(bidSizes, d => { return {w: d[0], h: d[1]}; });\n  }\n\n  return format;\n}\n\n/**\n * Check if it's a video bid request\n *\n * @param {BidRequest} bid - Bid request generated from ad slots\n * @returns {boolean} True if it's a video bid\n */\nfunction isVideoRequest(bid) {\n  return bid.mediaType === 'video' || !!utils.deepAccess(bid, 'mediaTypes.video');\n}\n\n/**\n * Copy property if exists from src to dst\n *\n * @param {object} src\n * @param {string} srcName\n * @param {object} dst\n * @param {string} [dstName] - Optional. If not specified then srcName is used.\n */\nfunction copyOptProperty(src, srcName, dst, dstName) {\n  dstName = dstName || srcName;\n  const obj = utils.getBidIdParameter(srcName, src);\n  if (obj !== '') {\n    dst[dstName] = obj;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/conversantBidAdapter.js","'use strict';\n\nimport * as utils from 'src/utils';\nimport { BANNER } from 'src/mediaTypes';\nimport { config } from 'src/config';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst helper = (() => {\n  let srTestCapabilities = () => { // Legacy\n    let plugins = navigator.plugins;\n    let flashVer = -1;\n    let sf = 'Shockwave Flash';\n\n    if (plugins && plugins.length > 0) {\n      if (plugins[sf + ' 2.0'] || plugins[sf]) {\n        var swVer2 = plugins[sf + ' 2.0'] ? ' 2.0' : '';\n        var flashDescription = plugins[sf + swVer2].description;\n        flashVer = flashDescription.split(' ')[2].split('.')[0];\n      }\n    }\n    if (flashVer > 4) return 15; else return 7;\n  };\n\n  let getRand = () => {\n    return Math.round(Math.random() * 100000000);\n  };\n\n  return {\n    ingest: function(rawBids = []) {\n      const adZoneAttributeKeys = ['id', 'size', 'thirdPartyClickUrl', 'dealId'];\n      const otherKeys = ['siteId', 'wrapper', 'referrerUrl'];\n      let state = this.createState();\n\n      rawBids.forEach(oneBid => {\n        let params = oneBid.params || {};\n\n        state.tag.auctionId = oneBid.auctionId;\n        state.tag.responseJSON = true;\n\n        if (params.id && (/^\\d+x\\d+$/).test(params.size)) {\n          let adZoneKey = 'as' + params.id;\n          let zone = {};\n\n          zone.transactionId = oneBid.transactionId;\n          zone.bidId = oneBid.bidId;\n          state.tag.zones = state.tag.zones || {};\n          state.tag.zones[adZoneKey] = zone;\n\n          adZoneAttributeKeys.forEach(key => { if (params[key]) zone[key] = params[key]; });\n          otherKeys.forEach(key => { if (params[key]) state.tag[key] = params[key]; });\n\n          // Check for an environment setting\n          if (params.env) state.env = params.env;\n\n          // Update the placement map\n          let [x, y] = (params.size).split('x');\n          state.placementMap[adZoneKey] = {\n            'b': oneBid.bidId,\n            'w': x,\n            'h': y\n          };\n        }\n      });\n      return state;\n    },\n\n    transform: function(coxRawBids = {}, state) {\n      const pbjsBids = [];\n\n      for (let adZoneKey in state.placementMap) {\n        let responded = coxRawBids[adZoneKey]\n        let ingested = state.placementMap[adZoneKey];\n\n        utils.logInfo('coxBidAdapter.transform', adZoneKey, responded, ingested);\n\n        if (ingested && responded && responded['ad'] && responded['price'] > 0) {\n          pbjsBids.push({\n            requestId: ingested['b'],\n            cpm: responded['price'],\n            width: ingested['w'],\n            height: ingested['h'],\n            creativeId: responded['adid'],\n            dealId: responded['dealid'],\n            currency: 'USD',\n            netRevenue: true,\n            ttl: 300,\n            ad: responded['ad']\n          });\n        }\n      }\n      return pbjsBids;\n    },\n\n    getUrl: state => {\n      // Bounce if the tag is invalid\n      if (!state.tag.zones) return null;\n\n      let src = (document.location.protocol === 'https:' ? 'https://' : 'http://') +\n        (!state.env || state.env === 'PRD' ? '' : state.env === 'PPE' ? 'ppe-' : state.env === 'STG' ? 'staging-' : '') +\n        'ad.afy11.net/ad?mode=11&nif=0&sf=0&sfd=0&ynw=0&hb=1' +\n        '&ct=' + srTestCapabilities() +\n        '&rand=' + getRand() +\n        '&rk1=' + getRand() +\n        '&rk2=' + new Date().valueOf() / 1000;\n\n      state.tag.pageUrl = config.getConfig('pageUrl') || utils.getTopWindowUrl();\n      state.tag.puTop = true;\n\n      // Attach the serialized tag to our string\n      src += '&ab=' + encodeURIComponent(JSON.stringify(state.tag));\n\n      return src;\n    },\n\n    createState: () => ({\n      env: '',\n      tag: {},\n      placementMap: {}\n    })\n  };\n})();\n\nexport const spec = {\n  code: 'cox',\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: function(bid) {\n    return !!(bid.params && bid.params.id && bid.params.size);\n  },\n\n  buildRequests: function(validBidReqs) {\n    let state = helper.ingest(validBidReqs);\n    let url = helper.getUrl(state);\n\n    return !url ? {} : {\n      method: 'GET',\n      url: url,\n      state\n    };\n  },\n\n  interpretResponse: function({ body: { zones: coxRawBids } }, { state }) {\n    let bids = helper.transform(coxRawBids, state);\n\n    utils.logInfo('coxBidAdapter.interpretResponse', bids);\n    return bids;\n  },\n\n  getUserSyncs: function(syncOptions, thing) {\n    try {\n      var [{ body: { tpCookieSync: urls = [] } }] = thing;\n    } catch (ignore) {\n      return [];\n    }\n\n    let syncs = [];\n    if (syncOptions.pixelEnabled && urls.length > 0) {\n      syncs = urls.map((url) => ({ type: 'image', url: url }))\n    }\n    utils.logInfo('coxBidAdapter.getuserSyncs', syncs);\n    return syncs;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/coxBidAdapter.js","import { loadExternalScript } from 'src/adloader';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { parse } from 'src/url';\nimport * as utils from 'src/utils';\nimport find from 'core-js/library/fn/array/find';\n\nconst ADAPTER_VERSION = 11;\nconst BIDDER_CODE = 'criteo';\nconst CDB_ENDPOINT = '//bidder.criteo.com/cdb';\nconst CRITEO_VENDOR_ID = 91;\nconst INTEGRATION_MODES = {\n  'amp': 1,\n};\nconst PROFILE_ID_INLINE = 207;\nconst PROFILE_ID_PUBLISHERTAG = 185;\n\n// Unminified source code can be found in: https://github.com/Prebid-org/prebid-js-external-js-criteo/blob/master/dist/prod.js\nconst PUBLISHER_TAG_URL = '//static.criteo.net/js/ld/publishertag.prebid.js';\n\n/** @type {BidderSpec} */\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n   * @param {object} bid\n   * @return {boolean}\n   */\n  isBidRequestValid: bid => (\n    !!(bid && bid.params && (bid.params.zoneId || bid.params.networkId))\n  ),\n\n  /**\n   * @param {BidRequest[]} bidRequests\n   * @param {*} bidderRequest\n   * @return {ServerRequest}\n   */\n  buildRequests: (bidRequests, bidderRequest) => {\n    let url;\n    let data;\n\n    // If publisher tag not already loaded try to get it from fast bid\n    if (!publisherTagAvailable()) {\n      window.Criteo = window.Criteo || {};\n      window.Criteo.usePrebidEvents = false;\n\n      tryGetCriteoFastBid();\n\n      // Reload the PublisherTag after the timeout to ensure FastBid is up-to-date and tracking done properly\n      setTimeout(() => {\n        loadExternalScript(PUBLISHER_TAG_URL, BIDDER_CODE);\n      }, bidderRequest.timeout);\n    }\n\n    if (publisherTagAvailable()) {\n      const adapter = new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG, ADAPTER_VERSION, bidRequests, bidderRequest, '1.25.0-pre');\n      url = adapter.buildCdbUrl();\n      data = adapter.buildCdbRequest();\n    } else {\n      const context = buildContext(bidRequests);\n      url = buildCdbUrl(context);\n      data = buildCdbRequest(context, bidRequests, bidderRequest);\n    }\n\n    if (data) {\n      return { method: 'POST', url, data, bidRequests };\n    }\n  },\n\n  /**\n   * @param {*} response\n   * @param {ServerRequest} request\n   * @return {Bid[]}\n   */\n  interpretResponse: (response, request) => {\n    const body = response.body || response;\n\n    if (publisherTagAvailable()) {\n      const adapter = Criteo.PubTag.Adapters.Prebid.GetAdapter(request);\n      if (adapter) {\n        return adapter.interpretResponse(body, request);\n      }\n    }\n\n    const bids = [];\n\n    if (body && body.slots && utils.isArray(body.slots)) {\n      body.slots.forEach(slot => {\n        const bidRequest = find(request.bidRequests, b => b.adUnitCode === slot.impid && (!b.params.zoneId || parseInt(b.params.zoneId) === slot.zoneid));\n        const bidId = bidRequest.bidId;\n        const bid = {\n          requestId: bidId,\n          cpm: slot.cpm,\n          currency: slot.currency,\n          netRevenue: true,\n          ttl: slot.ttl || 60,\n          creativeId: bidId,\n          width: slot.width,\n          height: slot.height,\n        }\n        if (slot.native) {\n          bid.ad = createNativeAd(bidId, slot.native, bidRequest.params.nativeCallback);\n        } else {\n          bid.ad = slot.creative;\n        }\n        bids.push(bid);\n      });\n    }\n\n    return bids;\n  },\n\n  /**\n   * @param {TimedOutBid} timeoutData\n   */\n  onTimeout: (timeoutData) => {\n    if (publisherTagAvailable()) {\n      const adapter = Criteo.PubTag.Adapters.Prebid.GetAdapter(timeoutData.auctionId);\n      adapter.handleBidTimeout();\n    }\n  },\n};\n\n/**\n * @return {boolean}\n */\nfunction publisherTagAvailable() {\n  return typeof Criteo !== 'undefined' && Criteo.PubTag && Criteo.PubTag.Adapters && Criteo.PubTag.Adapters.Prebid;\n}\n\n/**\n * @param {BidRequest[]} bidRequests\n * @return {CriteoContext}\n */\nfunction buildContext(bidRequests) {\n  const url = utils.getTopWindowUrl();\n  const queryString = parse(url).search;\n\n  const context = {\n    url: url,\n    debug: queryString['pbt_debug'] === '1',\n    noLog: queryString['pbt_nolog'] === '1',\n    integrationMode: undefined,\n  };\n\n  bidRequests.forEach(bidRequest => {\n    if (bidRequest.params.integrationMode) {\n      context.integrationMode = bidRequest.params.integrationMode;\n    }\n  })\n\n  return context;\n}\n\n/**\n * @param {CriteoContext} context\n * @return {string}\n */\nfunction buildCdbUrl(context) {\n  let url = CDB_ENDPOINT;\n  url += '?profileId=' + PROFILE_ID_INLINE;\n  url += '&av=' + String(ADAPTER_VERSION);\n  url += '&wv=' + encodeURIComponent('1.25.0-pre');\n  url += '&cb=' + String(Math.floor(Math.random() * 99999999999));\n\n  if (context.integrationMode in INTEGRATION_MODES) {\n    url += '&im=' + INTEGRATION_MODES[context.integrationMode];\n  }\n  if (context.debug) {\n    url += '&debug=1';\n  }\n  if (context.noLog) {\n    url += '&nolog=1';\n  }\n\n  return url;\n}\n\n/**\n * @param {CriteoContext} context\n * @param {BidRequest[]} bidRequests\n * @return {*}\n */\nfunction buildCdbRequest(context, bidRequests, bidderRequest) {\n  let networkId;\n  const request = {\n    publisher: {\n      url: context.url,\n    },\n    slots: bidRequests.map(bidRequest => {\n      networkId = bidRequest.params.networkId || networkId;\n      const slot = {\n        impid: bidRequest.adUnitCode,\n        transactionid: bidRequest.transactionId,\n        auctionId: bidRequest.auctionId,\n        sizes: bidRequest.sizes.map(size => size[0] + 'x' + size[1]),\n      };\n      if (bidRequest.params.zoneId) {\n        slot.zoneid = bidRequest.params.zoneId;\n      }\n      if (bidRequest.params.publisherSubId) {\n        slot.publishersubid = bidRequest.params.publisherSubId;\n      }\n      if (bidRequest.params.nativeCallback) {\n        slot.native = true;\n      }\n      return slot;\n    }),\n  };\n  if (networkId) {\n    request.publisher.networkid = networkId;\n  }\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    request.gdprConsent = {};\n    if (typeof bidderRequest.gdprConsent.gdprApplies !== 'undefined') {\n      request.gdprConsent.gdprApplies = !!(bidderRequest.gdprConsent.gdprApplies);\n    }\n    if (bidderRequest.gdprConsent.vendorData && bidderRequest.gdprConsent.vendorData.vendorConsents &&\n      typeof bidderRequest.gdprConsent.vendorData.vendorConsents[ CRITEO_VENDOR_ID.toString(10) ] !== 'undefined') {\n      request.gdprConsent.consentGiven = !!(bidderRequest.gdprConsent.vendorData.vendorConsents[ CRITEO_VENDOR_ID.toString(10) ]);\n    }\n    if (typeof bidderRequest.gdprConsent.consentString !== 'undefined') {\n      request.gdprConsent.consentData = bidderRequest.gdprConsent.consentString;\n    }\n  }\n  return request;\n}\n\n/**\n * @param {string} id\n * @param {*} payload\n * @param {*} callback\n * @return {string}\n */\nfunction createNativeAd(id, payload, callback) {\n  // Store the callback and payload in a global object to be later accessed from the creative\n  window.criteo_prebid_native_slots = window.criteo_prebid_native_slots || {};\n  window.criteo_prebid_native_slots[id] = { callback, payload };\n\n  // The creative is in an iframe so we have to get the callback and payload\n  // from the parent window (doesn't work with safeframes)\n  return `<script type=\"text/javascript\">\n    var win = window;\n    for (var i = 0; i < 10; ++i) {\n      win = win.parent;\n      if (win.criteo_prebid_native_slots) {\n        var responseSlot = win.criteo_prebid_native_slots[\"${id}\"];\n        responseSlot.callback(responseSlot.payload);\n        break;\n      }\n    }\n  </script>`;\n}\n\n/**\n * @return {boolean}\n */\nfunction tryGetCriteoFastBid() {\n  try {\n    const fastBid = localStorage.getItem('criteo_fast_bid');\n    if (fastBid !== null) {\n      eval(fastBid); // eslint-disable-line no-eval\n      return true;\n    }\n  } catch (e) {\n    // Unable to get fast bid\n  }\n  return false;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/criteoBidAdapter.js","import bidfactory from 'src/bidfactory';\nimport { STATUS } from 'src/constants';\nimport { ajax } from 'src/ajax';\nimport * as utils from 'src/utils';\nimport { config } from 'src/config';\nimport { hooks } from 'src/hook.js';\n\nconst DEFAULT_CURRENCY_RATE_URL = 'https://currency.prebid.org/latest.json';\nconst CURRENCY_RATE_PRECISION = 4;\n\nvar bidResponseQueue = [];\nvar conversionCache = {};\nvar currencyRatesLoaded = false;\nvar adServerCurrency = 'USD';\n\nexport var currencySupportEnabled = false;\nexport var currencyRates = {};\nvar bidderCurrencyDefault = {};\nvar defaultRates;\n\n/**\n * Configuration function for currency\n * @param  {string} [config.adServerCurrency = 'USD']\n *  ISO 4217 3-letter currency code that represents the target currency. (e.g. 'EUR').  If this value is present,\n *  the currency conversion feature is activated.\n * @param  {number} [config.granularityMultiplier = 1]\n *  A decimal value representing how mcuh to scale the price granularity calculations.\n * @param  {object} config.bidderCurrencyDefault\n *  An optional argument to specify bid currencies for bid adapters.  This option is provided for the transitional phase\n *  before every bid adapter will specify its own bid currency.  If the adapter specifies a bid currency, this value is\n *  ignored for that bidder.\n *\n *  example:\n *  {\n *    rubicon: 'USD'\n *  }\n * @param  {string} [config.conversionRateFile = 'http://currency.prebid.org/latest.json']\n *  Optional path to a file containing currency conversion data.  Prebid.org hosts a file that is used as the default,\n *  if not specified.\n * @param  {object} [config.rates]\n *  This optional argument allows you to specify the rates with a JSON object, subverting the need for a external\n *  config.conversionRateFile parameter.  If this argument is specified, the conversion rate file will not be loaded.\n *\n *  example:\n *  {\n *    'GBP': { 'CNY': 8.8282, 'JPY': 141.7, 'USD': 1.2824 },\n *    'USD': { 'CNY': 6.8842, 'GBP': 0.7798, 'JPY': 110.49 }\n *  }\n *  @param {object} [config.defaultRates]\n *  This optional currency rates definition follows the same format as config.rates, however it is only utilized if\n *  there is an error loading the config.conversionRateFile.\n */\nexport function setConfig(config) {\n  let url = DEFAULT_CURRENCY_RATE_URL;\n\n  if (typeof config.rates === 'object') {\n    currencyRates.conversions = config.rates;\n    currencyRatesLoaded = true;\n  }\n\n  if (typeof config.defaultRates === 'object') {\n    defaultRates = config.defaultRates;\n  }\n\n  if (typeof config.adServerCurrency === 'string') {\n    utils.logInfo('enabling currency support', arguments);\n\n    adServerCurrency = config.adServerCurrency;\n    if (config.conversionRateFile) {\n      utils.logInfo('currency using override conversionRateFile:', config.conversionRateFile);\n      url = config.conversionRateFile;\n    }\n    initCurrency(url);\n  } else {\n    // currency support is disabled, setting defaults\n    utils.logInfo('disabling currency support');\n    resetCurrency();\n  }\n  if (typeof config.bidderCurrencyDefault === 'object') {\n    bidderCurrencyDefault = config.bidderCurrencyDefault;\n  }\n}\nconfig.getConfig('currency', config => setConfig(config.currency));\n\nfunction errorSettingsRates(msg) {\n  if (defaultRates) {\n    currencyRates.conversions = defaultRates;\n    currencyRatesLoaded = true;\n    utils.logWarn(msg);\n    utils.logWarn('Currency failed loading rates, falling back to currency.defaultRates');\n  } else {\n    utils.logError(msg);\n  }\n}\n\nfunction initCurrency(url) {\n  conversionCache = {};\n  currencySupportEnabled = true;\n\n  utils.logInfo('Installing addBidResponse decorator for currency module', arguments);\n\n  hooks['addBidResponse'].addHook(addBidResponseHook, 100);\n\n  if (!currencyRates.conversions) {\n    ajax(url,\n      {\n        success: function (response) {\n          try {\n            currencyRates = JSON.parse(response);\n            utils.logInfo('currencyRates set to ' + JSON.stringify(currencyRates));\n            currencyRatesLoaded = true;\n            processBidResponseQueue();\n          } catch (e) {\n            errorSettingsRates('Failed to parse currencyRates response: ' + response);\n          }\n        },\n        error: errorSettingsRates\n      }\n    );\n  }\n}\n\nfunction resetCurrency() {\n  utils.logInfo('Uninstalling addBidResponse decorator for currency module', arguments);\n\n  hooks['addBidResponse'].removeHook(addBidResponseHook, 100);\n\n  adServerCurrency = 'USD';\n  conversionCache = {};\n  currencySupportEnabled = false;\n  currencyRatesLoaded = false;\n  currencyRates = {};\n  bidderCurrencyDefault = {};\n}\n\nexport function addBidResponseHook(adUnitCode, bid, fn) {\n  if (!bid) {\n    return fn.apply(this, arguments); // if no bid, call original and let it display warnings\n  }\n\n  let bidder = bid.bidderCode || bid.bidder;\n  if (bidderCurrencyDefault[bidder]) {\n    let currencyDefault = bidderCurrencyDefault[bidder];\n    if (bid.currency && currencyDefault !== bid.currency) {\n      utils.logWarn(`Currency default '${bidder}: ${currencyDefault}' ignored. adapter specified '${bid.currency}'`);\n    } else {\n      bid.currency = currencyDefault;\n    }\n  }\n\n  // default to USD if currency not set\n  if (!bid.currency) {\n    utils.logWarn('Currency not specified on bid.  Defaulted to \"USD\"');\n    bid.currency = 'USD';\n  }\n\n  let fromCurrency = bid.currency;\n  let cpm = bid.cpm;\n\n  // used for analytics\n  bid.getCpmInNewCurrency = function(toCurrency) {\n    return (parseFloat(cpm) * getCurrencyConversion(fromCurrency, toCurrency)).toFixed(3);\n  };\n\n  // execute immediately if the bid is already in the desired currency\n  if (bid.currency === adServerCurrency) {\n    return fn.apply(this, arguments);\n  }\n\n  bidResponseQueue.push(wrapFunction(fn, this, arguments));\n  if (!currencySupportEnabled || currencyRatesLoaded) {\n    processBidResponseQueue();\n  }\n}\n\nfunction processBidResponseQueue() {\n  while (bidResponseQueue.length > 0) {\n    (bidResponseQueue.shift())();\n  }\n}\n\nfunction wrapFunction(fn, context, params) {\n  return function() {\n    let bid = params[1];\n    if (bid !== undefined && 'currency' in bid && 'cpm' in bid) {\n      let fromCurrency = bid.currency;\n      try {\n        let conversion = getCurrencyConversion(fromCurrency);\n        bid.originalCpm = bid.cpm;\n        bid.originalCurrency = bid.currency;\n        if (conversion !== 1) {\n          bid.cpm = (parseFloat(bid.cpm) * conversion).toFixed(4);\n          bid.currency = adServerCurrency;\n        }\n      } catch (e) {\n        utils.logWarn('Returning NO_BID, getCurrencyConversion threw error: ', e);\n        params[1] = bidfactory.createBid(STATUS.NO_BID, {\n          bidder: bid.bidderCode || bid.bidder,\n          bidId: bid.adId\n        });\n      }\n    }\n    return fn.apply(context, params);\n  };\n}\n\nfunction getCurrencyConversion(fromCurrency, toCurrency = adServerCurrency) {\n  var conversionRate = null;\n  var rates;\n  let cacheKey = `${fromCurrency}->${toCurrency}`;\n  if (cacheKey in conversionCache) {\n    conversionRate = conversionCache[cacheKey];\n    utils.logMessage('Using conversionCache value ' + conversionRate + ' for ' + cacheKey);\n  } else if (currencySupportEnabled === false) {\n    if (fromCurrency === 'USD') {\n      conversionRate = 1;\n    } else {\n      throw new Error('Prebid currency support has not been enabled and fromCurrency is not USD');\n    }\n  } else if (fromCurrency === toCurrency) {\n    conversionRate = 1;\n  } else {\n    if (fromCurrency in currencyRates.conversions) {\n      // using direct conversion rate from fromCurrency to toCurrency\n      rates = currencyRates.conversions[fromCurrency];\n      if (!(toCurrency in rates)) {\n        // bid should fail, currency is not supported\n        throw new Error('Specified adServerCurrency in config \\'' + toCurrency + '\\' not found in the currency rates file');\n      }\n      conversionRate = rates[toCurrency];\n      utils.logInfo('getCurrencyConversion using direct ' + fromCurrency + ' to ' + toCurrency + ' conversionRate ' + conversionRate);\n    } else if (toCurrency in currencyRates.conversions) {\n      // using reciprocal of conversion rate from toCurrency to fromCurrency\n      rates = currencyRates.conversions[toCurrency];\n      if (!(fromCurrency in rates)) {\n        // bid should fail, currency is not supported\n        throw new Error('Specified fromCurrency \\'' + fromCurrency + '\\' not found in the currency rates file');\n      }\n      conversionRate = roundFloat(1 / rates[fromCurrency], CURRENCY_RATE_PRECISION);\n      utils.logInfo('getCurrencyConversion using reciprocal ' + fromCurrency + ' to ' + toCurrency + ' conversionRate ' + conversionRate);\n    } else {\n      // first defined currency base used as intermediary\n      var anyBaseCurrency = Object.keys(currencyRates.conversions)[0];\n\n      if (!(fromCurrency in currencyRates.conversions[anyBaseCurrency])) {\n        // bid should fail, currency is not supported\n        throw new Error('Specified fromCurrency \\'' + fromCurrency + '\\' not found in the currency rates file');\n      }\n      var toIntermediateConversionRate = 1 / currencyRates.conversions[anyBaseCurrency][fromCurrency];\n\n      if (!(toCurrency in currencyRates.conversions[anyBaseCurrency])) {\n        // bid should fail, currency is not supported\n        throw new Error('Specified adServerCurrency in config \\'' + toCurrency + '\\' not found in the currency rates file');\n      }\n      var fromIntermediateConversionRate = currencyRates.conversions[anyBaseCurrency][toCurrency];\n\n      conversionRate = roundFloat(toIntermediateConversionRate * fromIntermediateConversionRate, CURRENCY_RATE_PRECISION);\n      utils.logInfo('getCurrencyConversion using intermediate ' + fromCurrency + ' thru ' + anyBaseCurrency + ' to ' + toCurrency + ' conversionRate ' + conversionRate);\n    }\n  }\n  if (!(cacheKey in conversionCache)) {\n    utils.logMessage('Adding conversionCache value ' + conversionRate + ' for ' + cacheKey);\n    conversionCache[cacheKey] = conversionRate;\n  }\n  return conversionRate;\n}\n\nfunction roundFloat(num, dec) {\n  var d = 1;\n  for (let i = 0; i < dec; i++) {\n    d += '0';\n  }\n  return Math.round(num * d) / d;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/currency.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'danmarket';\nconst ENDPOINT_URL = '//ads.danmarketplace.com/hb';\nconst TIME_TO_LIVE = 360;\nconst ADAPTER_SYNC_URL = '//ads.danmarketplace.com/push_sync';\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should be not empty',\n  emptySeatbid: 'Seatbid array from response has empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\n\n/**\n * Dentsu Aegis Network Marketplace Bid Adapter.\n * Contact: niels@baarsma.net\n *\n */\nexport const spec = {\n  code: BIDDER_CODE,\n\n  aliases: ['DANMarketplace', 'DAN_Marketplace', 'danmarketplace'],\n\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n      reqId = bid.bidderRequestId;\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      r: reqId,\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      if (bidderRequest.gdprConsent.consentString) {\n        payload.gdpr_consent = bidderRequest.gdprConsent.consentString;\n      }\n      payload.gdpr_applies =\n        (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean')\n          ? Number(bidderRequest.gdprConsent.gdprApplies) : 1;\n    }\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: payload,\n      bidsMap: bidsMap,\n    };\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    if (syncOptions.pixelEnabled) {\n      var query = [];\n      if (gdprConsent) {\n        if (gdprConsent.consentString) {\n          query.push('gdpr_consent=' + encodeURIComponent(gdprConsent.consentString));\n        }\n        query.push('gdpr_applies=' + encodeURIComponent(\n          (typeof gdprConsent.gdprApplies === 'boolean')\n            ? Number(gdprConsent.gdprApplies) : 1));\n      }\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL + (query.length ? '?' + query.join('&') : '')\n      }];\n    }\n  }\n}\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId, // bid.bidderRequestId,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid, // bid.bidId,\n          currency: 'USD',\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/danmarketBidAdapter.js","/**\n * This module adds [DFP support]{@link https://www.doubleclickbygoogle.com/} for Video to Prebid.\n */\n\nimport { registerVideoSupport } from '../src/adServerManager';\nimport { targeting } from '../src/targeting';\nimport { formatQS, format as buildUrl, parse } from '../src/url';\nimport { deepAccess, isEmpty, logError, parseSizesInput } from '../src/utils';\nimport { config } from '../src/config';\n\n/**\n * @typedef {Object} DfpVideoParams\n *\n * This object contains the params needed to form a URL which hits the\n * [DFP API]{@link https://support.google.com/dfp_premium/answer/1068325?hl=en}.\n *\n * All params (except iu, mentioned below) should be considered optional. This module will choose reasonable\n * defaults for all of the other required params.\n *\n * The cust_params property, if present, must be an object. It will be merged with the rest of the\n * standard Prebid targeting params (hb_adid, hb_bidder, etc).\n *\n * @param {string} iu This param *must* be included, in order for us to create a valid request.\n * @param [string] description_url This field is required if you want Ad Exchange to bid on our ad unit...\n *   but otherwise optional\n */\n\n/**\n * @typedef {Object} DfpVideoOptions\n *\n * @param {Object} adUnit The adUnit which this bid is supposed to help fill.\n * @param [Object] bid The bid which should be considered alongside the rest of the adserver's demand.\n *   If this isn't defined, then we'll use the winning bid for the adUnit.\n *\n * @param {DfpVideoParams} [params] Query params which should be set on the DFP request.\n *   These will override this module's defaults whenever they conflict.\n * @param {string} [url] video adserver url\n */\n\n/** Safe defaults which work on pretty much all video calls. */\nconst defaultParamConstants = {\n  env: 'vp',\n  gdfp_req: 1,\n  output: 'xml_vast3',\n  unviewed_position_start: 1,\n};\n\n/**\n * Merge all the bid data and publisher-supplied options into a single URL, and then return it.\n *\n * @see [The DFP API]{@link https://support.google.com/dfp_premium/answer/1068325?hl=en#env} for details.\n *\n * @param {DfpVideoOptions} options Options which should be used to construct the URL.\n *\n * @return {string} A URL which calls DFP, letting options.bid\n *   (or the auction's winning bid for this adUnit, if undefined) compete alongside the rest of the\n *   demand in DFP.\n */\nexport default function buildDfpVideoUrl(options) {\n  if (!options.params && !options.url) {\n    logError(`A params object or a url is required to use pbjs.adServers.dfp.buildVideoUrl`);\n    return;\n  }\n\n  const adUnit = options.adUnit;\n  const bid = options.bid || targeting.getWinningBids(adUnit.code)[0];\n\n  let urlComponents = {};\n\n  if (options.url) {\n    // when both `url` and `params` are given, parsed url will be overwriten\n    // with any matching param components\n    urlComponents = parse(options.url, {noDecodeWholeURL: true});\n\n    if (isEmpty(options.params)) {\n      return buildUrlFromAdserverUrlComponents(urlComponents, bid, options);\n    }\n  }\n\n  const derivedParams = {\n    correlator: Date.now(),\n    sz: parseSizesInput(adUnit.sizes).join('|'),\n    url: encodeURIComponent(location.href),\n  };\n  const encodedCustomParams = getCustParams(bid, options);\n\n  const queryParams = Object.assign({},\n    defaultParamConstants,\n    urlComponents.search,\n    derivedParams,\n    options.params,\n    { cust_params: encodedCustomParams }\n  );\n\n  const descriptionUrl = getDescriptionUrl(bid, options, 'params');\n  if (descriptionUrl) { queryParams.description_url = descriptionUrl; }\n\n  return buildUrl({\n    protocol: 'https',\n    host: 'pubads.g.doubleclick.net',\n    pathname: '/gampad/ads',\n    search: queryParams\n  });\n}\n\n/**\n * Builds a video url from a base dfp video url and a winning bid, appending\n * Prebid-specific key-values.\n * @param {Object} components base video adserver url parsed into components object\n * @param {AdapterBidResponse} bid winning bid object to append parameters from\n * @param {Object} options Options which should be used to construct the URL (used for custom params).\n * @return {string} video url\n */\nfunction buildUrlFromAdserverUrlComponents(components, bid, options) {\n  const descriptionUrl = getDescriptionUrl(bid, components, 'search');\n  if (descriptionUrl) { components.search.description_url = descriptionUrl; }\n\n  const encodedCustomParams = getCustParams(bid, options);\n  components.search.cust_params = (components.search.cust_params) ? components.search.cust_params + '%26' + encodedCustomParams : encodedCustomParams;\n\n  return buildUrl(components);\n}\n\n/**\n * Returns the encoded vast url if it exists on a bid object, only if prebid-cache\n * is disabled, and description_url is not already set on a given input\n * @param {AdapterBidResponse} bid object to check for vast url\n * @param {Object} components the object to check that description_url is NOT set on\n * @param {string} prop the property of components that would contain description_url\n * @return {string | undefined} The encoded vast url if it exists, or undefined\n */\nfunction getDescriptionUrl(bid, components, prop) {\n  if (config.getConfig('cache.url')) { return; }\n\n  if (!deepAccess(components, `${prop}.description_url`)) {\n    const vastUrl = bid && bid.vastUrl;\n    if (vastUrl) { return encodeURIComponent(vastUrl); }\n  } else {\n    logError(`input cannnot contain description_url`);\n  }\n}\n\n/**\n * Returns the encoded `cust_params` from the bid.adserverTargeting and adds the `hb_uuid`, and `hb_cache_id`. Optionally the options.params.cust_params\n * @param {AdapterBidResponse} bid\n * @param {Object} options this is the options passed in from the `buildDfpVideoUrl` function\n * @return {Object} Encoded key value pairs for cust_params\n */\nfunction getCustParams(bid, options) {\n  const adserverTargeting = (bid && bid.adserverTargeting) || {};\n\n  let allTargetingData = {};\n  const adUnit = options && options.adUnit;\n  if (adUnit) {\n    let allTargeting = targeting.getAllTargeting(adUnit.code);\n    allTargetingData = (allTargeting) ? allTargeting[adUnit.code] : {};\n  }\n\n  const optCustParams = deepAccess(options, 'params.cust_params');\n  let customParams = Object.assign({},\n    allTargetingData,\n    adserverTargeting,\n    { hb_uuid: bid && bid.videoCacheKey },\n    // hb_uuid will be deprecated and replaced by hb_cache_id\n    { hb_cache_id: bid && bid.videoCacheKey },\n    optCustParams,\n  );\n  return encodeURIComponent(formatQS(customParams));\n}\n\nregisterVideoSupport('dfp', {\n  buildVideoUrl: buildDfpVideoUrl\n});\n\n\n\n// WEBPACK FOOTER //\n// ./modules/dfpAdServerVideo.js","import { getGlobal } from './prebidGlobal';\nimport { logWarn } from './utils';\n\nconst prebid = getGlobal();\n\n/**\n * This file defines the plugin points in prebid-core for AdServer-specific functionality.\n *\n * Its main job is to expose functions for AdServer modules to append functionality to the Prebid public API.\n * For a given Ad Server with name \"adServerName\", these functions will only change the API in the\n * pbjs.adServers[adServerName] namespace.\n */\n\n/**\n * @typedef {Object} CachedVideoBid\n *\n * @property {string} videoCacheId The ID which can be used to retrieve this video from prebid-server.\n *   This is the same ID given to the callback in the videoCache's store function.\n */\n\n/**\n * @function VideoAdUrlBuilder\n *\n * @param {CachedVideoBid} bid The winning Bid which the ad server should show, assuming it beats out\n *   the competition.\n *\n * @param {Object} options Options required by the Ad Server to make a valid AdServer URL.\n *   This object will have different properties depending on the specific ad server supported.\n *   For more information, see the docs inside the ad server module you're supporting.\n *\n * @return {string} A URL which can be passed into the Video player to play an ad.\n */\n\n/**\n * @typedef {Object} VideoSupport\n *\n * @function {VideoAdUrlBuilder} buildVideoAdUrl\n */\n\n/**\n * Enable video support for the Ad Server.\n *\n * @property {string} name The identifying name for this adserver.\n * @property {VideoSupport} videoSupport An object with the functions needed to support video in Prebid.\n */\nexport function registerVideoSupport(name, videoSupport) {\n  prebid.adServers = prebid.adServers || { };\n  prebid.adServers[name] = prebid.adServers[name] || { };\n  if (prebid.adServers[name].buildVideoUrl) {\n    logWarn(`Multiple calls to registerVideoSupport for AdServer ${name}. Expect surprising behavior.`);\n    return;\n  }\n  prebid.adServers[name].buildVideoUrl = videoSupport.buildVideoUrl;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adServerManager.js","import {registerBidder} from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\nimport { BANNER, NATIVE } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'dgads';\nconst UID_NAME = 'dgads_uid';\nconst ENDPOINT = 'https://ads-tr.bigmining.com/ad/p/bid';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [ BANNER, NATIVE ],\n  isBidRequestValid: function(bid) {\n    const params = bid.params;\n    if (!/^\\d+$/.test(params.location_id)) {\n      return false;\n    }\n    if (!/^\\d+$/.test(params.site_id)) {\n      return false;\n    }\n    return true;\n  },\n  buildRequests: function(bidRequests) {\n    if (bidRequests.length === 0) {\n      return {};\n    }\n\n    return bidRequests.map(bidRequest => {\n      const params = bidRequest.params;\n      const data = {};\n\n      data['_loc'] = params.location_id;\n      data['_medium'] = params.site_id;\n      data['transaction_id'] = bidRequest.transactionId;\n      data['bid_id'] = bidRequest.bidId;\n      data['referer'] = utils.getTopWindowUrl();\n      data['_uid'] = getCookieUid(UID_NAME);\n\n      return {\n        method: 'GET',\n        url: ENDPOINT,\n        data,\n      };\n    });\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    const responseObj = serverResponse.body;\n    const ads = responseObj.bids;\n    let bidResponse = {};\n    if (utils.isEmpty(ads)) {\n      return [];\n    }\n    utils._each(ads, function(ad) {\n      bidResponse.requestId = ad.bidId;\n      bidResponse.bidderCode = BIDDER_CODE;\n      bidResponse.cpm = ad.cpm;\n      bidResponse.creativeId = ad.creativeId;\n      bidResponse.currency = 'JPY';\n      bidResponse.netRevenue = true;\n      bidResponse.ttl = ad.ttl;\n      bidResponse.referrer = utils.getTopWindowUrl();\n      if (ad.isNative == 1) {\n        bidResponse.mediaType = NATIVE;\n        bidResponse.native = setNativeResponse(ad);\n      } else {\n        bidResponse.width = parseInt(ad.w);\n        bidResponse.height = parseInt(ad.h);\n        bidResponse.ad = ad.ad;\n      }\n      bidResponses.push(bidResponse);\n    });\n    return bidResponses;\n  }\n};\nfunction setNativeResponse(ad) {\n  let nativeResponce = {};\n  nativeResponce.image = {\n    url: ad.image,\n    width: parseInt(ad.w),\n    height: parseInt(ad.h)\n  }\n  nativeResponce.title = ad.title;\n  nativeResponce.body = ad.desc;\n  nativeResponce.sponsoredBy = ad.sponsoredBy;\n  nativeResponce.clickUrl = ad.clickUrl;\n  nativeResponce.clickTrackers = ad.clickTrackers || [];\n  nativeResponce.impressionTrackers = ad.impressionTrackers || [];\n  return nativeResponce;\n}\nexport function getCookieUid(uidName) {\n  if (utils.cookiesAreEnabled()) {\n    let cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      let value = cookies[i].split('=');\n      if (value[0].indexOf(uidName) > -1) {\n        return value[1];\n      }\n    }\n  }\n  return '';\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/dgadsBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\n\nconst BIDDER_CODE = 'districtmDMX';\n\nconst DMXURI = 'https://dmx.districtm.io/b/v1';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedFormat: ['banner'],\n  isBidRequestValid(bid) {\n    return !!(bid.params.dmxid && bid.params.memberid);\n  },\n  interpretResponse(response, bidRequest) {\n    response = response.body || {};\n    if (response.seatbid) {\n      if (utils.isArray(response.seatbid)) {\n        const {seatbid} = response;\n        let winners = seatbid.reduce((bid, ads) => {\n          let ad = ads.bid.reduce(function(oBid, nBid) {\n            if (oBid.price < nBid.price) {\n              const bid = matchRequest(nBid.impid, bidRequest);\n              const {width, height} = defaultSize(bid);\n              nBid.cpm = nBid.price;\n              nBid.bidId = nBid.impid;\n              nBid.requestId = nBid.impid;\n              nBid.width = nBid.w || width;\n              nBid.height = nBid.h || height;\n              nBid.ad = nBid.adm;\n              nBid.netRevenue = true;\n              nBid.creativeId = nBid.crid;\n              nBid.currency = 'USD';\n              nBid.ttl = 60;\n\n              return nBid;\n            } else {\n              oBid.cpm = oBid.price;\n              return oBid;\n            }\n          }, {price: 0});\n          if (ad.adm) {\n            bid.push(ad)\n          }\n          return bid;\n        }, [])\n        let winnersClean = winners.filter(w => {\n          if (w.bidId) {\n            return true;\n          }\n          return false;\n        });\n        return winnersClean;\n      } else {\n        return [];\n      }\n    } else {\n      return [];\n    }\n  },\n  buildRequests(bidRequest, bidderRequest) {\n    let timeout = config.getConfig('bidderTimeout');\n    let dmxRequest = {\n      id: utils.generateUUID(),\n      cur: ['USD'],\n      tmax: (timeout - 300),\n      test: this.test() || 0,\n      site: {\n        publisher: { id: String(bidRequest[0].params.memberid) || null }\n      }\n    }\n    if (!dmxRequest.test) {\n      delete dmxRequest.test;\n    }\n    if (bidderRequest.gdprConsent) {\n      dmxRequest.regs = {};\n      dmxRequest.regs.ext = {};\n      dmxRequest.regs.ext.gdpr = bidderRequest.gdprConsent.gdprApplies === true ? 1 : 0;\n      dmxRequest.user = {};\n      dmxRequest.user.ext = {};\n      dmxRequest.user.ext.consent = bidderRequest.gdprConsent.consentString;\n    }\n    let tosendtags = bidRequest.map(dmx => {\n      var obj = {};\n      obj.id = dmx.bidId;\n      obj.tagid = String(dmx.params.dmxid);\n      obj.secure = window.location.protocol === 'https:' ? 1 : 0;\n      obj.banner = {\n        topframe: 1,\n        w: dmx.sizes[0][0] || 0,\n        h: dmx.sizes[0][1] || 0,\n        format: dmx.sizes.map(s => {\n          return {w: s[0], h: s[1]};\n        }).filter(obj => typeof obj.w === 'number' && typeof obj.h === 'number')\n      };\n      return obj;\n    });\n    dmxRequest.imp = tosendtags;\n    return {\n      method: 'POST',\n      url: DMXURI,\n      data: JSON.stringify(dmxRequest),\n      options: {\n        contentType: 'application/json',\n        withCredentials: true\n      },\n      bidderRequest\n    }\n  },\n  test() {\n    return window.location.href.indexOf('dmTest=true') !== -1 ? 1 : 0;\n  },\n  getUserSyncs(optionsType) {\n    if (optionsType.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: 'https://cdn.districtm.io/ids/index.html'\n      }];\n    }\n  }\n}\n\n/**\n * Function matchRequest(id: string, BidRequest: object)\n * @param id\n * @type string\n * @param bidRequest\n * @type Object\n * @returns Object\n *\n */\nexport function matchRequest(id, bidRequest) {\n  const {bids} = bidRequest.bidderRequest;\n  const [returnValue] = bids.filter(bid => bid.bidId === id);\n  return returnValue;\n}\nexport function checkDeepArray(Arr) {\n  if (Array.isArray(Arr)) {\n    if (Array.isArray(Arr[0])) {\n      return Arr[0];\n    } else {\n      return Arr;\n    }\n  } else {\n    return Arr;\n  }\n}\nexport function defaultSize(thebidObj) {\n  const {sizes} = thebidObj;\n  const returnObject = {};\n  returnObject.width = checkDeepArray(sizes)[0];\n  returnObject.height = checkDeepArray(sizes)[1];\n  return returnObject;\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/districtmDMXBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'divreach';\nconst ENDPOINT_URL = '//ads.divreach.com/prebid.1.0.aspx';\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: [],\n  supportedMediaTypes: ['banner', 'video'],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!bid.params.zone;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {bidderRequest} - bidderRequest.bids[] is an array of AdUnits and bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidderRequest) {\n    const payload = {\n      imps: [],\n      referrer: encodeURIComponent(utils.getTopWindowUrl()),\n    };\n    bidderRequest.forEach((bid) => {\n      if (bid.bidder === BIDDER_CODE) {\n        payload.imps.push(bid);\n      }\n    });\n    const payloadString = JSON.stringify(payload);\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: `data=${payloadString}`,\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    // loop through serverResponses {\n    try {\n      serverResponse = serverResponse.body;\n      serverResponse.forEach((bidResponse) => {\n        const bidResp = {\n          requestId: bidResponse.bidId,\n          cpm: bidResponse.cpm,\n          width: bidResponse.width,\n          height: bidResponse.height,\n          ad: bidResponse.ad,\n          ttl: bidResponse.ttl,\n          creativeId: bidResponse.creativeId,\n          netRevenue: bidResponse.netRevenue,\n          currency: bidResponse.currency,\n          vastUrl: bidResponse.vastUrl,\n        };\n        bidResponses.push(bidResp);\n      });\n    } catch (e) {\n      utils.logError(e);\n    }\n    return bidResponses;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/divreachBidAdapter.js","import * as utils from 'src/utils';\nimport { VIDEO, BANNER } from 'src/mediaTypes';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'ebdr';\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [ BANNER, VIDEO ],\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.zoneid);\n  },\n  buildRequests: function(bids) {\n    const rtbServerDomain = 'dsp.bnmla.com';\n    let domain = window.location.host;\n    let page = window.location.pathname + location.search + location.hash;\n    let ebdrImps = [];\n    const ebdrReq = {};\n    let ebdrParams = {};\n    let zoneid = '';\n    let requestId = '';\n    bids.forEach(bid => {\n      utils.logInfo('Log bid', bid);\n      let bidFloor = utils.getBidIdParameter('bidfloor', bid.params);\n      let whArr = getWidthAndHeight(bid);\n      let _mediaTypes = (bid.mediaTypes && bid.mediaTypes.video) ? VIDEO : BANNER;\n      zoneid = utils.getBidIdParameter('zoneid', bid.params);\n      requestId = bid.bidderRequestId;\n      ebdrImps.push({\n        id: bid.bidId,\n        [_mediaTypes]: {\n          w: whArr[0],\n          h: whArr[1]\n        },\n        bidfloor: bidFloor\n      })\n      ebdrReq[bid.bidId] = {mediaTypes: _mediaTypes,\n        w: whArr[0],\n        h: whArr[1]\n      };\n      ebdrParams['latitude'] = utils.getBidIdParameter('latitude', bid.params);\n      ebdrParams['longitude'] = utils.getBidIdParameter('longitude', bid.params);\n      ebdrParams['ifa'] = (utils.getBidIdParameter('IDFA', bid.params).length > utils.getBidIdParameter('ADID', bid.params).length) ? utils.getBidIdParameter('IDFA', bid.params) : utils.getBidIdParameter('ADID', bid.params);\n    });\n    let ebdrBidReq = {\n      id: requestId,\n      imp: ebdrImps,\n      site: {\n        domain: domain,\n        page: page\n      },\n      device: {\n        geo: {\n          lat: ebdrParams.latitude,\n          log: ebdrParams.longitude\n        },\n        ifa: ebdrParams.ifa\n      }\n    };\n    return {\n      method: 'GET',\n      url: '//' + rtbServerDomain + '/hb?' + '&zoneid=' + zoneid + '&br=' + encodeURIComponent(JSON.stringify(ebdrBidReq)),\n      bids: ebdrReq\n    };\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    utils.logInfo('Log serverResponse', serverResponse);\n    utils.logInfo('Log bidRequest', bidRequest);\n    let ebdrResponseImps = [];\n    const ebdrResponseObj = serverResponse.body;\n    if (!ebdrResponseObj || !ebdrResponseObj.seatbid || ebdrResponseObj.seatbid.length === 0 || !ebdrResponseObj.seatbid[0].bid || ebdrResponseObj.seatbid[0].bid.length === 0) {\n      return [];\n    }\n    ebdrResponseObj.seatbid[0].bid.forEach(ebdrBid => {\n      let responseCPM;\n      responseCPM = parseFloat(ebdrBid.price);\n      let adm;\n      let type;\n      let _mediaTypes;\n      let vastURL;\n      if (bidRequest.bids[ebdrBid.id].mediaTypes == BANNER) {\n        adm = decodeURIComponent(ebdrBid.adm)\n        type = 'ad';\n        _mediaTypes = BANNER;\n      } else {\n        adm = ebdrBid.adm\n        type = 'vastXml'\n        _mediaTypes = VIDEO;\n        if (ebdrBid.nurl) {\n          vastURL = ebdrBid.nurl;\n        }\n      }\n      let response = {\n        requestId: ebdrBid.id,\n        [type]: adm,\n        mediaType: _mediaTypes,\n        creativeId: ebdrBid.crid,\n        cpm: responseCPM,\n        width: ebdrBid.w,\n        height: ebdrBid.h,\n        currency: 'USD',\n        netRevenue: true,\n        ttl: 3600 }\n      if (vastURL) {\n        response.vastUrl = vastURL;\n      }\n      ebdrResponseImps.push(response);\n    });\n    return ebdrResponseImps;\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const syncs = []\n    if (syncOptions.pixelEnabled) {\n      const ebdrResponseObj = serverResponses.body;\n      if (!ebdrResponseObj || !ebdrResponseObj.seatbid || ebdrResponseObj.seatbid.length === 0 || !ebdrResponseObj.seatbid[0].bid || ebdrResponseObj.seatbid[0].bid.length === 0) {\n        return [];\n      }\n      ebdrResponseObj.seatbid[0].bid.forEach(ebdrBid => {\n        if (ebdrBid.iurl && ebdrBid.iurl.length > 0) {\n          syncs.push({\n            type: 'image',\n            url: ebdrBid.iurl\n          });\n        }\n      });\n    }\n    return syncs;\n  }\n}\nfunction getWidthAndHeight(bid) {\n  let adW = null;\n  let adH = null;\n  // Handing old bidder only has size object\n  if (bid.sizes && bid.sizes.length) {\n    let sizeArrayLength = bid.sizes.length;\n    if (sizeArrayLength === 2 && typeof bid.sizes[0] === 'number' && typeof bid.sizes[1] === 'number') {\n      adW = bid.sizes[0];\n      adH = bid.sizes[1];\n    }\n  }\n  let _mediaTypes = bid.mediaTypes && bid.mediaTypes.video ? VIDEO : BANNER;\n  if (bid.mediaTypes && bid.mediaTypes[_mediaTypes]) {\n    if (_mediaTypes == BANNER && bid.mediaTypes[_mediaTypes].sizes && bid.mediaTypes[_mediaTypes].sizes[0] && bid.mediaTypes[_mediaTypes].sizes[0].length === 2) {\n      adW = bid.mediaTypes[_mediaTypes].sizes[0][0];\n      adH = bid.mediaTypes[_mediaTypes].sizes[0][1];\n    } else if (_mediaTypes == VIDEO && bid.mediaTypes[_mediaTypes].playerSize && bid.mediaTypes[_mediaTypes].playerSize.length === 2) {\n      adW = bid.mediaTypes[_mediaTypes].playerSize[0];\n      adH = bid.mediaTypes[_mediaTypes].playerSize[1];\n    }\n  }\n  return [adW, adH];\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/ebdrBidAdapter.js","import {ajax} from 'src/ajax';\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport * as utils from 'src/utils';\n\nconst CONSTANTS = require('src/constants.json');\n\nconst analyticsType = 'endpoint';\nconst EPL_HOST = 'https://ads.us.e-planning.net/hba/1/';\n\nfunction auctionEndHandler(args) {\n  return {auctionId: args.auctionId};\n}\n\nfunction auctionInitHandler(args) {\n  return {\n    auctionId: args.auctionId,\n    time: args.timestamp\n  };\n}\n\nfunction bidRequestedHandler(args) {\n  return {\n    auctionId: args.auctionId,\n    time: args.start,\n    bidder: args.bidderCode,\n    bids: args.bids.map(function(bid) {\n      return {\n        time: bid.startTime,\n        bidder: bid.bidder,\n        placementCode: bid.placementCode,\n        auctionId: bid.auctionId,\n        sizes: bid.sizes\n      };\n    }),\n  };\n}\n\nfunction bidResponseHandler(args) {\n  return {\n    bidder: args.bidder,\n    size: args.size,\n    auctionId: args.auctionId,\n    cpm: args.cpm,\n    time: args.responseTimestamp,\n  };\n}\n\nfunction bidWonHandler(args) {\n  return {\n    auctionId: args.auctionId,\n    size: args.width + 'x' + args.height,\n  };\n}\n\nfunction bidTimeoutHandler(args) {\n  return args.map(function(bid) {\n    return {\n      bidder: bid.bidder,\n      auctionId: bid.auctionId\n    };\n  })\n}\n\nfunction callHandler(evtype, args) {\n  let handler = null;\n\n  if (evtype === CONSTANTS.EVENTS.AUCTION_INIT) {\n    handler = auctionInitHandler;\n    eplAnalyticsAdapter.context.events = [];\n  } else if (evtype === CONSTANTS.EVENTS.AUCTION_END) {\n    handler = auctionEndHandler;\n  } else if (evtype === CONSTANTS.EVENTS.BID_REQUESTED) {\n    handler = bidRequestedHandler;\n  } else if (evtype === CONSTANTS.EVENTS.BID_RESPONSE) {\n    handler = bidResponseHandler\n  } else if (evtype === CONSTANTS.EVENTS.BID_TIMEOUT) {\n    handler = bidTimeoutHandler;\n  } else if (evtype === CONSTANTS.EVENTS.BID_WON) {\n    handler = bidWonHandler;\n  }\n\n  if (handler) {\n    eplAnalyticsAdapter.context.events.push({ec: evtype, p: handler(args)});\n  }\n}\n\nvar eplAnalyticsAdapter = Object.assign(adapter(\n  {\n    EPL_HOST,\n    analyticsType\n  }),\n{\n  track({eventType, args}) {\n    if (typeof args !== 'undefined') {\n      callHandler(eventType, args);\n    }\n\n    if (eventType === CONSTANTS.EVENTS.AUCTION_END) {\n      try {\n        let strjson = JSON.stringify(eplAnalyticsAdapter.context.events);\n        ajax(eplAnalyticsAdapter.context.host + eplAnalyticsAdapter.context.ci + '?d=' + encodeURIComponent(strjson));\n      } catch (err) {}\n    }\n  }\n}\n);\n\neplAnalyticsAdapter.originEnableAnalytics = eplAnalyticsAdapter.enableAnalytics;\n\neplAnalyticsAdapter.enableAnalytics = function (config) {\n  if (!config.options.ci) {\n    utils.logError('Client ID (ci) option is not defined. Analytics won\\'t work');\n    return;\n  }\n\n  eplAnalyticsAdapter.context = {\n    events: [],\n    host: config.options.host || EPL_HOST,\n    ci: config.options.ci\n  };\n\n  eplAnalyticsAdapter.originEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: eplAnalyticsAdapter,\n  code: 'eplanning'\n});\n\nexport default eplAnalyticsAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/eplanningAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'eplanning';\nconst rnd = Math.random();\nconst DEFAULT_SV = 'ads.us.e-planning.net';\nconst DEFAULT_ISV = 'i.e-planning.net';\nconst PARAMS = ['ci', 'sv', 't'];\nconst DOLLARS = 'USD';\nconst NET_REVENUE = true;\nconst TTL = 120;\nconst NULL_SIZE = '1x1';\nconst FILE = 'file';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return Boolean(bid.params.ci) || Boolean(bid.params.t);\n  },\n\n  buildRequests: function(bidRequests) {\n    const method = 'GET';\n    const dfpClientId = '1';\n    const sec = 'ROS';\n    let url;\n    let params;\n    const urlConfig = getUrlConfig(bidRequests);\n    const pcrs = getCharset();\n\n    if (urlConfig.t) {\n      url = urlConfig.isv + '/layers/t_pbjs_2.json';\n      params = {};\n    } else {\n      url = '//' + (urlConfig.sv || DEFAULT_SV) + '/hb/1/' + urlConfig.ci + '/' + dfpClientId + '/' + (utils.getTopWindowLocation().hostname || FILE) + '/' + sec;\n      const referrerUrl = utils.getTopWindowReferrer();\n      const spacesString = getSpacesString(bidRequests);\n      params = {\n        rnd: rnd,\n        e: spacesString,\n        ur: utils.getTopWindowUrl() || FILE,\n        r: 'pbjs',\n        pbv: '1.25.0-pre',\n        ncb: '1'\n      };\n\n      if (pcrs) {\n        params.crs = pcrs;\n      }\n\n      if (referrerUrl) {\n        params.fr = referrerUrl;\n      }\n    }\n\n    return {\n      method: method,\n      url: url,\n      data: params,\n      adUnitToBidId: getBidIdMap(bidRequests),\n    };\n  },\n  interpretResponse: function(serverResponse, request) {\n    const response = serverResponse.body;\n    let bidResponses = [];\n\n    if (response && !utils.isEmpty(response.sp)) {\n      response.sp.forEach(space => {\n        if (!utils.isEmpty(space.a)) {\n          space.a.forEach(ad => {\n            const bidResponse = {\n              requestId: request.adUnitToBidId[space.k],\n              cpm: ad.pr,\n              width: ad.w,\n              height: ad.h,\n              ad: ad.adm,\n              ttl: TTL,\n              creativeId: ad.crid,\n              netRevenue: NET_REVENUE,\n              currency: DOLLARS,\n            };\n            bidResponses.push(bidResponse);\n          });\n        }\n      });\n    }\n\n    return bidResponses;\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const syncs = [];\n    const response = !utils.isEmpty(serverResponses) && serverResponses[0].body;\n\n    if (response && !utils.isEmpty(response.cs)) {\n      const responseSyncs = response.cs;\n      responseSyncs.forEach(sync => {\n        if (typeof sync === 'string' && syncOptions.pixelEnabled) {\n          syncs.push({\n            type: 'image',\n            url: sync,\n          });\n        } else if (typeof sync === 'object' && sync.ifr && syncOptions.iframeEnabled) {\n          syncs.push({\n            type: 'iframe',\n            url: sync.u,\n          })\n        }\n      });\n    }\n\n    return syncs;\n  },\n}\n\nfunction cleanName(name) {\n  return name.replace(/_|\\.|-|\\//g, '').replace(/\\)\\(|\\(|\\)/g, '_').replace(/^_+|_+$/g, '');\n}\nfunction getUrlConfig(bidRequests) {\n  if (isTestRequest(bidRequests)) {\n    return getTestConfig(bidRequests.filter(br => br.params.t));\n  }\n\n  let config = {};\n  bidRequests.forEach(bid => {\n    PARAMS.forEach(param => {\n      if (bid.params[param] && !config[param]) {\n        config[param] = bid.params[param];\n      }\n    });\n  });\n\n  if (config.sv) {\n    config.sv = '//' + config.sv;\n  }\n\n  return config;\n}\nfunction isTestRequest(bidRequests) {\n  let isTest = false;\n  bidRequests.forEach(bid => isTest = bid.params.t);\n  return isTest;\n}\nfunction getTestConfig(bidRequests) {\n  let isv;\n  bidRequests.forEach(br => isv = isv || br.params.isv);\n  return {\n    t: true,\n    isv: '//' + (isv || DEFAULT_ISV)\n  };\n}\nfunction getSpacesString(bids) {\n  const spacesString = bids.map(bid =>\n    cleanName(bid.adUnitCode) + ':' + (bid.sizes && bid.sizes.length ? utils.parseSizesInput(bid.sizes).join(',') : NULL_SIZE)\n  ).join('+');\n\n  return spacesString;\n}\n\nfunction getCharset() {\n  try {\n    return window.top.document.charset || window.top.document.characterSet;\n  } catch (e) {\n    return document.charset || document.characterSet;\n  }\n}\n\nfunction getBidIdMap(bidRequests) {\n  let map = {};\n  bidRequests.forEach(bid => map[cleanName(bid.adUnitCode)] = bid.bidId);\n  return map;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/eplanningBidAdapter.js","'use strict';\n\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'etarget';\nconst countryMap = {\n  1: 'sk',\n  2: 'cz',\n  3: 'hu',\n  4: 'ro',\n  5: 'rs',\n  6: 'bg',\n  7: 'pl',\n  8: 'hr',\n  9: 'at',\n  10: 'co',\n  11: 'de',\n  255: 'en'\n}\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [ BANNER, VIDEO ],\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.refid && bid.params.country);\n  },\n  buildRequests: function (validBidRequests, bidderRequest) {\n    var i, l, bid, reqParams, netRevenue, gdprObject;\n    var request = [];\n    var bids = JSON.parse(JSON.stringify(validBidRequests));\n    var lastContry = 'sk';\n    for (i = 0, l = bids.length; i < l; i++) {\n      bid = bids[i];\n      if (countryMap[bid.params.country]) {\n        lastContry = countryMap[bid.params.country];\n      }\n      reqParams = bid.params;\n      reqParams.transactionId = bid.transactionId;\n      request.push(formRequestUrl(reqParams));\n    }\n\n    request.unshift('//' + lastContry + '.search.etargetnet.com/hb/?hbget=1');\n    netRevenue = 'net';\n\n    if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.gdprApplies) {\n      gdprObject = {\n        gdpr: bidderRequest.gdprConsent.gdprApplies,\n        gdpr_consent: bidderRequest.gdprConsent.consentString\n      };\n      request.push('gdpr=' + gdprObject.gdpr);\n      request.push('gdpr_consent=' + gdprObject.gdpr_consent);\n    }\n\n    return {\n      method: 'POST',\n      url: request.join('&'),\n      data: bidderRequest,\n      bids: validBidRequests,\n      netRevenue: netRevenue,\n      bidder: 'etarget',\n      gdpr: gdprObject\n    };\n\n    function formRequestUrl(reqData) {\n      var key;\n      var url = [];\n\n      for (key in reqData) {\n        if (reqData.hasOwnProperty(key) && reqData[key]) { url.push(key, '=', reqData[key], '&'); }\n      }\n\n      return encodeURIComponent(btoa(url.join('').slice(0, -1)));\n    }\n  },\n  interpretResponse: function (serverResponse, bidRequest) {\n    const VALID_RESPONSES = {\n      banner: 1,\n      video: 1\n    };\n    var bidObject, bid, type;\n    var bidRespones = [];\n    var bids = bidRequest.bids;\n    var responses = serverResponse.body;\n    var data = [];\n    for (var i = 0; i < responses.length; i++) {\n      data = responses[i];\n      type = data.response === 'banner' ? BANNER : VIDEO;\n      bid = bids[i];\n      if (VALID_RESPONSES[data.response] && (verifySize(data, bid.sizes) || type === VIDEO)) {\n        bidObject = {\n          requestId: bid.bidId,\n          cpm: data.win_bid ? data.win_bid : 0,\n          width: data.width,\n          height: data.height,\n          creativeId: data.creativeId,\n          currency: data.win_cur,\n          netRevenue: true,\n          ttl: 360,\n          ad: data.banner,\n          vastXml: data.vast_content,\n          vastUrl: data.vast_link,\n          mediaType: data.response,\n          transactionId: bid.transactionId\n        };\n        if (bidRequest.gdpr) {\n          bidObject.gdpr = bidRequest.gdpr.gdpr;\n          bidObject.gdpr_consent = bidRequest.gdpr.gdpr_consent;\n        }\n        bidRespones.push(bidObject);\n      }\n    }\n    return bidRespones;\n\n    function verifySize(adItem, validSizes) {\n      for (var j = 0, k = validSizes.length; j < k; j++) {\n        if (adItem.width == validSizes[j][0] &&\n            adItem.height == validSizes[j][1]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/etargetBidAdapter.js","\nimport * as utils from 'src/utils';\n\nconst MODULE_NAME = 'express';\n\n/**\n * Express Module\n *\n * The express module allows the initiation of Prebid.js auctions automatically based on calls such as gpt.defineSlot.\n * It works by monkey-patching the gpt methods and overloading their functionality.  In order for this module to be\n * used gpt must be included in the page, this module must be included in the Prebid.js bundle, and a call to\n * pbjs.express() must be made.\n *\n * @param {Object[]} [adUnits = pbjs.adUnits] - an array of adUnits for express to operate on.\n */\npbjs.express = function(adUnits = pbjs.adUnits) {\n  utils.logMessage('loading ' + MODULE_NAME);\n\n  if (adUnits.length === 0) {\n    utils.logWarn('no valid adUnits found, not loading ' + MODULE_NAME);\n  }\n\n  // store gpt slots in a more performant hash lookup by elementId (adUnit code)\n  var gptSlotCache = {};\n  // put adUnits in a more performant hash lookup by code.\n  var adUnitsCache = adUnits.reduce(function (cache, adUnit) {\n    if (adUnit.code && adUnit.bids) {\n      cache[adUnit.code] = adUnit;\n    } else {\n      utils.logError('misconfigured adUnit', null, adUnit);\n    }\n    return cache;\n  }, {});\n\n  window.googletag = window.googletag || {};\n  window.googletag.cmd = window.googletag.cmd || [];\n  window.googletag.cmd.push(function () {\n    // verify all necessary gpt functions exist\n    var gpt = window.googletag;\n    var pads = gpt.pubads;\n    if (!gpt.display || !gpt.enableServices || typeof pads !== 'function' || !pads().refresh || !pads().disableInitialLoad || !pads().getSlots || !pads().enableSingleRequest) {\n      utils.logError('could not bind to gpt googletag api');\n      return;\n    }\n    utils.logMessage('running');\n\n    // function to convert google tag slot sizes to [[w,h],...]\n    function mapGptSlotSizes(aGPTSlotSizes) {\n      var aSlotSizes = [];\n      for (var i = 0; i < aGPTSlotSizes.length; i++) {\n        try {\n          aSlotSizes.push([aGPTSlotSizes[i].getWidth(), aGPTSlotSizes[i].getHeight()]);\n        } catch (e) {\n          utils.logWarn('slot size ' + aGPTSlotSizes[i].toString() + ' not supported by' + MODULE_NAME);\n        }\n      }\n      return aSlotSizes;\n    }\n\n    // a helper function to verify slots or get slots if not present\n    function defaultSlots(slots) {\n      return Array.isArray(slots)\n        ? slots.slice()\n        : googletag.pubads().getSlots().slice();\n    }\n\n    // maps gpt slots to adUnits, matches are copied to new array and removed from passed array.\n    function pickAdUnits(gptSlots) {\n      var adUnits = [];\n      // traverse backwards (since gptSlots is mutated) to find adUnits in cache and remove non-mapped slots\n      for (var i = gptSlots.length - 1; i > -1; i--) {\n        const gptSlot = gptSlots[i];\n        const elemId = gptSlot.getSlotElementId();\n        const adUnit = adUnitsCache[elemId];\n\n        if (adUnit) {\n          gptSlotCache[elemId] = gptSlot; // store by elementId\n          adUnit.sizes = adUnit.sizes || mapGptSlotSizes(gptSlot.getSizes());\n          adUnits.push(adUnit);\n          gptSlots.splice(i, 1);\n        }\n      }\n\n      return adUnits;\n    }\n\n    // store original gpt functions that will be overridden\n    var fGptDisplay = gpt.display;\n    var fGptEnableServices = gpt.enableServices;\n    var fGptRefresh = pads().refresh;\n    var fGptDisableInitialLoad = pads().disableInitialLoad;\n    var fGptEnableSingleRequest = pads().enableSingleRequest;\n\n    // override googletag.enableServices()\n    //  - make sure fGptDisableInitialLoad() has been called so we can\n    //     better control when slots are displayed, then call original\n    //     fGptEnableServices()\n    gpt.enableServices = function () {\n      if (!bInitialLoadDisabled) {\n        fGptDisableInitialLoad.apply(pads());\n      }\n      return fGptEnableServices.apply(gpt, arguments);\n    };\n\n    // override googletag.display()\n    //  - call the real fGptDisplay(). this won't initiate auctions because we've disabled initial load\n    //  - define all corresponding rubicon slots\n    //  - if disableInitialLoad() has been called by the pub, done\n    //  - else run an auction and call the real fGptRefresh() to\n    //       initiate the DFP request\n    gpt.display = function (sElementId) {\n      utils.logInfo('display:', sElementId);\n      // call original gpt display() function\n      fGptDisplay.apply(gpt, arguments);\n\n      // if not SRA mode, get only the gpt slot corresponding to sEementId\n      var aGptSlots;\n      if (!bEnabledSRA) {\n        aGptSlots = googletag.pubads().getSlots().filter(function (oGptSlot) {\n          return oGptSlot.getSlotElementId() === sElementId;\n        });\n      }\n\n      aGptSlots = defaultSlots(aGptSlots).filter(function (gptSlot) {\n        return !gptSlot._displayed;\n      });\n\n      aGptSlots.forEach(function (gptSlot) {\n        gptSlot._displayed = true;\n      });\n\n      var adUnits = pickAdUnits(/* mutated: */ aGptSlots);\n\n      if (!bInitialLoadDisabled) {\n        if (aGptSlots.length) {\n          fGptRefresh.apply(pads(), [aGptSlots]);\n        }\n\n        if (adUnits.length) {\n          pbjs.requestBids({\n            adUnits: adUnits,\n            bidsBackHandler: function () {\n              pbjs.setTargetingForGPTAsync();\n              fGptRefresh.apply(pads(), [\n                adUnits.map(function (adUnit) {\n                  return gptSlotCache[adUnit.code];\n                })\n              ]);\n            }\n          });\n        }\n      }\n    };\n\n    // override gpt refresh() function\n    // - run auctions for provided gpt slots, then initiate ad-server call\n    pads().refresh = function (aGptSlots, options) {\n      utils.logInfo('refresh:', aGptSlots);\n      // get already displayed adUnits from aGptSlots if provided, else all defined gptSlots\n      aGptSlots = defaultSlots(aGptSlots);\n      var adUnits = pickAdUnits(/* mutated: */ aGptSlots).filter(function (adUnit) {\n        return gptSlotCache[adUnit.code]._displayed;\n      });\n\n      if (aGptSlots.length) {\n        fGptRefresh.apply(pads(), [aGptSlots, options]);\n      }\n\n      if (adUnits.length) {\n        pbjs.requestBids({\n          adUnits: adUnits,\n          bidsBackHandler: function () {\n            pbjs.setTargetingForGPTAsync();\n            fGptRefresh.apply(pads(), [\n              adUnits.map(function (adUnit) {\n                return gptSlotCache[adUnit.code];\n              }),\n              options\n            ]);\n          }\n        });\n      }\n    };\n\n    // override gpt disableInitialLoad function\n    // Register that initial load was called, meaning calls to display()\n    // should not initiate an ad-server request.  Instead a call to\n    // refresh() will be needed to iniate the request.\n    //  We will assume the pub is using this the correct way, calling it\n    //  before enableServices()\n    var bInitialLoadDisabled = false;\n    pads().disableInitialLoad = function () {\n      bInitialLoadDisabled = true;\n      return fGptDisableInitialLoad.apply(window.googletag.pubads(), arguments);\n    };\n\n    // override gpt useSingleRequest function\n    // Register that SRA has been turned on\n    //  We will assume the pub is using this the correct way, calling it\n    //  before enableServices()\n    var bEnabledSRA = false;\n    pads().enableSingleRequest = function () {\n      bEnabledSRA = true;\n      return fGptEnableSingleRequest.apply(window.googletag.pubads(), arguments);\n    };\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/express.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'fairtrade';\nconst ENDPOINT_URL = '//pool.fair-trademedia.com/hb';\nconst TIME_TO_LIVE = 360;\nconst ADAPTER_SYNC_URL = '//pool.fair-trademedia.com/push_sync';\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should be not empty',\n  emptySeatbid: 'Seatbid array from response has empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\nexport const spec = {\n  code: BIDDER_CODE,\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      reqId = bid.bidderRequestId;\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      r: reqId\n    };\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: payload,\n      bidsMap: bidsMap,\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param {*} bidRequest\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL\n      }];\n    }\n  }\n}\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId, // bid.bidderRequestId,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid, // bid.bidId,\n          currency: 'USD',\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/fairtradeBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'fidelity';\nconst BIDDER_SERVER = 'x.fidelity-media.com';\nconst FIDELITY_VENDOR_ID = 408;\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.zoneid);\n  },\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      var server = bidRequest.params.server || BIDDER_SERVER;\n\n      const payload = {\n        from: 'hb',\n        v: '1.0',\n        requestid: bidRequest.bidderRequestId,\n        impid: bidRequest.bidId,\n        zoneid: bidRequest.params.zoneid,\n        floor: parseFloat(bidRequest.params.floor) > 0 ? bidRequest.params.floor : 0,\n        charset: document.charSet || document.characterSet,\n        subid: 'hb',\n        flashver: getFlashVersion(),\n        tmax: bidderRequest.timeout,\n        defloc: utils.getTopWindowUrl(),\n        referrer: utils.getTopWindowReferrer(),\n      };\n      setConsentParams(bidderRequest.gdprConsent, payload);\n\n      return {\n        method: 'GET',\n        url: '//' + server + '/delivery/hb.php',\n        data: payload\n      };\n    });\n  },\n  interpretResponse: function(serverResponse) {\n    serverResponse = serverResponse.body;\n    const bidResponses = [];\n    if (serverResponse && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.impid,\n          creativeId: bid.impid,\n          cpm: bid.price,\n          width: bid.width,\n          height: bid.height,\n          ad: bid.adm,\n          netRevenue: bid.netRevenue,\n          currency: bid.cur,\n          ttl: bid.ttl,\n        };\n\n        bidResponses.push(bidResponse);\n      }));\n    }\n    return bidResponses;\n  },\n  getUserSyncs: function getUserSyncs(syncOptions, serverResponses, gdprConsent) {\n    if (syncOptions.iframeEnabled) {\n      var url = '//' + BIDDER_SERVER + '/delivery/matches.php';\n      var payload = {\n        type: 'iframe'\n      };\n      setConsentParams(gdprConsent, payload);\n\n      return [{\n        type: 'iframe',\n        url: url + '?' + utils.parseQueryStringParameters(payload).replace(/\\&$/, '')\n      }];\n    }\n  }\n}\n\nfunction getFlashVersion() {\n  var plugins, plugin, result;\n\n  if (navigator.plugins && navigator.plugins.length > 0) {\n    plugins = navigator.plugins;\n    for (var i = 0; i < plugins.length && !result; i++) {\n      plugin = plugins[i];\n      if (plugin.name.indexOf('Shockwave Flash') > -1) {\n        result = plugin.description.split('Shockwave Flash ')[1];\n      }\n    }\n  }\n  return result || '';\n}\n\nfunction setConsentParams(gdprConsent, payload) {\n  if (gdprConsent) {\n    payload.gdpr = 0;\n    payload.consent_str = '';\n    payload.consent_given = 0;\n    if (typeof gdprConsent.gdprApplies !== 'undefined') {\n      payload.gdpr = gdprConsent.gdprApplies ? 1 : 0;\n    }\n    if (typeof gdprConsent.consentString !== 'undefined') {\n      payload.consent_str = gdprConsent.consentString;\n    }\n    if (gdprConsent.vendorData && gdprConsent.vendorData.vendorConsents && typeof gdprConsent.vendorData.vendorConsents[FIDELITY_VENDOR_ID.toString(10)] !== 'undefined') {\n      payload.consent_given = gdprConsent.vendorData.vendorConsents[FIDELITY_VENDOR_ID.toString(10)] ? 1 : 0;\n    }\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/fidelityBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n// import { config } from 'src/config';\n\nconst BIDDER_CODE = 'freewheel-ssp';\n\nconst PROTOCOL = getProtocol();\nconst FREEWHEEL_ADSSETUP = PROTOCOL + '://ads.stickyadstv.com/www/delivery/swfIndex.php';\nconst MUSTANG_URL = PROTOCOL + '://cdn.stickyadstv.com/mustang/mustang.min.js';\nconst PRIMETIME_URL = PROTOCOL + '://cdn.stickyadstv.com/prime-time/';\nconst USER_SYNC_URL = PROTOCOL + '://ads.stickyadstv.com/auto-user-sync';\n\nfunction getProtocol() {\n  if (location.protocol && location.protocol.indexOf('https') === 0) {\n    return 'https';\n  } else {\n    return 'http';\n  }\n}\n\nfunction isValidUrl(str) {\n  if (!str) {\n    return false;\n  }\n\n  // regExp for url validation\n  var pattern = /^(https?|ftp|file):\\/\\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/;\n  return pattern.test(str);\n}\n\nfunction getBiggerSize(array) {\n  var result = [0, 0];\n  for (var i = 0; i < array.length; i++) {\n    if (array[i][0] * array[i][1] > result[0] * result[1]) {\n      result = array[i];\n    }\n  }\n  return result;\n}\n\n/*\n* read the pricing extension with this format: <Extension type='StickyPricing'><Price currency=\"EUR\">1.0000</Price></Extension>\n* @return {object} pricing data in format: {currency: \"EUR\", price:\"1.000\"}\n*/\nfunction getPricing(xmlNode) {\n  var pricingExtNode;\n  var princingData = {};\n\n  var extensions = xmlNode.querySelectorAll('Extension');\n  // Nodelist.forEach is not supported in IE and Edge\n  // Workaround given here https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10638731/\n  Array.prototype.forEach.call(extensions, function(node) {\n    if (node.getAttribute('type') === 'StickyPricing') {\n      pricingExtNode = node;\n    }\n  });\n\n  if (pricingExtNode) {\n    var priceNode = pricingExtNode.querySelector('Price');\n    princingData = {\n      currency: priceNode.getAttribute('currency'),\n      price: priceNode.textContent || priceNode.innerText\n    };\n  } else {\n    utils.logWarn('PREBID - ' + BIDDER_CODE + ': Can\\'t get pricing data. Is price awareness enabled?');\n  }\n\n  return princingData;\n}\n\nfunction getCreativeId(xmlNode) {\n  var creaId = '';\n  var adNodes = xmlNode.querySelectorAll('Ad');\n  // Nodelist.forEach is not supported in IE and Edge\n  // Workaround given here https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10638731/\n  Array.prototype.forEach.call(adNodes, function(el) {\n    creaId += '[' + el.getAttribute('id') + ']';\n  });\n\n  return creaId;\n}\n\n/**\n* returns the top most accessible window\n*/\nfunction getTopMostWindow() {\n  var res = window;\n\n  try {\n    while (top !== res) {\n      if (res.parent.location.href.length) { res = res.parent; }\n    }\n  } catch (e) {}\n\n  return res;\n}\n\nfunction getComponentId(inputFormat) {\n  var component = 'mustang'; // default component id\n\n  if (inputFormat && inputFormat !== 'inbanner') {\n    // format identifiers are equals to their component ids.\n    component = inputFormat;\n  }\n\n  return component;\n}\n\nfunction getAPIName(componentId) {\n  componentId = componentId || '';\n\n  // remove dash in componentId to get API name\n  return componentId.replace('-', '');\n}\n\nfunction formatAdHTML(bid, size) {\n  var integrationType = bid.params.format;\n\n  var divHtml = '<div id=\"freewheelssp_prebid_target\"></div>';\n\n  var script = '';\n  var libUrl = '';\n  if (integrationType && integrationType !== 'inbanner') {\n    libUrl = PRIMETIME_URL + getComponentId(bid.params.format) + '.min.js';\n    script = getOutstreamScript(bid, size);\n  } else {\n    libUrl = MUSTANG_URL;\n    script = getInBannerScript(bid, size);\n  }\n\n  return divHtml +\n  '<script type=\\'text/javascript\\'>' +\n  '(function() {' +\n  '  var st = document.createElement(\\'script\\'); st.type = \\'text/javascript\\'; st.async = true;' +\n  '  st.src = \\'' + libUrl + '\\';' +\n  '  st.onload = function(){' +\n  '    var vastLoader = new window.com.stickyadstv.vast.VastLoader();' +\n  '    var vast = vastLoader.getVast();' +\n  // get the top most accessible window\n  '    var topWindow = (function(){var res=window; try{while(top != res){if(res.parent.location.href.length)res=res.parent;}}catch(e){}return res;})();' +\n  // inject the xml in the Vast object as string\n  '    vast.setXmlString(topWindow.freewheelssp_cache[\"' + bid.adUnitCode + '\"]);' +\n  // force ad parsing on the given vast xml\n  '    vastLoader.parseAds(vast, {' +\n  '      onSuccess: function() {' + script + ' }' +\n  '    });' +\n  '  };' +\n  '  document.head.appendChild(st);' +\n  '})();' +\n  '</script>';\n}\n\nvar getInBannerScript = function(bid, size) {\n  return 'var config = {' +\n  '      preloadedVast:vast,' +\n  '      autoPlay:true' +\n  '    };' +\n  '    var ad = new window.com.stickyadstv.vpaid.Ad(document.getElementById(\"freewheelssp_prebid_target\"),config);' +\n  '    (new window.com.stickyadstv.tools.ASLoader(' + bid.params.zoneId + ', \\'' + getComponentId(bid.params.format) + '\\')).registerEvents(ad);' +\n  '    ad.initAd(' + size[0] + ',' + size[1] + ',\"\",0,\"\",\"\");';\n};\n\nvar getOutstreamScript = function(bid) {\n  var placementCode = bid.adUnitCode;\n\n  var config = bid.params;\n\n  // default placement if no placement is set\n  if (!config.hasOwnProperty('domId') && !config.hasOwnProperty('auto') && !config.hasOwnProperty('p') && !config.hasOwnProperty('article')) {\n    config.domId = placementCode;\n  }\n\n  var script = 'var config = {' +\n  '  preloadedVast:vast,' +\n  '  ASLoader:new window.com.stickyadstv.tools.ASLoader(' + bid.params.zoneId + ', \\'' + getComponentId(bid.params.format) + '\\')';\n\n  for (var key in config) {\n    // dont' send format parameter\n    // neither zone nor vastUrlParams value as Vast is already loaded\n    if (config.hasOwnProperty(key) && key !== 'format' && key !== 'zone' && key !== 'zoneId' && key !== 'vastUrlParams') {\n      script += ',' + key + ':\"' + config[key] + '\"';\n    }\n  }\n  script += '};' +\n\n  'window.com.stickyadstv.' + getAPIName(bid.params.format) + '.start(config);';\n\n  return script;\n};\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: ['banner', 'video'],\n  aliases: ['stickyadstv'], //  former name for freewheel-ssp\n  /**\n  * Determines whether or not the given bid request is valid.\n  *\n  * @param {object} bid The bid to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.zoneId);\n  },\n\n  /**\n  * Make a server request from the list of BidRequests.\n  *\n  * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n  * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: function(bidRequests, bidderRequest) {\n    // var currency = config.getConfig(currency);\n\n    var currentBidRequest = bidRequests[0];\n    if (bidRequests.length > 1) {\n      utils.logMessage('Prebid.JS - freewheel bid adapter: only one ad unit is required.');\n    }\n\n    var requestParams = {\n      reqType: 'AdsSetup',\n      protocolVersion: '2.0',\n      zoneId: currentBidRequest.params.zoneId,\n      componentId: getComponentId(currentBidRequest.params.format)\n    };\n\n    // Add GDPR flag and consent string\n    if (bidderRequest.gdprConsent) {\n      requestParams._fw_gdpr_consent = bidderRequest.gdprConsent.consentString;\n\n      if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n        requestParams._fw_gdpr = bidderRequest.gdprConsent.gdprApplies;\n      }\n    }\n\n    var vastParams = currentBidRequest.params.vastUrlParams;\n    if (typeof vastParams === 'object') {\n      for (var key in vastParams) {\n        if (vastParams.hasOwnProperty(key)) {\n          requestParams[key] = vastParams[key];\n        }\n      }\n    }\n\n    var location = utils.getTopWindowUrl();\n    if (isValidUrl(location)) {\n      requestParams.loc = location;\n    }\n\n    var playerSize = getBiggerSize(currentBidRequest.sizes);\n    if (playerSize[0] > 0 || playerSize[1] > 0) {\n      requestParams.playerSize = playerSize[0] + 'x' + playerSize[1];\n    }\n\n    return {\n      method: 'GET',\n      url: FREEWHEEL_ADSSETUP,\n      data: requestParams,\n      bidRequest: currentBidRequest\n    };\n  },\n\n  /**\n  * Unpack the response from the server into a list of bids.\n  *\n  * @param {*} serverResponse A successful response from the server.\n  * @param {object} request: the built request object containing the initial bidRequest.\n  * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: function(serverResponse, request) {\n    var bidrequest = request.bidRequest;\n    var playerSize = getBiggerSize(bidrequest.sizes);\n\n    if (typeof serverResponse == 'object' && typeof serverResponse.body == 'string') {\n      serverResponse = serverResponse.body;\n    }\n\n    var xmlDoc;\n    try {\n      var parser = new DOMParser();\n      xmlDoc = parser.parseFromString(serverResponse, 'application/xml');\n    } catch (err) {\n      utils.logWarn('Prebid.js - ' + BIDDER_CODE + ' : ' + err);\n      return;\n    }\n\n    const princingData = getPricing(xmlDoc);\n    const creativeId = getCreativeId(xmlDoc);\n\n    const topWin = getTopMostWindow();\n    if (!topWin.freewheelssp_cache) {\n      topWin.freewheelssp_cache = {};\n    }\n    topWin.freewheelssp_cache[bidrequest.adUnitCode] = serverResponse;\n\n    const bidResponses = [];\n\n    if (princingData.price) {\n      const bidResponse = {\n        requestId: bidrequest.bidId,\n        cpm: princingData.price,\n        width: playerSize[0],\n        height: playerSize[1],\n        creativeId: creativeId,\n        currency: princingData.currency,\n        netRevenue: true,\n        ttl: 360\n      };\n\n      var mediaTypes = bidrequest.mediaTypes || {};\n      if (mediaTypes.video) {\n        // bidResponse.vastXml = serverResponse;\n        bidResponse.mediaType = 'video';\n\n        var blob = new Blob([serverResponse], {type: 'application/xml'});\n        bidResponse.vastUrl = window.URL.createObjectURL(blob);\n      } else {\n        bidResponse.ad = formatAdHTML(bidrequest, playerSize);\n      }\n\n      bidResponses.push(bidResponse);\n    }\n\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: USER_SYNC_URL\n      }];\n    }\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/freewheel-sspBidAdapter.js","import {logError, getTopWindowUrl, getTopWindowReferrer, getTopWindowLocation, createTrackPixelHtml} from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { formatQS } from 'src/url';\nimport { config } from 'src/config';\n\n/**\n * @type {{CODE: string, V: string, RECTANGLE_SIZE: {W: number, H: number}, SPOT_TYPES: {INTERSTITIAL: string, RECTANGLE: string, FLOATING: string, BANNER: string}, DISPLAY_AD: number, ENDPOINT_URL: string, EVENTS_ENDPOINT_URL: string, RESPONSE_HEADERS_NAME: {PRICING_VALUE: string, AD_H: string, AD_W: string}}}\n */\nconst CONSTANTS = {\n  CODE: 'fyber',\n  V: 'FY-JS-HB-PBJS-1.0',\n  RECTANGLE_SIZE: {W: 300, H: 250},\n\n  SPOT_TYPES: {\n    INTERSTITIAL: 'interstitial',\n    RECTANGLE: 'rectangle',\n    FLOATING: 'floating',\n    BANNER: 'banner'\n  },\n\n  DISPLAY_AD: 20,\n  ENDPOINT_URL: '//ad-tag.inner-active.mobi/simpleM2M/requestJsonAd',\n  EVENTS_ENDPOINT_URL: '//vast-events.inner-active.mobi/Event',\n  RESPONSE_HEADERS_NAME: {\n    PRICING_VALUE: 'X-IA-Pricing-Value',\n    AD_H: 'X-IA-Ad-Height',\n    AD_W: 'X-IA-Ad-Width',\n    CREATIVE_ID: 'X-IA-Creative-ID',\n    CURRENCY: 'X-IA-Pricing-Currency',\n    TIMEOUT: 'X-IA-SESSION-TIMEOUT'\n  }\n};\n\n/**\n * gloable util functions\n * @type {{defaultsQsParams: {v: (string|string), page: string, mw: boolean, hb: string}, stringToCamel: (function(*)), objectToCamel: (function(*=))}}\n */\nconst Helpers = {\n  defaultsQsParams: {v: CONSTANTS.V, page: encodeURIComponent(getTopWindowUrl()), mw: true, hb: 'prebidjs'},\n  /**\n   * Returns the ad HTML template\n   * @param adHtml: string {ad server creative}\n   * @param tracking: object {impressions, clicks}\n   * @param bidParams: object\n   * @returns {string}: create template\n   */\n  getAd(adHtml, tracking, bidParams) {\n    let impressionsHtml = '';\n    if (tracking && Array.isArray(tracking.impressions)) {\n      let impressions = tracking.impressions;\n      impressions.push(Reporter.getEventUrl('HBPreBidImpression', bidParams, false));\n      impressions.forEach(impression => impression && (impressionsHtml += createTrackPixelHtml(impression)));\n    }\n    adHtml = impressionsHtml + adHtml.replace(/<a /g, '<a target=\"_blank\" ');\n    let clicks = tracking && Array.isArray(tracking.clicks) && tracking.clicks;\n    if (clicks && Array.isArray(clicks)) {\n      clicks.push(Reporter.getEventUrl('HBPreBidClick', bidParams, false));\n    }\n    const adTemplate = `\n      <html>\n        <head>\n            <script type='text/javascript'>inDapIF=true;</script>\n        </head>\n        <body style='margin : 0; padding: 0;'>\n            <div id=\"iaAdContainer\">${adHtml}</div>\n            <script type='text/javascript'>\n                var iaAdContainer = document.getElementById('iaAdContainer');\n                if(iaAdContainer){\n                    var clicks = '${clicks}';\n                    if(clicks){\n                      clicks = clicks.split(',');\n                      iaAdContainer.addEventListener('click', function onIaContainerClick(){\n                          clicks.forEach(function forEachClick(click){\n                              if(click){\n                                  (new Image(1,1)).src = encodeURI(click);\n                              }\n                          });\n                      });\n                    }\n                }\n            </script>\n        </body>\n      </html>`;\n    return adTemplate;\n  },\n\n  /**\n  * Change string format from underscore to camelcase (e.g., APP_ID to appId)\n  * @param {string} str\n  * @return string\n  */\n  stringToCamel(str) {\n    if (str.indexOf('_') === -1) {\n      const first = str.charAt(0);\n      if (first !== first.toLowerCase()) {\n        str = str.toLowerCase();\n      }\n      return str;\n    }\n\n    str = str.toLowerCase();\n    return str.replace(/(\\_[a-z])/g, $1 => $1.toUpperCase().replace('_', ''));\n  },\n\n  /**\n  * Change all object keys string format from underscore to camelcase (e.g., {'APP_ID' : ...} to {'appId' : ...})\n  * @param params: object\n  * @returns object\n  */\n  objectToCamel(params) {\n    Object.keys(params).forEach(key => {\n      const keyCamelCase = this.stringToCamel(key);\n      if (keyCamelCase !== key) {\n        params[keyCamelCase] = params[key];\n        delete params[key];\n      }\n    });\n    return params;\n  },\n\n  /**\n   * @param {Object} params\n   * @return {string} url\n   */\n  getEndpointUrl(params) {\n    return (params && params.qa && params.qa.url) || (Reporter.getPageProtocol() + CONSTANTS.ENDPOINT_URL);\n  },\n\n  /**\n    * Adjust bid params to fyber-ad-server params\n    * @param {Object} bid\n    * @return {Object} bid\n  */\n  toBidParams(bid) {\n    const bidParamsWithCustomParams = Object.assign({}, bid.params, bid.params.customParams);\n    delete bidParamsWithCustomParams.customParams;\n    bid.params = this.objectToCamel(bidParamsWithCustomParams);\n    return bid;\n  },\n\n  /**\n   * Validate if response is valid\n   * @param responseAsJson : object\n   * @param headersData: {}\n   * @returns {boolean}\n   * @private\n   */\n  isValidBidResponse(responseAsJson, headersData) {\n    return (responseAsJson && responseAsJson.ad && responseAsJson.ad.html && headersData && headersData[CONSTANTS.RESPONSE_HEADERS_NAME.PRICING_VALUE] > 0);\n  }\n};\n\n/**\n * Url generator - generates a request URL\n * @type {{defaultsParams: *, serverParamNameBySettingParamName: {referrer: string, keywords: string, appId: string, portal: string, age: string, gender: string, isSecured: (boolean|null)}, toServerParams: (function(*)), unwantedValues: *[], getUrlParams: (function(*=))}}\n */\nconst Url = {\n  defaultsParams: Object.assign({}, Helpers.defaultsQsParams, {f: CONSTANTS.DISPLAY_AD, fs: false, ref: getTopWindowReferrer()}),\n  serverParamNameBySettingParamName: {\n    referrer: 'ref',\n    keywords: 'k',\n    appId: 'aid',\n    portal: 'po',\n    age: 'a',\n    gender: 'g',\n    gdprPrivacyConsent: 'gdpr_privacy_consent',\n    consentString: 'consent_string',\n    gdprConsentData: 'gdpr_consent_data'\n  },\n  unwantedValues: ['', null, undefined],\n\n  /**\n       * Maps publisher params to server params\n       * @param params: object {k:v}\n       * @returns object {k:v}\n       */\n  toServerParams(params) {\n    const serverParams = {};\n    for (const paramName in params) {\n      if (params.hasOwnProperty(paramName) && this.serverParamNameBySettingParamName.hasOwnProperty(paramName)) {\n        serverParams[this.serverParamNameBySettingParamName[paramName]] = params[paramName];\n      } else {\n        serverParams[paramName] = params[paramName];\n      }\n    }\n\n    serverParams.isSecured = Reporter.getPageProtocol() === 'https:' || null;\n    return serverParams;\n  },\n\n  handleGDPR(params) {\n    if (params.hasOwnProperty('gdprPrivacyConsent')) {\n      if (['true', true, '1', 1].indexOf(params.gdprPrivacyConsent) !== -1) {\n        params.gdprPrivacyConsent = 1;\n      } else {\n        params.gdprPrivacyConsent = 0;\n      }\n    }\n  },\n\n  /**\n  * Prepare querty string to ad server\n  * @param params: object {k:v}\n  * @returns : object {k:v}\n  */\n  getUrlParams(params) {\n    this.handleGDPR(params);\n    const serverParams = this.toServerParams(params);\n    const toQueryString = Object.assign({}, this.defaultsParams, serverParams);\n    for (const paramName in toQueryString) {\n      if (toQueryString.hasOwnProperty(paramName) && this.unwantedValues.indexOf(toQueryString[paramName]) !== -1) {\n        delete toQueryString[paramName];\n      }\n    }\n    toQueryString.fs = params.spotType === CONSTANTS.SPOT_TYPES.INTERSTITIAL;\n\n    if (params.spotType === CONSTANTS.SPOT_TYPES.RECTANGLE) {\n      toQueryString.rw = CONSTANTS.RECTANGLE_SIZE.W;\n      toQueryString.rh = CONSTANTS.RECTANGLE_SIZE.H;\n    }\n    toQueryString.bco = config.getConfig('cbTimeout') || config.getConfig('bidderTimeout');\n    toQueryString.timestamp = Date.now();\n    delete toQueryString.qa;\n    return toQueryString;\n  }\n};\n\n/**\n * Analytics\n * @type {{errorEventName: string, pageProtocol: string, getPageProtocol: (function(): string), getEventUrl: (function(*, *=)), defaults: {v: (string|string), page: string, mw: boolean, hb: string}, eventQueryStringParams: (function(Object): string)}}\n */\nconst Reporter = {\n  /**\n  * @private\n  */\n  errorEventName: 'HBPreBidError',\n  pageProtocol: '',\n  defaults: Helpers.defaultsQsParams,\n\n  /**\n  * Gets the page protocol based on the <code>document.location.protocol</code>\n  * The returned string is either <code>http://</code> or <code>https://</code>\n  * @return {string}\n  */\n  getPageProtocol() {\n    if (!this.pageProtocol) {\n      this.pageProtocol = (getTopWindowLocation().protocol === 'http:' ? 'http:' : 'https:');\n    }\n    return this.pageProtocol;\n  },\n\n  getEventUrl(evtName, extraDetails) {\n    let eventsEndpoint = CONSTANTS.EVENTS_ENDPOINT_URL + '?table=' + ((evtName === this.errorEventName) ? 'mbwError' : 'mbwEvent');\n    let queryStringParams = this.eventQueryStringParams(extraDetails);\n    const appId = extraDetails && extraDetails.appId;\n    let queryStringParamsWithAID = `${queryStringParams}&aid=${appId}_${evtName}_other&evtName=${evtName}`;\n    return eventsEndpoint + '&' + queryStringParamsWithAID;\n  },\n\n  /**\n  * Fyber Event Reporting Query String Parameters, not including App Id.\n  * @param {object} extraDetails - e.g., a JS exception JSON object.\n  * @return {string} Fyber event contcatenated queryString parameters.\n  */\n  eventQueryStringParams(extraDetails) {\n    const toQS = Object.assign({}, this.defaults, {realAppId: extraDetails && extraDetails.appId, timestamp: Date.now()});\n    Url.handleGDPR(toQS);\n    return formatQS(toQS);\n  }\n};\nconst {PRICING_VALUE, AD_W, AD_H, CREATIVE_ID, CURRENCY, TIMEOUT} = CONSTANTS.RESPONSE_HEADERS_NAME;\n/**\n * Http helper to extract metadata\n * @type {{headers: *[], getBidHeaders: (function(*))}}\n */\nconst Http = {\n  headerNames: [PRICING_VALUE, AD_W, AD_H, CREATIVE_ID, CURRENCY, TIMEOUT],\n\n  /**\n   * Extract headers data\n   * @param responseHeaders: XMLHttpRequest\n   * @return {}\n   */\n  getBidHeaders(responseHeaders) {\n    const headersData = {};\n    this.headerNames.forEach(headerName => headersData[headerName] = responseHeaders.get(headerName));\n    return headersData;\n  }\n};\n\nconst bidByBidId = {};\nclass FyberBid {\n  constructor(headersData, response, bid) {\n    this.handleGDPR(response.config.tracking, bid.params);\n    const [w, h] = bid.sizes[0];\n    this.cpm = ((bid.params.qa && bid.params.qa.cpm) || headersData[PRICING_VALUE]) * 1000;\n    this.requestId = bid.bidId;\n    this.width = parseFloat(headersData[AD_W]) || w;\n    this.ad = Helpers.getAd(response.ad.html, response.config.tracking, bid.params);\n    this.height = parseFloat(headersData[AD_H]) || h;\n    this.creativeId = headersData[CREATIVE_ID];\n    this.currency = headersData[CURRENCY] || 'USD';\n    this.netRevenue = true;\n    this.ttl = 60 * (headersData[TIMEOUT] || 20);\n    this.dealId = null;\n  }\n\n  handleGDPR(tracking, params) {\n    if (params.hasOwnProperty('gdprPrivacyConsent')) {\n      if (['true', true, '1', 1].indexOf(params.gdprPrivacyConsent) !== -1) {\n        params.gdprPrivacyConsent = 1;\n      } else {\n        params.gdprPrivacyConsent = 0;\n      }\n      Object.keys(tracking).forEach((trackName) => {\n        if (Array.isArray(tracking[trackName])) {\n          tracking[trackName].forEach((url, index) => {\n            if (url) {\n              if (url.indexOf('?') === -1) {\n                url += '?';\n              }\n              url += '&gdpr_privacy_consent=' + params.gdprPrivacyConsent;\n              tracking[trackName][index] = url;\n            }\n          });\n        }\n      });\n    }\n  }\n}\n\nexport const spec = {\n  code: CONSTANTS.CODE,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   * Valid bid request must have appId and spotType\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid(bid) {\n    const {appId, spotType} = Helpers.objectToCamel(bid.params);\n    const isValid = !!(appId && spotType);\n    if (!isValid) {\n      logError(`bid requires appId = ${appId} , spotType = ${spotType}`);\n    }\n    return isValid;\n  },\n\n  buildRequests(bidRequests) {\n    let requests = [];\n    bidRequests.forEach((bid) => {\n      bid = Helpers.toBidParams(bid);\n      bidByBidId[bid.bidId] = bid;\n      requests.push({\n        method: 'GET',\n        url: Helpers.getEndpointUrl(bid.params),\n        data: Url.getUrlParams(bid.params),\n        bidId: bid.bidId\n      });\n    });\n    return requests;\n  },\n\n  interpretResponse(response, request) {\n    const isValid = response.body && response.body.ad;\n    const headersData = (isValid && Http.getBidHeaders(response.headers)) || {};\n    const bid = bidByBidId[request.bidId];\n    const bidResponse = [];\n    if (!isValid || !Helpers.isValidBidResponse(response.body, headersData)) {\n      logError(`response failed for ${CONSTANTS.CODE} adapter`);\n      return bidResponse;\n    }\n    bidResponse.push(new FyberBid(headersData, response.body, bid));\n    return bidResponse;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/fyberBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nimport { Renderer } from '../src/Renderer';\n\nfunction getTopFrame() {\n  try {\n    return window.top === window ? 1 : 0;\n  } catch (e) {\n    return 0;\n  }\n}\n\nfunction startsWith(str, search) {\n  return str.substr(0, search.length) === search;\n}\n\nfunction getTopWindowDomain() {\n  const url = utils.getTopWindowUrl();\n  const domainStart = url.indexOf('://') + '://'.length;\n  return url.substring(domainStart, url.indexOf('/', domainStart) < 0 ? url.length : url.indexOf('/', domainStart));\n}\n\nfunction getTopWindowReferer() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    utils.logMessage('Failed obtaining top window\\'s referrer: ', e);\n    try {\n      return window.document.referrer;\n    } catch (e) {\n      utils.logMessage('Failed obtaining current window\\'s referrer: ', e);\n      return '';\n    }\n  }\n}\n\nexport const spec = {\n  code: 'gambid',\n  aliases: [],\n  supportedMediaTypes: [ 'banner', 'video' ],\n\n  isBidRequestValid: function(bid) {\n    return !!bid.params.supplyPartnerId && typeof bid.params.supplyPartnerId === 'string' &&\n           (typeof bid.params[ 'rtbEndpoint' ] === 'undefined' || typeof bid.params[ 'rtbEndpoint' ] === 'string') &&\n           (typeof bid.params.bidfloor === 'undefined' || typeof bid.params.bidfloor === 'number') &&\n           (typeof bid.params[ 'adpos' ] === 'undefined' || typeof bid.params[ 'adpos' ] === 'number') &&\n           (typeof bid.params[ 'protocols' ] === 'undefined' || Array.isArray(bid.params[ 'protocols' ])) &&\n           (typeof bid.params.instl === 'undefined' || bid.params.instl === 0 || bid.params.instl === 1);\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      const { adUnitCode, auctionId, mediaTypes, params, sizes, transactionId } = bidRequest;\n      const baseEndpoint = params[ 'rtbEndpoint' ] || 'https://rtb.gambid.io';\n      const rtbEndpoint = `${baseEndpoint}/r/${params.supplyPartnerId}/bidr?rformat=open_rtb&reqformat=rtb_json&bidder=prebid` + (params.query ? '&' + params.query : '');\n      const rtbBidRequest = {\n        'id': auctionId,\n        'site': {\n          'domain': getTopWindowDomain(),\n          'page': config.getConfig('pageUrl') || utils.getTopWindowUrl(),\n          'ref': getTopWindowReferer()\n        },\n        'device': {\n          'ua': navigator.userAgent\n        },\n        'imp': [],\n        'ext': {}\n      };\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        rtbBidRequest.ext.gdpr_consent = {\n          consent_string: bidderRequest.gdprConsent.consentString,\n          consent_required: bidderRequest.gdprConsent.gdprApplies\n        };\n      }\n\n      const imp = {\n        'id': transactionId,\n        'instl': params.instl === 1 ? 1 : 0,\n        'tagid': adUnitCode,\n        'bidfloor': params.bidfloor || 0,\n        'bidfloorcur': 'USD',\n        'secure': startsWith(utils.getTopWindowUrl().toLowerCase(), 'http://') ? 0 : 1\n      };\n\n      if (!mediaTypes || mediaTypes.banner) {\n        imp.banner = {\n          w: sizes.length ? sizes[ 0 ][ 0 ] : 300,\n          h: sizes.length ? sizes[ 0 ][ 1 ] : 250,\n          pos: params.pos || 0,\n          topframe: getTopFrame()\n        };\n      } else if (mediaTypes.video) {\n        imp.video = {\n          w: sizes.length ? sizes[ 0 ][ 0 ] : 300,\n          h: sizes.length ? sizes[ 0 ][ 1 ] : 250,\n          protocols: params.protocols || [1, 2, 3, 4, 5, 6],\n          pos: params.pos || 0,\n          topframe: getTopFrame()\n        };\n      } else {\n        return;\n      }\n      rtbBidRequest.imp.push(imp);\n      return { method: 'POST', url: rtbEndpoint, data: rtbBidRequest, bidRequest };\n    });\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    const response = serverResponse && serverResponse.body;\n    if (!response) {\n      utils.logError('empty response');\n      return [];\n    }\n\n    const bids = response.seatbid.reduce((acc, seatBid) => acc.concat(seatBid.bid), []);\n    const outBids = [];\n    bids.forEach(bid => {\n      const outBid = {\n        requestId: bidRequest.bidRequest.bidId,\n        cpm: bid.price,\n        width: bid.w,\n        height: bid.h,\n        ttl: 60 * 10,\n        creativeId: bid.crid,\n        netRevenue: true,\n        currency: bid.cur || response.cur\n      };\n      if (!bidRequest.bidRequest.mediaTypes || bidRequest.bidRequest.mediaTypes.banner) {\n        outBids.push(Object.assign({}, outBid, { mediaType: 'banner', ad: bid.adm }));\n      } else if (bidRequest.bidRequest.mediaTypes.video) {\n        const context = utils.deepAccess(bidRequest.bidRequest, 'mediaTypes.video.context');\n        outBids.push(Object.assign({}, outBid, {\n          mediaType: 'video',\n          vastUrl: bid.ext.vast_url,\n          vastXml: bid.adm,\n          renderer: context === 'outstream' ? newRenderer(bidRequest.bidRequest, bid) : undefined\n        }));\n      }\n    });\n    return outBids;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    const syncs = [];\n    const gdprApplies = gdprConsent && (typeof gdprConsent.gdprApplies === 'boolean') ? gdprConsent.gdprApplies : false;\n    const suffix = gdprApplies ? 'gc=' + encodeURIComponent(gdprConsent.consentString) : 'gc=missing';\n    serverResponses.forEach(resp => {\n      if (resp.body) {\n        const bidResponse = resp.body;\n        if (bidResponse.ext && Array.isArray(bidResponse.ext[ 'utrk' ])) {\n          bidResponse.ext[ 'utrk' ].forEach(pixel => {\n            const url = pixel.url + (pixel.url.indexOf('?') > 0 ? '&' + suffix : '?' + suffix);\n            return syncs.push({ type: pixel.type, url });\n          });\n        }\n        if (Array.isArray(bidResponse.seatbid)) {\n          bidResponse.seatbid.forEach(seatBid => {\n            if (Array.isArray(seatBid.bid)) {\n              seatBid.bid.forEach(bid => {\n                if (bid.ext && Array.isArray(bid.ext[ 'utrk' ])) {\n                  bid.ext[ 'utrk' ].forEach(pixel => {\n                    const url = pixel.url + (pixel.url.indexOf('?') > 0 ? '&' + suffix : '?' + suffix);\n                    return syncs.push({ type: pixel.type, url });\n                  });\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n    return syncs;\n  }\n};\n\nfunction newRenderer(bidRequest, bid, rendererOptions = {}) {\n  const renderer = Renderer.install({\n    url: (bidRequest.params && bidRequest.params.rendererUrl) || (bid.ext && bid.ext.renderer_url) || '//s.gamoshi.io/video/latest/renderer.js',\n    config: rendererOptions,\n    loaded: false,\n  });\n  try {\n    renderer.setRender(renderOutstream);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n  return renderer;\n}\n\nfunction renderOutstream(bid) {\n  bid.renderer.push(() => {\n    const unitId = bid.adUnitCode + '/' + bid.adId;\n    window['GamoshiPlayer'].renderAd({\n      id: unitId,\n      debug: window.location.href.indexOf('pbjsDebug') >= 0,\n      placement: document.getElementById(bid.adUnitCode),\n      width: bid.width,\n      height: bid.height,\n      events: {\n        ALL_ADS_COMPLETED: () => window.setTimeout(() => {\n          window['GamoshiPlayer'].removeAd(unitId);\n        }, 300)\n      },\n      vastUrl: bid.vastUrl,\n      vastXml: bid.vastXml\n    });\n  });\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/gambidBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst ENDPOINT = 'hb.gammaplatform.com';\nconst BIDDER_CODE = 'gamma';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['gamma'],\n  supportedMediaTypes: ['banner', 'video'],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.siteId || bid.params.zoneId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests) {\n    const serverRequests = [];\n    for (var i = 0, len = bidRequests.length; i < len; i++) {\n      const gaxObjParams = bidRequests[i];\n      serverRequests.push({\n        method: 'GET',\n        url: '//' + ENDPOINT + '/adx/request?wid=' + gaxObjParams.params.siteId + '&zid=' + gaxObjParams.params.zoneId + '&hb=pbjs&bidid=' + gaxObjParams.bidId + '&urf=' + encodeURIComponent(utils.getTopWindowUrl())\n      });\n    }\n    return serverRequests;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse) {\n    serverResponse = serverResponse.body;\n\n    const bids = [];\n\n    if (serverResponse.id) {\n      const bid = newBid(serverResponse);\n      bids.push(bid);\n    }\n\n    return bids;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//' + ENDPOINT + '/adx/usersync'\n      }];\n    }\n  }\n}\n\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @return Bid\n */\nfunction newBid(serverBid) {\n  const bid = {\n    ad: serverBid.seatbid[0].bid[0].adm,\n    cpm: serverBid.seatbid[0].bid[0].price,\n    creativeId: serverBid.seatbid[0].bid[0].adid,\n    currency: serverBid.cur,\n    dealId: serverBid.seatbid[0].bid[0].dealid,\n    width: serverBid.seatbid[0].bid[0].w,\n    height: serverBid.seatbid[0].bid[0].h,\n    mediaType: serverBid.type,\n    netRevenue: true,\n    requestId: serverBid.id,\n    ttl: serverBid.seatbid[0].bid[0].ttl || 300\n  };\n\n  if (serverBid.type == 'video') {\n    Object.assign(bid, {\n      vastXml: serverBid.seatbid[0].bid[0].vastXml,\n      vastUrl: serverBid.seatbid[0].bid[0].vastUrl,\n      ttl: 3600\n    });\n  }\n\n  return bid;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/gammaBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { isInteger } from 'src/utils';\n\nconst BIDDER_CODE = 'getintent';\nconst IS_NET_REVENUE = true;\nconst BID_HOST = 'px.adhigh.net';\nconst BID_BANNER_PATH = '/rtb/direct_banner';\nconst BID_VIDEO_PATH = '/rtb/direct_vast';\nconst BID_RESPONSE_TTL_SEC = 360;\nconst VIDEO_PROPERTIES = [\n  'protocols', 'mimes', 'min_dur', 'max_dur', 'min_btr', 'max_btr', 'vi_format', 'api', 'skippable'\n];\nconst OPTIONAL_PROPERTIES = [\n  'cur', 'floor', 'sid'\n];\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['getintentAdapter'],\n  supportedMediaTypes: ['video', 'banner'],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid to validate.\n   * @return {boolean} True if this is a valid bid, and false otherwise.\n   * */\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.pid && bid.params.tid);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests - an array of bids.\n   * @return ServerRequest[]\n   */\n  buildRequests: function(bidRequests) {\n    return bidRequests.map(bidRequest => {\n      let giBidRequest = buildGiBidRequest(bidRequest);\n      return {\n        method: 'GET',\n        url: buildUrl(giBidRequest),\n        data: giBidRequest,\n      };\n    });\n  },\n\n  /**\n   * Callback for bids, after the call to DSP completes.\n   * Parse the response from the server into a list of bids.\n   *\n   * @param {object} serverResponse A response from the GetIntent's server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse) {\n    let responseBody = serverResponse.body;\n    const bids = [];\n    if (responseBody && responseBody.no_bid !== 1) {\n      let size = parseSize(responseBody.size);\n      let bid = {\n        requestId: responseBody.bid_id,\n        ttl: BID_RESPONSE_TTL_SEC,\n        netRevenue: IS_NET_REVENUE,\n        currency: responseBody.currency,\n        creativeId: responseBody.creative_id,\n        cpm: responseBody.cpm,\n        width: size[0],\n        height: size[1]\n      };\n      if (responseBody.vast_url) {\n        bid.mediaType = 'video';\n        bid.vastUrl = responseBody.vast_url;\n      } else {\n        bid.mediaType = 'banner';\n        bid.ad = responseBody.ad;\n      }\n      bids.push(bid);\n    }\n    return bids;\n  }\n\n}\n\nfunction buildUrl(bid) {\n  return '//' + BID_HOST + (bid.is_video ? BID_VIDEO_PATH : BID_BANNER_PATH);\n}\n\n/**\n * Builds GI bid request from BidRequest.\n *\n * @param {BidRequest} bidRequest.\n * @return {object} GI bid request.\n * */\nfunction buildGiBidRequest(bidRequest) {\n  let giBidRequest = {\n    bid_id: bidRequest.bidId,\n    pid: bidRequest.params.pid, // required\n    tid: bidRequest.params.tid, // required\n    known: bidRequest.params.known || 1,\n    is_video: bidRequest.mediaType === 'video',\n    resp_type: 'JSON',\n    provider: 'direct.prebidjs'\n  };\n  if (bidRequest.sizes) {\n    giBidRequest.size = produceSize(bidRequest.sizes);\n  }\n  addVideo(bidRequest.params.video, giBidRequest);\n  addOptional(bidRequest.params, giBidRequest, OPTIONAL_PROPERTIES);\n  return giBidRequest;\n}\n\nfunction addVideo(video, giBidRequest) {\n  if (giBidRequest.is_video && video) {\n    for (let i = 0, l = VIDEO_PROPERTIES.length; i < l; i++) {\n      let key = VIDEO_PROPERTIES[i];\n      if (video.hasOwnProperty(key)) {\n        giBidRequest[key] = Array.isArray(video[key]) ? video[key].join(',') : video[key];\n      }\n    }\n  }\n}\n\nfunction addOptional(params, request, props) {\n  for (let i = 0; i < props.length; i++) {\n    if (params.hasOwnProperty(props[i])) {\n      request[props[i]] = params[props[i]];\n    }\n  }\n}\n\n/**\n * @param {String} s The string representing a size (e.g. \"300x250\").\n * @return {Number[]} An array with two elements: [width, height] (e.g.: [300, 250]).\n * */\nfunction parseSize(s) {\n  return s.split('x').map(Number);\n}\n\n/**\n * @param {Array} sizes An array of sizes/numbers to be joined into single string.\n *                      May be an array (e.g. [300, 250]) or array of arrays (e.g. [[300, 250], [640, 480]].\n * @return {String} The string with sizes, e.g. array of sizes [[50, 50], [80, 80]] becomes \"50x50,80x80\" string.\n * */\nfunction produceSize (sizes) {\n  function sizeToStr(s) {\n    if (Array.isArray(s) && s.length === 2 && isInteger(s[0]) && isInteger(s[1])) {\n      return s.join('x');\n    } else {\n      throw \"Malformed parameter 'sizes'\";\n    }\n  }\n  if (Array.isArray(sizes) && Array.isArray(sizes[0])) {\n    return sizes.map(sizeToStr).join(',');\n  } else {\n    return sizeToStr(sizes);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/getintentBidAdapter.js","import * as utils from 'src/utils';\r\nimport { registerBidder } from 'src/adapters/bidderFactory';\r\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\r\nimport includes from 'core-js/library/fn/array/includes';\r\n\r\nconst BIDDER_CODE = 'giants';\r\nconst URL = '//d.admp.io/hb';\r\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\r\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\r\nconst NATIVE_MAPPING = {\r\n  body: 'description',\r\n  cta: 'ctatext',\r\n  image: {\r\n    serverName: 'main_image',\r\n    requiredParams: { required: true },\r\n    minimumParams: { sizes: [{}] },\r\n  },\r\n  icon: {\r\n    serverName: 'icon',\r\n    requiredParams: { required: true },\r\n    minimumParams: { sizes: [{}] },\r\n  },\r\n  sponsoredBy: 'sponsored_by',\r\n};\r\nconst SOURCE = 'pbjs';\r\n\r\nexport const spec = {\r\n  code: BIDDER_CODE,\r\n  aliases: [],\r\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\r\n\r\n  /**\r\n   * Determines whether or not the given bid request is valid.\r\n   *\r\n   * @param {object} bid The bid to validate.\r\n   * @return boolean True if this is a valid bid, and false otherwise.\r\n   */\r\n  isBidRequestValid: function(bid) {\r\n    return !!(bid.params.zoneId);\r\n  },\r\n\r\n  /**\r\n   * Make a server request from the list of BidRequests.\r\n   *\r\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\r\n   * @return ServerRequest Info describing the request to the server.\r\n   */\r\n  buildRequests: function(bidRequests, bidderRequest) {\r\n    const tags = bidRequests.map(bidToTag);\r\n    // const zoneIds = bidRequests.map(bidToZoneId);\r\n    // var firstBid = bidRequests[0];\r\n    var ref = utils.getTopWindowUrl();\r\n    const url = URL + '/multi?url=' + ref;\r\n    // + '&callback=window.pbjs.giantsResponse&callback_uid=' + bid.bidId;\r\n\r\n    const payload = {\r\n      tags: [...tags],\r\n      // user: userObj,\r\n      sdk: {\r\n        source: SOURCE,\r\n        version: '1.25.0-pre'\r\n      }\r\n    };\r\n    // if (member > 0) {\r\n    //   payload.member_id = member;\r\n    // }\r\n\r\n    if (bidderRequest && bidderRequest.gdprConsent) {\r\n      // note - objects for impbus use underscore instead of camelCase\r\n      payload.gdpr_consent = {\r\n        consent_string: bidderRequest.gdprConsent.consentString,\r\n        consent_required: bidderRequest.gdprConsent.gdprApplies\r\n      };\r\n    }\r\n\r\n    const payloadString = JSON.stringify(payload);\r\n\r\n    return {\r\n      method: 'POST',\r\n      // url: URL,\r\n      url: url,\r\n      data: payloadString,\r\n      bidderRequest\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Unpack the response from the server into a list of bids.\r\n   *\r\n   * @param {*} serverResponse A successful response from the server.\r\n   * @return {Bid[]} An array of bids which were nested inside the server.\r\n   */\r\n  interpretResponse: function(serverResponse, {bidderRequest}) {\r\n    serverResponse = serverResponse.body;\r\n    const bids = [];\r\n    if (!serverResponse || serverResponse.error) {\r\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\r\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\r\n      utils.logError(errorMessage);\r\n      return bids;\r\n    }\r\n    if (serverResponse.tags) {\r\n      serverResponse.tags.forEach(serverBid => {\r\n        if (serverBid.cpm && serverBid.cpm !== 0) {\r\n          const bid = newBid(serverBid, bidderRequest);\r\n          bid.mediaType = BANNER;\r\n          bids.push(bid);\r\n        }\r\n      });\r\n    }\r\n    return bids;\r\n  },\r\n\r\n  getUserSyncs: function(syncOptions) {\r\n    if (syncOptions.iframeEnabled) {\r\n      return [{\r\n        type: 'iframe',\r\n        url: '//d.admp.io/ping'\r\n      }];\r\n    }\r\n  }\r\n}\r\n\r\n/* Turn keywords parameter into ut-compatible format */\r\nfunction getKeywords(keywords) {\r\n  let arrs = [];\r\n\r\n  utils._each(keywords, (v, k) => {\r\n    if (utils.isArray(v)) {\r\n      let values = [];\r\n      utils._each(v, (val) => {\r\n        val = utils.getValueString('keywords.' + k, val);\r\n        if (val) { values.push(val); }\r\n      });\r\n      v = values;\r\n    } else {\r\n      v = utils.getValueString('keywords.' + k, v);\r\n      if (utils.isStr(v)) {\r\n        v = [v];\r\n      } else {\r\n        return;\r\n      } // unsuported types - don't send a key\r\n    }\r\n    arrs.push({key: k, value: v});\r\n  });\r\n\r\n  return arrs;\r\n}\r\n\r\n/**\r\n * Unpack the Server's Bid into a Prebid-compatible one.\r\n * @param serverBid\r\n * @param rtbBid\r\n * @param bidderRequest\r\n * @return Bid\r\n */\r\nfunction newBid(serverBid, bidderRequest) {\r\n  const bid = {\r\n    requestId: serverBid.uuid,\r\n    cpm: serverBid.cpm,\r\n    creativeId: serverBid.creative_id,\r\n    // dealId: rtbBid.deal_id,\r\n    currency: 'USD',\r\n    netRevenue: true,\r\n    ttl: 300\r\n  };\r\n\r\n  Object.assign(bid, {\r\n    width: serverBid.width,\r\n    height: serverBid.height,\r\n    // ad: serverBid.ad\r\n    ad: _renderCreative(serverBid.adUrl, serverBid.width, serverBid.height)\r\n  });\r\n  // try {\r\n  //   const url = rtbBid.rtb.trackers[0].impression_urls[0];\r\n  //   const tracker = utils.createTrackPixelHtml(url);\r\n  //   bid.ad += tracker;\r\n  // } catch (error) {\r\n  //   utils.logError('Error appending tracking pixel', error);\r\n  // }\r\n\r\n  return bid;\r\n}\r\n\r\nfunction bidToTag(bid) {\r\n  const tag = {};\r\n  tag.sizes = transformSizes(bid.sizes);\r\n  tag.primary_size = tag.sizes[0];\r\n  tag.ad_types = [];\r\n  tag.uuid = bid.bidId;\r\n  if (bid.params.zoneId) {\r\n    tag.id = bid.params.zoneId;\r\n  } else {\r\n    tag.code = bid.params.invCode;\r\n  }\r\n  tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\r\n  tag.use_pmt_rule = bid.params.usePaymentRule || false\r\n  tag.prebid = true;\r\n  tag.disable_psa = true;\r\n  if (bid.params.reserve) {\r\n    tag.reserve = bid.params.reserve;\r\n  }\r\n  if (bid.params.position) {\r\n    tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\r\n  }\r\n  if (bid.params.trafficSourceCode) {\r\n    tag.traffic_source_code = bid.params.trafficSourceCode;\r\n  }\r\n  if (bid.params.privateSizes) {\r\n    tag.private_sizes = transformSizes(bid.params.privateSizes);\r\n  }\r\n  if (bid.params.supplyType) {\r\n    tag.supply_type = bid.params.supplyType;\r\n  }\r\n  if (bid.params.pubClick) {\r\n    tag.pubclick = bid.params.pubClick;\r\n  }\r\n  if (bid.params.extInvCode) {\r\n    tag.ext_inv_code = bid.params.extInvCode;\r\n  }\r\n  if (bid.params.externalImpId) {\r\n    tag.external_imp_id = bid.params.externalImpId;\r\n  }\r\n  if (!utils.isEmpty(bid.params.keywords)) {\r\n    tag.keywords = getKeywords(bid.params.keywords);\r\n  }\r\n\r\n  if (bid.mediaType === NATIVE || utils.deepAccess(bid, `mediaTypes.${NATIVE}`)) {\r\n    tag.ad_types.push(NATIVE);\r\n\r\n    if (bid.nativeParams) {\r\n      const nativeRequest = buildNativeRequest(bid.nativeParams);\r\n      tag[NATIVE] = {layouts: [nativeRequest]};\r\n    }\r\n  }\r\n\r\n  const videoMediaType = utils.deepAccess(bid, `mediaTypes.${VIDEO}`);\r\n  const context = utils.deepAccess(bid, 'mediaTypes.video.context');\r\n\r\n  if (bid.mediaType === VIDEO || videoMediaType) {\r\n    tag.ad_types.push(VIDEO);\r\n  }\r\n\r\n  // instream gets vastUrl, outstream gets vastXml\r\n  if (bid.mediaType === VIDEO || (videoMediaType && context !== 'outstream')) {\r\n    tag.require_asset_url = true;\r\n  }\r\n\r\n  if (bid.params.video) {\r\n    tag.video = {};\r\n    // place any valid video params on the tag\r\n    Object.keys(bid.params.video)\r\n      .filter(param => includes(VIDEO_TARGETING, param))\r\n      .forEach(param => tag.video[param] = bid.params.video[param]);\r\n  }\r\n\r\n  if (\r\n    (utils.isEmpty(bid.mediaType) && utils.isEmpty(bid.mediaTypes)) ||\r\n    (bid.mediaType === BANNER || (bid.mediaTypes && bid.mediaTypes[BANNER]))\r\n  ) {\r\n    tag.ad_types.push(BANNER);\r\n  }\r\n\r\n  return tag;\r\n}\r\n\r\n// function bidToZoneId(bid) {\r\n//   return bid.params.zoneId;\r\n// }\r\n\r\n/* Turn bid request sizes into ut-compatible format */\r\nfunction transformSizes(requestSizes) {\r\n  let sizes = [];\r\n  let sizeObj = {};\r\n\r\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\r\n    !utils.isArray(requestSizes[0])) {\r\n    sizeObj.width = parseInt(requestSizes[0], 10);\r\n    sizeObj.height = parseInt(requestSizes[1], 10);\r\n    sizes.push(sizeObj);\r\n  } else if (typeof requestSizes === 'object') {\r\n    for (let i = 0; i < requestSizes.length; i++) {\r\n      let size = requestSizes[i];\r\n      sizeObj = {};\r\n      sizeObj.width = parseInt(size[0], 10);\r\n      sizeObj.height = parseInt(size[1], 10);\r\n      sizes.push(sizeObj);\r\n    }\r\n  }\r\n\r\n  return sizes;\r\n}\r\n\r\nfunction buildNativeRequest(params) {\r\n  const request = {};\r\n\r\n  // map standard prebid native asset identifier to /ut parameters\r\n  // e.g., tag specifies `body` but /ut only knows `description`.\r\n  // mapping may be in form {tag: '<server name>'} or\r\n  // {tag: {serverName: '<server name>', requiredParams: {...}}}\r\n  Object.keys(params).forEach(key => {\r\n    // check if one of the <server name> forms is used, otherwise\r\n    // a mapping wasn't specified so pass the key straight through\r\n    const requestKey =\r\n      (NATIVE_MAPPING[key] && NATIVE_MAPPING[key].serverName) ||\r\n      NATIVE_MAPPING[key] ||\r\n      key;\r\n\r\n    // required params are always passed on request\r\n    const requiredParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].requiredParams;\r\n    request[requestKey] = Object.assign({}, requiredParams, params[key]);\r\n\r\n    // minimum params are passed if no non-required params given on adunit\r\n    const minimumParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].minimumParams;\r\n\r\n    if (requiredParams && minimumParams) {\r\n      // subtract required keys from adunit keys\r\n      const adunitKeys = Object.keys(params[key]);\r\n      const requiredKeys = Object.keys(requiredParams);\r\n      const remaining = adunitKeys.filter(key => !includes(requiredKeys, key));\r\n\r\n      // if none are left over, the minimum params needs to be sent\r\n      if (remaining.length === 0) {\r\n        request[requestKey] = Object.assign({}, request[requestKey], minimumParams);\r\n      }\r\n    }\r\n  });\r\n\r\n  return request;\r\n}\r\n\r\nfunction _renderCreative(adUrl, width, height) {\r\n  return `<html>\r\n    <head><script type='text/javascript'>inDapIF=true;</script></head>\r\n    <body style='margin : 0; padding: 0;'>\r\n    <!-- GIANTS BANNER -->\r\n    <iframe src='${adUrl}' style=\"border: 0px; width: ${width}px; height: ${height}px\">\r\n    </div>\r\n    </body>\r\n    </html>`;\r\n}\r\n\r\nregisterBidder(spec);\r\n\n\n\n// WEBPACK FOOTER //\n// ./modules/giantsBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'gjirafa';\nconst ENDPOINT_URL = 'https://gjc.gjirafa.com/Home/GetBid';\nconst DIMENSION_SEPARATOR = 'x';\nconst SIZE_SEPARATOR = ';';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return bid.params && (!!bid.params.placementId || (!!bid.params.minCPM && !!bid.params.minCPC));\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      let gjid = Math.floor(Math.random() * 99999999);\n      let sizes = generateSizeParam(bidRequest.sizes);\n      let configId = bidRequest.params.placementId || '';\n      let minCPM = bidRequest.params.minCPM || 0.0;\n      let minCPC = bidRequest.params.minCPC || 0.0;\n      let allowExplicit = bidRequest.params.explicit || 0;\n      const body = {\n        gjid: gjid,\n        sizes: sizes,\n        configId: configId,\n        minCPM: minCPM,\n        minCPC: minCPC,\n        allowExplicit: allowExplicit,\n        referrer: utils.getTopWindowUrl(),\n        requestid: bidRequest.bidderRequestId,\n        bidid: bidRequest.bidId\n      };\n      if (document.referrer) {\n        body.referrer = document.referrer;\n      }\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        body.consent_string = bidderRequest.gdprConsent.consentString;\n        body.consent_required = (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true;\n      }\n      return {\n        method: 'GET',\n        url: ENDPOINT_URL,\n        data: body\n      };\n    });\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const serverBody = serverResponse.body;\n    const bidResponses = [];\n    const bidResponse = {\n      requestId: bidRequest.data.bidid,\n      cpm: serverBody.CPM,\n      width: serverBody.Width,\n      height: serverBody.Height,\n      creativeId: serverBody.CreativeId,\n      currency: serverBody.Currency,\n      netRevenue: serverBody.NetRevenue,\n      ttl: serverBody.TTL,\n      referrer: serverBody.Referrer,\n      ad: serverBody.Ad\n    };\n    bidResponses.push(bidResponse);\n    return bidResponses;\n  }\n}\n\n/**\n* Generate size param for bid request using sizes array\n*\n* @param {Array} sizes Possible sizes for the ad unit.\n* @return {string} Processed sizes param to be used for the bid request.\n*/\nfunction generateSizeParam(sizes) {\n  return sizes.map(size => size.join(DIMENSION_SEPARATOR)).join(SIZE_SEPARATOR);\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/gjirafaBidAdapter.js","/**\n * ga.js - analytics adapter for google analytics\n */\n\nvar events = require('src/events');\nvar utils = require('src/utils');\nvar CONSTANTS = require('src/constants.json');\nvar adaptermanager = require('src/adaptermanager');\n\nvar BID_REQUESTED = CONSTANTS.EVENTS.BID_REQUESTED;\nvar BID_TIMEOUT = CONSTANTS.EVENTS.BID_TIMEOUT;\nvar BID_RESPONSE = CONSTANTS.EVENTS.BID_RESPONSE;\nvar BID_WON = CONSTANTS.EVENTS.BID_WON;\n\nvar _disableInteraction = { nonInteraction: true };\nvar _analyticsQueue = [];\nvar _gaGlobal = null;\nvar _enableCheck = true;\nvar _category = 'Prebid.js Bids';\nvar _eventCount = 0;\nvar _enableDistribution = false;\nvar _trackerSend = null;\nvar _sampled = true;\n\n/**\n * This will enable sending data to google analytics. Only call once, or duplicate data will be sent!\n * @param  {object} provider use to set GA global (if renamed);\n * @param  {object} options use to configure adapter;\n * @return {[type]}    [description]\n */\nexports.enableAnalytics = function ({ provider, options }) {\n  _gaGlobal = provider || 'ga';\n  _trackerSend = options && options.trackerName ? options.trackerName + '.send' : 'send';\n  _sampled = typeof options === 'undefined' || typeof options.sampling === 'undefined' ||\n             Math.random() < parseFloat(options.sampling);\n\n  if (options && typeof options.global !== 'undefined') {\n    _gaGlobal = options.global;\n  }\n  if (options && typeof options.enableDistribution !== 'undefined') {\n    _enableDistribution = options.enableDistribution;\n  }\n\n  var bid = null;\n\n  if (_sampled) {\n    // first send all events fired before enableAnalytics called\n\n    var existingEvents = events.getEvents();\n\n    utils._each(existingEvents, function (eventObj) {\n      if (typeof eventObj !== 'object') {\n        return;\n      }\n      var args = eventObj.args;\n\n      if (eventObj.eventType === BID_REQUESTED) {\n        bid = args;\n        sendBidRequestToGa(bid);\n      } else if (eventObj.eventType === BID_RESPONSE) {\n        // bid is 2nd args\n        bid = args;\n        sendBidResponseToGa(bid);\n      } else if (eventObj.eventType === BID_TIMEOUT) {\n        const bidderArray = args;\n        sendBidTimeouts(bidderArray);\n      } else if (eventObj.eventType === BID_WON) {\n        bid = args;\n        sendBidWonToGa(bid);\n      }\n    });\n\n    // Next register event listeners to send data immediately\n\n    // bidRequests\n    events.on(BID_REQUESTED, function (bidRequestObj) {\n      sendBidRequestToGa(bidRequestObj);\n    });\n\n    // bidResponses\n    events.on(BID_RESPONSE, function (bid) {\n      sendBidResponseToGa(bid);\n    });\n\n    // bidTimeouts\n    events.on(BID_TIMEOUT, function (bidderArray) {\n      sendBidTimeouts(bidderArray);\n    });\n\n    // wins\n    events.on(BID_WON, function (bid) {\n      sendBidWonToGa(bid);\n    });\n  } else {\n    utils.logMessage('Prebid.js google analytics disabled by sampling');\n  }\n\n  // finally set this function to return log message, prevents multiple adapter listeners\n  this.enableAnalytics = function _enable() {\n    return utils.logMessage(`Analytics adapter already enabled, unnecessary call to \\`enableAnalytics\\`.`);\n  };\n};\n\nexports.getTrackerSend = function getTrackerSend() {\n  return _trackerSend;\n};\n\n/**\n * Check if gaGlobal or window.ga is defined on page. If defined execute all the GA commands\n */\nfunction checkAnalytics() {\n  if (_enableCheck && typeof window[_gaGlobal] === 'function') {\n    for (var i = 0; i < _analyticsQueue.length; i++) {\n      _analyticsQueue[i].call();\n    }\n\n    // override push to execute the command immediately from now on\n    _analyticsQueue.push = function (fn) {\n      fn.call();\n    };\n\n    // turn check into NOOP\n    _enableCheck = false;\n  }\n\n  utils.logMessage('event count sent to GA: ' + _eventCount);\n}\n\nfunction convertToCents(dollars) {\n  if (dollars) {\n    return Math.floor(dollars * 100);\n  }\n\n  return 0;\n}\n\nfunction getLoadTimeDistribution(time) {\n  var distribution;\n  if (time >= 0 && time < 200) {\n    distribution = '0-200ms';\n  } else if (time >= 200 && time < 300) {\n    distribution = '0200-300ms';\n  } else if (time >= 300 && time < 400) {\n    distribution = '0300-400ms';\n  } else if (time >= 400 && time < 500) {\n    distribution = '0400-500ms';\n  } else if (time >= 500 && time < 600) {\n    distribution = '0500-600ms';\n  } else if (time >= 600 && time < 800) {\n    distribution = '0600-800ms';\n  } else if (time >= 800 && time < 1000) {\n    distribution = '0800-1000ms';\n  } else if (time >= 1000 && time < 1200) {\n    distribution = '1000-1200ms';\n  } else if (time >= 1200 && time < 1500) {\n    distribution = '1200-1500ms';\n  } else if (time >= 1500 && time < 2000) {\n    distribution = '1500-2000ms';\n  } else if (time >= 2000) {\n    distribution = '2000ms above';\n  }\n\n  return distribution;\n}\n\nfunction getCpmDistribution(cpm) {\n  var distribution;\n  if (cpm >= 0 && cpm < 0.5) {\n    distribution = '$0-0.5';\n  } else if (cpm >= 0.5 && cpm < 1) {\n    distribution = '$0.5-1';\n  } else if (cpm >= 1 && cpm < 1.5) {\n    distribution = '$1-1.5';\n  } else if (cpm >= 1.5 && cpm < 2) {\n    distribution = '$1.5-2';\n  } else if (cpm >= 2 && cpm < 2.5) {\n    distribution = '$2-2.5';\n  } else if (cpm >= 2.5 && cpm < 3) {\n    distribution = '$2.5-3';\n  } else if (cpm >= 3 && cpm < 4) {\n    distribution = '$3-4';\n  } else if (cpm >= 4 && cpm < 6) {\n    distribution = '$4-6';\n  } else if (cpm >= 6 && cpm < 8) {\n    distribution = '$6-8';\n  } else if (cpm >= 8) {\n    distribution = '$8 above';\n  }\n\n  return distribution;\n}\n\nfunction sendBidRequestToGa(bid) {\n  if (bid && bid.bidderCode) {\n    _analyticsQueue.push(function () {\n      _eventCount++;\n      window[_gaGlobal](_trackerSend, 'event', _category, 'Requests', bid.bidderCode, 1, _disableInteraction);\n    });\n  }\n\n  // check the queue\n  checkAnalytics();\n}\n\nfunction sendBidResponseToGa(bid) {\n  if (bid && bid.bidderCode) {\n    _analyticsQueue.push(function () {\n      var cpmCents = convertToCents(bid.cpm);\n      var bidder = bid.bidderCode;\n      if (typeof bid.timeToRespond !== 'undefined' && _enableDistribution) {\n        _eventCount++;\n        var dis = getLoadTimeDistribution(bid.timeToRespond);\n        window[_gaGlobal](_trackerSend, 'event', 'Prebid.js Load Time Distribution', dis, bidder, 1, _disableInteraction);\n      }\n\n      if (bid.cpm > 0) {\n        _eventCount = _eventCount + 2;\n        var cpmDis = getCpmDistribution(bid.cpm);\n        if (_enableDistribution) {\n          _eventCount++;\n          window[_gaGlobal](_trackerSend, 'event', 'Prebid.js CPM Distribution', cpmDis, bidder, 1, _disableInteraction);\n        }\n\n        window[_gaGlobal](_trackerSend, 'event', _category, 'Bids', bidder, cpmCents, _disableInteraction);\n        window[_gaGlobal](_trackerSend, 'event', _category, 'Bid Load Time', bidder, bid.timeToRespond, _disableInteraction);\n      }\n    });\n  }\n\n  // check the queue\n  checkAnalytics();\n}\n\nfunction sendBidTimeouts(timedOutBidders) {\n  _analyticsQueue.push(function () {\n    utils._each(timedOutBidders, function (bidderCode) {\n      _eventCount++;\n      var bidderName = bidderCode.bidder;\n      window[_gaGlobal](_trackerSend, 'event', _category, 'Timeouts', bidderName, _disableInteraction);\n    });\n  });\n\n  checkAnalytics();\n}\n\nfunction sendBidWonToGa(bid) {\n  var cpmCents = convertToCents(bid.cpm);\n  _analyticsQueue.push(function () {\n    _eventCount++;\n    window[_gaGlobal](_trackerSend, 'event', _category, 'Wins', bid.bidderCode, cpmCents, _disableInteraction);\n  });\n\n  checkAnalytics();\n}\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: exports,\n  code: 'ga'\n});\n\n\n\n// WEBPACK FOOTER //\n// ./modules/googleAnalyticsAdapter.js","import * as utils from 'src/utils'\n\nimport { config } from 'src/config'\nimport { registerBidder } from 'src/adapters/bidderFactory'\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'gumgum'\nconst ALIAS_BIDDER_CODE = ['gg']\nconst BID_ENDPOINT = `https://g2.gumgum.com/hbid/imp`\nconst DT_CREDENTIALS = { member: 'YcXr87z2lpbB' }\nconst TIME_TO_LIVE = 60\n\nlet browserParams = {};\nlet pageViewId = null\n\n// TODO: potential 0 values for browserParams sent to ad server\nfunction _getBrowserParams() {\n  let topWindow\n  let topScreen\n  let topUrl\n  let ggad\n  if (browserParams.vw) {\n    // we've already initialized browserParams, just return it.\n    return browserParams\n  }\n\n  try {\n    topWindow = global.top;\n    topScreen = topWindow.screen;\n    topUrl = utils.getTopWindowUrl()\n  } catch (error) {\n    utils.logError(error);\n    return browserParams\n  }\n\n  browserParams = {\n    vw: topWindow.innerWidth,\n    vh: topWindow.innerHeight,\n    sw: topScreen.width,\n    sh: topScreen.height,\n    pu: topUrl,\n    ce: utils.cookiesAreEnabled(),\n    dpr: topWindow.devicePixelRatio || 1\n  }\n  ggad = (topUrl.match(/#ggad=(\\w+)$/) || [0, 0])[1]\n  if (ggad) {\n    browserParams[isNaN(ggad) ? 'eAdBuyId' : 'adBuyId'] = ggad\n  }\n  return browserParams\n}\n\nfunction getWrapperCode(wrapper, data) {\n  return wrapper.replace('AD_JSON', window.btoa(JSON.stringify(data)))\n}\n\n// TODO: use getConfig()\nfunction _getDigiTrustQueryParams() {\n  function getDigiTrustId () {\n    var digiTrustUser = (window.DigiTrust && window.DigiTrust.getUser) ? window.DigiTrust.getUser(DT_CREDENTIALS) : {};\n    return (digiTrustUser && digiTrustUser.success && digiTrustUser.identity) || '';\n  };\n\n  let digiTrustId = getDigiTrustId();\n  // Verify there is an ID and this user has not opted out\n  if (!digiTrustId || (digiTrustId.privacy && digiTrustId.privacy.optout)) {\n    return {};\n  }\n  return {\n    dt: digiTrustId.id\n  };\n}\n\n/**\n * Determines whether or not the given bid request is valid.\n *\n * @param {BidRequest} bid The bid params to validate.\n * @return boolean True if this is a valid bid, and false otherwise.\n */\nfunction isBidRequestValid (bid) {\n  const {\n    params,\n    adUnitCode\n  } = bid;\n\n  switch (true) {\n    case !!(params.inScreen): break;\n    case !!(params.inSlot): break;\n    case !!(params.ICV): break;\n    default:\n      utils.logWarn(`[GumGum] No product selected for the placement ${adUnitCode}, please check your implementation.`);\n      return false;\n  }\n  return true;\n}\n\n/**\n * Make a server request from the list of BidRequests.\n *\n * @param {validBidRequests[]} - an array of bids\n * @return ServerRequest Info describing the request to the server.\n */\nfunction buildRequests (validBidRequests, bidderRequest) {\n  const bids = [];\n  const gdprConsent = Object.assign({ consentString: null, gdprApplies: true }, bidderRequest && bidderRequest.gdprConsent)\n  utils._each(validBidRequests, bidRequest => {\n    const timeout = config.getConfig('bidderTimeout');\n    const {\n      bidId,\n      params = {},\n      transactionId\n    } = bidRequest;\n    const data = {}\n    if (pageViewId) {\n      data.pv = pageViewId\n    }\n    if (params.inScreen) {\n      data.t = params.inScreen;\n      data.pi = 2;\n    }\n    if (params.inSlot) {\n      data.si = parseInt(params.inSlot, 10);\n      data.pi = 3;\n    }\n    if (params.ICV) {\n      data.ni = parseInt(params.ICV, 10);\n      data.pi = 5;\n    }\n    data.gdprApplies = gdprConsent.gdprApplies;\n    if (gdprConsent.gdprApplies) {\n      data.gdprConsent = gdprConsent.consentString;\n    }\n\n    bids.push({\n      id: bidId,\n      tmax: timeout,\n      tId: transactionId,\n      pi: data.pi,\n      selector: params.selector,\n      sizes: bidRequest.sizes,\n      url: BID_ENDPOINT,\n      method: 'GET',\n      data: Object.assign(data, _getBrowserParams(), _getDigiTrustQueryParams())\n    })\n  });\n  return bids;\n}\n\n/**\n * Unpack the response from the server into a list of bids.\n *\n * @param {*} serverResponse A successful response from the server.\n * @return {Bid[]} An array of bids which were nested inside the server.\n */\nfunction interpretResponse (serverResponse, bidRequest) {\n  const bidResponses = []\n  const serverResponseBody = serverResponse.body\n  const defaultResponse = {\n    ad: {\n      price: 0,\n      id: 0,\n      markup: ''\n    },\n    pag: {\n      pvid: 0\n    }\n  }\n  const {\n    ad: {\n      price: cpm,\n      id: creativeId,\n      markup\n    },\n    cw: wrapper,\n    pag: {\n      pvid\n    }\n  } = Object.assign(defaultResponse, serverResponseBody)\n  let data = bidRequest.data || {}\n  let product = data.pi\n  let isTestUnit = (product === 3 && data.si === 9)\n  let sizes = utils.parseSizesInput(bidRequest.sizes)\n  let [width, height] = sizes[0].split('x')\n\n  // return 1x1 when breakout expected\n  if ((product === 2 || product === 5) && includes(sizes, '1x1')) {\n    width = '1'\n    height = '1'\n  }\n\n  // update Page View ID from server response\n  pageViewId = pvid\n\n  if (creativeId) {\n    bidResponses.push({\n      // dealId: DEAL_ID,\n      // referrer: REFERER,\n      ad: wrapper ? getWrapperCode(wrapper, Object.assign({}, serverResponseBody, { bidRequest })) : markup,\n      cpm: isTestUnit ? 0.1 : cpm,\n      creativeId,\n      currency: 'USD',\n      height,\n      netRevenue: true,\n      requestId: bidRequest.id,\n      ttl: TIME_TO_LIVE,\n      width\n    })\n  }\n  return bidResponses\n}\n\n/**\n * Register the user sync pixels which should be dropped after the auction.\n *\n * @param {SyncOptions} syncOptions Which user syncs are allowed?\n * @param {ServerResponse[]} serverResponses List of server's responses.\n * @return {UserSync[]} The user syncs which should be dropped.\n */\nfunction getUserSyncs (syncOptions, serverResponses) {\n  const responses = serverResponses.map((response) => {\n    return (response.body && response.body.pxs && response.body.pxs.scr) || []\n  })\n  const userSyncs = responses.reduce(function (usersyncs, response) {\n    return usersyncs.concat(response)\n  }, [])\n  const syncs = userSyncs.map((sync) => {\n    return {\n      type: sync.t === 'f' ? 'iframe' : 'image',\n      url: sync.u\n    }\n  })\n  return syncs;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ALIAS_BIDDER_CODE,\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse,\n  getUserSyncs\n}\nregisterBidder(spec)\n\n\n\n// WEBPACK FOOTER //\n// ./modules/gumgumBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'gxone';\nconst ENDPOINT_URL = '//ads.gx1as.com/hb';\nconst TIME_TO_LIVE = 360;\nconst ADAPTER_SYNC_URL = '//ads.gx1as.com/push_sync';\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should be not empty',\n  emptySeatbid: 'Seatbid array from response has empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\n\n/**\n * GXOne Bid Adapter.\n * Contact: olivier@geronimo.co\n *\n */\nexport const spec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n\n  buildRequests: function(validBidRequests) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n      reqId = bid.bidderRequestId;\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      r: reqId,\n    };\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: utils.parseQueryStringParameters(payload).replace(/\\&$/, ''),\n      bidsMap: bidsMap,\n    };\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL\n      }];\n    }\n  }\n}\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId, // bid.bidderRequestId,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid, // bid.bidId,\n          currency: 'USD',\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/gxoneBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'huddledmasses';\nconst URL = '//huddledmassessupply.com/?c=o&m=multi';\nconst URL_SYNC = '//huddledmassessupply.com/?c=o&m=cookie';\n\nlet sizeObj = {\n  '468x60': 1,\n  '728x90': 2,\n  '300x600': 10,\n  '300x250': 15,\n  '300x100': 19,\n  '320x50': 43,\n  '300x50': 44,\n  '300x300': 48,\n  '300x1050': 54,\n  '970x90': 55,\n  '970x250': 57,\n  '1000x90': 58,\n  '320x80': 59,\n  '640x480': 65,\n  '320x480': 67,\n  '320x320': 72,\n  '320x160': 73,\n  '480x300': 83,\n  '970x310': 94,\n  '970x210': 96,\n  '480x320': 101,\n  '768x1024': 102,\n  '1000x300': 113,\n  '320x100': 117,\n  '800x250': 118,\n  '200x600': 119\n};\n\nutils._each(sizeObj, (item, key) => sizeObj[item] = key);\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: (bid) => {\n    return (!isNaN(bid.params.placement_id) &&\n    ((bid.params.sizes !== undefined && bid.params.sizes.length > 0 && bid.params.sizes.some((sizeIndex) => sizeObj[sizeIndex] !== undefined)) ||\n    (bid.sizes !== undefined && bid.sizes.length > 0 && bid.sizes.map((size) => `${size[0]}x${size[1]}`).some((size) => sizeObj[size] !== undefined))));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests A non-empty list of valid bid requests that should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests) => {\n    let winTop = window;\n    try {\n      window.top.location.toString();\n      winTop = window.top;\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    let location = utils.getTopWindowLocation();\n    let placements = [];\n    let request = {\n      'deviceWidth': winTop.screen.width,\n      'deviceHeight': winTop.screen.height,\n      'language': (navigator && navigator.language) ? navigator.language : '',\n      'secure': location.protocol === 'https:' ? 1 : 0,\n      'host': location.host,\n      'page': location.pathname,\n      'placements': placements\n    };\n    for (let i = 0; i < validBidRequests.length; i++) {\n      let bid = validBidRequests[i];\n      let placement = {};\n      placement['placementId'] = bid.params.placement_id;\n      placement['bidId'] = bid.bidId;\n      placement['sizes'] = bid.sizes;\n      placements.push(placement);\n    }\n    return {\n      method: 'POST',\n      url: URL,\n      data: request\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: (serverResponse) => {\n    let response = [];\n    try {\n      serverResponse = serverResponse.body;\n      for (let i = 0; i < serverResponse.length; i++) {\n        let resItem = serverResponse[i];\n        if (resItem.width && !isNaN(resItem.width) &&\n            resItem.height && !isNaN(resItem.height) &&\n            resItem.requestId && typeof resItem.requestId === 'string' &&\n            resItem.cpm && !isNaN(resItem.cpm) &&\n            resItem.ad && typeof resItem.ad === 'string' &&\n            resItem.ttl && !isNaN(resItem.ttl) &&\n            resItem.creativeId && typeof resItem.creativeId === 'string' &&\n            resItem.netRevenue && typeof resItem.netRevenue === 'boolean' &&\n            resItem.currency && typeof resItem.currency === 'string') {\n          response.push(resItem);\n        }\n      }\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    return response;\n  },\n\n  getUserSyncs: () => {\n    return [{\n      type: 'image',\n      url: URL_SYNC\n    }];\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/huddledmassesBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'ias';\n\nconst otherBidIds = [];\n\nfunction isBidRequestValid(bid) {\n  const { pubId, adUnitPath } = bid.params;\n  return !!(pubId && adUnitPath);\n}\n\n/**\n * Converts GPT-style size array into a string\n * @param  {Array} sizes:  list of GPT-style sizes, e.g. [[300, 250], [300, 300]]\n * @return {String} a string containing sizes, e.g. '[300.250,300.300]'\n */\nfunction stringifySlotSizes(sizes) {\n  let result = '';\n  if (utils.isArray(sizes)) {\n    result = sizes.reduce((acc, size) => {\n      acc.push(size.join('.'));\n      return acc;\n    }, []);\n    result = '[' + result.join(',') + ']';\n  }\n  return result;\n}\n\nfunction stringifySlot(bidRequest) {\n  const id = bidRequest.adUnitCode;\n  const ss = stringifySlotSizes(bidRequest.sizes);\n  const p = bidRequest.params.adUnitPath;\n  const slot = { id, ss, p };\n  const keyValues = utils.getKeys(slot).map(function(key) {\n    return [key, slot[key]].join(':');\n  });\n  return '{' + keyValues.join(',') + '}';\n}\n\nfunction stringifyWindowSize() {\n  return [ window.innerWidth || -1, window.innerHeight || -1 ].join('.');\n}\n\nfunction stringifyScreenSize() {\n  return [ (window.screen && window.screen.width) || -1, (window.screen && window.screen.height) || -1 ].join('.');\n}\n\nfunction buildRequests(bidRequests) {\n  const IAS_HOST = '//pixel.adsafeprotected.com/services/pub';\n  const anId = bidRequests[0].params.pubId;\n\n  let queries = [];\n  queries.push(['anId', anId]);\n  queries = queries.concat(bidRequests.reduce(function(acc, request) {\n    acc.push(['slot', stringifySlot(request)]);\n    return acc;\n  }, []));\n\n  queries.push(['wr', stringifyWindowSize()]);\n  queries.push(['sr', stringifyScreenSize()]);\n\n  const queryString = encodeURI(queries.map(qs => qs.join('=')).join('&'));\n\n  bidRequests.forEach(function (request) {\n    if (bidRequests[0].bidId != request.bidId) {\n      otherBidIds.push(request.bidId);\n    }\n  });\n\n  return {\n    method: 'GET',\n    url: IAS_HOST,\n    data: queryString,\n    bidRequest: bidRequests[0]\n  };\n}\n\nfunction getPageLevelKeywords(response) {\n  let result = {};\n  shallowMerge(result, response.brandSafety);\n  result.fr = response.fr;\n  return result;\n}\n\nfunction shallowMerge(dest, src) {\n  utils.getKeys(src).reduce((dest, srcKey) => {\n    dest[srcKey] = src[srcKey];\n    return dest;\n  }, dest);\n}\n\nfunction interpretResponse(serverResponse, request) {\n  const iasResponse = serverResponse.body;\n  const bidResponses = [];\n\n  // Keys in common bid response are not used;\n  // Necessary to get around with prebid's common bid response check\n  const commonBidResponse = {\n    requestId: request.bidRequest.bidId,\n    cpm: 0.01,\n    width: 100,\n    height: 200,\n    creativeId: 434,\n    dealId: 42,\n    currency: 'usd',\n    netRevenue: true,\n    ttl: 360\n  };\n\n  shallowMerge(commonBidResponse, getPageLevelKeywords(iasResponse));\n  commonBidResponse.slots = iasResponse.slots;\n  bidResponses.push(commonBidResponse);\n\n  otherBidIds.forEach(function (bidId) {\n    var otherResponse = Object.assign({}, commonBidResponse);\n    otherResponse.requestId = bidId;\n    bidResponses.push(otherResponse);\n  });\n\n  return bidResponses;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: [],\n  isBidRequestValid: isBidRequestValid,\n  buildRequests: buildRequests,\n  interpretResponse: interpretResponse\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/iasBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\n\nconst BIDDER_CODE = 'improvedigital';\n\nexport const spec = {\n  version: '4.3.0',\n  code: BIDDER_CODE,\n  aliases: ['id'],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid && bid.params && (bid.params.placementId || (bid.params.placementKey && bid.params.publisherId)));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    let normalizedBids = bidRequests.map((bidRequest) => {\n      return getNormalizedBidRequest(bidRequest);\n    });\n\n    let idClient = new ImproveDigitalAdServerJSClient('hb');\n    let requestParameters = {\n      singleRequestMode: false,\n      returnObjType: idClient.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT,\n      libVersion: this.version\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.consentString) {\n      requestParameters.gdpr = bidderRequest.gdprConsent.consentString;\n    }\n\n    let requestObj = idClient.createRequest(\n      normalizedBids, // requestObject\n      requestParameters\n    );\n\n    if (requestObj.errors && requestObj.errors.length > 0) {\n      utils.logError('ID WARNING 0x01');\n    }\n\n    return requestObj.requests;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, request) {\n    const bids = [];\n    utils._each(serverResponse.body.bid, function (bidObject) {\n      if (!bidObject.price || bidObject.price === null ||\n        bidObject.hasOwnProperty('errorCode') ||\n        typeof bidObject.adm !== 'string') {\n        return;\n      }\n\n      let bid = {};\n      let nurl = '';\n      if (bidObject.nurl && bidObject.nurl.length > 0) {\n        nurl = `<img src=\"${bidObject.nurl}\" width=\"0\" height=\"0\" style=\"display:none\">`;\n      }\n      bid.ad = `${nurl}<script>${bidObject.adm}</script>`;\n      bid.adId = bidObject.id;\n      bid.cpm = parseFloat(bidObject.price);\n      bid.creativeId = bidObject.crid;\n      bid.currency = bidObject.currency ? bidObject.currency.toUpperCase() : 'USD';\n      if (utils.isNumber(bidObject.lid)) {\n        bid.dealId = bidObject.lid;\n      } else if (typeof bidObject.lid === 'object' && bidObject.lid['1']) {\n        bid.dealId = bidObject.lid['1'];\n      }\n      bid.height = bidObject.h;\n      bid.netRevenue = bidObject.isNet ? bidObject.isNet : false;\n      bid.requestId = bidObject.id;\n      bid.ttl = 300;\n      bid.width = bidObject.w;\n\n      bids.push(bid);\n    });\n    return bids;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (syncOptions.pixelEnabled) {\n      const syncs = [];\n      serverResponses.forEach(response => {\n        response.body.bid.forEach(bidObject => {\n          if (utils.isArray(bidObject.sync)) {\n            bidObject.sync.forEach(syncElement => {\n              if (syncs.indexOf(syncElement) === -1) {\n                syncs.push(syncElement);\n              }\n            });\n          }\n        });\n      });\n      return syncs.map(sync => ({ type: 'image', url: sync }));\n    }\n    return [];\n  }\n};\n\nfunction getNormalizedBidRequest(bid) {\n  let adUnitId = utils.getBidIdParameter('adUnitCode', bid) || null;\n  let placementId = utils.getBidIdParameter('placementId', bid.params) || null;\n  let publisherId = null;\n  let placementKey = null;\n\n  if (placementId === null) {\n    publisherId = utils.getBidIdParameter('publisherId', bid.params) || null;\n    placementKey = utils.getBidIdParameter('placementKey', bid.params) || null;\n  }\n  let keyValues = utils.getBidIdParameter('keyValues', bid.params) || null;\n  let localSize = utils.getBidIdParameter('size', bid.params) || null;\n  let bidId = utils.getBidIdParameter('bidId', bid);\n  let transactionId = utils.getBidIdParameter('transactionId', bid);\n  const currency = config.getConfig('currency.adServerCurrency');\n\n  let normalizedBidRequest = {};\n  if (placementId) {\n    normalizedBidRequest.placementId = placementId;\n  } else {\n    if (publisherId) {\n      normalizedBidRequest.publisherId = publisherId;\n    }\n    if (placementKey) {\n      normalizedBidRequest.placementKey = placementKey;\n    }\n  }\n\n  if (keyValues) {\n    normalizedBidRequest.keyValues = keyValues;\n  }\n  if (localSize && localSize.w && localSize.h) {\n    normalizedBidRequest.size = {};\n    normalizedBidRequest.size.h = localSize.h;\n    normalizedBidRequest.size.w = localSize.w;\n  }\n  if (bidId) {\n    normalizedBidRequest.id = bidId;\n  }\n  if (adUnitId) {\n    normalizedBidRequest.adUnitId = adUnitId;\n  }\n  if (transactionId) {\n    normalizedBidRequest.transactionId = transactionId;\n  }\n  if (currency) {\n    normalizedBidRequest.currency = currency;\n  }\n  return normalizedBidRequest;\n}\nregisterBidder(spec);\n\nfunction ImproveDigitalAdServerJSClient(endPoint) {\n  this.CONSTANTS = {\n    HTTP_SECURITY: {\n      STANDARD: 0,\n      SECURE: 1\n    },\n    AD_SERVER_BASE_URL: 'ad.360yield.com',\n    END_POINT: endPoint || 'hb',\n    AD_SERVER_URL_PARAM: 'jsonp=',\n    CLIENT_VERSION: 'JS-5.1',\n    MAX_URL_LENGTH: 2083,\n    ERROR_CODES: {\n      MISSING_PLACEMENT_PARAMS: 2,\n      LIB_VERSION_MISSING: 3\n    },\n    RETURN_OBJ_TYPE: {\n      DEFAULT: 0,\n      URL_PARAMS_SPLIT: 1\n    }\n  };\n\n  this.getErrorReturn = function(errorCode) {\n    return {\n      idMappings: {},\n      requests: {},\n      'errorCode': errorCode\n    };\n  };\n\n  this.createRequest = function(requestObject, requestParameters, extraRequestParameters) {\n    if (!requestParameters.libVersion) {\n      return this.getErrorReturn(this.CONSTANTS.ERROR_CODES.LIB_VERSION_MISSING);\n    }\n\n    requestParameters.returnObjType = requestParameters.returnObjType || this.CONSTANTS.RETURN_OBJ_TYPE.DEFAULT;\n\n    let impressionObjects = [];\n    let impressionObject;\n    if (utils.isArray(requestObject)) {\n      for (let counter = 0; counter < requestObject.length; counter++) {\n        impressionObject = this.createImpressionObject(requestObject[counter]);\n        impressionObjects.push(impressionObject);\n      }\n    } else {\n      impressionObject = this.createImpressionObject(requestObject);\n      impressionObjects.push(impressionObject);\n    }\n\n    let returnIdMappings = true;\n    if (requestParameters.returnObjType === this.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT) {\n      returnIdMappings = false;\n    }\n\n    let returnObject = {};\n    returnObject.requests = [];\n    if (returnIdMappings) {\n      returnObject.idMappings = [];\n    }\n    let errors = null;\n\n    let baseUrl = `${(requestParameters.secure === 1 ? 'https' : 'http')}://${this.CONSTANTS.AD_SERVER_BASE_URL}/${this.CONSTANTS.END_POINT}?${this.CONSTANTS.AD_SERVER_URL_PARAM}`;\n\n    let bidRequestObject = {\n      bid_request: this.createBasicBidRequestObject(requestParameters, extraRequestParameters)\n    };\n    for (let counter = 0; counter < impressionObjects.length; counter++) {\n      impressionObject = impressionObjects[counter];\n\n      if (impressionObject.errorCode) {\n        errors = errors || [];\n        errors.push({\n          errorCode: impressionObject.errorCode,\n          adUnitId: impressionObject.adUnitId\n        });\n      } else {\n        if (returnIdMappings) {\n          returnObject.idMappings.push({\n            adUnitId: impressionObject.adUnitId,\n            id: impressionObject.impressionObject.id\n          });\n        }\n        bidRequestObject.bid_request.imp = bidRequestObject.bid_request.imp || [];\n        bidRequestObject.bid_request.imp.push(impressionObject.impressionObject);\n\n        let writeLongRequest = false;\n        const outputUri = baseUrl + encodeURIComponent(JSON.stringify(bidRequestObject));\n        if (outputUri.length > this.CONSTANTS.MAX_URL_LENGTH) {\n          writeLongRequest = true;\n          if (bidRequestObject.bid_request.imp.length > 1) {\n            // Pop the current request and process it again in the next iteration\n            bidRequestObject.bid_request.imp.pop();\n            if (returnIdMappings) {\n              returnObject.idMappings.pop();\n            }\n            counter--;\n          }\n        }\n\n        if (writeLongRequest ||\n            !requestParameters.singleRequestMode ||\n            counter === impressionObjects.length - 1) {\n          returnObject.requests.push(this.formatRequest(requestParameters, bidRequestObject));\n          bidRequestObject = {\n            bid_request: this.createBasicBidRequestObject(requestParameters, extraRequestParameters)\n          };\n        }\n      }\n    }\n\n    if (errors) {\n      returnObject.errors = errors;\n    }\n\n    return returnObject;\n  };\n\n  this.formatRequest = function(requestParameters, bidRequestObject) {\n    switch (requestParameters.returnObjType) {\n      case this.CONSTANTS.RETURN_OBJ_TYPE.URL_PARAMS_SPLIT:\n        return {\n          method: 'GET',\n          url: `//${this.CONSTANTS.AD_SERVER_BASE_URL}/${this.CONSTANTS.END_POINT}`,\n          data: `${this.CONSTANTS.AD_SERVER_URL_PARAM}${JSON.stringify(bidRequestObject)}`\n        };\n      default:\n        const baseUrl = `${(requestParameters.secure === 1 ? 'https' : 'http')}://` +\n          `${this.CONSTANTS.AD_SERVER_BASE_URL}/` +\n          `${this.CONSTANTS.END_POINT}?${this.CONSTANTS.AD_SERVER_URL_PARAM}`;\n        return {\n          url: baseUrl + encodeURIComponent(JSON.stringify(bidRequestObject))\n        }\n    }\n  };\n\n  this.createBasicBidRequestObject = function(requestParameters, extraRequestParameters) {\n    let impressionBidRequestObject = {};\n    if (requestParameters.requestId) {\n      impressionBidRequestObject.id = requestParameters.requestId;\n    } else {\n      impressionBidRequestObject.id = utils.getUniqueIdentifierStr();\n    }\n    if (requestParameters.domain) {\n      impressionBidRequestObject.domain = requestParameters.domain;\n    }\n    if (requestParameters.page) {\n      impressionBidRequestObject.page = requestParameters.page;\n    }\n    if (requestParameters.ref) {\n      impressionBidRequestObject.ref = requestParameters.ref;\n    }\n    if (requestParameters.callback) {\n      impressionBidRequestObject.callback = requestParameters.callback;\n    }\n    if ('secure' in requestParameters) {\n      impressionBidRequestObject.secure = requestParameters.secure;\n    }\n    if (requestParameters.libVersion) {\n      impressionBidRequestObject.version = requestParameters.libVersion + '-' + this.CONSTANTS.CLIENT_VERSION;\n    }\n    if (requestParameters.referrer) {\n      impressionBidRequestObject.referrer = requestParameters.referrer;\n    }\n    if (requestParameters.gdpr) {\n      impressionBidRequestObject.gdpr = requestParameters.gdpr;\n    }\n    if (extraRequestParameters) {\n      for (let prop in extraRequestParameters) {\n        impressionBidRequestObject[prop] = extraRequestParameters[prop];\n      }\n    }\n\n    return impressionBidRequestObject;\n  };\n\n  this.createImpressionObject = function(placementObject) {\n    let outputObject = {};\n    let impressionObject = {};\n    outputObject.impressionObject = impressionObject;\n\n    if (placementObject.id) {\n      impressionObject.id = placementObject.id;\n    } else {\n      impressionObject.id = utils.getUniqueIdentifierStr();\n    }\n    if (placementObject.adUnitId) {\n      outputObject.adUnitId = placementObject.adUnitId;\n    }\n    if (placementObject.currency) {\n      impressionObject.currency = placementObject.currency.toUpperCase();\n    }\n    if (placementObject.placementId) {\n      impressionObject.pid = placementObject.placementId;\n    }\n    if (placementObject.publisherId) {\n      impressionObject.pubid = placementObject.publisherId;\n    }\n    if (placementObject.placementKey) {\n      impressionObject.pkey = placementObject.placementKey;\n    }\n    if (placementObject.transactionId) {\n      impressionObject.tid = placementObject.transactionId;\n    }\n    if (placementObject.keyValues) {\n      for (let key in placementObject.keyValues) {\n        for (let valueCounter = 0; valueCounter < placementObject.keyValues[key].length; valueCounter++) {\n          impressionObject.kvw = impressionObject.kvw || {};\n          impressionObject.kvw[key] = impressionObject.kvw[key] || [];\n          impressionObject.kvw[key].push(placementObject.keyValues[key][valueCounter]);\n        }\n      }\n    }\n    if (placementObject.size && placementObject.size.w && placementObject.size.h) {\n      impressionObject.banner = {};\n      impressionObject.banner.w = placementObject.size.w;\n      impressionObject.banner.h = placementObject.size.h;\n    } else {\n      impressionObject.banner = {};\n    }\n\n    if (!impressionObject.pid &&\n    !impressionObject.pubid &&\n    !impressionObject.pkey &&\n    !(impressionObject.banner && impressionObject.banner.w && impressionObject.banner.h)) {\n      outputObject.impressionObject = null;\n      outputObject.errorCode = this.CONSTANTS.ERROR_CODES.MISSING_PLACEMENT_PARAMS;\n    }\n    return outputObject;\n  };\n}\n\nexports.ImproveDigitalAdServerJSClient = ImproveDigitalAdServerJSClient;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/improvedigitalBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'innity';\nconst ENDPOINT = location.protocol + '//as.innity.com/synd/';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return !!(bid.params && bid.params.pub && bid.params.zone);\n  },\n  buildRequests: function(validBidRequests) {\n    return validBidRequests.map(bidRequest => {\n      let parseSized = utils.parseSizesInput(bidRequest.sizes);\n      let arrSize = parseSized[0].split('x');\n      return {\n        method: 'GET',\n        url: ENDPOINT,\n        data: {\n          cb: utils.timestamp(),\n          ver: 2,\n          hb: 1,\n          output: 'js',\n          pub: bidRequest.params.pub,\n          zone: bidRequest.params.zone,\n          url: encodeURIComponent(utils.getTopWindowUrl()),\n          width: arrSize[0],\n          height: arrSize[1],\n          vpw: window.screen.width,\n          vph: window.screen.height,\n          callback: 'json',\n          callback_uid: bidRequest.bidId,\n          auction: bidRequest.auctionId,\n        },\n      };\n    });\n  },\n  interpretResponse: function(serverResponse, request) {\n    const res = serverResponse.body;\n    const bidResponse = {\n      requestId: res.callback_uid,\n      cpm: parseFloat(res.cpm) / 100,\n      width: res.width,\n      height: res.height,\n      creativeId: res.creative_id,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 60,\n      ad: '<script src=\"' + location.protocol + '//cdn.innity.net/frame_util.js\"></script>' + res.tag,\n    };\n    return [bidResponse];\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/innityBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'inskin';\n\nconst CONFIG = {\n  'inskin': {\n    'BASE_URI': 'https://mfad.inskinad.com/api/v2'\n  }\n};\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.networkId && bid.params.siteId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @param {bidderRequest} - the full bidder request object\n   * @return ServerRequest Info describing the request to the server.\n   */\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    // Do we need to group by bidder? i.e. to make multiple requests for\n    // different endpoints.\n\n    let ret = {\n      method: 'POST',\n      url: '',\n      data: '',\n      bidRequest: []\n    };\n\n    if (validBidRequests.length < 1) {\n      return ret;\n    }\n\n    let ENDPOINT_URL;\n\n    const data = Object.assign({\n      placements: [],\n      time: Date.now(),\n      user: {},\n      url: utils.getTopWindowUrl(),\n      enableBotFiltering: true,\n      includePricingData: true,\n      parallel: true\n    }, validBidRequests[0].params);\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      data.consent = {\n        gdprConsentString: bidderRequest.gdprConsent.consentString,\n        // will check if the gdprApplies field was populated with a boolean value (ie from page config).  If it's undefined, then default to true\n        gdprConsentRequired: (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true\n      };\n    }\n\n    validBidRequests.map(bid => {\n      let config = CONFIG[bid.bidder];\n      ENDPOINT_URL = config.BASE_URI;\n\n      const placement = Object.assign({\n        divName: bid.bidId,\n        adTypes: bid.adTypes || getSize(bid.sizes),\n        eventIds: [40, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295]\n      }, bid.params);\n\n      placement.adTypes.push(5, 9, 163, 2163, 3006);\n\n      if (placement.networkId && placement.siteId) {\n        data.placements.push(placement);\n      }\n    });\n\n    ret.data = JSON.stringify(data);\n    ret.bidRequest = validBidRequests;\n    ret.url = ENDPOINT_URL;\n\n    return ret;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    let bid;\n    let bids;\n    let bidId;\n    let bidObj;\n    let bidResponses = [];\n    let bidsMap = {};\n\n    bids = bidRequest.bidRequest;\n\n    serverResponse = (serverResponse || {}).body;\n    for (let i = 0; i < bids.length; i++) {\n      bid = {};\n      bidObj = bids[i];\n      bidId = bidObj.bidId;\n\n      bidsMap[bidId] = bidObj;\n\n      if (serverResponse) {\n        const decision = serverResponse.decisions && serverResponse.decisions[bidId];\n        const price = decision && decision.pricing && decision.pricing.clearPrice;\n\n        if (decision && price) {\n          bid.requestId = bidId;\n          bid.cpm = price;\n          bid.width = decision.width;\n          bid.height = decision.height;\n          bid.ad = retrieveAd(bidId, decision);\n          bid.currency = 'USD';\n          bid.creativeId = decision.adId;\n          bid.ttl = 360;\n          bid.netRevenue = true;\n          bid.referrer = utils.getTopWindowUrl();\n\n          bidResponses.push(bid);\n        }\n      }\n    }\n\n    if (bidResponses.length) {\n      window.addEventListener('message', function(e) {\n        if (!e.data || e.data.from !== 'ism-bid') {\n          return;\n        }\n\n        const decision = serverResponse.decisions && serverResponse.decisions[e.data.bidId];\n        if (!decision) {\n          return;\n        }\n\n        const id = 'ism_tag_' + Math.floor((Math.random() * 10e16));\n        window[id] = {\n          bidId: e.data.bidId,\n          serverResponse\n        };\n        const script = document.createElement('script');\n        script.src = 'https://cdn.inskinad.com/isfe/publishercode/' + bidsMap[e.data.bidId].params.siteId + '/default.js?autoload&id=' + id;\n        document.getElementsByTagName('head')[0].appendChild(script);\n      });\n    }\n\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    const userSyncs = [];\n\n    if (syncOptions.pixelEnabled) {\n      userSyncs.push({\n        type: 'image',\n        url: 'https://e.serverbid.com/udb/9969/match?redir=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fpool%2Fset%2Fi.gif%3FpoolId%3D9969%26poolKey%3D'\n      });\n      userSyncs.push({\n        type: 'image',\n        url: 'https://ssum.casalemedia.com/usermatchredir?s=185638&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D'\n      });\n    }\n\n    if (syncOptions.iframeEnabled) {\n      userSyncs.push({\n        type: 'iframe',\n        url: 'https://ssum-sec.casalemedia.com/usermatch?s=184665&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D'\n      });\n    }\n\n    return userSyncs;\n  }\n};\n\nconst sizeMap = [\n  null,\n  '120x90',\n  '120x90',\n  '468x60',\n  '728x90',\n  '300x250',\n  '160x600',\n  '120x600',\n  '300x100',\n  '180x150',\n  '336x280',\n  '240x400',\n  '234x60',\n  '88x31',\n  '120x60',\n  '120x240',\n  '125x125',\n  '220x250',\n  '250x250',\n  '250x90',\n  '0x0',\n  '200x90',\n  '300x50',\n  '320x50',\n  '320x480',\n  '185x185',\n  '620x45',\n  '300x125',\n  '800x250'\n];\n\nsizeMap[77] = '970x90';\nsizeMap[123] = '970x250';\nsizeMap[43] = '300x600';\n\nfunction getSize(sizes) {\n  const result = [];\n  sizes.forEach(function(size) {\n    const index = sizeMap.indexOf(size[0] + 'x' + size[1]);\n    if (index >= 0) {\n      result.push(index);\n    }\n  });\n  return result;\n}\n\nfunction retrieveAd(bidId, decision) {\n  return \"<script>window.top.postMessage({from: 'ism-bid', bidId: '\" + bidId + \"'}, '*');\\x3c/script>\" + utils.createTrackPixelHtml(decision.impressionUrl);\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/inskinBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\n\nconst BIDDER_CODE = 'interactiveOffers';\nconst BIDDER_ENDPOINT = 'https://connect.interactiveoffers.com/api/endpoint.php';\nconst TIMEOUT_DEFAULT = 5000;\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['ino'],\n  isBidRequestValid: function(bid) {\n    if (!('params' in bid)) {\n      utils.logError(bid.bidder + ': No required params, please check your settings');\n      return false;\n    }\n    if (!(bid.params.pubId)) {\n      utils.logError(bid.bidder + ': No required param pubId, please check your settings');\n      return false;\n    }\n    return true;\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    let serverRequests = [];\n    for (let i = 0; i < validBidRequests.length; i++) {\n      let bidRequest = validBidRequests[i];\n      let bidRequestParams = bidRequest.params;\n      let pubId = utils.getBidIdParameter('pubId', bidRequestParams);\n\n      // Loc param is optional but always is sent to endpoint\n      let location = utils.getBidIdParameter('loc', bidRequestParams);\n      if (!location) {\n        location = utils.getTopWindowUrl();\n      }\n\n      // Tmax param is optional but always is sent to endpoint\n      let tmax = utils.getBidIdParameter('tmax', bidRequestParams);\n      if (!tmax) {\n        tmax = TIMEOUT_DEFAULT;\n      }\n\n      serverRequests.push({\n        method: 'POST',\n        url: BIDDER_ENDPOINT,\n        data: Object.assign({\n          'pubId': pubId,\n          'bidId': utils.getUniqueIdentifierStr(),\n          'loc': location,\n          'tmax': tmax,\n          'sizes': bidRequest.sizes\n        }),\n        options: {withCredentials: false},\n        bidRequest: bidRequest\n      });\n    }\n    return serverRequests;\n  },\n\n  interpretResponse: function(serverResponse, request) {\n    let bidResponses = [];\n    if (!serverResponse || serverResponse.error) {\n      utils.logError(BIDDER_CODE + ': server response error', serverResponse);\n      return bidResponses;\n    }\n\n    const serverBody = serverResponse.body;\n    if (!serverBody || serverBody.success !== 'true') {\n      utils.logError(BIDDER_CODE + ': empty bid response');\n      return bidResponses;\n    }\n\n    const serverPayloadData = serverBody.payloadData;\n    if (!serverPayloadData || Array.isArray(serverPayloadData)) {\n      utils.logError(BIDDER_CODE + ': server response no data', serverResponse);\n      return bidResponses;\n    }\n\n    const CPM = serverPayloadData.cpm;\n    if (CPM > 0) {\n      let bidResponse = {\n        requestId: request.bidRequest.bidId,\n        cpm: CPM,\n        width: serverPayloadData.width,\n        height: serverPayloadData.height,\n        creativeId: serverPayloadData.bidId,\n        ttl: config.getConfig('_bidderTimeout'),\n        referrer: utils.getTopWindowUrl(),\n        currency: 'USD',\n        netRevenue: true,\n        ad: serverPayloadData.ad\n      };\n      bidResponses.push(bidResponse);\n    }\n\n    return bidResponses;\n  },\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/interactiveOffersBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst CONSTANTS = {\n  BIDDER_CODE: 'invibes',\n  BID_ENDPOINT: '//bid.videostep.com/Bid/VideoAdContent',\n  SYNC_ENDPOINT: '//k.r66net.com/GetUserSync',\n  TIME_TO_LIVE: 300,\n  DEFAULT_CURRENCY: 'EUR',\n  PREBID_VERSION: 1,\n  METHOD: 'GET'\n};\n\nexport const spec = {\n  code: CONSTANTS.BIDDER_CODE,\n  /**\n   * @param {object} bid\n   * @return boolean\n   */\n  isBidRequestValid: isBidRequestValid,\n  /**\n   * @param {BidRequest[]} bidRequests\n   * @param bidderRequest\n   * @return ServerRequest[]\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    return buildRequest(bidRequests, bidderRequest != null ? bidderRequest.auctionStart : null);\n  },\n  /**\n   * @param {*} responseObj\n   * @param {requestParams} bidRequests\n   * @return {Bid[]} An array of bids which\n   */\n  interpretResponse: function (responseObj, requestParams) {\n    return handleResponse(responseObj, requestParams != null ? requestParams.bidRequests : null);\n  },\n  getUserSyncs: function (syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      handlePostMessage();\n      const syncUrl = buildSyncUrl();\n\n      return {\n        type: 'iframe',\n        url: syncUrl\n      };\n    }\n  }\n};\n\nregisterBidder(spec);\n\n// some state info is required: cookie info, unique user visit id\nconst topWin = getTopMostWindow();\nlet invibes = topWin.invibes = topWin.invibes || {};\nlet _customUserSync;\n\nfunction isBidRequestValid(bid) {\n  if (typeof bid.params !== 'object') {\n    return false;\n  }\n  let params = bid.params;\n\n  if (params.placementId == null) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction buildRequest(bidRequests, auctionStart) {\n  // invibes only responds to 1 bid request for each user visit\n  const _placementIds = [];\n  let _loginId, _customEndpoint;\n  let _ivAuctionStart = auctionStart || Date.now();\n\n  bidRequests.forEach(function (bidRequest) {\n    bidRequest.startTime = new Date().getTime();\n    _placementIds.push(bidRequest.params.placementId);\n    _loginId = _loginId || bidRequest.params.loginId;\n    _customEndpoint = _customEndpoint || bidRequest.params.customEndpoint;\n    _customUserSync = _customUserSync || bidRequest.params.customUserSync;\n  });\n\n  invibes.visitId = invibes.visitId || generateRandomId();\n\n  cookieDomain = detectTopmostCookieDomain();\n  invibes.noCookies = invibes.noCookies || invibes.getCookie('ivNoCookie');\n  invibes.optIn = invibes.optIn || invibes.getCookie('ivOptIn');\n\n  initDomainId();\n\n  const currentQueryStringParams = parseQueryStringParams();\n\n  let data = {\n    location: getDocumentLocation(topWin),\n    videoAdHtmlId: generateRandomId(),\n    showFallback: currentQueryStringParams['advs'] === '0',\n    ivbsCampIdsLocal: invibes.getCookie('IvbsCampIdsLocal'),\n    lId: invibes.dom.id,\n\n    bidParamsJson: JSON.stringify({\n      placementIds: _placementIds,\n      loginId: _loginId,\n      auctionStartTime: _ivAuctionStart,\n      bidVersion: CONSTANTS.PREBID_VERSION\n    }),\n    capCounts: getCappedCampaignsAsString(),\n\n    vId: invibes.visitId,\n    width: topWin.innerWidth,\n    height: topWin.innerHeight,\n\n    noc: !cookieDomain\n  };\n\n  if (invibes.optIn) {\n    data.oi = 1;\n  }\n\n  const parametersToPassForward = 'videoaddebug,advs,bvci,bvid,istop,trybvid,trybvci'.split(',');\n  for (let key in currentQueryStringParams) {\n    if (currentQueryStringParams.hasOwnProperty(key)) {\n      let value = currentQueryStringParams[key];\n      if (parametersToPassForward.indexOf(key) > -1 || /^vs|^invib/i.test(key)) {\n        data[key] = value;\n      }\n    }\n  }\n\n  return {\n    method: CONSTANTS.METHOD,\n    url: _customEndpoint || CONSTANTS.BID_ENDPOINT,\n    data: data,\n    options: { withCredentials: true },\n    // for POST: { contentType: 'application/json', withCredentials: true }\n    bidRequests: bidRequests\n  };\n}\n\nfunction handleResponse(responseObj, bidRequests) {\n  if (bidRequests == null || bidRequests.length === 0) {\n    utils.logInfo('Invibes Adapter - No bids have been requested');\n    return [];\n  }\n\n  if (!responseObj) {\n    utils.logInfo('Invibes Adapter - Bid response is empty');\n    return [];\n  }\n\n  responseObj = responseObj.body || responseObj;\n  responseObj = responseObj.videoAdContentResult || responseObj;\n\n  let bidModel = responseObj.BidModel;\n  if (typeof bidModel !== 'object') {\n    utils.logInfo('Invibes Adapter - Bidding is not configured');\n    return [];\n  }\n\n  if (typeof invibes.bidResponse === 'object') {\n    utils.logInfo('Invibes Adapter - Bid response already received. Invibes only responds to one bid request per user visit');\n    return [];\n  }\n\n  invibes.bidResponse = responseObj;\n\n  let ads = responseObj.Ads;\n\n  if (!Array.isArray(ads) || ads.length < 1) {\n    if (responseObj.AdReason != null) {\n      utils.logInfo('Invibes Adapter - ' + responseObj.AdReason);\n    }\n\n    utils.logInfo('Invibes Adapter - No ads available');\n    return [];\n  }\n\n  let ad = ads[0];\n\n  if (bidModel.PlacementId == null) {\n    utils.logInfo('Invibes Adapter - No Placement Id in response');\n    return [];\n  }\n\n  const bidResponses = [];\n  for (let i = 0; i < bidRequests.length; i++) {\n    let bidRequest = bidRequests[i];\n\n    if (bidModel.PlacementId === bidRequest.params.placementId) {\n      let size = getBiggerSize(bidRequest.sizes);\n\n      bidResponses.push({\n        requestId: bidRequest.bidId,\n        cpm: ad.BidPrice,\n        width: bidModel.Width || size[0],\n        height: bidModel.Height || size[1],\n        creativeId: ad.VideoExposedId,\n        currency: bidModel.Currency || CONSTANTS.DEFAULT_CURRENCY,\n        netRevenue: true,\n        ttl: CONSTANTS.TIME_TO_LIVE,\n        ad: renderCreative(bidModel)\n      });\n\n      const now = Date.now();\n      ivLogger.info('Bid auction started at ' + bidModel.AuctionStartTime + ' . Invibes registered the bid at ' + now + ' ; bid request took a total of ' + (now - bidModel.AuctionStartTime) + ' ms.');\n    } else {\n      utils.logInfo('Invibes Adapter - Incorrect Placement Id: ' + bidRequest.params.placementId);\n    }\n  }\n\n  return bidResponses;\n}\n\nfunction generateRandomId() {\n  return (Math.round(Math.random() * 1e12)).toString(36).substring(0, 10);\n}\n\nfunction getDocumentLocation(topWin) {\n  return topWin.location.href.substring(0, 300).split(/[?#]/)[0];\n}\n\nfunction parseQueryStringParams() {\n  let params = {};\n  try { params = JSON.parse(localStorage.ivbs); } catch (e) { }\n  let re = /[\\\\?&]([^=]+)=([^\\\\?&#]+)/g;\n  let m;\n  while ((m = re.exec(window.location.href)) != null) {\n    if (m.index === re.lastIndex) {\n      re.lastIndex++;\n    }\n    params[m[1].toLowerCase()] = m[2];\n  }\n  return params;\n}\n\nfunction getBiggerSize(array) {\n  let result = [0, 0];\n  for (let i = 0; i < array.length; i++) {\n    if (array[i][0] * array[i][1] > result[0] * result[1]) {\n      result = array[i];\n    }\n  }\n  return result;\n}\n\nfunction getTopMostWindow() {\n  let res = window;\n\n  try {\n    while (top !== res) {\n      if (res.parent.location.href.length) { res = res.parent; }\n    }\n  } catch (e) { }\n\n  return res;\n}\n\nfunction renderCreative(bidModel) {\n  return `<html>\n        <head><script type='text/javascript'>inDapIF=true;</script></head>\n          <body style='margin : 0; padding: 0;'>\n          creativeHtml\n          </body>\n        </html>`\n    .replace('creativeHtml', bidModel.CreativeHtml);\n}\n\nfunction getCappedCampaignsAsString() {\n  const key = 'ivvcap';\n\n  let loadData = function () {\n    try {\n      return JSON.parse(localStorage.getItem(key)) || {};\n    } catch (e) {\n      return {};\n    }\n  };\n\n  let saveData = function (data) {\n    localStorage.setItem(key, JSON.stringify(data));\n  };\n\n  let clearExpired = function () {\n    let now = new Date().getTime();\n    let data = loadData();\n    let dirty = false;\n    Object.keys(data).forEach(function (k) {\n      let exp = data[k][1];\n      if (exp <= now) {\n        delete data[k];\n        dirty = true;\n      }\n    });\n    if (dirty) {\n      saveData(data);\n    }\n  };\n\n  let getCappedCampaigns = function () {\n    clearExpired();\n    let data = loadData();\n    return Object.keys(data)\n      .filter(function (k) { return data.hasOwnProperty(k); })\n      .sort()\n      .map(function (k) { return [k, data[k][0]]; });\n  };\n\n  return getCappedCampaigns()\n    .map(function (record) { return record.join('='); })\n    .join(',');\n}\n\nconst noop = function () { };\n\nfunction initLogger() {\n  if (localStorage && localStorage.InvibesDEBUG) {\n    return window.console;\n  }\n\n  return { info: noop, error: noop, log: noop, warn: noop, debug: noop };\n}\n\nfunction buildSyncUrl() {\n  let syncUrl = _customUserSync || CONSTANTS.SYNC_ENDPOINT;\n  syncUrl += '?visitId=' + invibes.visitId;\n\n  if (invibes.optIn) {\n    syncUrl += '&optIn=1';\n  }\n\n  const did = invibes.getCookie('ivbsdid');\n  if (did) {\n    syncUrl += '&ivbsdid=' + encodeURIComponent(did);\n  }\n\n  const bks = invibes.getCookie('ivvbks');\n  if (bks) {\n    syncUrl += '&ivvbks=' + encodeURIComponent(bks);\n  }\n\n  return syncUrl;\n}\n\nfunction handlePostMessage() {\n  try {\n    if (window.addEventListener) {\n      window.addEventListener('message', acceptPostMessage);\n    }\n  } catch (e) { }\n}\n\nfunction acceptPostMessage(e) {\n  let msg = e.data || {};\n  if (msg.ivbscd === 1) {\n    invibes.setCookie(msg.name, msg.value, msg.exdays, msg.domain);\n  } else if (msg.ivbscd === 2) {\n    invibes.dom.graduate();\n  }\n}\n\nconst ivLogger = initLogger();\n\n/// Local domain cookie management =====================\ninvibes.Uid = {\n  generate: function () {\n    let maxRand = parseInt('zzzzzz', 36)\n    let mkRand = function () { return Math.floor(Math.random() * maxRand).toString(36); };\n    let rand1 = mkRand();\n    let rand2 = mkRand();\n    return rand1 + rand2;\n  }\n};\n\nlet cookieDomain;\ninvibes.getCookie = function (name) {\n  let i, x, y;\n  let cookies = document.cookie.split(';');\n  for (i = 0; i < cookies.length; i++) {\n    x = cookies[i].substr(0, cookies[i].indexOf('='));\n    y = cookies[i].substr(cookies[i].indexOf('=') + 1);\n    x = x.replace(/^\\s+|\\s+$/g, '');\n    if (x === name) {\n      return unescape(y);\n    }\n  }\n};\n\ninvibes.setCookie = function (name, value, exdays, domain) {\n  let whiteListed = name == 'ivNoCookie' || name == 'IvbsCampIdsLocal';\n  if (invibes.noCookies && !whiteListed && (exdays || 0) >= 0) { return; }\n  if (exdays > 365) { exdays = 365; }\n  domain = domain || cookieDomain;\n  let exdate = new Date();\n  let exms = exdays * 24 * 60 * 60 * 1000;\n  exdate.setTime(exdate.getTime() + exms);\n  let cookieValue = value + ((!exdays) ? '' : '; expires=' + exdate.toUTCString());\n  cookieValue += ';domain=' + domain + ';path=/';\n  document.cookie = name + '=' + cookieValue;\n};\n\nlet detectTopmostCookieDomain = function () {\n  let testCookie = invibes.Uid.generate();\n  let hostParts = location.host.split('.');\n  if (hostParts.length === 1) {\n    return location.host;\n  }\n  for (let i = hostParts.length - 1; i >= 0; i--) {\n    let domain = '.' + hostParts.slice(i).join('.');\n    invibes.setCookie(testCookie, testCookie, 1, domain);\n    let val = invibes.getCookie(testCookie);\n    if (val === testCookie) {\n      invibes.setCookie(testCookie, testCookie, -1, domain);\n      return domain;\n    }\n  }\n};\n\nlet initDomainId = function (options) {\n  if (invibes.dom) { return; }\n\n  options = options || {};\n\n  let cookiePersistence = {\n    cname: 'ivbsdid',\n    load: function () {\n      let str = invibes.getCookie(this.cname) || '';\n      try {\n        return JSON.parse(str);\n      } catch (e) { }\n    },\n    save: function (obj) {\n      invibes.setCookie(this.cname, JSON.stringify(obj), 365);\n    }\n  };\n\n  let persistence = options.persistence || cookiePersistence;\n  let state;\n  let minHC = 7;\n\n  let validGradTime = function (state) {\n    if (!state.cr) { return false; }\n    let min = 151 * 10e9;\n    if (state.cr < min) {\n      return false;\n    }\n    let now = new Date().getTime();\n    let age = now - state.cr;\n    let minAge = 24 * 60 * 60 * 1000;\n    return age > minAge;\n  };\n\n  state = persistence.load() || {\n    id: invibes.Uid.generate(),\n    cr: new Date().getTime(),\n    hc: 1,\n  };\n\n  if (state.id.match(/\\./)) {\n    state.id = invibes.Uid.generate();\n  }\n\n  let graduate;\n\n  let setId = function () {\n    invibes.dom = {\n      id: !state.cr && invibes.optIn ? state.id : undefined,\n      tempId: invibes.optIn ? state.id : undefined,\n      graduate: graduate\n    };\n  };\n\n  graduate = function () {\n    if (!state.cr) { return; }\n    delete state.cr;\n    delete state.hc;\n    persistence.save(state);\n    setId();\n  }\n\n  if (state.cr && !options.noVisit) {\n    if (state.hc < minHC) {\n      state.hc++;\n    }\n    if (state.hc >= minHC && validGradTime(state)) {\n      graduate();\n    }\n  }\n  persistence.save(state);\n  setId();\n  ivLogger.info('Did=' + invibes.dom.id);\n};\n// =====================\n\nexport function resetInvibes() {\n  invibes.optIn = undefined;\n  invibes.noCookies = undefined;\n  invibes.dom = undefined;\n  invibes.bidResponse = undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/invibesBidAdapter.js","import * as utils from 'src/utils';\n// import {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'iqm';\nconst ENDPOINT_URL = 'https://pbd.bids.iqm.com';\nconst VERSION = 'v.1.0.0';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['iqm'], // short code\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.publisherId && bid.params.placementId && bid.params.tagId);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @return ServerRequest Info describing the request to the server.\n   * @param validBidRequests - an array of bids\n   */\n  buildRequests: function(validBidRequests) {\n    let requestId = '';\n    let siteId = '';\n    let device = getDevice();\n    return validBidRequests.map(bid => {\n      requestId = bid.requestId;\n      let bidfloor = utils.getBidIdParameter('bidfloor', bid.params);\n      siteId = utils.getBidIdParameter('tagId', bid.params);\n      const imp = {\n        id: bid.bidId,\n        secure: 1,\n        bidfloor: bidfloor || 0,\n        displaymanager: 'Prebid.js',\n        displaymanagerver: VERSION,\n        mediatype: 'banner'\n      };\n      imp.banner = getSize(bid.sizes);\n      let data = {\n        id: requestId,\n        publisherId: utils.getBidIdParameter('publisherId', bid.params),\n        tagId: utils.getBidIdParameter('tagId', bid.params),\n        placementId: utils.getBidIdParameter('placementId', bid.params),\n        device: device,\n        site: {\n          id: siteId,\n          page: utils.getTopWindowLocation().href,\n          domain: utils.getTopWindowLocation().host\n        },\n        imp: imp\n      };\n      return {\n        method: 'POST',\n        url: ENDPOINT_URL,\n        data: data\n      };\n    });\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param bidRequest\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    // const serverBody = serverResponse.body;\n    // const headerValue = serverResponse.headers.get('some-response-header')\n    const bidResponses = [];\n    serverResponse = serverResponse.body;\n    if (serverResponse && utils.isArray(serverResponse.seatbid)) {\n      utils._each(serverResponse.seatbid, function(bidList) {\n        utils._each(bidList.bid, function(bid) {\n          const responseCPM = parseFloat(bid.price);\n          if (responseCPM > 0.0 && bid.impid) {\n            // const responseNurl = bid.nurl || '';\n            const bidResponse = {\n              requestId: bid.impid,\n              currency: serverResponse.cur || 'USD',\n              cpm: responseCPM,\n              netRevenue: true,\n              creativeId: bid.crid || '',\n              ad: bid.adm || '',\n              width: bid.w || bidRequest.data.imp.banner.w,\n              height: bid.h || bidRequest.data.imp.banner.h,\n              ttl: bid.ttl || 300\n            };\n\n            bidResponses.push(bidResponse);\n          }\n        })\n      });\n    }\n    return bidResponses;\n  }\n};\n\nlet getDevice = function () {\n  const language = navigator.language ? 'language' : 'userLanguage';\n  return {\n    h: screen.height,\n    w: screen.width,\n    dnt: _getDNT() ? 1 : 0,\n    language: navigator[language].split('-')[0],\n    make: navigator.vendor ? navigator.vendor : '',\n    ua: navigator.userAgent,\n    devicetype: _isMobile() ? 1 : _isConnectedTV() ? 3 : 2\n  };\n};\n\nlet _getDNT = function () {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNotTrack === '1' || navigator.doNotTrack === 'yes';\n};\n\nlet getSize = function (sizes) {\n  let sizeMap;\n  if (sizes.length === 2 && typeof sizes[0] === 'number' && typeof sizes[1] === 'number') {\n    sizeMap = {w: sizes[0], h: sizes[1]};\n  } else {\n    sizeMap = {w: sizes[0][0], h: sizes[0][1]};\n  }\n  return sizeMap;\n};\n\nfunction _isMobile() {\n  return (/(ios|ipod|ipad|iphone|android)/i).test(global.navigator.userAgent);\n}\n\nfunction _isConnectedTV() {\n  return (/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\\.tv|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b)/i).test(global.navigator.userAgent);\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/iqmBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER } from 'src/mediaTypes';\nimport { config } from 'src/config';\nimport isArray from 'core-js/library/fn/array/is-array';\nimport isInteger from 'core-js/library/fn/number/is-integer';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'ix';\nconst BANNER_SECURE_BID_URL = 'https://as-sec.casalemedia.com/cygnus';\nconst BANNER_INSECURE_BID_URL = 'http://as.casalemedia.com/cygnus';\nconst SUPPORTED_AD_TYPES = [BANNER];\nconst ENDPOINT_VERSION = 7.2;\nconst CENT_TO_DOLLAR_FACTOR = 100;\nconst TIME_TO_LIVE = 35;\nconst NET_REVENUE = true;\n\n// Always start by assuming the protocol is HTTPS. This way, it will work\n// whether the page protocol is HTTP or HTTPS. Then check if the page is\n// actually HTTP.If we can guarantee it is, then, and only then, set protocol to\n// HTTP.\nlet isSecureWeb = true;\nif (utils.getTopWindowLocation().protocol.indexOf('https') !== 0) {\n  isSecureWeb = false;\n}\nconst baseUrl = isSecureWeb ? BANNER_SECURE_BID_URL : BANNER_INSECURE_BID_URL;\n\nconst PRICE_TO_DOLLAR_FACTOR = {\n  JPY: 1\n};\n\n/**\n * Transform valid bid request config object to impression object that will be sent to ad server.\n *\n * @param  {object} bid A valid bid request config object.\n * @return {object}     A impression object that will be sent to ad server.\n */\nfunction bidToBannerImp(bid) {\n  const imp = {};\n\n  imp.id = bid.bidId;\n\n  imp.banner = {};\n  imp.banner.w = bid.params.size[0];\n  imp.banner.h = bid.params.size[1];\n  imp.banner.topframe = utils.inIframe() ? 0 : 1;\n\n  imp.ext = {};\n  imp.ext.siteID = bid.params.siteId;\n\n  if (bid.params.hasOwnProperty('id') &&\n    (typeof bid.params.id === 'string' || typeof bid.params.id === 'number')) {\n    imp.ext.sid = String(bid.params.id);\n  } else {\n    imp.ext.sid = `${bid.params.size[0]}x${bid.params.size[1]}`;\n  }\n\n  if (bid.params.hasOwnProperty('bidFloor') && bid.params.hasOwnProperty('bidFloorCur')) {\n    imp.bidfloor = bid.params.bidFloor;\n    imp.bidfloorcur = bid.params.bidFloorCur;\n  }\n\n  return imp;\n}\n\n/**\n * Parses a raw bid for the relevant information.\n *\n * @param  {object} rawBid   The bid to be parsed.\n * @param  {string} currency Global currency in bid response.\n * @return {object} bid      The parsed bid.\n */\nfunction parseBid(rawBid, currency) {\n  const bid = {};\n\n  if (PRICE_TO_DOLLAR_FACTOR.hasOwnProperty(currency)) {\n    bid.cpm = rawBid.price / PRICE_TO_DOLLAR_FACTOR[currency];\n  } else {\n    bid.cpm = rawBid.price / CENT_TO_DOLLAR_FACTOR;\n  }\n\n  bid.requestId = rawBid.impid;\n  bid.width = rawBid.w;\n  bid.height = rawBid.h;\n  bid.ad = rawBid.adm;\n  bid.dealId = utils.deepAccess(rawBid, 'ext.dealid');\n  bid.ttl = TIME_TO_LIVE;\n  bid.netRevenue = NET_REVENUE;\n  bid.currency = currency;\n  bid.creativeId = rawBid.hasOwnProperty('crid') ? rawBid.crid : '-';\n\n  return bid;\n}\n\n/**\n * Determines whether or not the given object is valid size format.\n *\n * @param  {*}       size The object to be validated.\n * @return {boolean}      True if this is a valid size format, and false otherwise.\n */\nfunction isValidSize(size) {\n  return isArray(size) && size.length === 2 && isInteger(size[0]) && isInteger(size[1]);\n}\n\n/**\n * Determines whether or not the given size object is an element of the size\n * array.\n *\n * @param  {array}  sizeArray The size array.\n * @param  {object} size      The size object.\n * @return {boolean}          True if the size object is an element of the size array, and false\n *                            otherwise.\n */\nfunction includesSize(sizeArray, size) {\n  if (isValidSize(sizeArray)) {\n    return sizeArray[0] === size[0] && sizeArray[1] === size[1];\n  }\n\n  for (let i = 0; i < sizeArray.length; i++) {\n    if (sizeArray[i][0] === size[0] && sizeArray[i][1] === size[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Determines whether or not the given bidFloor parameters are valid.\n *\n * @param  {*}       bidFloor    The bidFloor parameter inside bid request config.\n * @param  {*}       bidFloorCur The bidFloorCur parameter inside bid request config.\n * @return {boolean}             True if this is a valid biFfloor parameters format, and false\n *                               otherwise.\n */\nfunction isValidBidFloorParams(bidFloor, bidFloorCur) {\n  const curRegex = /^[A-Z]{3}$/;\n\n  return Boolean(typeof bidFloor === 'number' && typeof bidFloorCur === 'string' &&\n    bidFloorCur.match(curRegex));\n}\n\nexport const spec = {\n\n  code: BIDDER_CODE,\n  supportedMediaTypes: SUPPORTED_AD_TYPES,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param  {object}  bid The bid to validate.\n   * @return {boolean}     True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    if (!isValidSize(bid.params.size)) {\n      return false;\n    }\n\n    if (!includesSize(bid.sizes, bid.params.size)) {\n      return false;\n    }\n\n    if (bid.hasOwnProperty('mediaType') && bid.mediaType !== 'banner') {\n      return false;\n    }\n\n    if (bid.hasOwnProperty('mediaTypes') && !utils.deepAccess(bid, 'mediaTypes.banner.sizes')) {\n      return false;\n    }\n\n    if (typeof bid.params.siteId !== 'string' && typeof bid.params.siteId !== 'number') {\n      return false;\n    }\n\n    const hasBidFloor = bid.params.hasOwnProperty('bidFloor');\n    const hasBidFloorCur = bid.params.hasOwnProperty('bidFloorCur');\n\n    if (hasBidFloor || hasBidFloorCur) {\n      return hasBidFloor && hasBidFloorCur &&\n        isValidBidFloorParams(bid.params.bidFloor, bid.params.bidFloorCur);\n    }\n\n    return true;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param  {array}  validBidRequests A list of valid bid request config objects.\n   * @param  {object} options          A object contains bids and other info like gdprConsent.\n   * @return {object}                  Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests, options) {\n    const bannerImps = [];\n    let validBidRequest = null;\n    let bannerImp = null;\n\n    for (let i = 0; i < validBidRequests.length; i++) {\n      validBidRequest = validBidRequests[i];\n\n      // Transform the bid request based on the banner format.\n      bannerImp = bidToBannerImp(validBidRequest);\n      bannerImps.push(bannerImp);\n    }\n\n    const r = {};\n\n    // Since bidderRequestId are the same for different bid request, just use the first one.\n    r.id = validBidRequests[0].bidderRequestId;\n\n    r.imp = bannerImps;\n    r.site = {};\n    r.site.page = utils.getTopWindowUrl();\n    r.site.ref = utils.getTopWindowReferrer();\n    r.ext = {};\n    r.ext.source = 'prebid';\n\n    // Apply GDPR information to the request if GDPR is enabled.\n    if (options && options.gdprConsent) {\n      const gdprConsent = options.gdprConsent;\n\n      if (gdprConsent.hasOwnProperty('gdprApplies')) {\n        r.regs = {\n          ext: {\n            gdpr: gdprConsent.gdprApplies ? 1 : 0\n          }\n        };\n      }\n\n      if (gdprConsent.hasOwnProperty('consentString')) {\n        r.user = {\n          ext: {\n            consent: gdprConsent.consentString || ''\n          }\n        };\n      }\n    }\n\n    const payload = {};\n\n    // Parse additional runtime configs.\n    const otherIxConfig = config.getConfig('ix');\n    if (otherIxConfig) {\n      // Append firstPartyData to r.site.page if firstPartyData exists.\n      if (typeof otherIxConfig.firstPartyData === 'object') {\n        const firstPartyData = otherIxConfig.firstPartyData;\n        let firstPartyString = '?';\n        for (const key in firstPartyData) {\n          if (firstPartyData.hasOwnProperty(key)) {\n            firstPartyString += `${encodeURIComponent(key)}=${encodeURIComponent(firstPartyData[key])}&`;\n          }\n        }\n        firstPartyString = firstPartyString.slice(0, -1);\n\n        r.site.page += firstPartyString;\n      }\n\n      // Create t in payload if timeout is configured.\n      if (typeof otherIxConfig.timeout === 'number') {\n        payload.t = otherIxConfig.timeout;\n      }\n    }\n\n    // Use the siteId in the first bid request as the main siteId.\n    payload.s = validBidRequests[0].params.siteId;\n\n    payload.v = ENDPOINT_VERSION;\n    payload.r = JSON.stringify(r);\n    payload.ac = 'j';\n    payload.sd = 1;\n\n    return {\n      method: 'GET',\n      url: baseUrl,\n      data: payload\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param  {object} serverResponse A successful response from the server.\n   * @return {array}                 An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse) {\n    const bids = [];\n    let bid = null;\n\n    if (!serverResponse.hasOwnProperty('body') || !serverResponse.body.hasOwnProperty('seatbid')) {\n      return bids;\n    }\n\n    const responseBody = serverResponse.body;\n    const seatbid = responseBody.seatbid;\n    for (let i = 0; i < seatbid.length; i++) {\n      if (!seatbid[i].hasOwnProperty('bid')) {\n        continue;\n      }\n\n      // Transform rawBid in bid response to the format that will be accepted by prebid.\n      const innerBids = seatbid[i].bid;\n      for (let j = 0; j < innerBids.length; j++) {\n        bid = parseBid(innerBids[j], responseBody.cur);\n        bids.push(bid);\n      }\n    }\n\n    return bids;\n  },\n\n  /**\n   * Covert bid param types for S2S\n   * @param {Object} params bid params\n   * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n   * @return {Object} params bid params\n   */\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'siteID': 'number'\n    }, params);\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/ixBidAdapter.js","require('../../modules/es6.array.is-array');\nmodule.exports = require('../../modules/_core').Array.isArray;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/is-array.js\n// module id = 290\n// module chunks = 0","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.is-array.js\n// module id = 291\n// module chunks = 0","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/number/is-integer.js\n// module id = 292\n// module chunks = 0","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.number.is-integer.js\n// module id = 293\n// module chunks = 0","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-integer.js\n// module id = 294\n// module chunks = 0","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'jcm';\nconst URL = '//media.adfrontiers.com/pq'\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['jcarter'],\n  isBidRequestValid: function(bid) {\n    return !!(bid.params && bid.params.siteId && bid.bidId);\n  },\n\n  buildRequests: function(validBidRequests) {\n    var BidRequestStr = {\n      bids: []\n    };\n\n    for (var i = 0; i < validBidRequests.length; i++) {\n      var adSizes = '';\n      var bid = validBidRequests[i];\n      for (var x = 0; x < bid.sizes.length; x++) {\n        adSizes += utils.parseGPTSingleSizeArray(bid.sizes[x]);\n        if (x !== (bid.sizes.length - 1)) {\n          adSizes += ',';\n        }\n      }\n\n      BidRequestStr.bids.push({\n        'callbackId': bid.bidId,\n        'siteId': bid.params.siteId,\n        'adSizes': adSizes,\n      });\n    }\n\n    var JSONStr = JSON.stringify(BidRequestStr);\n    var dataStr = 't=hb&ver=1.0&compact=true&bids=' + encodeURIComponent(JSONStr);\n\n    return {\n      method: 'GET',\n      url: URL,\n      data: dataStr\n    }\n  },\n\n  interpretResponse: function(serverResponse) {\n    const bidResponses = [];\n    serverResponse = serverResponse.body;\n    // loop through serverResponses\n    if (serverResponse) {\n      if (serverResponse.bids) {\n        var bids = serverResponse.bids;\n        for (var i = 0; i < bids.length; i++) {\n          var bid = bids[i];\n          const bidResponse = {\n            requestId: bid.callbackId,\n            bidderCode: spec.code,\n            cpm: bid.cpm,\n            width: bid.width,\n            height: bid.height,\n            creativeId: bid.creativeId,\n            currency: 'USD',\n            netRevenue: bid.netRevenue,\n            ttl: bid.ttl,\n            ad: decodeURIComponent(bid.ad.replace(/\\+/g, '%20'))\n          };\n          bidResponses.push(bidResponse);\n        };\n      };\n    }\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//media.adfrontiers.com/hb/jcm_usersync.html'\n      }];\n    }\n    if (syncOptions.image) {\n      return [{\n        type: 'image',\n        url: '//media.adfrontiers.com/hb/jcm_usersync.png'\n      }];\n    }\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/jcmBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory'\nimport { getTopWindowLocation } from 'src/utils'\n\nconst BIDDER_CODE = 'justpremium'\nconst ENDPOINT_URL = getTopWindowLocation().protocol + '//pre.ads.justpremium.com/v/2.0/t/xhr'\nconst JP_ADAPTER_VERSION = '1.2'\nconst pixels = []\nconst TRACK_START_TIME = Date.now()\nlet LAST_PAYLOAD = {}\nlet AD_UNIT_IDS = []\n\nexport const spec = {\n  code: BIDDER_CODE,\n  time: 60000,\n\n  isBidRequestValid: (bid) => {\n    return !!(bid && bid.params && bid.params.zone)\n  },\n\n  buildRequests: (validBidRequests, bidderRequest) => {\n    const c = preparePubCond(validBidRequests)\n    const dim = getWebsiteDim()\n    AD_UNIT_IDS = validBidRequests.map(b => {\n      return b.adUnitCode\n    }).filter((value, index, self) => {\n      return self.indexOf(value) === index\n    })\n    const payload = {\n      zone: validBidRequests.map(b => {\n        return parseInt(b.params.zone)\n      }).filter((value, index, self) => {\n        return self.indexOf(value) === index\n      }),\n      hostname: getTopWindowLocation().hostname,\n      protocol: getTopWindowLocation().protocol.replace(':', ''),\n      sw: dim.screenWidth,\n      sh: dim.screenHeight,\n      ww: dim.innerWidth,\n      wh: dim.innerHeight,\n      c: c,\n      id: validBidRequests[0].params.zone,\n      sizes: {}\n    }\n    validBidRequests.forEach(b => {\n      const zone = b.params.zone\n      const sizes = payload.sizes\n      sizes[zone] = sizes[zone] || []\n      sizes[zone].push.apply(sizes[zone], b.sizes)\n    })\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.gdpr_consent = {\n        consent_string: bidderRequest.gdprConsent.consentString,\n        consent_required: (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true\n      }\n    }\n\n    payload.version = {\n      prebid: '1.25.0-pre',\n      jp_adapter: JP_ADAPTER_VERSION\n    }\n\n    const payloadString = JSON.stringify(payload)\n\n    LAST_PAYLOAD = payload\n\n    return {\n      method: 'POST',\n      url: ENDPOINT_URL + '?i=' + (+new Date()),\n      data: payloadString,\n      bids: validBidRequests\n    }\n  },\n\n  interpretResponse: (serverResponse, bidRequests) => {\n    const body = serverResponse.body\n    let bidResponses = []\n    bidRequests.bids.forEach(adUnit => {\n      let bid = findBid(adUnit.params, body.bid)\n      if (bid) {\n        let size = (adUnit.sizes && adUnit.sizes.length && adUnit.sizes[0]) || []\n        let bidResponse = {\n          requestId: adUnit.bidId,\n          creativeId: bid.id,\n          width: size[0] || bid.width,\n          height: size[1] || bid.height,\n          ad: bid.adm,\n          cpm: bid.price,\n          netRevenue: true,\n          currency: bid.currency || 'USD',\n          ttl: bid.ttl || spec.time,\n          format: bid.format\n        }\n        bidResponses.push(bidResponse)\n      }\n    })\n\n    return bidResponses\n  },\n\n  getUserSyncs: function getUserSyncs(syncOptions, responses, gdprConsent) {\n    let url = '//pre.ads.justpremium.com/v/1.0/t/sync'\n    if (gdprConsent && (typeof gdprConsent.gdprApplies === 'boolean')) {\n      url = url + '?consentString=' + encodeURIComponent(gdprConsent.consentString)\n    }\n    if (syncOptions.iframeEnabled) {\n      pixels.push({\n        type: 'iframe',\n        url: url\n      })\n    }\n    return pixels\n  },\n\n  onTimeout: (timeoutData) => {\n    timeoutData.forEach((data) => {\n      if (AD_UNIT_IDS.indexOf(data.adUnitCode) != -1) {\n        track(data, LAST_PAYLOAD, 'btm')\n      }\n    })\n  },\n\n}\n\nfunction track (data, payload, type) {\n  let pubUrl = ''\n\n  let jp = {\n    auc: data.adUnitCode,\n    to: data.timeout\n  }\n\n  if (window.top == window) {\n    pubUrl = window.location.href\n  } else {\n    try {\n      pubUrl = window.top.location.href\n    } catch (e) {\n      pubUrl = document.referrer\n    }\n  }\n\n  let duration = Date.now() - TRACK_START_TIME\n\n  const pixelUrl = `${getTopWindowLocation().protocol}//emea-v3.tracking.justpremium.com/tracking.gif?rid=&sid=&uid=&vr=&\nru=${encodeURIComponent(pubUrl)}&tt=&siw=&sh=${payload.sh}&sw=${payload.sw}&wh=${payload.wh}&ww=${payload.ww}&an=&vn=&\nsd=&_c=&et=&aid=&said=&ei=&fc=&sp=&at=bidder&cid=&ist=&mg=&dl=&dlt=&ev=&vt=&zid=${payload.id}&dr=${duration}&di=&pr=&\ncw=&ch=&nt=&st=&jp=${encodeURIComponent(JSON.stringify(jp))}&ty=${type}`\n\n  let img = document.createElement('img')\n  img.src = pixelUrl\n  img.id = 'jp-pixel-track'\n  img.style.cssText = 'display:none !important;'\n  document.body.appendChild(img)\n}\n\nfunction findBid (params, bids) {\n  const tagId = params.zone\n  if (bids[tagId]) {\n    let len = bids[tagId].length\n    while (len--) {\n      if (passCond(params, bids[tagId][len])) {\n        return bids[tagId].splice(len, 1).pop()\n      }\n    }\n  }\n\n  return false\n}\n\nfunction passCond (params, bid) {\n  const format = bid.format\n\n  if (params.allow && params.allow.length) {\n    return params.allow.indexOf(format) > -1\n  }\n\n  if (params.exclude && params.exclude.length) {\n    return params.exclude.indexOf(format) < 0\n  }\n\n  return true\n}\n\nfunction preparePubCond (bids) {\n  const cond = {}\n  const count = {}\n\n  bids.forEach((bid) => {\n    const params = bid.params\n    const zone = params.zone\n\n    if (cond[zone] === 1) {\n      return\n    }\n\n    const allow = params.allow || params.formats || []\n    const exclude = params.exclude || []\n\n    if (allow.length === 0 && exclude.length === 0) {\n      return cond[params.zone] = 1\n    }\n\n    cond[zone] = cond[zone] || [[], {}]\n    cond[zone][0] = arrayUnique(cond[zone][0].concat(allow))\n    exclude.forEach((e) => {\n      if (!cond[zone][1][e]) {\n        cond[zone][1][e] = 1\n      } else {\n        cond[zone][1][e]++\n      }\n    })\n\n    count[zone] = count[zone] || 0\n    if (exclude.length) {\n      count[zone]++\n    }\n  })\n\n  Object.keys(count).forEach((zone) => {\n    if (cond[zone] === 1) return\n\n    const exclude = []\n    Object.keys(cond[zone][1]).forEach((format) => {\n      if (cond[zone][1][format] === count[zone]) {\n        exclude.push(format)\n      }\n    })\n    cond[zone][1] = exclude\n  })\n\n  Object.keys(cond).forEach((zone) => {\n    if (cond[zone] !== 1 && cond[zone][1].length) {\n      cond[zone][0].forEach((r) => {\n        let idx = cond[zone][1].indexOf(r)\n        if (idx > -1) {\n          cond[zone][1].splice(idx, 1)\n        }\n      })\n      cond[zone][0].length = 0\n    }\n\n    if (cond[zone] !== 1 && !cond[zone][0].length && !cond[zone][1].length) {\n      cond[zone] = 1\n    }\n  })\n\n  return cond\n}\n\nfunction arrayUnique (array) {\n  const a = array.concat()\n  for (let i = 0; i < a.length; ++i) {\n    for (let j = i + 1; j < a.length; ++j) {\n      if (a[i] === a[j]) {\n        a.splice(j--, 1)\n      }\n    }\n  }\n\n  return a\n}\n\nfunction getWebsiteDim () {\n  let top\n  try {\n    top = window.top\n  } catch (e) {\n    top = window\n  }\n\n  return {\n    screenWidth: top.screen.width,\n    screenHeight: top.screen.height,\n    innerWidth: top.innerWidth,\n    innerHeight: top.innerHeight\n  }\n}\n\nregisterBidder(spec)\n\n\n\n// WEBPACK FOOTER //\n// ./modules/justpremiumBidAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\n\nvar kargoAdapter = adapter({\n  analyticsType: 'endpoint',\n  url: 'https://krk.kargo.com/api/v1/event/prebid'\n});\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: kargoAdapter,\n  code: 'kargo'\n});\n\nexport default kargoAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/kargoAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'kargo';\nconst HOST = 'https://krk.kargo.com';\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    if (!bid || !bid.params) {\n      return false;\n    }\n    return !!bid.params.placementId;\n  },\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const currencyObj = config.getConfig('currency');\n    const currency = (currencyObj && currencyObj.adServerCurrency) || 'USD';\n    const bidIds = {};\n    utils._each(validBidRequests, bid => bidIds[bid.bidId] = bid.params.placementId);\n    const transformedParams = Object.assign({}, {\n      timeout: bidderRequest.timeout,\n      currency: currency,\n      cpmGranularity: 1,\n      timestamp: (new Date()).getTime(),\n      cpmRange: {\n        floor: 0,\n        ceil: 20\n      },\n      bidIDs: bidIds\n    }, spec._getAllMetadata());\n    const encodedParams = encodeURIComponent(JSON.stringify(transformedParams));\n    return Object.assign({}, bidderRequest, {\n      method: 'GET',\n      url: `${HOST}/api/v2/bid`,\n      data: `json=${encodedParams}`,\n      currency: currency\n    });\n  },\n  interpretResponse: function(response, bidRequest) {\n    let bids = response.body;\n    const bidResponses = [];\n    for (let bidId in bids) {\n      let adUnit = bids[bidId];\n      bidResponses.push({\n        requestId: bidId,\n        cpm: Number(adUnit.cpm),\n        width: adUnit.width,\n        height: adUnit.height,\n        ad: adUnit.adm,\n        ttl: 300,\n        creativeId: adUnit.id,\n        netRevenue: true,\n        currency: bidRequest.currency\n      });\n    }\n    return bidResponses;\n  },\n\n  // PRIVATE\n  _readCookie(name) {\n    let nameEquals = `${name}=`;\n    let cookies = document.cookie.split(';');\n\n    for (let key in cookies) {\n      let cookie = cookies[key];\n      while (cookie.charAt(0) === ' ') {\n        cookie = cookie.substring(1, cookie.length);\n      }\n\n      if (cookie.indexOf(nameEquals) === 0) {\n        return cookie.substring(nameEquals.length, cookie.length);\n      }\n    }\n\n    return null;\n  },\n\n  _getCrbIds() {\n    try {\n      const crb = JSON.parse(decodeURIComponent(spec._readCookie('krg_crb')));\n      let syncIds = {};\n\n      if (crb && crb.v) {\n        let vParsed = JSON.parse(atob(crb.v));\n\n        if (vParsed && vParsed.syncIds) {\n          syncIds = vParsed.syncIds;\n        }\n      }\n\n      return syncIds;\n    } catch (e) {\n      return {};\n    }\n  },\n\n  _getUid() {\n    try {\n      const uid = JSON.parse(decodeURIComponent(spec._readCookie('krg_uid')));\n      let vData = {};\n\n      if (uid && uid.v) {\n        vData = uid.v;\n      }\n\n      return vData;\n    } catch (e) {\n      return {};\n    }\n  },\n\n  _getKruxUserId() {\n    return spec._getLocalStorageSafely('kxkar_user');\n  },\n\n  _getKruxSegments() {\n    return spec._getLocalStorageSafely('kxkar_segs');\n  },\n\n  _getKrux() {\n    const segmentsStr = spec._getKruxSegments();\n    let segments = [];\n\n    if (segmentsStr) {\n      segments = segmentsStr.split(',');\n    }\n\n    return {\n      userID: spec._getKruxUserId(),\n      segments: segments\n    };\n  },\n\n  _getLocalStorageSafely(key) {\n    try {\n      return localStorage.getItem(key);\n    } catch (e) {\n      return null;\n    }\n  },\n\n  _getUserIds() {\n    const uid = spec._getUid();\n    const crbIds = spec._getCrbIds();\n\n    return {\n      kargoID: uid.userId,\n      clientID: uid.clientId,\n      crbIDs: crbIds,\n      optOut: uid.optOut\n    };\n  },\n\n  _getAllMetadata() {\n    return {\n      userIDs: spec._getUserIds(),\n      krux: spec._getKrux(),\n      pageURL: window.location.href,\n      rawCRB: spec._readCookie('krg_crb')\n    };\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/kargoBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'komoona';\nconst ENDPOINT = '//bidder.komoona.com/v1/GetSBids';\nconst USYNCURL = '//s.komoona.com/sync/usync.html';\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n  * Determines whether or not the given bid request is valid. Valid bid request must have placementId and hbid\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: bid => {\n    return !!(bid && bid.params && bid.params.placementId && bid.params.hbid);\n  },\n  /**\n  * Make a server request from the list of BidRequests.\n  *\n  * @param {validBidRequests[]} - an array of bids\n  * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: validBidRequests => {\n    const tags = validBidRequests.map(bid => {\n      // map each bid id to bid object to retrieve adUnit code in callback\n      let tag = {\n        uuid: bid.bidId,\n        sizes: bid.sizes,\n        trid: bid.transactionId,\n        hbid: bid.params.hbid,\n        placementid: bid.params.placementId\n      };\n\n      // add floor price if specified (not mandatory)\n      if (bid.params.floorPrice) {\n        tag.floorprice = bid.params.floorPrice;\n      }\n\n      return tag;\n    });\n\n    // Komoona server config\n    const time = new Date().getTime();\n    const kbConf = {\n      ts_as: time,\n      hb_placements: [],\n      hb_placement_bidids: {},\n      hb_floors: {},\n      cb: _generateCb(time),\n      tz: new Date().getTimezoneOffset(),\n    };\n\n    validBidRequests.forEach(bid => {\n      kbConf.hdbdid = kbConf.hdbdid || bid.params.hbid;\n      kbConf.encode_bid = kbConf.encode_bid || bid.params.encode_bid;\n      kbConf.hb_placement_bidids[bid.params.placementId] = bid.bidId;\n      if (bid.params.floorPrice) {\n        kbConf.hb_floors[bid.params.placementId] = bid.params.floorPrice;\n      }\n      kbConf.hb_placements.push(bid.params.placementId);\n    });\n\n    let payload = {};\n    if (!utils.isEmpty(tags)) {\n      payload = { bids: [...tags], kbConf: kbConf };\n    }\n\n    return {\n      method: 'POST',\n      url: ENDPOINT,\n      data: JSON.stringify(payload)\n    };\n  },\n  /**\n  * Unpack the response from the server into a list of bids.\n  *\n  * @param {*} response A successful response from the server.\n  * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: (response, request) => {\n    const bidResponses = [];\n    try {\n      if (response.body && response.body.bids) {\n        response.body.bids.forEach(bid => {\n          // The bid ID. Used to tie this bid back to the request.\n          bid.requestId = bid.uuid;\n          // The creative payload of the returned bid.\n          bid.ad = bid.creative;\n          bidResponses.push(bid);\n        });\n      }\n    } catch (error) {\n      utils.logError(error);\n    }\n    return bidResponses;\n  },\n  /**\n  * Register User Sync.\n  */\n  getUserSyncs: syncOptions => {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: USYNCURL\n      }];\n    }\n  }\n};\n\n/**\n* Generated cache baster value to be sent to bid server\n* @param {*} time current time to use for creating cb.\n*/\nfunction _generateCb(time) {\n  return Math.floor((time % 65536) + (Math.floor(Math.random() * 65536) * 65536));\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/komoonaBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst NATIVE_DEFAULTS = {\n  TITLE_LEN: 100,\n  DESCR_LEN: 200,\n  SPONSORED_BY_LEN: 50,\n  IMG_MIN: 150,\n  ICON_MIN: 50,\n};\nconst DEFAULT_MIMES = ['video/mp4', 'video/webm', 'application/x-shockwave-flash', 'application/javascript'];\nconst VIDEO_TARGETING = ['mimes', 'skippable', 'playback_method', 'protocols', 'api'];\nconst DEFAULT_PROTOCOLS = [2, 3, 5, 6];\nconst DEFAULT_APIS = [1, 2];\n\nexport const spec = {\n\n  code: 'kumma',\n  supportedMediaTypes: [BANNER, NATIVE, VIDEO],\n\n  isBidRequestValid: bid => (\n    !!(bid && bid.params && bid.params.pubId && bid.params.placementId)\n  ),\n  buildRequests: (bidRequests, bidderRequest) => {\n    const request = {\n      id: bidRequests[0].bidderRequestId,\n      at: 2,\n      imp: bidRequests.map(slot => impression(slot)),\n      site: site(bidRequests),\n      app: app(bidRequests),\n      device: device(bidRequests),\n    };\n    applyGdpr(bidderRequest, request);\n    return {\n      method: 'POST',\n      url: '//hb.kumma.com/',\n      data: JSON.stringify(request),\n    };\n  },\n  interpretResponse: (response, request) => (\n    bidResponseAvailable(request, response.body)\n  ),\n};\n\nfunction bidResponseAvailable(bidRequest, bidResponse) {\n  const idToImpMap = {};\n  const idToBidMap = {};\n  const ortbRequest = parse(bidRequest.data);\n  ortbRequest.imp.forEach(imp => {\n    idToImpMap[imp.id] = imp;\n  });\n  if (bidResponse) {\n    bidResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n      idToBidMap[bid.impid] = bid;\n    }));\n  }\n  const bids = [];\n  Object.keys(idToImpMap).forEach(id => {\n    if (idToBidMap[id]) {\n      const bid = {};\n      bid.requestId = id;\n      bid.adId = id;\n      bid.creativeId = id;\n      bid.cpm = idToBidMap[id].price;\n      bid.currency = bidResponse.cur;\n      bid.ttl = 360;\n      bid.netRevenue = true;\n      if (idToImpMap[id]['native']) {\n        bid['native'] = nativeResponse(idToImpMap[id], idToBidMap[id]);\n        let nurl = idToBidMap[id].nurl;\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_IMP_ID(%7D|\\})/gi, idToBidMap[id].impid);\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_CURRENCY(%7D|\\})/gi, bidResponse.cur);\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_BID_ID(%7D|\\})/gi, bidResponse.bidid);\n        bid['native']['impressionTrackers'] = [nurl];\n        bid.mediaType = 'native';\n      } else if (idToImpMap[id]['video']) {\n        bid.vastUrl = idToBidMap[id].adm;\n        bid.vastUrl = bid.vastUrl.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\n        bid.crid = idToBidMap[id].crid;\n        bid.width = idToImpMap[id].video.w;\n        bid.height = idToImpMap[id].video.h;\n        bid.mediaType = 'video';\n      } else if (idToImpMap[id]['banner']) {\n        bid.ad = idToBidMap[id].adm;\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_IMP_ID(%7D|\\})/gi, idToBidMap[id].impid);\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_AD_ID(%7D|\\})/gi, idToBidMap[id].adid);\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_CURRENCY(%7D|\\})/gi, bidResponse.cur);\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_BID_ID(%7D|\\})/gi, bidResponse.bidid);\n        bid.width = idToImpMap[id].banner.w;\n        bid.height = idToImpMap[id].banner.h;\n        bid.mediaType = 'banner';\n      }\n      bids.push(bid);\n    }\n  });\n  return bids;\n}\nfunction impression(slot) {\n  return {\n    id: slot.bidId,\n    secure: window.location.protocol === 'https:' ? 1 : 0,\n    'banner': banner(slot),\n    'native': nativeImpression(slot),\n    'video': videoImpression(slot),\n    bidfloor: slot.params.bidFloor || '0.000001',\n    tagid: slot.params.placementId.toString(),\n  };\n}\n\nfunction getSizes(slot) {\n  const size = utils.parseSizesInput(slot.sizes)[0].split('x');\n  return {\n    width: parseInt(size[0]),\n    height: parseInt(size[1]),\n  };\n}\n\nfunction banner(slot) {\n  if (slot.mediaType === 'banner' || utils.deepAccess(slot, 'mediaTypes.banner')) {\n    const sizes = getSizes(slot);\n    return {\n      w: sizes.width,\n      h: sizes.height,\n    };\n  }\n  return null;\n}\n\nfunction videoImpression(slot) {\n  if (slot.mediaType === 'video' || utils.deepAccess(slot, 'mediaTypes.video')) {\n    const sizes = getSizes(slot);\n    const video = {\n      w: sizes.width,\n      h: sizes.height,\n      mimes: DEFAULT_MIMES,\n      protocols: DEFAULT_PROTOCOLS,\n      api: DEFAULT_APIS,\n    };\n    if (slot.params.video) {\n      Object.keys(slot.params.video).filter(param => includes(VIDEO_TARGETING, param)).forEach(param => video[param] = slot.params.video[param]);\n    }\n    return video;\n  }\n  return null;\n}\n\nfunction nativeImpression(slot) {\n  if (slot.mediaType === 'native' || utils.deepAccess(slot, 'mediaTypes.native')) {\n    const assets = [];\n    addAsset(assets, titleAsset(1, slot.nativeParams.title, NATIVE_DEFAULTS.TITLE_LEN));\n    addAsset(assets, dataAsset(2, slot.nativeParams.body, 2, NATIVE_DEFAULTS.DESCR_LEN));\n    addAsset(assets, dataAsset(3, slot.nativeParams.sponsoredBy, 1, NATIVE_DEFAULTS.SPONSORED_BY_LEN));\n    addAsset(assets, imageAsset(4, slot.nativeParams.icon, 1, NATIVE_DEFAULTS.ICON_MIN, NATIVE_DEFAULTS.ICON_MIN));\n    addAsset(assets, imageAsset(5, slot.nativeParams.image, 3, NATIVE_DEFAULTS.IMG_MIN, NATIVE_DEFAULTS.IMG_MIN));\n    return {\n      request: JSON.stringify({ assets }),\n      ver: '1.1',\n    };\n  }\n  return null;\n}\n\nfunction addAsset(assets, asset) {\n  if (asset) {\n    assets.push(asset);\n  }\n}\n\nfunction titleAsset(id, params, defaultLen) {\n  if (params) {\n    return {\n      id,\n      required: params.required ? 1 : 0,\n      title: {\n        len: params.len || defaultLen,\n      },\n    };\n  }\n  return null;\n}\n\nfunction imageAsset(id, params, type, defaultMinWidth, defaultMinHeight) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    img: {\n      type,\n      wmin: params.wmin || defaultMinWidth,\n      hmin: params.hmin || defaultMinHeight,\n    }\n  } : null;\n}\n\nfunction dataAsset(id, params, type, defaultLen) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    data: {\n      type,\n      len: params.len || defaultLen,\n    }\n  } : null;\n}\n\nfunction site(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.pubId : '0';\n  const siteId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.siteId : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (!appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n        domain: utils.getTopWindowLocation().hostname,\n      },\n      id: siteId.toString(),\n      ref: utils.getTopWindowReferrer(),\n      page: utils.getTopWindowLocation().href,\n    }\n  }\n  return null;\n}\n\nfunction app(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.pubId : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n      },\n      id: appParams.id,\n      name: appParams.name,\n      bundle: appParams.bundle,\n      storeurl: appParams.storeUrl,\n      domain: appParams.domain,\n    }\n  }\n  return null;\n}\n\nfunction device(bidderRequest) {\n  const lat = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.latitude : '';\n  const lon = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.longitude : '';\n  const ifa = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.ifa : '';\n  return {\n    dnt: utils.getDNT() ? 1 : 0,\n    ua: navigator.userAgent,\n    language: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage),\n    w: (window.screen.width || window.innerWidth),\n    h: (window.screen.height || window.innerHeigh),\n    geo: {\n      lat: lat,\n      lon: lon,\n    },\n    ifa: ifa,\n  };\n}\n\nfunction parse(rawResponse) {\n  try {\n    if (rawResponse) {\n      return JSON.parse(rawResponse);\n    }\n  } catch (ex) {\n    logError('kumma.parse', 'ERROR', ex);\n  }\n  return null;\n}\n\nfunction applyGdpr(bidderRequest, ortbRequest) {\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    ortbRequest.regs = { ext: { gdpr: bidderRequest.gdprConsent.gdprApplies ? 1 : 0 } };\n    ortbRequest.user = { ext: { consent: bidderRequest.gdprConsent.consentString } };\n  }\n}\n\nfunction nativeResponse(imp, bid) {\n  if (imp['native']) {\n    const nativeAd = parse(bid.adm);\n    const keys = {};\n    keys.image = {};\n    keys.icon = {};\n    if (nativeAd && nativeAd['native'] && nativeAd['native'].assets) {\n      nativeAd['native'].assets.forEach(asset => {\n        keys.title = asset.title ? asset.title.text : keys.title;\n        keys.body = asset.data && asset.id === 2 ? asset.data.value : keys.body;\n        keys.sponsoredBy = asset.data && asset.id === 3 ? asset.data.value : keys.sponsoredBy;\n        keys.icon.url = asset.img && asset.id === 4 ? asset.img.url : keys.icon.url;\n        keys.icon.width = asset.img && asset.id === 4 ? asset.img.w : keys.icon.width;\n        keys.icon.height = asset.img && asset.id === 4 ? asset.img.h : keys.icon.height;\n        keys.image.url = asset.img && asset.id === 5 ? asset.img.url : keys.image.url;\n        keys.image.width = asset.img && asset.id === 5 ? asset.img.w : keys.image.width;\n        keys.image.height = asset.img && asset.id === 5 ? asset.img.h : keys.image.height;\n      });\n      if (nativeAd['native'].link) {\n        keys.clickUrl = encodeURIComponent(nativeAd['native'].link.url);\n      }\n      return keys;\n    }\n  }\n  return null;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/kummaBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'lifestreet';\nconst ADAPTER_VERSION = 'prebidJS-2.0';\n\nconst urlTemplate = template`//ads.lfstmedia.com/gate/${'adapter'}/${'slot'}?adkey=${'adkey'}&ad_size=${'ad_size'}&__location=${'location'}&__referrer=${'referrer'}&__wn=${'wn'}&__sf=${'sf'}&__fif=${'fif'}&__if=${'if'}&__stamp=${'stamp'}&__pp=1&__hb=1&_prebid_json=1&__gz=1&deferred_format=vast_2_0,vast_3_0&__hbver=${'hbver'}`;\n\n/**\n * Creates a bid requests for a given bid.\n *\n * @param {BidRequest} bid The bid params to use for formatting a request\n */\nfunction formatBidRequest(bid, bidderRequest) {\n  let url = urlTemplate({\n    adapter: 'prebid',\n    slot: bid.params.slot,\n    adkey: bid.params.adkey,\n    ad_size: bid.params.ad_size,\n    location: encodeURIComponent(utils.getTopWindowLocation()),\n    referrer: encodeURIComponent(utils.getTopWindowReferrer()),\n    wn: boolToString(/fb_http/i.test(window.name)),\n    sf: boolToString(window['sfAPI'] || window['$sf']),\n    fif: boolToString(window['inDapIF'] === true),\n    if: boolToString(window !== window.top),\n    stamp: new Date().getTime(),\n    hbver: ADAPTER_VERSION\n  });\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    if (bidderRequest.gdprConsent.gdprApplies !== undefined) {\n      const gdpr = '&__gdpr=' + (bidderRequest.gdprConsent.gdprApplies ? '1' : '0');\n      url += gdpr;\n    }\n    if (bidderRequest.gdprConsent.consentString !== undefined) {\n      url += '&__consent=' + bidderRequest.gdprConsent.consentString;\n    }\n  }\n\n  return {\n    method: 'GET',\n    url: url,\n    bidId: bid.bidId\n  };\n}\n\n/**\n * A helper function to form URL from the template\n */\nfunction template(strings, ...keys) {\n  return function(...values) {\n    let dict = values[values.length - 1] || {};\n    let result = [strings[0]];\n    keys.forEach(function(key, i) {\n      let value = isInteger(key) ? values[key] : dict[key];\n      result.push(value, strings[i + 1]);\n    });\n    return result.join('');\n  };\n}\n\n/**\n * A helper function for template to generate string from boolean\n */\nfunction boolToString(value) {\n  return value ? '1' : '0';\n}\n\n/**\n * A helper function for template\n */\nfunction isInteger(value) {\n  return typeof value === 'number' &&\n    isFinite(value) && Math.floor(value) === value;\n}\n\n/**\n * Validates response from Lifestreet AD server\n */\nfunction isResponseValid(response) {\n  return !/^\\s*\\{\\s*\"advertisementAvailable\"\\s*:\\s*false/i.test(response.content) &&\n    response.content.indexOf('<VAST version=\"2.0\"></VAST>') === -1 && (typeof response.cpm !== 'undefined') &&\n    response.status === 1;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['lsm'], // short code\n  supportedMediaTypes: [BANNER, VIDEO], // Lifestreet supports banner and video media types\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.slot && bid.params.adkey && bid.params.ad_size);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bid => {\n      return formatBidRequest(bid, bidderRequest)\n    });\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    let response = serverResponse.body;\n    if (!isResponseValid(response)) {\n      return bidResponses;\n    }\n\n    const bidResponse = {\n      requestId: bidRequest.bidId,\n      cpm: response.cpm,\n      width: response.width,\n      height: response.height,\n      creativeId: response.creativeId,\n      currency: response.currency ? response.currency : 'USD',\n      netRevenue: response.netRevenue ? response.netRevenue : true,\n      ttl: response.ttl ? response.ttl : 86400\n    };\n\n    if (response.hasOwnProperty('dealId')) {\n      bidResponse.dealId = response.dealId;\n    }\n\n    if (response.content_type.indexOf('vast') > -1) {\n      if (typeof response.vastUrl !== 'undefined') {\n        bidResponse.vastUrl = response.vastUrl;\n      } else {\n        bidResponse.vastXml = response.content;\n      }\n      bidResponse.mediaType = VIDEO;\n    } else {\n      bidResponse.ad = response.content;\n      bidResponse.mediaType = BANNER;\n    }\n\n    bidResponses.push(bidResponse);\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/lifestreetBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { VIDEO } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'lkqd';\nconst BID_TTL_DEFAULT = 300;\nconst ENDPOINT = 'https://v.lkqd.net/ad';\n\nconst PARAM_OUTPUT_DEFAULT = 'vast';\nconst PARAM_EXECUTION_DEFAULT = 'any';\nconst PARAM_SUPPORT_DEFAULT = 'html5';\nconst PARAM_PLAYINIT_DEFAULT = 'auto';\nconst PARAM_VOLUME_DEFAULT = '100';\n\nfunction _validateId(id) {\n  if (id && typeof id !== 'undefined' && parseInt(id) > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isBidRequestValid(bidRequest) {\n  if (bidRequest.bidder === BIDDER_CODE && typeof bidRequest.params !== 'undefined') {\n    if (_validateId(bidRequest.params.siteId) && _validateId(bidRequest.params.placementId)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction buildRequests(validBidRequests) {\n  let bidRequests = [];\n\n  for (let i = 0; i < validBidRequests.length; i++) {\n    let bidRequest = validBidRequests[i];\n\n    // if width/height not provided to the ad unit for some reason then attempt request with default 640x480 size\n    if (!bidRequest.sizes || !bidRequest.sizes.length) {\n      utils.logWarn('Warning: Could not find valid width/height parameters on the provided adUnit');\n      bidRequest.sizes = [[640, 480]];\n    }\n\n    // JWPlayer demo page uses sizes: [640,480] instead of sizes: [[640,480]] so need to handle single-layer array as well as nested arrays\n    if (bidRequest.sizes.length === 2 && typeof bidRequest.sizes[0] === 'number' && typeof bidRequest.sizes[1] === 'number') {\n      let adWidth = bidRequest.sizes[0];\n      let adHeight = bidRequest.sizes[1];\n      bidRequest.sizes = [[adWidth, adHeight]];\n    }\n\n    for (let j = 0; j < bidRequest.sizes.length; j++) {\n      let size = bidRequest.sizes[j];\n      let playerWidth;\n      let playerHeight;\n      if (size && size.length == 2) {\n        playerWidth = size[0];\n        playerHeight = size[1];\n      } else {\n        utils.logWarn('Warning: Could not determine width/height from the provided adUnit');\n      }\n\n      let sspUrl = ENDPOINT.concat();\n      let sspData = {};\n\n      // required parameters\n      sspData.pid = bidRequest.params.placementId;\n      sspData.sid = bidRequest.params.siteId;\n      sspData.prebid = true;\n\n      // optional parameters\n      if (bidRequest.params.hasOwnProperty('output') && bidRequest.params.output != null) {\n        sspData.output = bidRequest.params.output;\n      } else {\n        sspData.output = PARAM_OUTPUT_DEFAULT;\n      }\n      if (bidRequest.params.hasOwnProperty('execution') && bidRequest.params.execution != null) {\n        sspData.execution = bidRequest.params.execution;\n      } else {\n        sspData.execution = PARAM_EXECUTION_DEFAULT;\n      }\n      if (bidRequest.params.hasOwnProperty('support') && bidRequest.params.support != null) {\n        sspData.support = bidRequest.params.support;\n      } else {\n        sspData.support = PARAM_SUPPORT_DEFAULT;\n      }\n      if (bidRequest.params.hasOwnProperty('playinit') && bidRequest.params.playinit != null) {\n        sspData.playinit = bidRequest.params.playinit;\n      } else {\n        sspData.playinit = PARAM_PLAYINIT_DEFAULT;\n      }\n      if (bidRequest.params.hasOwnProperty('volume') && bidRequest.params.volume != null) {\n        sspData.volume = bidRequest.params.volume;\n      } else {\n        sspData.volume = PARAM_VOLUME_DEFAULT;\n      }\n      if (playerWidth) {\n        sspData.width = playerWidth;\n      }\n      if (playerHeight) {\n        sspData.height = playerHeight;\n      }\n      if (bidRequest.params.hasOwnProperty('vpaidmode') && bidRequest.params.vpaidmode != null) {\n        sspData.vpaidmode = bidRequest.params.vpaidmode;\n      }\n      if (bidRequest.params.hasOwnProperty('appname') && bidRequest.params.appname != null) {\n        sspData.appname = bidRequest.params.appname;\n      }\n      if (bidRequest.params.hasOwnProperty('bundleid') && bidRequest.params.bundleid != null) {\n        sspData.bundleid = bidRequest.params.bundleid;\n      }\n      if (bidRequest.params.hasOwnProperty('aid') && bidRequest.params.aid != null) {\n        sspData.aid = bidRequest.params.aid;\n      }\n      if (bidRequest.params.hasOwnProperty('idfa') && bidRequest.params.idfa != null) {\n        sspData.idfa = bidRequest.params.idfa;\n      }\n      if (bidRequest.params.hasOwnProperty('gdpr') && bidRequest.params.gdpr != null) {\n        sspData.gdpr = bidRequest.params.gdpr;\n      }\n      if (bidRequest.params.hasOwnProperty('gdprcs') && bidRequest.params.gdprcs != null) {\n        sspData.gdprcs = bidRequest.params.gdprcs;\n      }\n      if (bidRequest.params.hasOwnProperty('flrd') && bidRequest.params.flrd != null) {\n        sspData.flrd = bidRequest.params.flrd;\n      }\n      if (bidRequest.params.hasOwnProperty('flrmp') && bidRequest.params.flrmp != null) {\n        sspData.flrmp = bidRequest.params.flrmp;\n      }\n      if (bidRequest.params.hasOwnProperty('placement') && bidRequest.params.placement != null) {\n        sspData.placement = bidRequest.params.placement;\n      }\n      if (bidRequest.params.hasOwnProperty('timeout') && bidRequest.params.timeout != null) {\n        sspData.timeout = bidRequest.params.timeout;\n      }\n      if (bidRequest.params.hasOwnProperty('dnt') && bidRequest.params.dnt != null) {\n        sspData.dnt = bidRequest.params.dnt;\n      }\n      if (bidRequest.params.hasOwnProperty('pageurl') && bidRequest.params.pageurl != null) {\n        sspData.pageurl = bidRequest.params.pageurl;\n      }\n      if (bidRequest.params.hasOwnProperty('contentId') && bidRequest.params.contentId != null) {\n        sspData.contentid = bidRequest.params.contentId;\n      }\n      if (bidRequest.params.hasOwnProperty('contentTitle') && bidRequest.params.contentTitle != null) {\n        sspData.contenttitle = bidRequest.params.contentTitle;\n      }\n      if (bidRequest.params.hasOwnProperty('contentLength') && bidRequest.params.contentLength != null) {\n        sspData.contentlength = bidRequest.params.contentLength;\n      }\n      if (bidRequest.params.hasOwnProperty('contentUrl') && bidRequest.params.contentUrl != null) {\n        sspData.contenturl = bidRequest.params.contentUrl;\n      }\n\n      // random number to prevent caching\n      sspData.rnd = Math.floor(Math.random() * 999999999);\n\n      // Prebid.js required properties\n      sspData.bidId = bidRequest.bidId;\n      sspData.bidWidth = playerWidth;\n      sspData.bidHeight = playerHeight;\n\n      bidRequests.push({\n        method: 'GET',\n        url: sspUrl,\n        data: sspData\n      });\n    }\n  }\n\n  return bidRequests;\n}\n\nfunction interpretResponse(serverResponse, bidRequest) {\n  let bidResponses = [];\n  if (serverResponse && serverResponse.body) {\n    if (serverResponse.error) {\n      utils.logError('Error: ' + serverResponse.error);\n      return bidResponses;\n    } else {\n      try {\n        let bidResponse = {};\n        if (bidRequest && bidRequest.data && bidRequest.data.bidId && bidRequest.data.bidId !== '') {\n          let sspXmlString = serverResponse.body;\n          let sspXml = new window.DOMParser().parseFromString(sspXmlString, 'text/xml');\n          if (sspXml && sspXml.getElementsByTagName('parsererror').length == 0) {\n            let sspUrl = bidRequest.url.concat();\n\n            bidResponse.requestId = bidRequest.data.bidId;\n            bidResponse.bidderCode = BIDDER_CODE;\n            bidResponse.ad = '';\n            bidResponse.cpm = parseFloat(sspXml.getElementsByTagName('Pricing')[0].textContent);\n            bidResponse.width = bidRequest.data.bidWidth;\n            bidResponse.height = bidRequest.data.bidHeight;\n            bidResponse.ttl = BID_TTL_DEFAULT;\n            bidResponse.creativeId = sspXml.getElementsByTagName('Ad')[0].getAttribute('id');\n            bidResponse.currency = sspXml.getElementsByTagName('Pricing')[0].getAttribute('currency');\n            bidResponse.netRevenue = true;\n            bidResponse.vastUrl = sspUrl;\n            bidResponse.vastXml = sspXmlString;\n            bidResponse.mediaType = VIDEO;\n\n            bidResponses.push(bidResponse);\n          } else {\n            utils.logError('Error: Server response contained invalid XML');\n          }\n        } else {\n          utils.logError('Error: Could not associate bid request to server response');\n        }\n      } catch (e) {\n        utils.logError('Error: Could not interpret server response');\n      }\n    }\n  } else {\n    utils.logError('Error: No server response or server response was empty for the requested URL');\n  }\n\n  return bidResponses;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [VIDEO],\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/lkqdBidAdapter.js","import * as utils from 'src/utils';\nimport {BANNER} from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nexport const spec = {\n  code: 'lockerdome',\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid: function(bid) {\n    return !!bid.params.adUnitId;\n  },\n  buildRequests: function(bidRequests, bidderRequest) {\n    const adUnitBidRequests = bidRequests.map(function (bid) {\n      return {\n        requestId: bid.bidId,\n        adUnitCode: bid.adUnitCode,\n        adUnitId: utils.getBidIdParameter('adUnitId', bid.params),\n        sizes: bid.sizes\n      }\n    });\n    const payload = {\n      bidRequests: adUnitBidRequests,\n      url: utils.getTopWindowLocation().href,\n      referrer: utils.getTopWindowReferrer()\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.gdpr = {\n        applies: bidderRequest.gdprConsent.gdprApplies,\n        consent: bidderRequest.gdprConsent.consentString\n      };\n    }\n\n    const payloadString = JSON.stringify(payload);\n    return {\n      method: 'POST',\n      url: 'https://lockerdome.com/ladbid/prebid',\n      data: payloadString\n    };\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    if (!serverResponse || !serverResponse.body || !serverResponse.body.bids) {\n      return [];\n    }\n    return serverResponse.body.bids.map(function(bid) {\n      return {\n        requestId: bid.requestId,\n        cpm: bid.cpm,\n        width: bid.width,\n        height: bid.height,\n        creativeId: bid.creativeId,\n        currency: bid.currency,\n        netRevenue: bid.netRevenue,\n        ad: bid.ad,\n        ttl: bid.ttl\n      };\n    });\n  },\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/lockerdomeBidAdapter.js","import * as utils from 'src/utils';\nimport {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\n// use protocol relative urls for http or https\nconst MADVERTISE_ENDPOINT = 'https://mobile.mng-ads.com/';\n\nexport const spec = {\n  code: 'madvertise',\n  /**\n   * @param {object} bid\n   * @return boolean\n   */\n  isBidRequestValid: function (bid) {\n    if (typeof bid.params !== 'object') {\n      return false;\n    }\n    let sizes = utils.parseSizesInput(bid.sizes);\n    if (!sizes || sizes.length === 0) {\n      return false;\n    }\n    if (sizes.length > 0 && sizes[0] === undefined) {\n      return false;\n    }\n    if (typeof bid.params.floor == 'undefined' || parseFloat(bid.params.floor) < 0.01) {\n      bid.params.floor = 0.01;\n    }\n\n    return typeof bid.params.s != 'undefined';\n  },\n  /**\n   * @param {BidRequest[]} bidRequests\n   * @param bidderRequest\n   * @return ServerRequest[]\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    return bidRequests.map(bidRequest => {\n      bidRequest.startTime = new Date().getTime();\n\n      // non-video request builder\n      var src = '?rt=bid_request&v=1.0';\n\n      for (var i = 0; i < bidRequest.sizes.length; i++) {\n        if (Array.isArray(bidRequest.sizes[i]) && bidRequest.sizes[i].length == 2) {\n          src = src + '&sizes[' + i + ']=' + bidRequest.sizes[i][0] + 'x' + bidRequest.sizes[i][1];\n        }\n      }\n\n      utils._each(bidRequest.params, (item, key) => src = src + '&' + key + '=' + item);\n\n      if (typeof bidRequest.params.u == 'undefined') {\n        src = src + '&u=' + navigator.userAgent;\n      }\n\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        src = src + '&gdpr=' + (bidderRequest.gdprConsent.gdprApplies ? '1' : '0') + '&consent[0][format]=' + config.getConfig('consentManagement.cmpApi') + '&consent[0][value]=' + bidderRequest.gdprConsent.consentString;\n      }\n\n      return {\n        method: 'GET',\n        url: MADVERTISE_ENDPOINT + src,\n        options: {withCredentials: false},\n        bidId: bidRequest.bidId\n      };\n    });\n  },\n  /**\n   * @param {*} responseObj\n   * @param {BidRequest} bidRequest\n   * @return {Bid[]} An array of bids which\n   */\n  interpretResponse: function (responseObj, bidRequest) {\n    responseObj = responseObj.body;\n    // check overall response\n    if (responseObj == null || typeof responseObj !== 'object' || !responseObj.hasOwnProperty('ad')) {\n      return [];\n    }\n\n    let bid = {\n      requestId: bidRequest.bidId,\n      cpm: responseObj.cpm,\n      width: responseObj.Width,\n      height: responseObj.height,\n      ad: responseObj.ad,\n      ttl: responseObj.ttl,\n      creativeId: responseObj.creativeId,\n      netRevenue: responseObj.netRevenue,\n      currency: responseObj.currency,\n      dealId: responseObj.dealId\n    };\n    return [bid];\n  },\n  getUserSyncs: function (syncOptions) {\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/madvertiseBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\n\nfunction inIframe() {\n  try {\n    return window.self !== window.top && !window.mantis_link;\n  } catch (e) {\n    return true;\n  }\n}\nfunction pixel(url, parent) {\n  var img = document.createElement('img');\n  img.src = url;\n  img.style.cssText = 'display:none !important;';\n  (parent || document.body).appendChild(img);\n}\nfunction isDesktop(ignoreTouch) {\n  var supportsTouch = !ignoreTouch && ('ontouchstart' in window || navigator.msMaxTouchPoints);\n  if (inIframe()) {\n    return !supportsTouch;\n  }\n  var width = window.innerWidth || window.document.documentElement.clientWidth || window.document.body.clientWidth;\n  return !supportsTouch && (!width || width >= (window.mantis_breakpoint || 768));\n}\nfunction onVisible(element, doOnVisible, time, pct) {\n  var started = null;\n  var notified = false;\n  var onNotVisible = null;\n  var whenNotVisible = function () {\n    if (notified && onNotVisible) {\n      onNotVisible();\n    }\n    notified = false;\n  };\n  var interval;\n  var listener;\n  var doCheck = function (winWidth, winHeight, rect) {\n    var hidden = typeof document.hidden !== 'undefined' && document.hidden;\n    if (rect.width == 0 || rect.height == 0 || hidden) {\n      return whenNotVisible();\n    }\n    var minHeight = (rect.height * pct);\n    var minWidth = (rect.width * pct);\n    var inView = (\n      (\n        (rect.top < 0 && rect.bottom >= minHeight) ||\n        (rect.top > 0 && (winHeight - rect.top) >= minHeight)\n      ) &&\n      (\n        (rect.left < 0 && rect.right >= minWidth) ||\n        (rect.left > 0 && (winWidth - rect.left) >= minWidth)\n      )\n    );\n    if (!inView) {\n      return whenNotVisible();\n    }\n    if (!started && time) {\n      started = Date.now();\n      return whenNotVisible();\n    }\n    if (time && Date.now() - started < time) {\n      return whenNotVisible();\n    }\n    if (notified) {\n      return;\n    }\n    doOnVisible(function (ack) {\n      if (ack) {\n        notified = true;\n      } else {\n        interval && clearInterval(interval);\n        listener && listener();\n      }\n    }, function (onHidden) {\n      onNotVisible = onHidden;\n    });\n  };\n  if (isAmp()) {\n    listener = window.context.observeIntersection(function (changes) {\n      changes.forEach(function (change) {\n        doCheck(change.rootBounds.width, change.rootBounds.height, change.boundingClientRect);\n      });\n    });\n  }\n  interval = setInterval(function () {\n    var winHeight = (window.innerHeight || document.documentElement.clientHeight);\n    var winWidth = (window.innerWidth || document.documentElement.clientWidth);\n    doCheck(winWidth, winHeight, element.getBoundingClientRect());\n  }, 100);\n}\nfunction storeUuid(uuid) {\n  if (window.mantis_uuid) {\n    return false;\n  }\n  window.mantis_uuid = uuid;\n  if (window.localStorage) {\n    try {\n      window.localStorage.setItem('mantis:uuid', uuid);\n    } catch (ex) {\n    }\n  }\n}\n\nfunction onMessage(type, callback) {\n  window.addEventListener('message', function (event) {\n    if (event.data.mantis && event.data.type == type) {\n      callback(event.data.data);\n    }\n  }, false);\n}\nfunction isSendable(val) {\n  if (val === null || val === undefined) {\n    return false;\n  }\n  if (typeof val === 'string') {\n    return !(!val || /^\\s*$/.test(val));\n  }\n  if (typeof val === 'number') {\n    return !isNaN(val);\n  }\n  return true;\n}\nfunction isObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\nfunction isAmp() {\n  return typeof window.context === 'object' && (window.context.tagName === 'AMP-AD' || window.context.tagName === 'AMP-EMBED');\n}\nfunction isSecure() {\n  return document.location.protocol === 'https:';\n}\nfunction isArray(value) {\n  return Object.prototype.toString.call(value) === '[object Array]';\n}\n\nfunction jsonToQuery(data, chain, form) {\n  if (!data) {\n    return null;\n  }\n  var parts = form || [];\n  for (var key in data) {\n    var queryKey = key;\n    if (chain) {\n      queryKey = chain + '[' + key + ']';\n    }\n    var val = data[key];\n    if (isArray(val)) {\n      for (var index = 0; index < val.length; index++) {\n        var akey = queryKey + '[' + index + ']';\n        var aval = val[index];\n        if (isObject(aval)) {\n          jsonToQuery(aval, akey, parts);\n        } else if (isSendable(aval)) {\n          parts.push(akey + '=' + encodeURIComponent(aval));\n        }\n      }\n    } else if (isObject(val) && val != data) {\n      jsonToQuery(val, queryKey, parts);\n    } else if (isSendable(val)) {\n      parts.push(queryKey + '=' + encodeURIComponent(val));\n    }\n  }\n  return parts.join('&');\n}\n\nfunction buildMantisUrl(path, data, domain) {\n  var params = {\n    referrer: document.referrer,\n    tz: new Date().getTimezoneOffset(),\n    buster: new Date().getTime(),\n    secure: isSecure(),\n    version: 8\n  };\n  if (!inIframe() || isAmp()) {\n    params.mobile = !isAmp() && isDesktop(true) ? 'false' : 'true';\n  }\n  if (window.mantis_uuid) {\n    params.uuid = window.mantis_uuid;\n  } else if (window.localStorage) {\n    var localUuid = window.localStorage.getItem('mantis:uuid');\n    if (localUuid) {\n      params.uuid = localUuid;\n    }\n  }\n  if (!inIframe()) {\n    try {\n      params.title = window.top.document.title;\n      params.referrer = window.top.document.referrer;\n      params.url = window.top.document.location.href;\n    } catch (ex) {\n    }\n  } else {\n    params.iframe = true;\n  }\n  if (isAmp()) {\n    params.amp = true;\n    if (!params.url && window.context.canonicalUrl) {\n      params.url = window.context.canonicalUrl;\n    }\n    if (!params.url && window.context.location) {\n      params.url = window.context.location.href;\n    }\n    if (!params.referrer && window.context.referrer) {\n      params.referrer = window.context.referrer;\n    }\n  }\n  Object.keys(data || {}).forEach(function (key) {\n    params[key] = data[key];\n  });\n  var query = jsonToQuery(params);\n  return (window.mantis_domain === undefined ? domain || 'https://mantodea.mantisadnetwork.com' : window.mantis_domain) + path + '?' + query;\n}\n\nconst spec = {\n  code: 'mantis',\n  supportedMediaTypes: ['banner', 'video', 'native'],\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.property && (bid.params.code || bid.params.zoneId || bid.params.zone));\n  },\n  buildRequests: function (validBidRequests) {\n    var property = null;\n    validBidRequests.some(function (bid) {\n      if (bid.params.property) {\n        property = bid.params.property;\n        return true;\n      }\n    });\n    const query = {\n      measurable: true,\n      bids: validBidRequests.map(function (bid) {\n        return {\n          bidId: bid.bidId,\n          config: bid.params,\n          sizes: bid.sizes.map(function (size) {\n            return {width: size[0], height: size[1]};\n          })\n        };\n      }),\n      property: property\n    };\n    return {\n      method: 'GET',\n      url: buildMantisUrl('/prebid/display', query) + '&foo',\n      data: ''\n    };\n  },\n  interpretResponse: function (serverResponse) {\n    storeUuid(serverResponse.body.uuid);\n    return serverResponse.body.ads.map(function (ad) {\n      return {\n        requestId: ad.bid,\n        cpm: ad.cpm,\n        width: ad.width,\n        height: ad.height,\n        ad: ad.html,\n        ttl: 86400,\n        creativeId: ad.view,\n        netRevenue: true,\n        currency: 'USD'\n      };\n    });\n  },\n  getUserSyncs: function (syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: buildMantisUrl('/prebid/iframe')\n      }];\n    }\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: buildMantisUrl('/prebid/pixel')\n      }];\n    }\n  }\n};\nonMessage('iframe', function (data) {\n  if (window.$sf) {\n    var viewed = false;\n    $sf.ext.register(data.width, data.height, function () {\n      if ($sf.ext.inViewPercentage() < 50 || viewed) {\n        return;\n      }\n      viewed = true;\n      pixel(data.pixel);\n    });\n  } else {\n    var frames = document.getElementsByTagName('iframe');\n    for (var i = 0; i < frames.length; i++) {\n      var frame = frames[i];\n      if (frame.name == data.frame) {\n        onVisible(frame, function (stop) {\n          pixel(data.pixel);\n          stop();\n        }, 1000, 0.50);\n      }\n    }\n  }\n});\n\nexport { spec };\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/mantisBidAdapter.js","import {ajax} from 'src/ajax';\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\n\n/****\n * Mars Media Analytics\n * Contact: prebid@m-m-g.com\n * Developer: Chen Saadia\n */\n\nconst MARS_BIDDER_CODE = 'marsmedia';\nconst analyticsType = 'endpoint';\nconst MARS_VERSION = '1.0.1';\nconst MARS_ANALYTICS_URL = '//prebid_stats.mars.media/prebidjs/api/analytics.php';\nvar events = {};\n\nvar marsmediaAnalyticsAdapter = Object.assign(adapter(\n  {\n    MARS_ANALYTICS_URL,\n    analyticsType\n  }),\n{\n  track({eventType, args}) {\n    if (typeof args !== 'undefined' && args.bidderCode === MARS_BIDDER_CODE) {\n      events[eventType] = args;\n    }\n\n    if (eventType === 'auctionEnd') {\n      setTimeout(function() {\n        ajax(\n          MARS_ANALYTICS_URL,\n          {\n            success: function() {},\n            error: function() {}\n          },\n          JSON.stringify({act: 'prebid_analytics', params: events, 'pbjs': pbjs.getBidResponses(), ver: MARS_VERSION}),\n          {\n            method: 'POST'\n          }\n        );\n      }, 3000);\n    }\n  }\n}\n);\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: marsmediaAnalyticsAdapter,\n  code: 'marsmedia'\n});\n\nexport default marsmediaAnalyticsAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/marsmediaAnalyticsAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\nimport { config } from 'src/config';\nimport * as url from 'src/url';\n\nconst BIDDER_CODE = 'medianet';\nconst BID_URL = '//prebid.media.net/rtb/prebid';\nconst SLOT_VISIBILITY = {\n  NOT_DETERMINED: 0,\n  ABOVE_THE_FOLD: 1,\n  BELOW_THE_FOLD: 2\n};\nconst EVENTS = {\n  TIMEOUT_EVENT_NAME: 'client_timeout',\n  BID_WON_EVENT_NAME: 'client_bid_won'\n};\nconst EVENT_PIXEL_URL = 'qsearch-a.akamaihd.net/log';\n\nlet mnData = {};\n\npbjs.medianetGlobals = {};\n\nfunction siteDetails(site) {\n  site = site || {};\n  let siteData = {\n    domain: site.domain || utils.getTopWindowLocation().host,\n    page: site.page || utils.getTopWindowUrl(),\n    ref: site.ref || utils.getTopWindowReferrer()\n  };\n\n  return Object.assign(siteData, getPageMeta());\n}\n\nfunction getPageMeta() {\n  if (mnData.pageMeta) {\n    return mnData.pageMeta;\n  }\n  let canonicalUrl = getUrlFromSelector('link[rel=\"canonical\"]', 'href');\n  let ogUrl = getUrlFromSelector('meta[property=\"og:url\"]', 'content');\n  let twitterUrl = getUrlFromSelector('meta[name=\"twitter:url\"]', 'content');\n\n  mnData.pageMeta = Object.assign({},\n    canonicalUrl && { 'canonical_url': canonicalUrl },\n    ogUrl && { 'og_url': ogUrl },\n    twitterUrl && { 'twitter_url': twitterUrl }\n  );\n\n  return mnData.pageMeta;\n}\n\nfunction getUrlFromSelector(selector, attribute) {\n  let attr = getAttributeFromSelector(selector, attribute);\n  return attr && getAbsoluteUrl(attr);\n}\n\nfunction getAttributeFromSelector(selector, attribute) {\n  try {\n    let doc = utils.getWindowTop().document;\n    let element = doc.querySelector(selector);\n    if (element !== null && element[attribute]) {\n      return element[attribute];\n    }\n  } catch (e) {}\n}\n\nfunction getAbsoluteUrl(url) {\n  let aTag = utils.getWindowTop().document.createElement('a');\n  aTag.href = url;\n\n  return aTag.href;\n}\n\nfunction filterUrlsByType(urls, type) {\n  return urls.filter(url => url.type === type);\n}\n\nfunction transformSizes(sizes) {\n  if (utils.isArray(sizes) && sizes.length === 2 && !utils.isArray(sizes[0])) {\n    return [getSize(sizes)];\n  }\n\n  return sizes.map(size => getSize(size))\n}\n\nfunction getSize(size) {\n  return {\n    w: parseInt(size[0], 10),\n    h: parseInt(size[1], 10)\n  }\n}\n\nfunction getWindowSize() {\n  return {\n    w: window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth || -1,\n    h: window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || -1\n  }\n}\n\nfunction getCoordinates(id) {\n  const element = document.getElementById(id);\n  if (element && element.getBoundingClientRect) {\n    const rect = element.getBoundingClientRect();\n    let coordinates = {};\n    coordinates.top_left = {\n      y: rect.top,\n      x: rect.left\n    };\n    coordinates.bottom_right = {\n      y: rect.bottom,\n      x: rect.right\n    };\n    return coordinates\n  }\n  return null;\n}\n\nfunction extParams(params, gdpr) {\n  let ext = {\n    customer_id: params.cid,\n    prebid_version: pbjs.version\n  };\n  ext.gdpr_applies = !!(gdpr && gdpr.gdprApplies);\n  if (ext.gdpr_applies) {\n    ext.gdpr_consent_string = gdpr.consentString || '';\n  }\n  let windowSize = spec.getWindowSize();\n  if (windowSize.w !== -1 && windowSize.h !== -1) {\n    ext.screen = windowSize;\n  }\n  return ext;\n}\n\nfunction slotParams(bidRequest) {\n  // check with Media.net Account manager for  bid floor and crid parameters\n  let params = {\n    id: bidRequest.bidId,\n    ext: {\n      dfp_id: bidRequest.adUnitCode,\n      display_count: bidRequest.bidRequestsCount\n    },\n    banner: transformSizes(bidRequest.sizes),\n    all: bidRequest.params\n  };\n\n  if (bidRequest.params.crid) {\n    params.tagid = bidRequest.params.crid.toString();\n  }\n\n  let bidFloor = parseFloat(bidRequest.params.bidfloor);\n  if (bidFloor) {\n    params.bidfloor = bidFloor;\n  }\n  const coordinates = getCoordinates(bidRequest.adUnitCode);\n  if (coordinates) {\n    let normCoordinates = normalizeCoordinates(coordinates);\n    params.ext.coordinates = normCoordinates;\n    params.ext.viewability = getSlotVisibility(coordinates.top_left, getMinSize(params.banner));\n    if (getSlotVisibility(normCoordinates.top_left, getMinSize(params.banner)) > 0.5) {\n      params.ext.visibility = SLOT_VISIBILITY.ABOVE_THE_FOLD;\n    } else {\n      params.ext.visibility = SLOT_VISIBILITY.BELOW_THE_FOLD;\n    }\n  } else {\n    params.ext.visibility = SLOT_VISIBILITY.NOT_DETERMINED;\n  }\n\n  return params;\n}\n\nfunction getMinSize(sizes) {\n  return sizes.reduce((min, size) => size.h * size.w < min.h * min.w ? size : min);\n}\n\nfunction getSlotVisibility(topLeft, size) {\n  let maxArea = size.w * size.h;\n  let windowSize = spec.getWindowSize();\n  let bottomRight = {\n    x: topLeft.x + size.w,\n    y: topLeft.y + size.h\n  };\n  if (maxArea === 0 || windowSize.w === -1 || windowSize.h === -1) {\n    return 0;\n  }\n\n  return getOverlapArea(topLeft, bottomRight, {x: 0, y: 0}, {x: windowSize.w, y: windowSize.h}) / maxArea;\n}\n\n// find the overlapping area between two rectangles\nfunction getOverlapArea(topLeft1, bottomRight1, topLeft2, bottomRight2) {\n  // If no overlap, return 0\n  if ((topLeft1.x > bottomRight2.x || bottomRight1.x < topLeft2.x) || (topLeft1.y > bottomRight2.y || bottomRight1.y < topLeft2.y)) {\n    return 0;\n  }\n  // return overlapping area : [ min of rightmost/bottommost co-ordinates ] - [ max of leftmost/topmost co-ordinates ]\n  return ((Math.min(bottomRight1.x, bottomRight2.x) - Math.max(topLeft1.x, topLeft2.x)) * (Math.min(bottomRight1.y, bottomRight2.y) - Math.max(topLeft1.y, topLeft2.y)));\n}\n\nfunction normalizeCoordinates(coordinates) {\n  return {\n    top_left: {\n      x: coordinates.top_left.x + window.pageXOffset,\n      y: coordinates.top_left.y + window.pageYOffset,\n    },\n    bottom_right: {\n      x: coordinates.bottom_right.x + window.pageXOffset,\n      y: coordinates.bottom_right.y + window.pageYOffset,\n    }\n  }\n}\n\nfunction generatePayload(bidRequests, bidderRequests) {\n  return {\n    site: siteDetails(bidRequests[0].params.site),\n    ext: extParams(bidRequests[0].params, bidderRequests.gdprConsent),\n    id: bidRequests[0].auctionId,\n    imp: bidRequests.map(request => slotParams(request)),\n    tmax: bidderRequests.timeout || config.getConfig('bidderTimeout')\n  }\n}\n\nfunction isValidBid(bid) {\n  return bid.no_bid === false && parseFloat(bid.cpm) > 0.0;\n}\n\nfunction fetchCookieSyncUrls(response) {\n  if (!utils.isEmpty(response) && response[0].body &&\n    response[0].body.ext && utils.isArray(response[0].body.ext.csUrl)) {\n    return response[0].body.ext.csUrl;\n  }\n\n  return [];\n}\n\nfunction getLoggingData(event, data) {\n  data = (utils.isArray(data) && data) || [];\n\n  let params = {};\n  params.logid = 'kfk';\n  params.evtid = 'projectevents';\n  params.project = 'prebid';\n  params.acid = utils.deepAccess(data, '0.auctionId') || '';\n  params.cid = pbjs.medianetGlobals.cid || '';\n  params.crid = data.map((adunit) => utils.deepAccess(adunit, 'params.0.crid') || adunit.adUnitCode).join('|');\n  params.adunit_count = data.length || 0;\n  params.dn = utils.getTopWindowLocation().host || '';\n  params.requrl = utils.getTopWindowUrl() || '';\n  params.event = event.name || '';\n  params.value = event.value || '';\n  params.rd = event.related_data || '';\n\n  return params;\n}\n\nfunction logEvent (event, data) {\n  let getParams = {\n    protocol: 'https',\n    hostname: EVENT_PIXEL_URL,\n    search: getLoggingData(event, data)\n  };\n  utils.triggerPixel(url.format(getParams));\n}\n\nfunction clearMnData() {\n  mnData = {};\n}\n\nexport const spec = {\n\n  code: BIDDER_CODE,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid (if cid is present), and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    if (!bid.params) {\n      utils.logError(`${BIDDER_CODE} : Missing bid parameters`);\n      return false;\n    }\n\n    if (!bid.params.cid || !utils.isStr(bid.params.cid) || utils.isEmptyStr(bid.params.cid)) {\n      utils.logError(`${BIDDER_CODE} : cid should be a string`);\n      return false;\n    }\n\n    Object.assign(pbjs.medianetGlobals, !pbjs.medianetGlobals.cid && {cid: bid.params.cid});\n\n    return true;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @param {BidderRequests} bidderRequests\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequests) {\n    let payload = generatePayload(bidRequests, bidderRequests);\n    return {\n      method: 'POST',\n      url: BID_URL,\n      data: JSON.stringify(payload)\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, request) {\n    let validBids = [];\n\n    if (!serverResponse || !serverResponse.body) {\n      utils.logInfo(`${BIDDER_CODE} : response is empty`);\n      return validBids;\n    }\n\n    let bids = serverResponse.body.bidList;\n    if (!utils.isArray(bids) || bids.length === 0) {\n      utils.logInfo(`${BIDDER_CODE} : no bids`);\n      return validBids;\n    }\n    validBids = bids.filter(bid => isValidBid(bid));\n\n    return validBids;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses) {\n    let cookieSyncUrls = fetchCookieSyncUrls(serverResponses);\n\n    if (syncOptions.iframeEnabled) {\n      return filterUrlsByType(cookieSyncUrls, 'iframe');\n    }\n\n    if (syncOptions.pixelEnabled) {\n      return filterUrlsByType(cookieSyncUrls, 'image');\n    }\n  },\n\n  /**\n   * @param {TimedOutBid} timeoutData\n   */\n  onTimeout: (timeoutData) => {\n    try {\n      let eventData = {\n        name: EVENTS.TIMEOUT_EVENT_NAME,\n        value: timeoutData.length,\n        related_data: timeoutData[0].timeout || config.getConfig('bidderTimeout')\n      };\n      logEvent(eventData, timeoutData);\n    } catch (e) {}\n  },\n\n  /**\n   * @param {TimedOutBid} timeoutData\n   */\n  onBidWon: (bid) => {\n    try {\n      let eventData = {\n        name: EVENTS.BID_WON_EVENT_NAME,\n        value: bid.cpm\n      };\n      logEvent(eventData, [bid]);\n    } catch (e) {}\n  },\n\n  clearMnData,\n\n  getWindowSize,\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/medianetBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\n\nconst utils = require('src/utils.js');\nconst BIDDER_CODE = 'mobfox';\nconst BID_REQUEST_BASE_URL = 'https://my.mobfox.com/request.php';\nconst CPM_HEADER = 'X-Pricing-CPM';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['mf'], // short code\n  isBidRequestValid: function (bid) {\n    return bid.params.s !== null && bid.params.s !== undefined;\n  },\n  buildRequests: function (validBidRequests) {\n    if (validBidRequests.length > 1) {\n      throw ('invalid number of valid bid requests, expected 1 element')\n    }\n\n    let bidParams = validBidRequests[0].params;\n    let bid = validBidRequests[0];\n\n    let params = {\n      // -------------------- Mandatory Parameters ------------------\n      rt: bidParams.rt || 'api-fetchip',\n      r_type: bidParams.r_type || 'banner',\n      r_resp: bidParams.r_resp || 'json', // string | vast20\n      //  i: bidParams.i || undefined , // string | 69.197.148.18\n      s: bidParams.s, // string | 80187188f458cfde788d961b6882fd53\n      u: bidParams.u || window.navigator.userAgent, // string\n\n      // ------------------- Global Parameters ----------------------\n      adspace_width: bidParams.adspace_width || bid.sizes[0][0], // integer | 320\n      adspace_height: bidParams.adspace_height || bid.sizes[0][1], // integer | 48\n      r_floor: bidParams.r_floor || undefined, // 0.8\n\n      o_andadvid: bidParams.o_andadvid || undefined, // 'c6292267-56ad-4326-965d-deef6fcd5er9'\n      longitude: bidParams.longitude || undefined, // 12.12\n      latitude: bidParams.latitude || undefined, // 280.12\n      demo_age: bidParams.demo_age || undefined, // 1978\n\n      // ------------------- banner / interstitial ----------------------\n      adspace_strict: bidParams.adspace_strict || undefined,\n\n      // ------------------- interstitial / video ----------------------\n      imp_instl: bidParams.imp_instl || undefined, // integer | 1\n\n      // ------------------- mraid ----------------------\n      c_mraid: bidParams.c_mraid || undefined, // integer | 1\n\n      // ------------------- video ----------------------\n      v_dur_min: bidParams.v_dur_min || undefined, // integer | 0\n      v_dur_max: bidParams.v_dur_max || undefined, // integer | 999\n      v_autoplay: bidParams.v_autoplay || undefined, // integer | 1\n      v_startmute: bidParams.v_startmute || undefined, // integer | 0\n      v_rewarded: bidParams.v_rewarded || undefined, // integer | 0\n      v_api: bidParams.v_api || undefined, // string | vpaid20\n      n_ver: bidParams.n_ver || undefined, //\n      n_adunit: bidParams.n_adunit || undefined, //\n      n_layout: bidParams.n_layout || undefined, //\n      n_context: bidParams.n_context || undefined, //\n      n_plcmttype: bidParams.n_plcmttype || undefined, //\n      n_img_icon_req: bidParams.n_img_icon_req || undefined, // boolean0\n      n_img_icon_size: bidParams.n_img_icon_size || undefined, // string80\n      n_img_large_req: bidParams.n_img_large_req || undefined, // boolean0\n      n_img_large_w: bidParams.n_img_large_w || undefined, // integer1200\n      n_img_large_h: bidParams.n_img_large_h || undefined, // integer627\n      n_title_req: bidParams.n_title_req || undefined, // boolean0\n      n_title_len: bidParams.n_title_len || undefined, // string25\n      n_desc_req: bidParams.n_desc_req || undefined, // boolean0\n      n_desc_len: bidParams.n_desc_len || undefined, // string140\n      n_rating_req: bidParams.n_rating_req || undefined\n    };\n\n    let payloadString = buildPayloadString(params);\n\n    return {\n      method: 'GET',\n      url: BID_REQUEST_BASE_URL,\n      data: payloadString,\n      requestId: bid.bidId\n    };\n  },\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    let serverResponseBody = serverResponse.body;\n\n    if (!serverResponseBody || serverResponseBody.error) {\n      let errorMessage = `in response for ${BIDDER_CODE} adapter`;\n      if (serverResponseBody && serverResponseBody.error) {\n        errorMessage += `: ${serverResponseBody.error}`;\n      }\n      utils.logError(errorMessage);\n      return bidResponses;\n    }\n    try {\n      let serverResponseHeaders = serverResponse.headers;\n      let bidRequestData = bidRequest.data.split('&');\n      const bidResponse = {\n        requestId: bidRequest.requestId,\n        cpm: serverResponseHeaders.get(CPM_HEADER),\n        width: bidRequestData[5].split('=')[1],\n        height: bidRequestData[6].split('=')[1],\n        creativeId: bidRequestData[3].split('=')[1],\n        currency: 'USD',\n        netRevenue: true,\n        ttl: 360,\n        referrer: serverResponseBody.request.clickurl,\n        ad: serverResponseBody.request.htmlString\n      };\n      bidResponses.push(bidResponse);\n    } catch (e) {\n      throw 'could not build bid response: ' + e;\n    }\n    return bidResponses;\n  }\n};\n\nfunction buildPayloadString(params) {\n  for (let key in params) {\n    if (params.hasOwnProperty(key)) {\n      if (params[key] === undefined) {\n        delete params[key];\n      } else {\n        params[key] = encodeURIComponent(params[key]);\n      }\n    }\n  }\n\n  return utils._map(Object.keys(params), key => `${key}=${params[key]}`)\n    .join('&')\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/mobfoxBidAdapter.js","import { BANNER, NATIVE } from 'src/mediaTypes';\n\nconst {registerBidder} = require('../src/adapters/bidderFactory');\nconst BIDDER_CODE = 'my6sense';\nconst END_POINT = '//papi.mynativeplatform.com/pub2/web/v1.15.0/hbwidget.json';\nconst END_POINT_METHOD = 'POST';\n\n// called first\nfunction isBidRequestValid(bid) {\n  return !(bid.bidder !== BIDDER_CODE || !bid.params || !bid.params.key);\n}\n\nfunction getUrl(url) {\n  if (!url) {\n    url = window.location.href;// \"clean\" url of current web page\n  }\n  var canonicalLink = null;\n  // first look for meta data with property \"og:url\"\n  var metaElements = document.getElementsByTagName('meta');\n  for (var i = 0; i < metaElements.length && !canonicalLink; i++) {\n    if (metaElements[i].getAttribute('property') == 'og:url') {\n      canonicalLink = metaElements[i].content;\n    }\n  }\n  if (!canonicalLink) {\n    var canonicalLinkContainer = document.querySelector(\"link[rel='canonical']\");// html element containing the canonical link\n    if (canonicalLinkContainer) {\n      // get clean url from href of <link rel='canocial' .../>\n      canonicalLink = canonicalLinkContainer.href;\n    }\n  }\n  url = canonicalLink || url;\n  return encodeURIComponent(url).toString();\n}\n\n/**\n * this function is used to fix param value before sending them to server, if user did not set it,\n * default value for parameter will be returned\n * example1: paidClicks: '[PAID_TRACKING_PIXEL]', will return {value: '', fromUser: false}\n * example2: pageURL: 'www.my6sense.com', will return {value: 'www.my6sense.com', fromUser: true}\n * @param key\n * @param value\n * @returns {{value: *, fromUser: boolean}}\n */\nfunction fixRequestParamForServer(key, value) {\n  function isEmptyValue(key, value) {\n    return value === parametersMap[key].emptyValue;\n  }\n\n  const parametersMap = {\n    'pageUrl': {\n      emptyValue: '[PAGE_URL]',\n      defaultValue: getUrl()\n    },\n    'displayWithinIframe': {\n      emptyValue: '',\n      defaultValue: ''\n    },\n    'dataParams': {\n      emptyValue: '[KEY_VALUES]',\n      defaultValue: ''\n    },\n    'paidClicks': {\n      emptyValue: '[PAID_TRACKING_PIXEL]',\n      defaultValue: ''\n    },\n    'organicClicks': {\n      emptyValue: '[ORGANIC_TRACKING_PIXEL]',\n      defaultValue: ''\n    },\n    'dataView': {\n      emptyValue: '[VIEW_TRACKING_PIXEL]',\n      defaultValue: ''\n    },\n    // ZONE is not part of this object, handled on server side\n  };\n\n  // if param is not in list we do not change it (return it as is)\n  if (!parametersMap.hasOwnProperty(key)) {\n    return {\n      value: value,\n      fromUser: true\n    };\n  }\n\n  // if no value given by user set it to default\n  if (!value || isEmptyValue(key, value)) {\n    return {\n      value: parametersMap[key].defaultValue,\n      fromUser: false\n    };\n  }\n\n  return {\n    value: value,\n    fromUser: true\n  };\n}\n\n// called second\n\nfunction buildGdprServerProperty(bidderRequest) {\n  var gdprObj = {\n    gdpr_consent: null,\n    gdpr: null\n  };\n\n  if (bidderRequest && 'gdprConsent' in bidderRequest) {\n    gdprObj.gdpr_consent = bidderRequest.gdprConsent.consentString || null;\n\n    gdprObj.gdpr = gdprObj.gdpr === null && bidderRequest.gdprConsent.gdprApplies == true ? true : gdprObj.gdpr;\n    gdprObj.gdpr = gdprObj.gdpr === null && bidderRequest.gdprConsent.gdprApplies == false ? false : gdprObj.gdpr;\n    gdprObj.gdpr = gdprObj.gdpr === null && bidderRequest.gdprConsent.gdprApplies == 1 ? true : gdprObj.gdpr;\n    gdprObj.gdpr = gdprObj.gdpr === null && bidderRequest.gdprConsent.gdprApplies == 0 ? false : gdprObj.gdpr;\n  }\n\n  return gdprObj;\n}\n\nfunction buildRequests(validBidRequests, bidderRequest) {\n  let requests = [];\n\n  if (validBidRequests && validBidRequests.length) {\n    validBidRequests.forEach(bidRequest => {\n      bidRequest.widget_num = 1; // mandatory property for server side\n      let isDataUrlSetByUser = false;\n      let debug = false;\n\n      if (bidRequest.params) {\n        for (let key in bidRequest.params) {\n          // loop over params and remove empty/untouched values\n          if (bidRequest.params.hasOwnProperty(key)) {\n            // if debug we update url string to get core debug version\n            if (key === 'debug' && bidRequest.params[key] === true) {\n              debug = true;\n              delete bidRequest.params[key];\n              continue;\n            }\n\n            let fixedObj = fixRequestParamForServer(key, bidRequest.params[key]);\n            bidRequest.params[key] = fixedObj.value;\n\n            // if pageUrl is set by user we should update variable for query string param\n            if (key === 'pageUrl' && fixedObj.fromUser === true) {\n              isDataUrlSetByUser = true;\n            }\n\n            // remove empty params from request\n            if (!bidRequest.params[key]) {\n              delete bidRequest.params[key];\n            }\n          }\n        }\n      }\n\n      let url = `${END_POINT}?widget_key=${bidRequest.params.key}&is_data_url_set=${isDataUrlSetByUser}`; // mandatory query string for server side\n      if (debug) {\n        url = `${END_POINT}?env=debug&widget_key=${bidRequest.params.key}&is_data_url_set=${isDataUrlSetByUser}`; // this url is for debugging\n      }\n\n      bidRequest.gdpr = buildGdprServerProperty(bidderRequest);\n\n      requests.push({\n        url: url,\n        method: END_POINT_METHOD,\n        data: JSON.stringify(bidRequest)\n      });\n    });\n  }\n\n  return requests;\n}\n\n// called third\n\nfunction interpretResponse(serverResponse) {\n  const bidResponses = [];\n  // currently server returns a single response which is the body property\n  if (serverResponse.body) {\n    serverResponse.body.bidderCode = BIDDER_CODE;\n    bidResponses.push(serverResponse.body);\n  }\n\n  return bidResponses;\n}\n\nconst spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, NATIVE],\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse\n};\n\nregisterBidder(spec);\n\nmodule.exports = spec;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/my6senseBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from '../src/adapters/bidderFactory';\nimport { BANNER } from '../src/mediaTypes';\n\nexport const BIDDER_CODE = 'nanointeractive';\nexport const ENGINE_BASE_URL = 'https://www.audiencemanager.de/hb';\n\nexport const DATA_PARTNER_PIXEL_ID = 'pid';\nexport const NQ = 'nq';\nexport const NQ_NAME = 'name';\nexport const CATEGORY = 'category';\nexport const CATEGORY_NAME = 'categoryName';\nexport const SUB_ID = 'subId';\nexport const REF = 'ref';\nexport const LOCATION = 'loc';\n\nexport const spec = {\n\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid (bid) {\n    const pid = bid.params[DATA_PARTNER_PIXEL_ID];\n    return !!(pid);\n  },\n  buildRequests (bidRequests) {\n    let payload = [];\n    bidRequests.forEach(bid => payload.push(createSingleBidRequest(bid)));\n    return {\n      method: 'POST',\n      url: ENGINE_BASE_URL,\n      data: JSON.stringify(payload)\n    };\n  },\n  interpretResponse (serverResponse) {\n    const bids = [];\n    serverResponse.body.forEach(serverBid => {\n      if (isEngineResponseValid(serverBid)) {\n        bids.push(createSingleBidResponse(serverBid));\n      }\n    });\n    return bids;\n  }\n};\n\nfunction createSingleBidRequest (bid) {\n  return {\n    [DATA_PARTNER_PIXEL_ID]: bid.params[DATA_PARTNER_PIXEL_ID],\n    [NQ]: [createNqParam(bid)],\n    [CATEGORY]: [createCategoryParam(bid)],\n    [SUB_ID]: createSubIdParam(bid),\n    [REF]: createRefParam(bid),\n    sizes: bid.sizes.map(value => value[0] + 'x' + value[1]),\n    bidId: bid.bidId,\n    cors: utils.getOrigin(),\n    [LOCATION]: createLocationParam(),\n  };\n}\n\nfunction createSingleBidResponse (serverBid) {\n  return {\n    requestId: serverBid.id,\n    cpm: serverBid.cpm,\n    width: serverBid.width,\n    height: serverBid.height,\n    ad: serverBid.ad,\n    ttl: serverBid.ttl,\n    creativeId: serverBid.creativeId,\n    netRevenue: serverBid.netRevenue || true,\n    currency: serverBid.currency,\n  };\n}\n\nfunction createNqParam (bid) {\n  return bid.params[NQ_NAME] ? utils.getParameterByName(bid.params[NQ_NAME]) : bid.params[NQ] || null;\n}\n\nfunction createCategoryParam (bid) {\n  return bid.params[CATEGORY_NAME] ? utils.getParameterByName(bid.params[CATEGORY_NAME]) : bid.params[CATEGORY] || null;\n}\n\nfunction createSubIdParam (bid) {\n  return bid.params[SUB_ID] || null;\n}\n\nfunction createRefParam (bid) {\n  return bid.params[REF] ? null : utils.getTopWindowReferrer() || null;\n}\n\nfunction createLocationParam () {\n  return utils.getTopWindowLocation().href;\n}\n\nfunction isEngineResponseValid (response) {\n  return !!response.cpm && !!response.ad;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/nanointeractiveBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport find from 'core-js/library/fn/array/find';\n\nconst ADMIXER_ENDPOINT = 'https://adn.admixer.co.kr:10443/prebid';\nconst DEFAULT_BID_TTL = 360;\nconst DEFAULT_CURRENCY = 'USD';\nconst DEFAULT_REVENUE = false;\n\nexport const spec = {\n  code: 'nasmediaAdmixer',\n\n  isBidRequestValid: function (bid) {\n    return !!(bid && bid.params && bid.params.ax_key);\n  },\n\n  buildRequests: function (validBidRequests) {\n    return validBidRequests.map(bid => {\n      let adSize = getSize(bid.sizes);\n\n      return {\n        method: 'GET',\n        url: ADMIXER_ENDPOINT,\n        data: {\n          ax_key: utils.getBidIdParameter('ax_key', bid.params),\n          req_id: bid.bidId,\n          width: adSize.width,\n          height: adSize.height,\n          referrer: utils.getTopWindowUrl(),\n          os: getOsType()\n        }\n      }\n    })\n  },\n\n  interpretResponse: function (serverResponse, bidRequest) {\n    const serverBody = serverResponse.body;\n    const bidResponses = [];\n\n    if (serverBody && serverBody.error_code === 0 && serverBody.body && serverBody.body.length > 0) {\n      let bidData = serverBody.body[0];\n\n      const bidResponse = {\n        ad: bidData.ad,\n        requestId: serverBody.req_id,\n        creativeId: bidData.ad_id,\n        cpm: bidData.cpm,\n        width: bidData.width,\n        height: bidData.height,\n        currency: bidData.currency ? bidData.currency : DEFAULT_CURRENCY,\n        netRevenue: DEFAULT_REVENUE,\n        ttl: DEFAULT_BID_TTL\n      };\n\n      bidResponses.push(bidResponse);\n    }\n    return bidResponses;\n  }\n}\n\nfunction getOsType() {\n  let ua = navigator.userAgent.toLowerCase();\n  let os = ['android', 'ios', 'mac', 'linux', 'window'];\n  let regexpOs = [/android/i, /iphone|ipad/i, /mac/i, /linux/i, /window/i];\n\n  return find(os, (tos, idx) => {\n    if (ua.match(regexpOs[idx])) {\n      return os[idx];\n    }\n  }) || 'etc';\n}\n\nfunction getSize(sizes) {\n  let parsedSizes = utils.parseSizesInput(sizes);\n  let [width, height] = parsedSizes.length ? parsedSizes[0].split('x') : [];\n\n  return {\n    width: parseInt(width, 10),\n    height: parseInt(height, 10)\n  };\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/nasmediaAdmixerBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'oneVideo';\nexport const spec = {\n  code: 'oneVideo',\n  ENDPOINT: '//ads.adaptv.advertising.com/rtb/openrtb?ext_id=',\n  SYNC_ENDPOINT1: 'https://cm.g.doubleclick.net/pixel?google_nid=adaptv_dbm&google_cm&google_sc',\n  SYNC_ENDPOINT2: 'https://pr-bh.ybp.yahoo.com/sync/adaptv_ortb/{combo_uid}',\n  SYNC_ENDPOINT3: 'https://sync-tm.everesttech.net/upi/pid/m7y5t93k?redir=https%3A%2F%2Fsync.adap.tv%2Fsync%3Ftype%3Dgif%26key%3Dtubemogul%26uid%3D%24%7BUSER_ID%7D',\n  SYNC_ENDPOINT4: 'https://match.adsrvr.org/track/cmf/generic?ttd_pid=adaptv&ttd_tpi=1',\n  supportedMediaTypes: ['video'],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    if (bid.bidder !== BIDDER_CODE || typeof bid.params === 'undefined') {\n      return false;\n    }\n\n    // Video validations\n    if (typeof bid.params.video === 'undefined' || typeof bid.params.video.playerWidth === 'undefined' || typeof bid.params.video.playerHeight == 'undefined' || typeof bid.params.video.mimes == 'undefined') {\n      return false;\n    }\n\n    // Pub Id validation\n    if (typeof bid.params.pubId === 'undefined') {\n      return false;\n    }\n\n    return true;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @param bidderRequest\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bids, bidRequest) {\n    let consentData = bidRequest ? bidRequest.gdprConsent : null;\n\n    return bids.map(bid => {\n      return {\n        method: 'POST',\n        url: location.protocol + spec.ENDPOINT + bid.params.pubId,\n        data: getRequestData(bid, consentData),\n        options: {contentType: 'application/json'},\n        bidRequest: bid\n      }\n    })\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(response, { bidRequest }) {\n    let bid;\n    let size;\n    let bidResponse;\n    try {\n      response = response.body;\n      bid = response.seatbid[0].bid[0];\n    } catch (e) {\n      response = null;\n    }\n    if (!response || !bid || (!bid.adm && !bid.nurl) || !bid.price) {\n      utils.logWarn(`No valid bids from ${spec.code} bidder`);\n      return [];\n    }\n    size = getSize(bidRequest.sizes);\n    bidResponse = {\n      requestId: bidRequest.bidId,\n      bidderCode: spec.code,\n      cpm: bid.price,\n      creativeId: bid.id,\n      width: size.width,\n      height: size.height,\n      mediaType: 'video',\n      currency: response.cur,\n      ttl: 100,\n      netRevenue: true\n    };\n    if (bid.nurl) {\n      bidResponse.vastUrl = bid.nurl;\n    } else if (bid.adm) {\n      bidResponse.vastXml = bid.adm;\n    }\n    return bidResponse;\n  },\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: spec.SYNC_ENDPOINT1\n      },\n      {\n        type: 'image',\n        url: spec.SYNC_ENDPOINT2\n      },\n      {\n        type: 'image',\n        url: spec.SYNC_ENDPOINT3\n      },\n      {\n        type: 'image',\n        url: spec.SYNC_ENDPOINT4\n      }];\n    }\n  }\n};\n\nfunction getSize(sizes) {\n  let parsedSizes = utils.parseSizesInput(sizes);\n  let [ width, height ] = parsedSizes.length ? parsedSizes[0].split('x') : [];\n  return {\n    width: parseInt(width, 10) || undefined,\n    height: parseInt(height, 10) || undefined\n  };\n}\n\nfunction isConsentRequired(consentData) {\n  return !!(consentData && consentData.gdprApplies);\n}\n\nfunction getRequestData(bid, consentData) {\n  let loc = utils.getTopWindowLocation();\n  let global = (window.top) ? window.top : window;\n  let page = (bid.params.site && bid.params.site.page) ? (bid.params.site.page) : (loc.href);\n  let ref = (bid.params.site && bid.params.site.referrer) ? bid.params.site.referrer : utils.getTopWindowReferrer();\n  let bidData = {\n    id: utils.generateUUID(),\n    at: 2,\n    cur: bid.cur || 'USD',\n    imp: [{\n      id: '1',\n      secure: isSecure(),\n      bidfloor: bid.params.bidfloor,\n      video: {\n        mimes: bid.params.video.mimes,\n        w: bid.params.video.playerWidth,\n        h: bid.params.video.playerHeight,\n        linearity: 1,\n        protocols: bid.params.video.protocols || [2, 5]\n      }\n    }],\n    site: {\n      page: page,\n      ref: ref\n    },\n    device: {\n      ua: global.navigator.userAgent\n    },\n    tmax: 200\n  };\n\n  if (bid.params.video.maxbitrate) {\n    bidData.imp[0].video.maxbitrate = bid.params.video.maxbitrate\n  }\n  if (bid.params.video.maxduration) {\n    bidData.imp[0].video.maxduration = bid.params.video.maxduration\n  }\n  if (bid.params.video.minduration) {\n    bidData.imp[0].video.minduration = bid.params.video.minduration\n  }\n  if (bid.params.video.api) {\n    bidData.imp[0].video.api = bid.params.video.api\n  }\n  if (bid.params.video.delivery) {\n    bidData.imp[0].video.delivery = bid.params.video.delivery\n  }\n  if (bid.params.video.position) {\n    bidData.imp[0].video.pos = bid.params.video.position\n  }\n  if (bid.params.site && bid.params.site.id) {\n    bidData.site.id = bid.params.site.id\n  }\n\n  if (isConsentRequired(consentData)) {\n    bidData.regs = {\n      ext: {\n        gdpr: 1\n      }\n    };\n\n    if (consentData.consentString) {\n      bidData.user = {\n        ext: {\n          consent: consentData.consentString\n        }\n      };\n    }\n  }\n\n  return bidData;\n}\n\nfunction isSecure() {\n  return document.location.protocol === 'https:';\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/oneVideoBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\n\nconst BIDDER_CODE = 'oneplanetonly';\nconst EDNPOINT = '//show.oneplanetonly.com/prebid';\n\nfunction createEndpoint(siteId) {\n  return `${EDNPOINT}?siteId=${siteId}`;\n}\n\nfunction isBidRequestValid (bid) {\n  return !!(bid.params.siteId && bid.params.adUnitId);\n}\n\nfunction buildRequests(bidReqs) {\n  let firstBid = bidReqs[0] || {}\n  let siteId = utils.getBidIdParameter('siteId', firstBid.params)\n  let adUnits = bidReqs.map((bid) => {\n    return {\n      id: utils.getBidIdParameter('adUnitId', bid.params),\n      bidId: bid.bidId,\n      sizes: utils.parseSizesInput(bid.sizes),\n    };\n  });\n\n  const bidRequest = {\n    id: firstBid.auctionId,\n    ver: 1,\n    prebidVer: `1.25.0-pre`,\n    transactionId: firstBid.transactionId,\n    currency: config.getConfig('currency.adServerCurrency'),\n    timeout: config.getConfig('bidderTimeout'),\n    siteId,\n    domain: utils.getTopWindowLocation().hostname,\n    page: config.getConfig('pageUrl') || utils.getTopWindowUrl(),\n    referrer: utils.getTopWindowReferrer(),\n    adUnits,\n  };\n\n  return {\n    method: 'POST',\n    url: createEndpoint(siteId),\n    data: bidRequest,\n    options: {contentType: 'application/json', withCredentials: true}\n  };\n}\n\nfunction interpretResponse(serverResponse, request) {\n  if (!serverResponse.body.bids) {\n    return [];\n  }\n  return serverResponse.body.bids.map((bid) => {\n    return {\n      requestId: bid.requestId,\n      cpm: bid.cpm,\n      width: bid.width,\n      height: bid.height,\n      creativeId: bid.creativeId,\n      currency: bid.currency,\n      netRevenue: true,\n      ad: bid.ad,\n      ttl: bid.ttl\n    };\n  });\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['opo'], // short code\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/oneplanetonlyBidAdapter.js","'use strict';\n\nconst { registerBidder } = require('../src/adapters/bidderFactory');\n\nconst ENDPOINT = 'https://onetag-sys.com/prebid-request';\nconst BIDDER_CODE = 'onetag';\nconst BANNER = 'banner';\n\n// =======\n// Object BidRequest\n//\n//          .params\n// required    .pubId:  string\n// optional    .type: \"BANNER\" | \"VIDEO\" | \"NATIVE\"  --> only BANNER at present\n\n/**\n * Determines whether or not the given bid request is valid.\n *\n * @param {BidRequest} bid The bid params to validate.\n * @return boolean True if this is a valid bid, and false otherwise.\n */\nfunction isBidRequestValid(bid) {\n  if (typeof bid === 'undefined' || bid.bidder !== BIDDER_CODE || typeof bid.params === 'undefined') {\n    return false;\n  }\n\n  if (typeof bid.params.pubId !== 'string' || bid.sizes === 'undefined' || bid.sizes.length === 0) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Make a server request from the list of BidRequests.\n *\n * @param {validBidRequests[]} - an array of bids\n * @return ServerRequest Info describing the request to the server.\n */\n\nfunction buildRequests(validBidRequests, bidderRequest) {\n  const bids = validBidRequests.map(requestsToBids);\n  const bidObject = {'bids': bids};\n  const pageInfo = getPageInfo();\n\n  const payload = Object.assign(bidObject, pageInfo);\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    payload.gdprConsent = {\n      consentString: bidderRequest.gdprConsent.consentString,\n      consentRequired: bidderRequest.gdprConsent.gdprApplies\n    };\n  }\n\n  const payloadString = JSON.stringify(payload);\n\n  return {\n    method: 'POST',\n    url: ENDPOINT,\n    data: payloadString\n  }\n}\n\nfunction interpretResponse(serverResponse, request) {\n  var body = serverResponse.body;\n  const bids = [];\n\n  if (typeof serverResponse === 'string') {\n    try {\n      body = JSON.parse(serverResponse);\n    } catch (e) {\n      return bids;\n    }\n  }\n\n  if (!body || (body.nobid && body.nobid === true)) {\n    return bids;\n  }\n\n  if (body.bids) {\n    body.bids.forEach(function(bid) {\n      bids.push({\n        requestId: bid.requestId,\n        cpm: bid.cpm,\n        width: bid.width,\n        height: bid.height,\n        creativeId: bid.creativeId,\n        dealId: bid.dealId ? bid.dealId : '',\n        currency: bid.currency,\n        netRevenue: false,\n        mediaType: bids.type ? bids.type : BANNER,\n        ad: bid.ad,\n        ttl: bid.ttl || 6000\n      });\n    });\n  }\n\n  return bids;\n}\n\n/**\n * Returns information about the page needed by the server in an object to be converted in JSON\n * @returns {{location: *, referrer: (*|string), masked: *, wWidth: (*|Number), wHeight: (*|Number), sWidth, sHeight, date: string, timeOffset: number}}\n */\nfunction getPageInfo() {\n  var w, d, l, r, m, p, e, t, s;\n  for (w = window, d = w.document, l = d.location.href, r = d.referrer, m = 0, e = encodeURIComponent, t = new Date(), s = screen; w !== w.parent;) {\n    try {\n      p = w.parent; l = p.location.href; r = p.document.referrer; w = p;\n    } catch (e) {\n      m = top !== w.parent ? 2 : 1;\n      break\n    }\n  }\n\n  const params = {\n\n    location: e(l),\n    referrer: e(r) || '0',\n    masked: m,\n    wWidth: w.innerWidth,\n    wHeight: w.innerHeight,\n    sWidth: s.width,\n    sHeight: s.height,\n    date: t.toUTCString(),\n    timeOffset: t.getTimezoneOffset()\n  };\n\n  return params;\n}\n\nfunction requestsToBids(bid) {\n  const toRet = {};\n\n  const params = bid.params;\n\n  toRet['adUnitCode'] = bid.adUnitCode;\n  toRet['bidId'] = bid.bidId;\n  toRet['bidderRequestId'] = bid.bidderRequestId;\n  toRet['auctionId'] = bid.auctionId;\n  toRet['transactionId'] = bid.transactionId;\n  toRet['sizes'] = [];\n  const sizes = bid.sizes;\n  for (let i = 0, lenght = sizes.length; i < lenght; i++) {\n    const size = sizes[i];\n    toRet['sizes'].push({width: size[0], height: size[1]})\n  }\n\n  toRet['pubId'] = params.pubId;\n  if (params.type) {\n    toRet['type'] = params.type;\n  }\n\n  if (params.pubClick) {\n    toRet['click'] = params.pubClick;\n  }\n\n  if (params.dealId) {\n    toRet['dealId'] = params.dealId;\n  }\n\n  return toRet;\n}\n\nexport const spec = {\n\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: isBidRequestValid,\n  buildRequests: buildRequests,\n  interpretResponse: interpretResponse,\n\n};\n\n// Starting point\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/onetagBidAdapter.js","import {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\nimport {userSync} from 'src/userSync';\nimport {BANNER, VIDEO} from 'src/mediaTypes';\nimport {parse} from 'src/url';\n\nconst SUPPORTED_AD_TYPES = [BANNER, VIDEO];\nconst BIDDER_CODE = 'openx';\nconst BIDDER_CONFIG = 'hb_pb';\nconst BIDDER_VERSION = '2.1.4';\n\nlet shouldSendBoPixel = true;\n\nexport function resetBoPixel() {\n  shouldSendBoPixel = true;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: SUPPORTED_AD_TYPES,\n  isBidRequestValid: function (bidRequest) {\n    if (utils.deepAccess(bidRequest, 'mediaTypes.banner') && bidRequest.params.delDomain) {\n      return !!bidRequest.params.unit || utils.deepAccess(bidRequest, 'mediaTypes.banner.sizes.length') > 0;\n    }\n\n    return !!(bidRequest.params.unit && bidRequest.params.delDomain);\n  },\n  buildRequests: function (bidRequests, bidderRequest) {\n    if (bidRequests.length === 0) {\n      return [];\n    }\n\n    let requests = [];\n    let [videoBids, bannerBids] = partitionByVideoBids(bidRequests);\n\n    // build banner requests\n    if (bannerBids.length > 0) {\n      requests.push(buildOXBannerRequest(bannerBids, bidderRequest));\n    }\n    // build video requests\n    if (videoBids.length > 0) {\n      videoBids.forEach(videoBid => {\n        requests.push(buildOXVideoRequest(videoBid, bidderRequest))\n      });\n    }\n\n    return requests;\n  },\n  interpretResponse: function ({body: oxResponseObj}, serverRequest) {\n    let mediaType = getMediaTypeFromRequest(serverRequest);\n\n    return mediaType === VIDEO ? createVideoBidResponses(oxResponseObj, serverRequest.payload)\n      : createBannerBidResponses(oxResponseObj, serverRequest.payload);\n  },\n  getUserSyncs: function (syncOptions, responses) {\n    if (syncOptions.iframeEnabled) {\n      let url = utils.deepAccess(responses, '0.body.ads.pixels') ||\n        utils.deepAccess(responses, '0.body.pixels') ||\n        '//u.openx.net/w/1.0/pd';\n      return [{\n        type: 'iframe',\n        url: url\n      }];\n    }\n  },\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'unit': 'string',\n      'customFloor': 'number'\n    }, params);\n  }\n};\n\nfunction isVideoRequest(bidRequest) {\n  return utils.deepAccess(bidRequest, 'mediaTypes.video') || bidRequest.mediaType === VIDEO;\n}\n\nfunction createBannerBidResponses(oxResponseObj, {bids, startTime}) {\n  let adUnits = oxResponseObj.ads.ad;\n  let bidResponses = [];\n  for (let i = 0; i < adUnits.length; i++) {\n    let adUnit = adUnits[i];\n    let adUnitIdx = parseInt(adUnit.idx, 10);\n    let bidResponse = {};\n\n    bidResponse.requestId = bids[adUnitIdx].bidId;\n\n    if (adUnit.pub_rev) {\n      bidResponse.cpm = Number(adUnit.pub_rev) / 1000;\n    } else {\n      // No fill, do not add the bidresponse\n      continue;\n    }\n    let creative = adUnit.creative[0];\n    if (creative) {\n      bidResponse.width = creative.width;\n      bidResponse.height = creative.height;\n    }\n    bidResponse.creativeId = creative.id;\n    bidResponse.ad = adUnit.html;\n    if (adUnit.deal_id) {\n      bidResponse.dealId = adUnit.deal_id;\n    }\n    // default 5 mins\n    bidResponse.ttl = 300;\n    // true is net, false is gross\n    bidResponse.netRevenue = true;\n    bidResponse.currency = adUnit.currency;\n\n    // additional fields to add\n    if (adUnit.tbd) {\n      bidResponse.tbd = adUnit.tbd;\n    }\n    bidResponse.ts = adUnit.ts;\n\n    bidResponses.push(bidResponse);\n\n    registerBeacon(BANNER, adUnit, startTime);\n  }\n  return bidResponses;\n}\n\nfunction buildQueryStringFromParams(params) {\n  for (let key in params) {\n    if (params.hasOwnProperty(key)) {\n      if (!params[key]) {\n        delete params[key];\n      }\n    }\n  }\n  return utils._map(Object.keys(params), key => `${key}=${params[key]}`)\n    .join('&');\n}\n\nfunction getViewportDimensions(isIfr) {\n  let width;\n  let height;\n  let tWin = window;\n  let tDoc = document;\n  let docEl = tDoc.documentElement;\n  let body;\n\n  if (isIfr) {\n    try {\n      tWin = window.top;\n      tDoc = window.top.document;\n    } catch (e) {\n      return;\n    }\n    docEl = tDoc.documentElement;\n    body = tDoc.body;\n\n    width = tWin.innerWidth || docEl.clientWidth || body.clientWidth;\n    height = tWin.innerHeight || docEl.clientHeight || body.clientHeight;\n  } else {\n    docEl = tDoc.documentElement;\n    width = tWin.innerWidth || docEl.clientWidth;\n    height = tWin.innerHeight || docEl.clientHeight;\n  }\n\n  return `${width}x${height}`;\n}\n\nfunction formatCustomParms(customKey, customParams) {\n  let value = customParams[customKey];\n  if (utils.isArray(value)) {\n    // if value is an array, join them with commas first\n    value = value.join(',');\n  }\n  // return customKey=customValue format, escaping + to . and / to _\n  return (customKey.toLowerCase() + '=' + value.toLowerCase()).replace('+', '.').replace('/', '_')\n}\n\nfunction partitionByVideoBids(bidRequests) {\n  return bidRequests.reduce(function (acc, bid) {\n    // Fallback to banner ads if nothing specified\n    if (isVideoRequest(bid)) {\n      acc[0].push(bid);\n    } else {\n      acc[1].push(bid);\n    }\n    return acc;\n  }, [[], []]);\n}\n\nfunction getMediaTypeFromRequest(serverRequest) {\n  return /avjp$/.test(serverRequest.url) ? VIDEO : BANNER;\n}\n\nfunction buildCommonQueryParamsFromBids(bids, bidderRequest) {\n  const isInIframe = utils.inIframe();\n  let defaultParams;\n\n  defaultParams = {\n    ju: config.getConfig('pageUrl') || utils.getTopWindowUrl(),\n    jr: utils.getTopWindowReferrer(),\n    ch: document.charSet || document.characterSet,\n    res: `${screen.width}x${screen.height}x${screen.colorDepth}`,\n    ifr: isInIframe,\n    tz: new Date().getTimezoneOffset(),\n    tws: getViewportDimensions(isInIframe),\n    be: 1,\n    bc: bids[0].params.bc || `${BIDDER_CONFIG}_${BIDDER_VERSION}`,\n    dddid: utils._map(bids, bid => bid.transactionId).join(','),\n    nocache: new Date().getTime()\n  };\n\n  if (utils.deepAccess(bidderRequest, 'gdprConsent')) {\n    let gdprConsentConfig = bidderRequest.gdprConsent;\n\n    if (gdprConsentConfig.consentString !== undefined) {\n      defaultParams.gdpr_consent = gdprConsentConfig.consentString;\n    }\n\n    if (gdprConsentConfig.gdprApplies !== undefined) {\n      defaultParams.gdpr = gdprConsentConfig.gdprApplies ? 1 : 0;\n    }\n\n    if (config.getConfig('consentManagement.cmpApi') === 'iab') {\n      defaultParams.x_gdpr_f = 1;\n    }\n  }\n\n  return defaultParams;\n}\n\nfunction buildOXBannerRequest(bids, bidderRequest) {\n  let customParamsForAllBids = [];\n  let hasCustomParam = false;\n  let queryParams = buildCommonQueryParamsFromBids(bids, bidderRequest);\n  let auids = utils._map(bids, bid => bid.params.unit);\n  queryParams.aus = utils._map(bids, bid => utils.parseSizesInput(bid.sizes).join(',')).join('|');\n  queryParams.divIds = utils._map(bids, bid => encodeURIComponent(bid.adUnitCode)).join(',');\n\n  if (auids.some(auid => auid)) {\n    queryParams.auid = auids.join(',');\n  }\n\n  if (bids.some(bid => bid.params.doNotTrack)) {\n    queryParams.ns = 1;\n  }\n\n  if (bids.some(bid => bid.params.coppa)) {\n    queryParams.tfcd = 1;\n  }\n\n  bids.forEach(function (bid) {\n    if (bid.params.customParams) {\n      let customParamsForBid = utils._map(Object.keys(bid.params.customParams), customKey => formatCustomParms(customKey, bid.params.customParams));\n      let formattedCustomParams = window.btoa(customParamsForBid.join('&'));\n      hasCustomParam = true;\n      customParamsForAllBids.push(formattedCustomParams);\n    } else {\n      customParamsForAllBids.push('');\n    }\n  });\n  if (hasCustomParam) {\n    queryParams.tps = customParamsForAllBids.join(',');\n  }\n\n  let customFloorsForAllBids = [];\n  let hasCustomFloor = false;\n  bids.forEach(function (bid) {\n    if (bid.params.customFloor) {\n      customFloorsForAllBids.push(bid.params.customFloor * 1000);\n      hasCustomFloor = true;\n    } else {\n      customFloorsForAllBids.push(0);\n    }\n  });\n  if (hasCustomFloor) {\n    queryParams.aumfs = customFloorsForAllBids.join(',');\n  }\n\n  let url = `//${bids[0].params.delDomain}/w/1.0/arj`;\n  return {\n    method: 'GET',\n    url: url,\n    data: queryParams,\n    payload: {'bids': bids, 'startTime': new Date()}\n  };\n}\n\nfunction buildOXVideoRequest(bid, bidderRequest) {\n  let url = `//${bid.params.delDomain}/v/1.0/avjp`;\n  let oxVideoParams = generateVideoParameters(bid, bidderRequest);\n  return {\n    method: 'GET',\n    url: url,\n    data: oxVideoParams,\n    payload: {'bid': bid, 'startTime': new Date()}\n  };\n}\n\nfunction generateVideoParameters(bid, bidderRequest) {\n  let queryParams = buildCommonQueryParamsFromBids([bid], bidderRequest);\n  let oxVideoConfig = utils.deepAccess(bid, 'params.video') || {};\n  let context = utils.deepAccess(bid, 'mediaTypes.video.context');\n  let playerSize = utils.deepAccess(bid, 'mediaTypes.video.playerSize');\n  let width;\n  let height;\n\n  // normalize config for video size\n  if (utils.isArray(bid.sizes) && bid.sizes.length === 2 && !utils.isArray(bid.sizes[0])) {\n    width = parseInt(bid.sizes[0], 10);\n    height = parseInt(bid.sizes[1], 10);\n  } else if (utils.isArray(bid.sizes) && utils.isArray(bid.sizes[0]) && bid.sizes[0].length === 2) {\n    width = parseInt(bid.sizes[0][0], 10);\n    height = parseInt(bid.sizes[0][1], 10);\n  } else if (utils.isArray(playerSize) && playerSize.length === 2) {\n    width = parseInt(playerSize[0], 10);\n    height = parseInt(playerSize[1], 10);\n  }\n\n  Object.keys(oxVideoConfig).forEach(function (key) {\n    if (key === 'openrtb') {\n      oxVideoConfig[key].w = width || oxVideoConfig[key].w;\n      oxVideoConfig[key].v = height || oxVideoConfig[key].v;\n      queryParams[key] = JSON.stringify(oxVideoConfig[key]);\n    } else if (!(key in queryParams) && key !== 'url') {\n      // only allow video-related attributes\n      queryParams[key] = oxVideoConfig[key];\n    }\n  });\n\n  queryParams.auid = bid.params.unit;\n  // override prebid config with openx config if available\n  queryParams.vwd = width || oxVideoConfig.vwd;\n  queryParams.vht = height || oxVideoConfig.vht;\n\n  if (context === 'outstream') {\n    queryParams.vos = '101';\n  }\n\n  if (oxVideoConfig.mimes) {\n    queryParams.vmimes = oxVideoConfig.mimes;\n  }\n\n  return queryParams;\n}\n\nfunction createVideoBidResponses(response, {bid, startTime}) {\n  let bidResponses = [];\n\n  if (response !== undefined && response.vastUrl !== '' && response.pub_rev !== '') {\n    let vastQueryParams = parse(response.vastUrl).search || {};\n    let bidResponse = {};\n    bidResponse.requestId = bid.bidId;\n    bidResponse.bidderCode = BIDDER_CODE;\n    // default 5 mins\n    bidResponse.ttl = 300;\n    // true is net, false is gross\n    bidResponse.netRevenue = true;\n    bidResponse.currency = response.currency;\n    bidResponse.cpm = Number(response.pub_rev) / 1000;\n    bidResponse.width = response.width;\n    bidResponse.height = response.height;\n    bidResponse.creativeId = response.adid;\n    bidResponse.vastUrl = response.vastUrl;\n    bidResponse.mediaType = VIDEO;\n\n    // enrich adunit with vast parameters\n    response.ph = vastQueryParams.ph;\n    response.colo = vastQueryParams.colo;\n    response.ts = vastQueryParams.ts;\n\n    bidResponses.push(bidResponse);\n\n    registerBeacon(VIDEO, response, startTime)\n  }\n\n  return bidResponses;\n}\n\nfunction registerBeacon(mediaType, adUnit, startTime) {\n  // only register beacon once\n  if (!shouldSendBoPixel) {\n    return;\n  }\n  shouldSendBoPixel = false;\n\n  let bt = config.getConfig('bidderTimeout');\n  let beaconUrl;\n  if (window.PREBID_TIMEOUT) {\n    bt = Math.min(window.PREBID_TIMEOUT, bt);\n  }\n\n  let beaconParams = {\n    bd: +(new Date()) - startTime,\n    bp: adUnit.pub_rev,\n    br: '0', // may be 0, t, or p\n    bs: utils.getTopWindowLocation().hostname,\n    bt: bt,\n    ts: adUnit.ts\n  };\n\n  beaconParams.br = beaconParams.bt < beaconParams.bd ? 't' : 'p';\n\n  if (mediaType === VIDEO) {\n    let url = parse(adUnit.colo);\n    beaconParams.ph = adUnit.ph;\n    beaconUrl = `//${url.hostname}/w/1.0/bo?${buildQueryStringFromParams(beaconParams)}`\n  } else {\n    let recordPixel = utils.deepAccess(adUnit, 'creative.0.tracking.impression');\n    let boBase = recordPixel.match(/([^?]+\\/)ri\\?/);\n\n    if (boBase && boBase.length > 1) {\n      beaconUrl = `${boBase[1]}bo?${buildQueryStringFromParams(beaconParams)}`;\n    }\n  }\n\n  if (beaconUrl) {\n    userSync.registerSync('image', BIDDER_CODE, beaconUrl);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/openxBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nexport const ENDPOINT = '//mg-bid.optimatic.com/adrequest/';\n\nexport const spec = {\n\n  version: '1.0.4',\n\n  code: 'optimatic',\n\n  supportedMediaTypes: ['video'],\n\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.params && bid.params.placement && bid.params.bidfloor);\n  },\n\n  buildRequests: function(bids) {\n    return bids.map(bid => {\n      return {\n        method: 'POST',\n        url: ENDPOINT + bid.params.placement,\n        data: getData(bid),\n        options: {contentType: 'application/json'},\n        bidRequest: bid\n      }\n    })\n  },\n\n  interpretResponse: function(response, { bidRequest }) {\n    let bid;\n    let size;\n    let bidResponse;\n    try {\n      response = response.body;\n      bid = response.seatbid[0].bid[0];\n    } catch (e) {\n      response = null;\n    }\n    if (!response || !bid || (!bid.adm && !bid.nurl) || !bid.price) {\n      utils.logWarn(`No valid bids from ${spec.code} bidder`);\n      return [];\n    }\n    size = getSize(bidRequest.sizes);\n    bidResponse = {\n      requestId: bidRequest.bidId,\n      bidderCode: spec.code,\n      cpm: bid.price,\n      creativeId: bid.id,\n      width: size.width,\n      height: size.height,\n      mediaType: 'video',\n      currency: response.cur,\n      ttl: 300,\n      netRevenue: true\n    };\n    if (bid.nurl) {\n      bidResponse.vastUrl = bid.nurl;\n    } else if (bid.adm) {\n      bidResponse.vastXml = bid.adm;\n    }\n    return bidResponse;\n  }\n};\n\nfunction getSize(sizes) {\n  let parsedSizes = utils.parseSizesInput(sizes);\n  let [ width, height ] = parsedSizes.length ? parsedSizes[0].split('x') : [];\n  return {\n    width: parseInt(width, 10) || undefined,\n    height: parseInt(height, 10) || undefined\n  };\n}\n\nfunction getData (bid) {\n  let size = getSize(bid.sizes);\n  let loc = utils.getTopWindowLocation();\n  let global = (window.top) ? window.top : window;\n  return {\n    id: utils.generateUUID(),\n    imp: [{\n      id: '1',\n      bidfloor: bid.params.bidfloor,\n      video: {\n        mimes: ['video/mp4', 'video/ogg', 'video/webm', 'video/x-flv', 'application/javascript', 'application/x-shockwave-flash'],\n        w: size.width,\n        h: size.height\n      }\n    }],\n    site: {\n      id: '1',\n      domain: loc.host,\n      page: loc.href,\n      ref: utils.getTopWindowReferrer(),\n      publisher: {\n        id: '1'\n      }\n    },\n    device: {\n      ua: global.navigator.userAgent,\n      ip: '127.0.0.1',\n      devicetype: 1\n    }\n  };\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/optimaticBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'optimera';\nconst SCORES_BASE_URL = 'https://s3.amazonaws.com/elasticbeanstalk-us-east-1-397719490216/json/client/';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {bidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bidRequest) {\n    if (typeof bidRequest.params !== 'undefined' && typeof bidRequest.params.clientID !== 'undefined') {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * We call the existing scores data file for ad slot placement scores.\n   * These scores will be added to the dealId to be pushed to DFP.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests) {\n    let optimeraHost = window.location.host;\n    let optimeraPathName = window.location.pathname;\n    let timestamp = Math.round(new Date().getTime() / 1000);\n    if (typeof validBidRequests[0].params.clientID !== 'undefined') {\n      let clientID = validBidRequests[0].params.clientID;\n      let scoresURL = SCORES_BASE_URL + clientID + '/' + optimeraHost + optimeraPathName + '.js';\n      return {\n        method: 'GET',\n        url: scoresURL,\n        payload: validBidRequests,\n        data: {'t': timestamp}\n      };\n    }\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * Some required bid params are not needed for this so default\n   * values are used.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    let validBids = bidRequest.payload;\n    let bidResponses = [];\n    let dealId = '';\n    if (typeof serverResponse.body !== 'undefined') {\n      let scores = serverResponse.body;\n      for (let i = 0; i < validBids.length; i++) {\n        if (typeof validBids[i].params.clientID !== 'undefined') {\n          if (validBids[i].adUnitCode in scores) {\n            dealId = scores[validBids[i].adUnitCode];\n          }\n          let bidResponse = {\n            requestId: validBids[i].bidId,\n            ad: '<div></div>',\n            cpm: 0.01,\n            width: 0,\n            height: 0,\n            dealId: dealId,\n            ttl: 300,\n            creativeId: '1',\n            netRevenue: '0',\n            currency: 'USD'\n          };\n          bidResponses.push(bidResponse);\n        }\n      }\n    }\n    return bidResponses;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/optimeraBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\n\nconst BIDDER_CODE = 'orbitsoft';\nlet styleParamsMap = {\n  'title.family': 'f1', // headerFont\n  'title.size': 'fs1', // headerFontSize\n  'title.weight': 'w1', // headerWeight\n  'title.style': 's1', // headerStyle\n  'title.color': 'c3', // headerColor\n  'description.family': 'f2', // descriptionFont\n  'description.size': 'fs2', // descriptionFontSize\n  'description.weight': 'w2', // descriptionWeight\n  'description.style': 's2', // descriptionStyle\n  'description.color': 'c4', // descriptionColor\n  'url.family': 'f3', // urlFont\n  'url.size': 'fs3', // urlFontSize\n  'url.weight': 'w3', // urlWeight\n  'url.style': 's3', // urlStyle\n  'url.color': 'c5', // urlColor\n  'colors.background': 'c2', // borderColor\n  'colors.border': 'c1', // borderColor\n  'colors.link': 'c6', // lnkColor\n};\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['oas', '152media'], // short code and customer aliases\n  isBidRequestValid: function (bid) {\n    switch (true) {\n      case !('params' in bid):\n        utils.logError(bid.bidder + ': No required params');\n        return false;\n      case !(bid.params.placementId):\n        utils.logError(bid.bidder + ': No required param placementId');\n        return false;\n      case !(bid.params.requestUrl):\n        utils.logError(bid.bidder + ': No required param requestUrl');\n        return false;\n    }\n    return true;\n  },\n  buildRequests: function (validBidRequests) {\n    let bidRequest;\n    let serverRequests = [];\n    for (let i = 0; i < validBidRequests.length; i++) {\n      bidRequest = validBidRequests[i];\n      let bidRequestParams = bidRequest.params;\n      let callbackId = utils.getUniqueIdentifierStr();\n      let placementId = utils.getBidIdParameter('placementId', bidRequestParams);\n      let requestUrl = utils.getBidIdParameter('requestUrl', bidRequestParams);\n      let referrer = utils.getBidIdParameter('ref', bidRequestParams);\n      let location = utils.getBidIdParameter('loc', bidRequestParams);\n      // Append location & referrer\n      if (location === '') {\n        location = utils.getTopWindowUrl();\n      }\n      if (referrer === '') {\n        referrer = utils.getTopWindowReferrer();\n      }\n\n      // Styles params\n      let stylesParams = utils.getBidIdParameter('style', bidRequestParams);\n      let stylesParamsArray = {};\n      for (let currentValue in stylesParams) {\n        if (stylesParams.hasOwnProperty(currentValue)) {\n          let currentStyle = stylesParams[currentValue];\n          for (let field in currentStyle) {\n            if (currentStyle.hasOwnProperty(field)) {\n              let styleField = styleParamsMap[currentValue + '.' + field];\n              if (typeof styleField !== 'undefined') {\n                stylesParamsArray[styleField] = currentStyle[field];\n              }\n            }\n          }\n        }\n      }\n      // Custom params\n      let customParams = utils.getBidIdParameter('customParams', bidRequestParams);\n      let customParamsArray = {};\n      for (let customField in customParams) {\n        if (customParams.hasOwnProperty(customField)) {\n          customParamsArray['c.' + customField] = customParams[customField];\n        }\n      }\n\n      // Sizes params (not supports by server, for future features)\n      let sizesParams = bidRequest.sizes;\n      let parsedSizes = utils.parseSizesInput(sizesParams);\n\n      serverRequests.push({\n        method: 'GET',\n        url: requestUrl,\n        data: Object.assign({\n          'scid': placementId,\n          'callback_uid': callbackId,\n          'loc': location,\n          'ref': referrer,\n          'size': parsedSizes\n        }, stylesParamsArray, customParamsArray),\n        options: {withCredentials: false},\n        bidRequest: bidRequest\n      });\n    }\n    return serverRequests;\n  },\n  interpretResponse: function (serverResponse, request) {\n    let bidResponses = [];\n    if (!serverResponse || serverResponse.error) {\n      utils.logError(BIDDER_CODE + ': Server response error');\n      return bidResponses;\n    }\n\n    const serverBody = serverResponse.body;\n    if (!serverBody) {\n      utils.logError(BIDDER_CODE + ': Empty bid response');\n      return bidResponses;\n    }\n\n    const CPM = serverBody.cpm;\n    const WIDTH = serverBody.width;\n    const HEIGHT = serverBody.height;\n    const CREATIVE = serverBody.content_url;\n    const CALLBACK_UID = serverBody.callback_uid;\n    const TIME_TO_LIVE = config.getConfig('_bidderTimeout');\n    const REFERER = utils.getTopWindowUrl();\n    let bidRequest = request.bidRequest;\n    if (CPM > 0 && WIDTH > 0 && HEIGHT > 0) {\n      let bidResponse = {\n        requestId: bidRequest.bidId,\n        cpm: CPM,\n        width: WIDTH,\n        height: HEIGHT,\n        creativeId: CALLBACK_UID,\n        ttl: TIME_TO_LIVE,\n        referrer: REFERER,\n        currency: 'USD',\n        netRevenue: true,\n        adUrl: CREATIVE\n      };\n      bidResponses.push(bidResponse);\n    }\n\n    return bidResponses;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/orbitsoftBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst PAPYRUS_ENDPOINT = '//prebid.papyrus.global';\nconst PAPYRUS_CODE = 'papyrus';\n\nexport const spec = {\n  code: PAPYRUS_CODE,\n\n  /**\n  * Determines whether or not the given bid request is valid. Valid bid request must have placementId and hbid\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: bid => {\n    return !!(bid && bid.params && bid.params.address && bid.params.placementId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests) {\n    const bidParams = [];\n    utils._each(validBidRequests, function(bid) {\n      bidParams.push({\n        address: bid.params.address,\n        placementId: bid.params.placementId,\n        bidId: bid.bidId,\n        transactionId: bid.transactionId,\n        sizes: utils.parseSizesInput(bid.sizes)\n      });\n    });\n\n    return {\n      method: 'POST',\n      url: PAPYRUS_ENDPOINT,\n      data: bidParams\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, request) {\n    const bidResponses = [];\n\n    if (serverResponse && serverResponse.body && serverResponse.body.bids) {\n      serverResponse.body.bids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.id,\n          creativeId: bid.id,\n          adId: bid.id,\n          transactionId: bid.transactionId,\n          cpm: bid.cpm,\n          width: bid.width,\n          height: bid.height,\n          currency: bid.currency,\n          netRevenue: true,\n          ttl: 300,\n          ad: bid.ad\n        }\n        bidResponses.push(bidResponse);\n      });\n    }\n\n    return bidResponses;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/papyrusBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\nimport { getTopWindowUrl, logWarn } from 'src/utils';\n\nconst BIDDER_CODE = 'peak226';\nconst URL = '//a.ad216.com/header_bid';\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: function (bid) {\n    const { params } = bid;\n\n    return !!params.uid;\n  },\n\n  buildRequests: function (validBidRequests) {\n    const bidsMap = validBidRequests.reduce((res, bid) => {\n      const { uid } = bid.params;\n\n      res[uid] = res[uid] || [];\n      res[uid].push(bid);\n\n      return res;\n    }, {});\n\n    return {\n      method: 'GET',\n      url:\n        URL +\n        toQueryString({\n          u: getTopWindowUrl(),\n          auids: Object.keys(bidsMap).join(',')\n        }),\n      bidsMap\n    };\n  },\n\n  interpretResponse: function (serverResponse, { bidsMap }) {\n    const response = serverResponse.body;\n    const bidResponses = [];\n\n    if (!response) {\n      logWarn(`No response from ${spec.code} bidder`);\n\n      return bidResponses;\n    }\n\n    if (!response.seatbid || !response.seatbid.length) {\n      logWarn(`No seatbid in response from ${spec.code} bidder`);\n\n      return bidResponses;\n    }\n\n    response.seatbid.forEach((seatbid, i) => {\n      if (!seatbid.bid || !seatbid.bid.length) {\n        logWarn(`No bid in seatbid[${i}] response from ${spec.code} bidder`);\n        return;\n      }\n      seatbid.bid.forEach(responseBid => {\n        const requestBids = bidsMap[responseBid.auid];\n\n        requestBids.forEach(requestBid => {\n          bidResponses.push({\n            requestId: requestBid.bidId,\n            bidderCode: spec.code,\n            width: responseBid.w,\n            height: responseBid.h,\n            mediaType: BANNER,\n            creativeId: responseBid.auid,\n            ad: responseBid.adm,\n            cpm: responseBid.price,\n            currency: 'USD',\n            netRevenue: true,\n            ttl: 360\n          });\n        });\n      });\n    });\n\n    return bidResponses;\n  }\n};\n\nfunction toQueryString(obj) {\n  return Object.keys(obj).reduce(\n    (str, key, i) =>\n      typeof obj[key] === 'undefined' || obj[key] === ''\n        ? str\n        : `${str}${str ? '&' : '?'}${key}=${encodeURIComponent(obj[key])}`,\n    ''\n  );\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/peak226BidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'piximedia';\nconst ENDPOINT = '//ad.piximedia.com/prebid';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return !!(bid.params && bid.params.siteId && bid.params.placementId);\n  },\n  buildRequests: function(validBidRequests) {\n    return validBidRequests.map(bidRequest => {\n      let parseSized = utils.parseSizesInput(bidRequest.sizes);\n      let arrSize = parseSized[0].split('x');\n      return {\n        method: 'GET',\n        url: ENDPOINT,\n        data: {\n          timestamp: utils.timestamp(),\n          pver: '1.0',\n          pbparams: JSON.stringify(bidRequest.params),\n          pbwidth: arrSize[0],\n          pbheight: arrSize[1],\n          pbbidid: bidRequest.bidId,\n        },\n      };\n    });\n  },\n  interpretResponse: function(serverResponse, request) {\n    const res = serverResponse.body;\n    const bidResponse = {\n      requestId: res.bidId,\n      cpm: parseFloat(res.cpm),\n      width: res.width,\n      height: res.height,\n      creativeId: res.creative_id,\n      currency: res.currency,\n      netRevenue: true,\n      ttl: 300,\n      ad: res.adm\n    };\n    return [bidResponse];\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/piximediaBidAdapter.js","import * as utils from 'src/utils';\r\nimport { registerBidder } from 'src/adapters/bidderFactory';\r\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\r\nimport includes from 'core-js/library/fn/array/includes';\r\n\r\nconst NATIVE_DEFAULTS = {\r\n  TITLE_LEN: 100,\r\n  DESCR_LEN: 200,\r\n  SPONSORED_BY_LEN: 50,\r\n  IMG_MIN: 150,\r\n  ICON_MIN: 50,\r\n};\r\nconst DEFAULT_MIMES = ['video/mp4', 'video/webm', 'application/x-shockwave-flash', 'application/javascript'];\r\nconst VIDEO_TARGETING = ['mimes', 'skippable', 'playback_method', 'protocols', 'api'];\r\nconst DEFAULT_PROTOCOLS = [2, 3, 5, 6];\r\nconst DEFAULT_APIS = [1, 2];\r\n\r\nexport const spec = {\r\n\r\n  code: 'platformio',\r\n  supportedMediaTypes: [BANNER, NATIVE, VIDEO],\r\n\r\n  isBidRequestValid: bid => (\r\n    !!(bid && bid.params && bid.params.pubId && bid.params.placementId)\r\n  ),\r\n  buildRequests: (bidRequests, bidderRequest) => {\r\n    const request = {\r\n      id: bidRequests[0].bidderRequestId,\r\n      at: 2,\r\n      imp: bidRequests.map(slot => impression(slot)),\r\n      site: site(bidRequests),\r\n      app: app(bidRequests),\r\n      device: device(bidRequests),\r\n    };\r\n    applyGdpr(bidderRequest, request);\r\n    return {\r\n      method: 'POST',\r\n      url: '//piohbdisp.hb.adx1.com/',\r\n      data: JSON.stringify(request),\r\n    };\r\n  },\r\n  interpretResponse: (response, request) => (\r\n    bidResponseAvailable(request, response.body)\r\n  ),\r\n};\r\n\r\nfunction bidResponseAvailable(bidRequest, bidResponse) {\r\n  const idToImpMap = {};\r\n  const idToBidMap = {};\r\n  const ortbRequest = parse(bidRequest.data);\r\n  ortbRequest.imp.forEach(imp => {\r\n    idToImpMap[imp.id] = imp;\r\n  });\r\n  if (bidResponse) {\r\n    bidResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\r\n      idToBidMap[bid.impid] = bid;\r\n    }));\r\n  }\r\n  const bids = [];\r\n  Object.keys(idToImpMap).forEach(id => {\r\n    if (idToBidMap[id]) {\r\n      const bid = {};\r\n      bid.requestId = id;\r\n      bid.adId = id;\r\n      bid.creativeId = id;\r\n      bid.cpm = idToBidMap[id].price;\r\n      bid.currency = bidResponse.cur;\r\n      bid.ttl = 360;\r\n      bid.netRevenue = true;\r\n      if (idToImpMap[id]['native']) {\r\n        bid['native'] = nativeResponse(idToImpMap[id], idToBidMap[id]);\r\n        let nurl = idToBidMap[id].nurl;\r\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_IMP_ID(%7D|\\})/gi, idToBidMap[id].impid);\r\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\r\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_CURRENCY(%7D|\\})/gi, bidResponse.cur);\r\n        nurl = nurl.replace(/\\$(%7B|\\{)AUCTION_BID_ID(%7D|\\})/gi, bidResponse.bidid);\r\n        bid['native']['impressionTrackers'] = [nurl];\r\n        bid.mediaType = 'native';\r\n      } else if (idToImpMap[id]['video']) {\r\n        bid.vastUrl = idToBidMap[id].adm;\r\n        bid.vastUrl = bid.vastUrl.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\r\n        bid.crid = idToBidMap[id].crid;\r\n        bid.width = idToImpMap[id].video.w;\r\n        bid.height = idToImpMap[id].video.h;\r\n        bid.mediaType = 'video';\r\n      } else if (idToImpMap[id]['banner']) {\r\n        bid.ad = idToBidMap[id].adm;\r\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_IMP_ID(%7D|\\})/gi, idToBidMap[id].impid);\r\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_AD_ID(%7D|\\})/gi, idToBidMap[id].adid);\r\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi, idToBidMap[id].price);\r\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_CURRENCY(%7D|\\})/gi, bidResponse.cur);\r\n        bid.ad = bid.ad.replace(/\\$(%7B|\\{)AUCTION_BID_ID(%7D|\\})/gi, bidResponse.bidid);\r\n        bid.width = idToImpMap[id].banner.w;\r\n        bid.height = idToImpMap[id].banner.h;\r\n        bid.mediaType = 'banner';\r\n      }\r\n      bids.push(bid);\r\n    }\r\n  });\r\n  return bids;\r\n}\r\nfunction impression(slot) {\r\n  return {\r\n    id: slot.bidId,\r\n    secure: window.location.protocol === 'https:' ? 1 : 0,\r\n    'banner': banner(slot),\r\n    'native': nativeImpression(slot),\r\n    'video': videoImpression(slot),\r\n    bidfloor: slot.params.bidFloor || '0.000001',\r\n    tagid: slot.params.placementId.toString(),\r\n  };\r\n}\r\n\r\nfunction getSizes(slot) {\r\n  if (slot.params.size) {\r\n    const size = slot.params.size.toUpperCase().split('X');\r\n    return {\r\n      width: parseInt(size[0]),\r\n      height: parseInt(size[1]),\r\n    };\r\n  }\r\n  return {\r\n    width: 1,\r\n    height: 1,\r\n  };\r\n}\r\n\r\nfunction banner(slot) {\r\n  if (slot.mediaType === 'banner' || utils.deepAccess(slot, 'mediaTypes.banner')) {\r\n    const sizes = getSizes(slot);\r\n    return {\r\n      w: sizes.width,\r\n      h: sizes.height,\r\n    };\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction videoImpression(slot) {\r\n  if (slot.mediaType === 'video' || utils.deepAccess(slot, 'mediaTypes.video')) {\r\n    const sizes = getSizes(slot);\r\n    const video = {\r\n      w: sizes.width,\r\n      h: sizes.height,\r\n      mimes: DEFAULT_MIMES,\r\n      protocols: DEFAULT_PROTOCOLS,\r\n      api: DEFAULT_APIS,\r\n    };\r\n    if (slot.params.video) {\r\n      Object.keys(slot.params.video).filter(param => includes(VIDEO_TARGETING, param)).forEach(param => video[param] = slot.params.video[param]);\r\n    }\r\n    return video;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction nativeImpression(slot) {\r\n  if (slot.mediaType === 'native' || utils.deepAccess(slot, 'mediaTypes.native')) {\r\n    const assets = [];\r\n    addAsset(assets, titleAsset(1, slot.nativeParams.title, NATIVE_DEFAULTS.TITLE_LEN));\r\n    addAsset(assets, dataAsset(2, slot.nativeParams.body, 2, NATIVE_DEFAULTS.DESCR_LEN));\r\n    addAsset(assets, dataAsset(3, slot.nativeParams.sponsoredBy, 1, NATIVE_DEFAULTS.SPONSORED_BY_LEN));\r\n    addAsset(assets, imageAsset(4, slot.nativeParams.icon, 1, NATIVE_DEFAULTS.ICON_MIN, NATIVE_DEFAULTS.ICON_MIN));\r\n    addAsset(assets, imageAsset(5, slot.nativeParams.image, 3, NATIVE_DEFAULTS.IMG_MIN, NATIVE_DEFAULTS.IMG_MIN));\r\n    return {\r\n      request: JSON.stringify({ assets }),\r\n      ver: '1.1',\r\n    };\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction addAsset(assets, asset) {\r\n  if (asset) {\r\n    assets.push(asset);\r\n  }\r\n}\r\n\r\nfunction titleAsset(id, params, defaultLen) {\r\n  if (params) {\r\n    return {\r\n      id,\r\n      required: params.required ? 1 : 0,\r\n      title: {\r\n        len: params.len || defaultLen,\r\n      },\r\n    };\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction imageAsset(id, params, type, defaultMinWidth, defaultMinHeight) {\r\n  return params ? {\r\n    id,\r\n    required: params.required ? 1 : 0,\r\n    img: {\r\n      type,\r\n      wmin: params.wmin || defaultMinWidth,\r\n      hmin: params.hmin || defaultMinHeight,\r\n    }\r\n  } : null;\r\n}\r\n\r\nfunction dataAsset(id, params, type, defaultLen) {\r\n  return params ? {\r\n    id,\r\n    required: params.required ? 1 : 0,\r\n    data: {\r\n      type,\r\n      len: params.len || defaultLen,\r\n    }\r\n  } : null;\r\n}\r\n\r\nfunction site(bidderRequest) {\r\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.pubId : '0';\r\n  const siteId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.siteId : '0';\r\n  const appParams = bidderRequest[0].params.app;\r\n  if (!appParams) {\r\n    return {\r\n      publisher: {\r\n        id: pubId.toString(),\r\n        domain: utils.getTopWindowLocation().hostname,\r\n      },\r\n      id: siteId.toString(),\r\n      ref: utils.getTopWindowReferrer(),\r\n      page: utils.getTopWindowLocation().href,\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction app(bidderRequest) {\r\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.pubId : '0';\r\n  const appParams = bidderRequest[0].params.app;\r\n  if (appParams) {\r\n    return {\r\n      publisher: {\r\n        id: pubId.toString(),\r\n      },\r\n      id: appParams.id,\r\n      name: appParams.name,\r\n      bundle: appParams.bundle,\r\n      storeurl: appParams.storeUrl,\r\n      domain: appParams.domain,\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction device(bidderRequest) {\r\n  const lat = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.latitude : '';\r\n  const lon = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.longitude : '';\r\n  const ifa = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.ifa : '';\r\n  return {\r\n    dnt: utils.getDNT() ? 1 : 0,\r\n    ua: navigator.userAgent,\r\n    language: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage),\r\n    w: (window.screen.width || window.innerWidth),\r\n    h: (window.screen.height || window.innerHeigh),\r\n    geo: {\r\n      lat: lat,\r\n      lon: lon,\r\n    },\r\n    ifa: ifa,\r\n  };\r\n}\r\n\r\nfunction parse(rawResponse) {\r\n  try {\r\n    if (rawResponse) {\r\n      return JSON.parse(rawResponse);\r\n    }\r\n  } catch (ex) {\r\n    logError('platformio.parse', 'ERROR', ex);\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction applyGdpr(bidderRequest, ortbRequest) {\r\n  if (bidderRequest && bidderRequest.gdprConsent) {\r\n    ortbRequest.regs = { ext: { gdpr: bidderRequest.gdprConsent.gdprApplies ? 1 : 0 } };\r\n    ortbRequest.user = { ext: { consent: bidderRequest.gdprConsent.consentString } };\r\n  }\r\n}\r\n\r\nfunction nativeResponse(imp, bid) {\r\n  if (imp['native']) {\r\n    const nativeAd = parse(bid.adm);\r\n    const keys = {};\r\n    keys.image = {};\r\n    keys.icon = {};\r\n    if (nativeAd && nativeAd['native'] && nativeAd['native'].assets) {\r\n      nativeAd['native'].assets.forEach(asset => {\r\n        keys.title = asset.title ? asset.title.text : keys.title;\r\n        keys.body = asset.data && asset.id === 2 ? asset.data.value : keys.body;\r\n        keys.sponsoredBy = asset.data && asset.id === 3 ? asset.data.value : keys.sponsoredBy;\r\n        keys.icon.url = asset.img && asset.id === 4 ? asset.img.url : keys.icon.url;\r\n        keys.icon.width = asset.img && asset.id === 4 ? asset.img.w : keys.icon.width;\r\n        keys.icon.height = asset.img && asset.id === 4 ? asset.img.h : keys.icon.height;\r\n        keys.image.url = asset.img && asset.id === 5 ? asset.img.url : keys.image.url;\r\n        keys.image.width = asset.img && asset.id === 5 ? asset.img.w : keys.image.width;\r\n        keys.image.height = asset.img && asset.id === 5 ? asset.img.h : keys.image.height;\r\n      });\r\n      if (nativeAd['native'].link) {\r\n        keys.clickUrl = encodeURIComponent(nativeAd['native'].link.url);\r\n      }\r\n      return keys;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nregisterBidder(spec);\r\n\n\n\n// WEBPACK FOOTER //\n// ./modules/platformioBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'playgroundxyz';\nconst URL = 'https://ads.playground.xyz/host-config/prebid';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['playgroundxyz'],\n  supportedMediaTypes: [BANNER],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid.params.placementId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    const topLocation = utils.getTopWindowLocation();\n    const payload = {\n      id: bidRequests[0].auctionId,\n      site: {\n        domain: window.location.protocol + '//' + topLocation.hostname,\n        name: topLocation.hostname,\n        page: topLocation.href,\n      },\n      device: {\n        ua: navigator.userAgent,\n        language: navigator.language,\n        devicetype: isMobile() ? 1 : isConnectedTV() ? 3 : 2,\n      },\n      imp: bidRequests.map(mapImpression)\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.user = {ext: {consent: bidderRequest.gdprConsent.consentString}};\n      const gdpr = bidderRequest.gdprConsent.gdprApplies ? 1 : 0;\n      payload.regs = {ext: {gdpr: gdpr}};\n    }\n\n    return {\n      method: 'POST',\n      url: URL,\n      data: JSON.stringify(payload),\n      bidderRequest\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, { bidderRequest }) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (!utils.isArray(serverResponse.seatbid)) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter `;\n      utils.logError(errorMessage += 'Malformed seatbid response');\n      return bids;\n    }\n\n    serverResponse.seatbid.forEach(sBid => {\n      if (sBid.hasOwnProperty('bid')) {\n        sBid.bid.forEach(iBid => {\n          if (iBid.price !== 0) {\n            const bid = newBid(iBid);\n            bids.push(bid);\n          }\n        });\n      }\n    });\n    return bids;\n  },\n\n  getUserSyncs: function (syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      }];\n    }\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: '//ib.adnxs.com/getuidnb?https://ads.playground.xyz/usersync?partner=appnexus&uid=$UID'\n      }];\n    }\n  }\n}\n\nfunction newBid(bid) {\n  return {\n    requestId: bid.impid,\n    mediaType: BANNER,\n    cpm: bid.price,\n    creativeId: bid.adid,\n    ad: bid.adm,\n    width: bid.w,\n    height: bid.h,\n    ttl: 300,\n    netRevenue: true,\n    currency: 'USD',\n  };\n}\n\nfunction mapImpression(bid) {\n  return {\n    id: bid.bidId,\n    banner: mapBanner(bid),\n    ext: {\n      appnexus: {\n        placement_id: parseInt(bid.params.placementId, 10)\n      }\n    }\n  };\n}\n\nfunction mapBanner(bid) {\n  return {\n    w: parseInt(bid.sizes[0][0], 10),\n    h: parseInt(bid.sizes[0][1], 10),\n    format: mapSizes(bid.sizes)\n  };\n}\n\nfunction mapSizes(bidSizes) {\n  const format = [];\n  bidSizes.forEach(size => {\n    format.push({\n      w: parseInt(size[0], 10),\n      h: parseInt(size[1], 10)\n    });\n  });\n  return format;\n}\n\nfunction isMobile() {\n  return (/(ios|ipod|ipad|iphone|android)/i).test(navigator.userAgent);\n}\n\nfunction isConnectedTV() {\n  return (/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\\.tv|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b)/i).test(global.navigator.userAgent);\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/playgroundxyzBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'pollux';\nconst PLX_ENDPOINT_URL = '//adn.plxnt.com/prebid/v1';\nconst PLX_CURRENCY = 'EUR';\nconst PLX_TTL = 3600;\nconst PLX_NETREVENUE = true;\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['plx'],\n  /**\n     * Determines whether or not the given bid request is valid.\n     *\n     * @param {BidRequest} bid The bid params to validate.\n     * @return boolean True if this is a valid bid, and false otherwise.\n     */\n  isBidRequestValid: function(bid) {\n    if (!bid.hasOwnProperty('params') || !bid.params.hasOwnProperty('zone')) {\n      utils.logError('required param \"zone\" is missing for == ' + BIDDER_CODE + ' ==');\n      return false;\n    }\n    return true;\n  },\n  /**\n     * Make a server request from the list of BidRequests.\n     *\n     * @param {validBidRequests[]} - an array of bids\n     * @return ServerRequest Info describing the request to the server.\n     */\n  buildRequests: function (validBidRequests) {\n    if (!Array.isArray(validBidRequests) || !validBidRequests.length) {\n      return [];\n    }\n    const payload = [];\n    let customUrl = null;\n    for (let i = 0; i < validBidRequests.length; i++) {\n      const bid = validBidRequests[i];\n      const request = {\n        bidId: bid.bidId,\n        zones: bid.params.zone,\n        sizes: bid.sizes\n      };\n      if (bid.bidderUrl && !customUrl) {\n        customUrl = bid.bidderUrl;\n      }\n      payload.push(request);\n    }\n    const payloadString = JSON.stringify(payload);\n    // build url parameters\n    const domain = utils.getParameterByName('domain');\n    const tracker2 = utils.getParameterByName('tracker2');\n    const urlParams = {};\n    if (domain) {\n      urlParams.domain = domain;\n    } else {\n      urlParams.domain = utils.getTopWindowUrl();\n    }\n    if (tracker2) {\n      urlParams.tracker2 = tracker2;\n    }\n    // build url\n    let bidderUrl = customUrl || PLX_ENDPOINT_URL;\n    if (urlParams) {\n      bidderUrl = bidderUrl + '?' + utils.parseQueryStringParameters(urlParams);\n    }\n    utils.logMessage('== ' + BIDDER_CODE + ' == request built: ' + bidderUrl);\n    return {\n      method: 'POST',\n      url: bidderUrl,\n      data: payloadString\n    };\n  },\n  /**\n     * Unpack the response from the server into a list of bids.\n     *\n     * @param {*} serverResponse A successful response from the server.\n     * @return {Bid[]} An array of bids which were nested inside the server.\n     */\n  interpretResponse: function(serverResponse, bidRequest) {\n    let bidResponses = [];\n    if (!serverResponse || (typeof serverResponse === 'object' && !serverResponse.hasOwnProperty('body'))) {\n      utils.logMessage('No prebid response from == ' + BIDDER_CODE + ' == for bid requests:');\n      utils.logMessage(bidRequest);\n      return bidResponses;\n    }\n    serverResponse = serverResponse.body;\n    if (!Array.isArray(serverResponse) || !serverResponse.length) {\n      utils.logMessage('No prebid response from == ' + BIDDER_CODE + ' == for bid requests:');\n      utils.logMessage(bidRequest);\n      return bidResponses;\n    }\n    // loop through serverResponses\n    for (let b in serverResponse) {\n      let bid = serverResponse[b];\n      const bidResponse = {\n        requestId: bid.bidId, // not request id, it's bid's id\n        cpm: parseFloat(bid.cpm),\n        width: parseInt(bid.width),\n        height: parseInt(bid.height),\n        ttl: PLX_TTL,\n        creativeId: bid.creativeId,\n        netRevenue: PLX_NETREVENUE,\n        currency: PLX_CURRENCY\n      };\n      if (bid.ad_type === 'url') {\n        bidResponse.adUrl = bid.ad;\n      } else {\n        bidResponse.ad = bid.ad;\n      }\n      if (bid.referrer) {\n        bidResponse.referrer = bid.referrer;\n      }\n      bidResponses.push(bidResponse);\n    }\n    return bidResponses;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/polluxBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'polymorph';\nconst URL = '//api.adsnative.com/v1/ad-template.json';\n\nexport const polymorphAdapterSpec = {\n  code: BIDDER_CODE,\n  aliases: ['adsnative'],\n  supportedMediaTypes: [BANNER],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    return bidRequests.map(bid => {\n      var payload = {\n        url: utils.getTopWindowUrl(),\n        ref: utils.getTopFrameReferrer(),\n        zid: bid.params.placementId,\n        sizes: bid.sizes,\n        hb: 1,\n        hb_source: 'prebid'\n      };\n      Object.keys(bid.params).forEach(function(key) {\n        if (key != 'defaultWidth' && key != 'defaultHeight') {\n          payload[key] = bid.params[key];\n        }\n      });\n      const payloadString = utils.parseQueryStringParameters(payload);\n      return {\n        method: 'GET',\n        url: URL,\n        data: payloadString,\n        bidderRequest: bid\n      };\n    });\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, { bidderRequest }) {\n    const bidResponses = [];\n    try {\n      serverResponse = serverResponse.body;\n      if (!serverResponse || typeof serverResponse.status === 'undefined') {\n        utils.logError('HTTP Connection Error');\n        return bidResponses\n      }\n      if (serverResponse.status != 'OK' || (typeof serverResponse.ad === 'undefined' && typeof serverResponse.ads === 'undefined')) {\n        utils.logError('API No Response: ' + serverResponse.message);\n        return bidResponses\n      }\n      let width = bidderRequest.params.defaultWidth || bidderRequest.sizes[0][0];\n      let height = bidderRequest.params.defaultHeight || bidderRequest.sizes[0][1];\n      let theHTML = '';\n      let crid = '';\n      if (typeof serverResponse.ad !== 'undefined') {\n        crid = serverResponse.crid;\n        theHTML = serverResponse.ad.html;\n        width = serverResponse.ad.width || width\n        height = serverResponse.ad.height || height\n      } else {\n        crid = serverResponse.ads[0].crid;\n        theHTML = serverResponse.html;\n      }\n\n      const bidResp = {\n        requestId: bidderRequest.bidId,\n        cpm: serverResponse.ecpm,\n        width: width,\n        height: height,\n        ad: theHTML,\n        ttl: 3600,\n        creativeId: crid,\n        netRevenue: false,\n        currency: 'USD',\n        mediaType: 'banner'\n      };\n      bidResponses.push(bidResp);\n    } catch (e) {\n      utils.logError(e);\n    }\n    return bidResponses;\n  }\n}\n\nregisterBidder(polymorphAdapterSpec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/polymorphBidAdapter.js","import Adapter from 'src/adapter';\nimport bidfactory from 'src/bidfactory';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\nimport { STATUS, S2S, EVENTS } from 'src/constants';\nimport { cookieSet } from 'src/cookie.js';\nimport adaptermanager from 'src/adaptermanager';\nimport { config } from 'src/config';\nimport { VIDEO } from 'src/mediaTypes';\nimport { isValid } from 'src/adapters/bidderFactory';\nimport events from 'src/events';\nimport includes from 'core-js/library/fn/array/includes';\nimport { S2S_VENDORS } from './config.js';\n\nconst getConfig = config.getConfig;\n\nconst TYPE = S2S.SRC;\nlet _synced = false;\nconst DEFAULT_S2S_TTL = 60;\nconst DEFAULT_S2S_CURRENCY = 'USD';\nconst DEFAULT_S2S_NETREVENUE = true;\n\nlet _s2sConfig;\n\nconst s2sDefaultConfig = {\n  enabled: false,\n  timeout: 1000,\n  maxBids: 1,\n  adapter: 'prebidServer'\n};\n\nconfig.setDefaults({\n  's2sConfig': s2sDefaultConfig\n});\n\n/**\n * Set config for server to server header bidding\n * @typedef {Object} options - required\n * @property {boolean} enabled enables S2S bidding\n * @property {string[]} bidders bidders to request S2S\n * @property {string} endpoint endpoint to contact\n *  === optional params below ===\n * @property {number} [timeout] timeout for S2S bidders - should be lower than `pbjs.requestBids({timeout})`\n * @property {boolean} [cacheMarkup] whether to cache the adm result\n * @property {string} [adapter] adapter code to use for S2S\n * @property {string} [syncEndpoint] endpoint URL for syncing cookies\n * @property {string} [cookieSetUrl] url for cookie set library, if passed then cookieSet is enabled\n */\nfunction setS2sConfig(options) {\n  if (options.defaultVendor) {\n    let vendor = options.defaultVendor;\n    let optionKeys = Object.keys(options);\n    if (S2S_VENDORS[vendor]) {\n      // vendor keys will be set if either: the key was not specified by user\n      // or if the user did not set their own distinct value (ie using the system default) to override the vendor\n      Object.keys(S2S_VENDORS[vendor]).forEach((vendorKey) => {\n        if (s2sDefaultConfig[vendorKey] === options[vendorKey] || !includes(optionKeys, vendorKey)) {\n          options[vendorKey] = S2S_VENDORS[vendor][vendorKey];\n        }\n      });\n    } else {\n      utils.logError('Incorrect or unavailable prebid server default vendor option: ' + vendor);\n      return false;\n    }\n  }\n\n  let keys = Object.keys(options);\n\n  if (['accountId', 'bidders', 'endpoint'].filter(key => {\n    if (!includes(keys, key)) {\n      utils.logError(key + ' missing in server to server config');\n      return true;\n    }\n    return false;\n  }).length > 0) {\n    return;\n  }\n\n  _s2sConfig = options;\n}\ngetConfig('s2sConfig', ({s2sConfig}) => setS2sConfig(s2sConfig));\n\n/**\n * resets the _synced variable back to false, primiarily used for testing purposes\n*/\nexport function resetSyncedStatus() {\n  _synced = false;\n}\n\n/**\n * @param  {Array} bidderCodes list of bidders to request user syncs for.\n */\nfunction queueSync(bidderCodes, gdprConsent) {\n  if (_synced) {\n    return;\n  }\n  _synced = true;\n\n  const payload = {\n    uuid: utils.generateUUID(),\n    bidders: bidderCodes\n  };\n\n  if (gdprConsent) {\n    // only populate gdpr field if we know CMP returned consent information (ie didn't timeout or have an error)\n    if (typeof gdprConsent.consentString !== 'undefined') {\n      payload.gdpr = (gdprConsent.gdprApplies) ? 1 : 0;\n    }\n    // attempt to populate gdpr_consent if we know gdprApplies or it may apply\n    if (gdprConsent.gdprApplies !== false) {\n      payload.gdpr_consent = gdprConsent.consentString;\n    }\n  }\n  const jsonPayload = JSON.stringify(payload);\n\n  ajax(_s2sConfig.syncEndpoint,\n    (response) => {\n      try {\n        response = JSON.parse(response);\n        response.bidder_status.forEach(bidder => doBidderSync(bidder.usersync.type, bidder.usersync.url, bidder.bidder));\n      } catch (e) {\n        utils.logError(e);\n      }\n    },\n    jsonPayload,\n    {\n      contentType: 'text/plain',\n      withCredentials: true\n    });\n}\n\n/**\n * Run a cookie sync for the given type, url, and bidder\n *\n * @param {string} type the type of sync, \"image\", \"redirect\", \"iframe\"\n * @param {string} url the url to sync\n * @param {string} bidder name of bidder doing sync for\n */\nfunction doBidderSync(type, url, bidder) {\n  if (!url) {\n    utils.logError(`No sync url for bidder \"${bidder}\": ${url}`);\n  } else if (type === 'image' || type === 'redirect') {\n    utils.logMessage(`Invoking image pixel user sync for bidder: \"${bidder}\"`);\n    utils.triggerPixel(url);\n  } else if (type == 'iframe') {\n    utils.logMessage(`Invoking iframe user sync for bidder: \"${bidder}\"`);\n    utils.insertUserSyncIframe(url);\n  } else {\n    utils.logError(`User sync type \"${type}\" not supported for bidder: \"${bidder}\"`);\n  }\n}\n\n/**\n * Do client-side syncs for bidders.\n *\n * @param {Array} bidders a list of bidder names\n */\nfunction doClientSideSyncs(bidders) {\n  bidders.forEach(bidder => {\n    let clientAdapter = adaptermanager.getBidAdapter(bidder);\n    if (clientAdapter && clientAdapter.registerSyncs) {\n      clientAdapter.registerSyncs([]);\n    }\n  });\n}\n\nfunction _getDigiTrustQueryParams() {\n  function getDigiTrustId() {\n    let digiTrustUser = window.DigiTrust && (config.getConfig('digiTrustId') || window.DigiTrust.getUser({member: 'T9QSFKPDN9'}));\n    return (digiTrustUser && digiTrustUser.success && digiTrustUser.identity) || null;\n  }\n  let digiTrustId = getDigiTrustId();\n  // Verify there is an ID and this user has not opted out\n  if (!digiTrustId || (digiTrustId.privacy && digiTrustId.privacy.optout)) {\n    return null;\n  }\n  return {\n    id: digiTrustId.id,\n    keyv: digiTrustId.keyv,\n    pref: 0\n  };\n}\n\nfunction _appendSiteAppDevice(request) {\n  if (!request) return;\n\n  // ORTB specifies app OR site\n  if (typeof config.getConfig('app') === 'object') {\n    request.app = config.getConfig('app');\n    request.app.publisher = {id: _s2sConfig.accountId}\n  } else {\n    request.site = {\n      publisher: { id: _s2sConfig.accountId },\n      page: utils.getTopWindowUrl()\n    }\n  }\n  if (typeof config.getConfig('device') === 'object') {\n    request.device = config.getConfig('device');\n  }\n}\n\nfunction transformHeightWidth(adUnit) {\n  let sizesObj = [];\n  let sizes = utils.parseSizesInput(adUnit.sizes);\n  sizes.forEach(size => {\n    let heightWidth = size.split('x');\n    let sizeObj = {\n      'w': parseInt(heightWidth[0]),\n      'h': parseInt(heightWidth[1])\n    };\n    sizesObj.push(sizeObj);\n  });\n  return sizesObj;\n}\n\n/*\n * Protocol spec for legacy endpoint\n * e.g., https://<prebid-server-url>/v1/auction\n */\nconst LEGACY_PROTOCOL = {\n\n  buildRequest(s2sBidRequest, bidRequests, adUnits) {\n    adUnits.forEach(adUnit => {\n      adUnit.bids.forEach(bid => {\n        const adapter = adaptermanager.bidderRegistry[bid.bidder];\n        if (adapter && adapter.getSpec().transformBidParams) {\n          bid.params = adapter.getSpec().transformBidParams(bid.params, isOpenRtb());\n        }\n      });\n    });\n\n    // pbs expects an ad_unit.video attribute if the imp is video\n    adUnits.forEach(adUnit => {\n      adUnit.sizes = transformHeightWidth(adUnit);\n      const videoMediaType = utils.deepAccess(adUnit, 'mediaTypes.video');\n      if (videoMediaType) {\n        adUnit.video = Object.assign({}, videoMediaType);\n        delete adUnit.mediaTypes;\n        // default is assumed to be 'banner' so if there is a video type\n        // we assume video only until PBS can support multi-format auction\n        adUnit.media_types = [VIDEO];\n      }\n    });\n\n    const request = {\n      account_id: _s2sConfig.accountId,\n      tid: s2sBidRequest.tid,\n      max_bids: _s2sConfig.maxBids,\n      timeout_millis: _s2sConfig.timeout,\n      secure: _s2sConfig.secure,\n      cache_markup: _s2sConfig.cacheMarkup === 1 || _s2sConfig.cacheMarkup === 2 ? _s2sConfig.cacheMarkup : 0,\n      url: utils.getTopWindowUrl(),\n      prebid_version: '1.25.0-pre',\n      ad_units: adUnits,\n      is_debug: !!getConfig('debug'),\n    };\n\n    _appendSiteAppDevice(request);\n\n    let digiTrust = _getDigiTrustQueryParams();\n    if (digiTrust) {\n      request.digiTrust = digiTrust;\n    }\n\n    return request;\n  },\n\n  interpretResponse(result, bidderRequests, requestedBidders) {\n    const bids = [];\n    if (result.status === 'OK' || result.status === 'no_cookie') {\n      if (result.bidder_status) {\n        result.bidder_status.forEach(bidder => {\n          if (bidder.error) {\n            utils.logWarn(`Prebid Server returned error: '${bidder.error}' for ${bidder.bidder}`);\n          }\n\n          bidderRequests.filter(bidderRequest => bidderRequest.bidderCode === bidder.bidder)\n            .forEach(bidderRequest =>\n              (bidderRequest.bids || []).forEach(bid =>\n                bid.serverResponseTimeMs = bidder.response_time_ms\n              )\n            )\n        });\n      }\n\n      if (result.bids) {\n        result.bids.forEach(bidObj => {\n          const bidRequest = utils.getBidRequest(bidObj.bid_id, bidderRequests);\n          const cpm = bidObj.price;\n          const status = cpm !== 0 ? STATUS.GOOD : STATUS.NO_BID;\n          let bidObject = bidfactory.createBid(status, bidRequest);\n\n          bidObject.source = TYPE;\n          bidObject.creative_id = bidObj.creative_id;\n          bidObject.bidderCode = bidObj.bidder;\n          bidObject.cpm = cpm;\n          if (bidObj.cache_id) {\n            bidObject.cache_id = bidObj.cache_id;\n          }\n          if (bidObj.cache_url) {\n            bidObject.cache_url = bidObj.cache_url;\n          }\n          // From ORTB see section 4.2.3: adm Optional means of conveying ad markup in case the bid wins; supersedes the win notice if markup is included in both.\n          if (bidObj.media_type === VIDEO) {\n            bidObject.mediaType = VIDEO;\n            if (bidObj.adm) {\n              bidObject.vastXml = bidObj.adm;\n            }\n            if (bidObj.nurl) {\n              bidObject.vastUrl = bidObj.nurl;\n            }\n            // when video bid is already cached by Prebid Server, videoCacheKey and vastUrl should be provided properly\n            if (bidObj.cache_id && bidObj.cache_url) {\n              bidObject.videoCacheKey = bidObj.cache_id;\n              bidObject.vastUrl = bidObj.cache_url;\n            }\n          } else {\n            if (bidObj.adm && bidObj.nurl) {\n              bidObject.ad = bidObj.adm;\n              bidObject.ad += utils.createTrackPixelHtml(decodeURIComponent(bidObj.nurl));\n            } else if (bidObj.adm) {\n              bidObject.ad = bidObj.adm;\n            } else if (bidObj.nurl) {\n              bidObject.adUrl = bidObj.nurl;\n            }\n          }\n\n          bidObject.width = bidObj.width;\n          bidObject.height = bidObj.height;\n          bidObject.adserverTargeting = bidObj.ad_server_targeting;\n          if (bidObj.deal_id) {\n            bidObject.dealId = bidObj.deal_id;\n          }\n          bidObject.requestId = bidObj.bid_id;\n          bidObject.creativeId = bidObj.creative_id;\n\n          // TODO: Remove when prebid-server returns ttl, currency and netRevenue\n          bidObject.ttl = (bidObj.ttl) ? bidObj.ttl : DEFAULT_S2S_TTL;\n          bidObject.currency = (bidObj.currency) ? bidObj.currency : DEFAULT_S2S_CURRENCY;\n          bidObject.netRevenue = (bidObj.netRevenue) ? bidObj.netRevenue : DEFAULT_S2S_NETREVENUE;\n\n          if (result.burl) { bidObject.burl = result.burl; }\n\n          bids.push({ adUnit: bidObj.code, bid: bidObject });\n        });\n      }\n    }\n\n    return bids;\n  }\n};\n\n/*\n * Protocol spec for OpenRTB endpoint\n * e.g., https://<prebid-server-url>/v1/openrtb2/auction\n */\nconst OPEN_RTB_PROTOCOL = {\n\n  bidMap: {},\n\n  buildRequest(s2sBidRequest, bidRequests, adUnits) {\n    let imps = [];\n    let aliases = {};\n\n    // transform ad unit into array of OpenRTB impression objects\n    adUnits.forEach(adUnit => {\n      adUnit.bids.forEach(bid => {\n        // OpenRTB response contains the adunit code and bidder name. These are\n        // combined to create a unique key for each bid since an id isn't returned\n        const key = `${adUnit.code}${bid.bidder}`;\n        this.bidMap[key] = bid;\n\n        // check for and store valid aliases to add to the request\n        if (adaptermanager.aliasRegistry[bid.bidder]) {\n          aliases[bid.bidder] = adaptermanager.aliasRegistry[bid.bidder];\n        }\n      });\n\n      let banner;\n      // default to banner if mediaTypes isn't defined\n      if (utils.isEmpty(adUnit.mediaTypes)) {\n        const sizeObjects = adUnit.sizes.map(size => ({ w: size[0], h: size[1] }));\n        banner = {format: sizeObjects};\n      }\n\n      const bannerParams = utils.deepAccess(adUnit, 'mediaTypes.banner');\n      if (bannerParams && bannerParams.sizes) {\n        const sizes = utils.parseSizesInput(bannerParams.sizes);\n\n        // get banner sizes in form [{ w: <int>, h: <int> }, ...]\n        const format = sizes.map(size => {\n          const [ width, height ] = size.split('x');\n          const w = parseInt(width, 10);\n          const h = parseInt(height, 10);\n          return { w, h };\n        });\n\n        banner = {format};\n      }\n\n      let video;\n      const videoParams = utils.deepAccess(adUnit, 'mediaTypes.video');\n      if (!utils.isEmpty(videoParams)) {\n        video = videoParams;\n      }\n\n      // get bidder params in form { <bidder code>: {...params} }\n      const ext = adUnit.bids.reduce((acc, bid) => {\n        const adapter = adaptermanager.bidderRegistry[bid.bidder];\n        if (adapter && adapter.getSpec().transformBidParams) {\n          bid.params = adapter.getSpec().transformBidParams(bid.params, isOpenRtb());\n        }\n        acc[bid.bidder] = bid.params;\n        return acc;\n      }, {});\n\n      const imp = { id: adUnit.code, ext, secure: _s2sConfig.secure };\n\n      if (banner) { imp.banner = banner; }\n      if (video) { imp.video = video; }\n\n      imps.push(imp);\n    });\n\n    const request = {\n      id: s2sBidRequest.tid,\n      source: {tid: s2sBidRequest.tid},\n      tmax: _s2sConfig.timeout,\n      imp: imps,\n      test: getConfig('debug') ? 1 : 0,\n    };\n\n    _appendSiteAppDevice(request);\n\n    const digiTrust = _getDigiTrustQueryParams();\n    if (digiTrust) {\n      request.user = { ext: { digitrust: digiTrust } };\n    }\n\n    if (!utils.isEmpty(aliases)) {\n      request.ext = { prebid: { aliases } };\n    }\n\n    if (bidRequests && bidRequests[0].gdprConsent) {\n      // note - gdprApplies & consentString may be undefined in certain use-cases for consentManagement module\n      let gdprApplies;\n      if (typeof bidRequests[0].gdprConsent.gdprApplies === 'boolean') {\n        gdprApplies = bidRequests[0].gdprConsent.gdprApplies ? 1 : 0;\n      }\n\n      if (request.regs) {\n        if (request.regs.ext) {\n          request.regs.ext.gdpr = gdprApplies;\n        } else {\n          request.regs.ext = { gdpr: gdprApplies };\n        }\n      } else {\n        request.regs = { ext: { gdpr: gdprApplies } };\n      }\n\n      let consentString = bidRequests[0].gdprConsent.consentString;\n      if (request.user) {\n        if (request.user.ext) {\n          request.user.ext.consent = consentString;\n        } else {\n          request.user.ext = { consent: consentString };\n        }\n      } else {\n        request.user = { ext: { consent: consentString } };\n      }\n    }\n\n    return request;\n  },\n\n  interpretResponse(response, bidderRequests, requestedBidders) {\n    const bids = [];\n\n    if (response.seatbid) {\n      // a seatbid object contains a `bid` array and a `seat` string\n      response.seatbid.forEach(seatbid => {\n        (seatbid.bid || []).forEach(bid => {\n          const bidRequest = utils.getBidRequest(\n            this.bidMap[`${bid.impid}${seatbid.seat}`].bid_id,\n            bidderRequests\n          );\n\n          const cpm = bid.price;\n          const status = cpm !== 0 ? STATUS.GOOD : STATUS.NO_BID;\n          let bidObject = bidfactory.createBid(status, bidRequest);\n\n          bidObject.source = TYPE;\n          bidObject.bidderCode = seatbid.seat;\n          bidObject.cpm = cpm;\n\n          let serverResponseTimeMs = utils.deepAccess(response, ['ext', 'responsetimemillis', seatbid.seat].join('.'));\n          if (bidRequest && serverResponseTimeMs) {\n            bidRequest.serverResponseTimeMs = serverResponseTimeMs;\n          }\n\n          if (utils.deepAccess(bid, 'ext.prebid.type') === VIDEO) {\n            bidObject.mediaType = VIDEO;\n            if (bid.adm) { bidObject.vastXml = bid.adm; }\n            if (bid.nurl) { bidObject.vastUrl = bid.nurl; }\n          } else { // banner\n            if (bid.adm && bid.nurl) {\n              bidObject.ad = bid.adm;\n              bidObject.ad += utils.createTrackPixelHtml(decodeURIComponent(bid.nurl));\n            } else if (bid.adm) {\n              bidObject.ad = bid.adm;\n            } else if (bid.nurl) {\n              bidObject.adUrl = bid.nurl;\n            }\n          }\n\n          bidObject.width = bid.w;\n          bidObject.height = bid.h;\n          if (bid.dealid) { bidObject.dealId = bid.dealid; }\n          bidObject.requestId = bid.id;\n          bidObject.creative_id = bid.crid;\n          bidObject.creativeId = bid.crid;\n          if (bid.burl) { bidObject.burl = bid.burl; }\n\n          // TODO: Remove when prebid-server returns ttl, currency and netRevenue\n          bidObject.ttl = (bid.ttl) ? bid.ttl : DEFAULT_S2S_TTL;\n          bidObject.currency = (bid.currency) ? bid.currency : DEFAULT_S2S_CURRENCY;\n          bidObject.netRevenue = (bid.netRevenue) ? bid.netRevenue : DEFAULT_S2S_NETREVENUE;\n\n          bids.push({ adUnit: bid.impid, bid: bidObject });\n        });\n      });\n    }\n\n    return bids;\n  }\n};\n\nconst isOpenRtb = () => {\n  const OPEN_RTB_PATH = '/openrtb2/';\n\n  const endpoint = (_s2sConfig && _s2sConfig.endpoint) || '';\n  return ~endpoint.indexOf(OPEN_RTB_PATH);\n}\n\n/*\n * Returns the required protocol adapter to communicate with the configured\n * endpoint. The adapter is an object containing `buildRequest` and\n * `interpretResponse` functions.\n *\n * Usage:\n * // build JSON payload to send to server\n * const request = protocol().buildRequest(s2sBidRequest, adUnits);\n *\n * // turn server response into bid object array\n * const bids = protocol().interpretResponse(response, bidRequests, requestedBidders);\n */\nconst protocolAdapter = () => {\n  return isOpenRtb() ? OPEN_RTB_PROTOCOL : LEGACY_PROTOCOL;\n};\n\n/**\n * Bidder adapter for Prebid Server\n */\nexport function PrebidServer() {\n  const baseAdapter = new Adapter('prebidServer');\n\n  /* Prebid executes this function when the page asks to send out bid requests */\n  baseAdapter.callBids = function(s2sBidRequest, bidRequests, addBidResponse, done, ajax) {\n    const adUnits = utils.deepClone(s2sBidRequest.ad_units);\n\n    // at this point ad units should have a size array either directly or mapped so filter for that\n    const adUnitsWithSizes = adUnits.filter(unit => unit.sizes && unit.sizes.length);\n\n    // in case config.bidders contains invalid bidders, we only process those we sent requests for\n    const requestedBidders = adUnitsWithSizes\n      .map(adUnit => adUnit.bids.map(bid => bid.bidder).filter(utils.uniques))\n      .reduce(utils.flatten)\n      .filter(utils.uniques);\n\n    if (_s2sConfig && _s2sConfig.syncEndpoint) {\n      let consent = (Array.isArray(bidRequests) && bidRequests.length > 0) ? bidRequests[0].gdprConsent : undefined;\n      queueSync(_s2sConfig.bidders, consent);\n    }\n\n    const request = protocolAdapter().buildRequest(s2sBidRequest, bidRequests, adUnitsWithSizes);\n    const requestJson = JSON.stringify(request);\n\n    ajax(\n      _s2sConfig.endpoint,\n      {\n        success: response => handleResponse(response, requestedBidders, bidRequests, addBidResponse, done),\n        error: done\n      },\n      requestJson,\n      { contentType: 'text/plain', withCredentials: true }\n    );\n  };\n\n  /* Notify Prebid of bid responses so bids can get in the auction */\n  function handleResponse(response, requestedBidders, bidderRequests, addBidResponse, done) {\n    let result;\n    let bids = [];\n\n    try {\n      result = JSON.parse(response);\n\n      bids = protocolAdapter().interpretResponse(\n        result,\n        bidderRequests,\n        requestedBidders\n      );\n\n      bids.forEach(({adUnit, bid}) => {\n        if (isValid(adUnit, bid, bidderRequests)) {\n          addBidResponse(adUnit, bid);\n        }\n      });\n\n      bidderRequests.forEach(bidderRequest => events.emit(EVENTS.BIDDER_DONE, bidderRequest));\n\n      if (result.status === 'no_cookie' && _s2sConfig.cookieSet && typeof _s2sConfig.cookieSetUrl === 'string') {\n        // cookie sync\n        cookieSet(_s2sConfig.cookieSetUrl);\n      }\n    } catch (error) {\n      utils.logError(error);\n    }\n\n    if (!result || (result.status && includes(result.status, 'Error'))) {\n      utils.logError('error parsing response: ', result.status);\n    }\n\n    done();\n    doClientSideSyncs(requestedBidders);\n  }\n\n  return Object.assign(this, {\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    type: TYPE\n  });\n}\n\nadaptermanager.registerBidAdapter(new PrebidServer(), 'prebidServer');\n\n\n\n// WEBPACK FOOTER //\n// ./modules/prebidServerBidAdapter/index.js","import * as utils from './utils';\nimport adLoader from './adloader';\n\nconst cookie = exports;\n\ncookie.cookieSet = function(cookieSetUrl) {\n  if (!utils.isSafariBrowser()) {\n    return;\n  }\n  adLoader.loadScript(cookieSetUrl, null, true);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/cookie.js","// accountId and bidders params are not included here, should be configured by end-user\nexport const S2S_VENDORS = {\n  'appnexus': {\n    adapter: 'prebidServer',\n    cookieSet: false,\n    enabled: true,\n    endpoint: '//prebid.adnxs.com/pbs/v1/openrtb2/auction',\n    syncEndpoint: '//prebid.adnxs.com/pbs/v1/cookie_sync',\n    timeout: 1000\n  },\n  'rubicon': {\n    adapter: 'prebidServer',\n    cookieSet: false,\n    enabled: true,\n    endpoint: '//prebid-server.rubiconproject.com/openrtb2/auction',\n    syncEndpoint: '//prebid-server.rubiconproject.com/cookie_sync',\n    timeout: 500\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/prebidServerBidAdapter/config.js","/**\n * This modules adds Publisher Common ID support to prebid.js.  It's a simple numeric id\n * stored in the page's domain.  When the module is included, an id is generated if needed,\n * persisted as a cookie, and automatically appended to all the bidRequest as bid.crumbs.pubcid.\n */\nimport * as utils from 'src/utils'\nimport { config } from 'src/config';\n\nconst COOKIE_NAME = '_pubcid';\nconst DEFAULT_EXPIRES = 2628000; // 5-year worth of minutes\nconst PUB_COMMON = 'PublisherCommonId';\n\nvar pubcidEnabled = true;\nvar interval = DEFAULT_EXPIRES;\n\nexport function isPubcidEnabled() { return pubcidEnabled; }\nexport function getExpInterval() { return interval; }\n\n/**\n * Decorate ad units with pubcid.  This hook function is called before the\n * real pbjs.requestBids is invoked, and can modify its parameter.  The cookie is\n * not updated until this function is called.\n * @param {Object} config This is the same parameter as pbjs.requestBids, and config.adUnits will be updated.\n * @param {function} next The next function in the chain\n */\n\nexport function requestBidHook(config, next) {\n  let adUnits = config.adUnits || pbjs.adUnits;\n  let pubcid = null;\n\n  // Pass control to the next function if not enabled\n  if (!pubcidEnabled) {\n    return next.apply(this, arguments);\n  }\n\n  if (typeof window[PUB_COMMON] === 'object') {\n    // If the page includes its own pubcid object, then use that instead.\n    pubcid = window[PUB_COMMON].getId();\n    utils.logMessage(PUB_COMMON + ': pubcid = ' + pubcid);\n  } else {\n    // Otherwise get the existing cookie or create a new id\n    pubcid = getCookie(COOKIE_NAME) || utils.generateUUID();\n\n    // Update the cookie with the latest expiration date\n    setCookie(COOKIE_NAME, pubcid, interval);\n    utils.logMessage('pbjs: pubcid = ' + pubcid);\n  }\n\n  // Append pubcid to each bid object, which will be incorporated\n  // into bid requests later.\n  if (adUnits && pubcid) {\n    adUnits.forEach((unit) => {\n      unit.bids.forEach((bid) => {\n        Object.assign(bid, {crumbs: {pubcid}});\n      });\n    });\n  }\n  return next.apply(this, arguments);\n}\n\n// Helper to set a cookie\nexport function setCookie(name, value, expires) {\n  let expTime = new Date();\n  expTime.setTime(expTime.getTime() + expires * 1000 * 60);\n  window.document.cookie = name + '=' + encodeURIComponent(value) + ';path=/;expires=' +\n    expTime.toGMTString();\n}\n\n// Helper to read a cookie\nexport function getCookie(name) {\n  let m = window.document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]*)\\\\s*(;|$)');\n  return m ? decodeURIComponent(m[2]) : null;\n}\n\n/**\n * Configuration function\n * @param {boolean} enable Enable or disable pubcid.  By default the module is enabled.\n * @param {number} expInterval Expiration interval of the cookie in minutes.\n */\n\nexport function setConfig({ enable = true, expInterval = DEFAULT_EXPIRES } = {}) {\n  pubcidEnabled = enable;\n  interval = parseInt(expInterval, 10);\n  if (isNaN(interval)) {\n    interval = DEFAULT_EXPIRES;\n  }\n}\n\n/**\n * Initialize module by 1) subscribe to configuration changes and 2) register hook\n */\nexport function initPubcid() {\n  config.getConfig('pubcid', config => setConfig(config.pubcid));\n\n  if (utils.cookiesAreEnabled()) {\n    pbjs.requestBids.addHook(requestBidHook);\n  }\n}\n\ninitPubcid();\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pubCommonId.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nconst constants = require('src/constants.json');\n\nconst BIDDER_CODE = 'pubmatic';\nconst ENDPOINT = '//hbopenbid.pubmatic.com/translator?source=prebid-client';\nconst USYNCURL = '//ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p=';\nconst DEFAULT_CURRENCY = 'USD';\nconst AUCTION_TYPE = 1;\nconst UNDEFINED = undefined;\nconst CUSTOM_PARAMS = {\n  'kadpageurl': '', // Custom page url\n  'gender': '', // User gender\n  'yob': '', // User year of birth\n  'lat': '', // User location - Latitude\n  'lon': '', // User Location - Longitude\n  'wiid': '', // OpenWrap Wrapper Impression ID\n  'profId': '', // OpenWrap Legacy: Profile ID\n  'verId': '' // OpenWrap Legacy: version ID\n};\nconst DATA_TYPES = {\n  'NUMBER': 'number',\n  'STRING': 'string',\n  'BOOLEAN': 'boolean',\n  'ARRAY': 'array'\n};\nconst VIDEO_CUSTOM_PARAMS = {\n  'mimes': DATA_TYPES.ARRAY,\n  'minduration': DATA_TYPES.NUMBER,\n  'maxduration': DATA_TYPES.NUMBER,\n  'startdelay': DATA_TYPES.NUMBER,\n  'playbackmethod': DATA_TYPES.ARRAY,\n  'api': DATA_TYPES.ARRAY,\n  'protocols': DATA_TYPES.ARRAY,\n  'w': DATA_TYPES.NUMBER,\n  'h': DATA_TYPES.NUMBER,\n  'battr': DATA_TYPES.ARRAY,\n  'linearity': DATA_TYPES.NUMBER,\n  'placement': DATA_TYPES.NUMBER,\n  'minbitrate': DATA_TYPES.NUMBER,\n  'maxbitrate': DATA_TYPES.NUMBER\n}\nconst NET_REVENUE = false;\nconst dealChannelValues = {\n  1: 'PMP',\n  5: 'PREF',\n  6: 'PMPG'\n};\n\nlet publisherId = 0;\n\nfunction _getDomainFromURL(url) {\n  let anchor = document.createElement('a');\n  anchor.href = url;\n  return anchor.hostname;\n}\n\nfunction _parseSlotParam(paramName, paramValue) {\n  if (!utils.isStr(paramValue)) {\n    paramValue && utils.logWarn('PubMatic: Ignoring param key: ' + paramName + ', expects string-value, found ' + typeof paramValue);\n    return UNDEFINED;\n  }\n\n  switch (paramName) {\n    case 'pmzoneid':\n      return paramValue.split(',').slice(0, 50).map(id => id.trim()).join();\n    case 'kadfloor':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'lat':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'lon':\n      return parseFloat(paramValue) || UNDEFINED;\n    case 'yob':\n      return parseInt(paramValue) || UNDEFINED;\n    default:\n      return paramValue;\n  }\n}\n\nfunction _cleanSlot(slotName) {\n  if (utils.isStr(slotName)) {\n    return slotName.replace(/^\\s+/g, '').replace(/\\s+$/g, '');\n  }\n  return '';\n}\n\nfunction _parseAdSlot(bid) {\n  bid.params.adUnit = '';\n  bid.params.adUnitIndex = '0';\n  bid.params.width = 0;\n  bid.params.height = 0;\n  var sizesArrayExists = (bid.hasOwnProperty('sizes') && utils.isArray(bid.sizes) && bid.sizes.length >= 1);\n  bid.params.adSlot = _cleanSlot(bid.params.adSlot);\n\n  var slot = bid.params.adSlot;\n  var splits = slot.split(':');\n\n  slot = splits[0];\n  if (splits.length == 2) {\n    bid.params.adUnitIndex = splits[1];\n  }\n  // check if size is mentioned in sizes array. in that case do not check for @ in adslot\n  splits = slot.split('@');\n  if (splits.length != 2) {\n    if (!(sizesArrayExists)) {\n      utils.logWarn('AdSlot Error: adSlot not in required format');\n      return;\n    }\n  }\n  bid.params.adUnit = splits[0];\n  if (splits.length > 1) { // i.e size is specified in adslot, so consider that and ignore sizes array\n    splits = splits[1].split('x');\n    if (splits.length != 2) {\n      utils.logWarn('AdSlot Error: adSlot not in required format');\n      return;\n    }\n    bid.params.width = parseInt(splits[0]);\n    bid.params.height = parseInt(splits[1]);\n    delete bid.sizes;\n  } else if (sizesArrayExists) {\n    bid.params.width = parseInt(bid.sizes[0][0]);\n    bid.params.height = parseInt(bid.sizes[0][1]);\n  }\n}\n\nfunction _initConf() {\n  var conf = {};\n  conf.pageURL = utils.getTopWindowUrl();\n  conf.refURL = utils.getTopWindowReferrer();\n  return conf;\n}\n\nfunction _handleCustomParams(params, conf) {\n  if (!conf.kadpageurl) {\n    conf.kadpageurl = conf.pageURL;\n  }\n\n  var key, value, entry;\n  for (key in CUSTOM_PARAMS) {\n    if (CUSTOM_PARAMS.hasOwnProperty(key)) {\n      value = params[key];\n      if (value) {\n        entry = CUSTOM_PARAMS[key];\n\n        if (typeof entry === 'object') {\n          // will be used in future when we want to process a custom param before using\n          // 'keyname': {f: function() {}}\n          value = entry.f(value, conf);\n        }\n\n        if (utils.isStr(value)) {\n          conf[key] = value;\n        } else {\n          utils.logWarn('PubMatic: Ignoring param : ' + key + ' with value : ' + CUSTOM_PARAMS[key] + ', expects string-value, found ' + typeof value);\n        }\n      }\n    }\n  }\n  return conf;\n}\n\nfunction _createOrtbTemplate(conf) {\n  return {\n    id: '' + new Date().getTime(),\n    at: AUCTION_TYPE,\n    cur: [DEFAULT_CURRENCY],\n    imp: [],\n    site: {\n      page: conf.pageURL,\n      ref: conf.refURL,\n      publisher: {}\n    },\n    device: {\n      ua: navigator.userAgent,\n      js: 1,\n      dnt: (navigator.doNotTrack == 'yes' || navigator.doNotTrack == '1' || navigator.msDoNotTrack == '1') ? 1 : 0,\n      h: screen.height,\n      w: screen.width,\n      language: navigator.language\n    },\n    user: {},\n    ext: {}\n  };\n}\n\n// similar functionality as parseSlotParam. Check if the 2 functions can be clubbed.\nfunction _checkParamDataType(key, value, datatype) {\n  var errMsg = 'PubMatic: Ignoring param key: ' + key + ', expects ' + datatype + ', found ' + typeof value;\n  switch (datatype) {\n    case DATA_TYPES.BOOLEAN:\n      if (!utils.isBoolean(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.NUMBER:\n      if (!utils.isNumber(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.STRING:\n      if (!utils.isStr(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n    case DATA_TYPES.ARRAY:\n      if (!utils.isArray(value)) {\n        utils.logWarn(errMsg);\n        return UNDEFINED;\n      }\n      return value;\n  }\n}\n\nfunction _createImpressionObject(bid, conf) {\n  var impObj = {};\n  var bannerObj = {};\n  var videoObj = {};\n  var sizes = bid.hasOwnProperty('sizes') ? bid.sizes : [];\n\n  impObj = {\n    id: bid.bidId,\n    tagid: bid.params.adUnit,\n    bidfloor: _parseSlotParam('kadfloor', bid.params.kadfloor),\n    secure: window.location.protocol === 'https:' ? 1 : 0,\n    ext: {\n      pmZoneId: _parseSlotParam('pmzoneid', bid.params.pmzoneid)\n    },\n    bidfloorcur: bid.params.currency ? _parseSlotParam('currency', bid.params.currency) : DEFAULT_CURRENCY\n  };\n\n  if (bid.params.hasOwnProperty('video')) {\n    var videoData = bid.params.video;\n\n    for (var key in VIDEO_CUSTOM_PARAMS) {\n      if (videoData.hasOwnProperty(key)) {\n        videoObj[key] = _checkParamDataType(key, videoData[key], VIDEO_CUSTOM_PARAMS[key])\n      }\n    }\n    // read playersize and assign to h and w.\n    if (utils.isArray(bid.mediaTypes.video.playerSize[0])) {\n      videoObj.w = bid.mediaTypes.video.playerSize[0][0];\n      videoObj.h = bid.mediaTypes.video.playerSize[0][1];\n    } else if (utils.isNumber(bid.mediaTypes.video.playerSize[0])) {\n      videoObj.w = bid.mediaTypes.video.playerSize[0];\n      videoObj.h = bid.mediaTypes.video.playerSize[1];\n    }\n    if (bid.params.video.hasOwnProperty('skippable')) {\n      videoObj.ext = {\n        'video_skippable': bid.params.video.skippable ? 1 : 0\n      }\n    }\n\n    impObj.video = videoObj;\n  } else {\n    bannerObj = {\n      pos: 0,\n      w: bid.params.width,\n      h: bid.params.height,\n      topframe: utils.inIframe() ? 0 : 1,\n    }\n    if (utils.isArray(sizes) && sizes.length > 1) {\n      sizes = sizes.splice(1, sizes.length - 1);\n      var format = [];\n      sizes.forEach(size => {\n        format.push({w: size[0], h: size[1]});\n      });\n      bannerObj.format = format;\n    }\n    impObj.banner = bannerObj;\n  }\n  return impObj;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO],\n  /**\n  * Determines whether or not the given bid request is valid. Valid bid request must have placementId and hbid\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: bid => {\n    if (bid && bid.params) {\n      if (!utils.isStr(bid.params.publisherId)) {\n        utils.logWarn(BIDDER_CODE + ' Error: publisherId is mandatory and cannot be numeric. Call to OpenBid will not be sent.');\n        return false;\n      }\n      if (!utils.isStr(bid.params.adSlot)) {\n        utils.logWarn(BIDDER_CODE + ': adSlotId is mandatory and cannot be numeric. Call to OpenBid will not be sent.');\n        return false;\n      }\n      // video ad validation\n      if (bid.params.hasOwnProperty('video')) {\n        if (!bid.params.video.hasOwnProperty('mimes') || !utils.isArray(bid.params.video.mimes) || bid.params.video.mimes.length === 0) {\n          utils.logWarn(BIDDER_CODE + ': For video ads, mimes is mandatory and must specify atlease 1 mime value. Call to OpenBid will not be sent.');\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  },\n\n  /**\n  * Make a server request from the list of BidRequests.\n  *\n  * @param {validBidRequests[]} - an array of bids\n  * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: (validBidRequests, bidderRequest) => {\n    var conf = _initConf();\n    var payload = _createOrtbTemplate(conf);\n    var bidCurrency = '';\n    var dctr = '';\n    var dctrLen;\n    var dctrArr = [];\n    validBidRequests.forEach(bid => {\n      _parseAdSlot(bid);\n      if (bid.params.hasOwnProperty('video')) {\n        if (!(bid.params.adSlot && bid.params.adUnit && bid.params.adUnitIndex)) {\n          utils.logWarn(BIDDER_CODE + ': Skipping the non-standard adslot: ', bid.params.adSlot, bid);\n          return;\n        }\n      } else {\n        if (!(bid.params.adSlot && bid.params.adUnit && bid.params.adUnitIndex && bid.params.width && bid.params.height)) {\n          utils.logWarn(BIDDER_CODE + ': Skipping the non-standard adslot: ', bid.params.adSlot, bid);\n          return;\n        }\n      }\n      conf.pubId = conf.pubId || bid.params.publisherId;\n      conf = _handleCustomParams(bid.params, conf);\n      conf.transactionId = bid.transactionId;\n      if (bidCurrency === '') {\n        bidCurrency = bid.params.currency || undefined;\n      } else if (bid.params.hasOwnProperty('currency') && bidCurrency !== bid.params.currency) {\n        utils.logWarn(BIDDER_CODE + ': Currency specifier ignored. Only one currency permitted.');\n      }\n      bid.params.currency = bidCurrency;\n      // check if dctr is added to more than 1 adunit\n      if (bid.params.hasOwnProperty('dctr') && utils.isStr(bid.params.dctr)) {\n        dctrArr.push(bid.params.dctr);\n      }\n      payload.imp.push(_createImpressionObject(bid, conf));\n    });\n\n    if (payload.imp.length == 0) {\n      return;\n    }\n\n    payload.site.publisher.id = conf.pubId.trim();\n    publisherId = conf.pubId.trim();\n    payload.ext.wrapper = {};\n    payload.ext.wrapper.profile = parseInt(conf.profId) || UNDEFINED;\n    payload.ext.wrapper.version = parseInt(conf.verId) || UNDEFINED;\n    payload.ext.wrapper.wiid = conf.wiid || UNDEFINED;\n    payload.ext.wrapper.wv = constants.REPO_AND_VERSION;\n    payload.ext.wrapper.transactionId = conf.transactionId;\n    payload.ext.wrapper.wp = 'pbjs';\n    payload.user.gender = (conf.gender ? conf.gender.trim() : UNDEFINED);\n    payload.user.geo = {};\n\n    // Attaching GDPR Consent Params\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.user.ext = {\n        consent: bidderRequest.gdprConsent.consentString\n      };\n\n      payload.regs = {\n        ext: {\n          gdpr: (bidderRequest.gdprConsent.gdprApplies ? 1 : 0)\n        }\n      };\n    }\n\n    payload.user.geo.lat = _parseSlotParam('lat', conf.lat);\n    payload.user.geo.lon = _parseSlotParam('lon', conf.lon);\n    payload.user.yob = _parseSlotParam('yob', conf.yob);\n    payload.device.geo = {};\n    payload.device.geo.lat = _parseSlotParam('lat', conf.lat);\n    payload.device.geo.lon = _parseSlotParam('lon', conf.lon);\n    payload.site.page = conf.kadpageurl.trim() || payload.site.page.trim();\n    payload.site.domain = _getDomainFromURL(payload.site.page);\n\n    // set dctr value in site.ext, if present in validBidRequests[0], else ignore\n    if (validBidRequests[0].params.hasOwnProperty('dctr')) {\n      dctr = validBidRequests[0].params.dctr;\n      if (utils.isStr(dctr) && dctr.length > 0) {\n        var arr = dctr.split('|');\n        dctr = '';\n        arr.forEach(val => {\n          dctr += (val.length > 0) ? (val.trim() + '|') : '';\n        });\n        dctrLen = dctr.length;\n        if (dctr.substring(dctrLen, dctrLen - 1) === '|') {\n          dctr = dctr.substring(0, dctrLen - 1);\n        }\n        payload.site.ext = {\n          key_val: dctr.trim()\n        }\n      } else {\n        utils.logWarn(BIDDER_CODE + ': Ignoring param : dctr with value : ' + dctr + ', expects string-value, found empty or non-string value');\n      }\n      if (dctrArr.length > 1) {\n        utils.logWarn(BIDDER_CODE + ': dctr value found in more than 1 adunits. Value from 1st adunit will be picked. Ignoring values from subsequent adunits');\n      }\n    } else {\n      utils.logWarn(BIDDER_CODE + ': dctr value not found in 1st adunit, ignoring values from subsequent adunits');\n    }\n\n    return {\n      method: 'POST',\n      url: ENDPOINT,\n      data: JSON.stringify(payload)\n    };\n  },\n\n  /**\n  * Unpack the response from the server into a list of bids.\n  *\n  * @param {*} response A successful response from the server.\n  * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: (response, request) => {\n    const bidResponses = [];\n    var respCur = DEFAULT_CURRENCY;\n    try {\n      if (response.body && response.body.seatbid && utils.isArray(response.body.seatbid)) {\n        // Supporting multiple bid responses for same adSize\n        respCur = response.body.cur || respCur;\n        response.body.seatbid.forEach(seatbidder => {\n          seatbidder.bid &&\n          utils.isArray(seatbidder.bid) &&\n          seatbidder.bid.forEach(bid => {\n            let newBid = {\n              requestId: bid.impid,\n              cpm: (parseFloat(bid.price) || 0).toFixed(2),\n              width: bid.w,\n              height: bid.h,\n              creativeId: bid.crid || bid.id,\n              dealId: bid.dealid,\n              currency: respCur,\n              netRevenue: NET_REVENUE,\n              ttl: 300,\n              referrer: utils.getTopWindowUrl(),\n              ad: bid.adm\n            };\n            let parsedRequest = JSON.parse(request.data);\n            if (parsedRequest.imp && parsedRequest.imp.length > 0) {\n              parsedRequest.imp.forEach(req => {\n                if (bid.impid === req.id && req.hasOwnProperty('video')) {\n                  newBid.mediaType = 'video';\n                  newBid.width = bid.hasOwnProperty('w') ? bid.w : req.video.w;\n                  newBid.height = bid.hasOwnProperty('h') ? bid.h : req.video.h;\n                  newBid.vastXml = bid.adm;\n                }\n              });\n            }\n            if (bid.ext && bid.ext.deal_channel) {\n              newBid['dealChannel'] = dealChannelValues[bid.ext.deal_channel] || null;\n            }\n\n            bidResponses.push(newBid);\n          });\n        });\n      }\n    } catch (error) {\n      utils.logError(error);\n    }\n    return bidResponses;\n  },\n\n  /**\n  * Register User Sync.\n  */\n  getUserSyncs: (syncOptions, responses, gdprConsent) => {\n    let syncurl = USYNCURL + publisherId;\n\n    // Attaching GDPR Consent Params in UserSync url\n    if (gdprConsent) {\n      syncurl += '&gdpr=' + (gdprConsent.gdprApplies ? 1 : 0);\n      syncurl += '&gdpr_consent=' + encodeURIComponent(gdprConsent.consentString || '');\n    }\n\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: syncurl\n      }];\n    } else {\n      utils.logWarn('PubMatic: Please enable iframe based user sync.');\n    }\n  },\n\n  /**\n   * Covert bid param types for S2S\n   * @param {Object} params bid params\n   * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n   * @return {Object} params bid params\n   */\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'publisherId': 'string',\n      'adSlot': 'string'\n    }, params);\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pubmaticBidAdapter.js","import {ajax} from 'src/ajax';\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\nconst utils = require('src/utils');\n\n/****\n * PubWise.io Analytics\n * Contact: support@pubwise.io\n * Developer: Stephen Johnston\n *\n * For testing:\n *\n pbjs.enableAnalytics({\n  provider: 'pubwise',\n  options: {\n    site: 'test-test-test-test',\n    endpoint: 'https://api.pubwise.io/api/v4/event/add/',\n  }\n });\n */\n\nconst analyticsType = 'endpoint';\nconst analyticsName = 'PubWise Analytics: ';\nlet defaultUrl = 'https://api.pubwise.io/api/v4/event/default/';\nlet pubwiseVersion = '3.0';\nlet pubwiseSchema = 'AVOCET';\nlet configOptions = {site: '', endpoint: 'https://api.pubwise.io/api/v4/event/default/', debug: ''};\nlet pwAnalyticsEnabled = false;\nlet utmKeys = {utm_source: '', utm_medium: '', utm_campaign: '', utm_term: '', utm_content: ''};\n\nfunction markEnabled() {\n  utils.logInfo(`${analyticsName}Enabled`, configOptions);\n  pwAnalyticsEnabled = true;\n}\n\nfunction enrichWithMetrics(dataBag) {\n  try {\n    dataBag['pw_version'] = pubwiseVersion;\n    dataBag['pbjs_version'] = pbjs.version;\n    dataBag['debug'] = configOptions.debug;\n  } catch (e) {\n    dataBag['error_metric'] = 1;\n  }\n\n  return dataBag;\n}\n\nfunction enrichWithUTM(dataBag) {\n  let newUtm = false;\n  try {\n    for (let prop in utmKeys) {\n      utmKeys[prop] = utils.getParameterByName(prop);\n      if (utmKeys[prop] != '') {\n        newUtm = true;\n        dataBag[prop] = utmKeys[prop];\n      }\n    }\n\n    if (newUtm === false) {\n      for (let prop in utmKeys) {\n        let itemValue = localStorage.getItem(`pw-${prop}`);\n        if (itemValue.length !== 0) {\n          dataBag[prop] = itemValue;\n        }\n      }\n    } else {\n      for (let prop in utmKeys) {\n        localStorage.setItem(`pw-${prop}`, utmKeys[prop]);\n      }\n    }\n  } catch (e) {\n    utils.logInfo(`${analyticsName}Error`, e);\n    dataBag['error_utm'] = 1;\n  }\n  return dataBag;\n}\n\nfunction sendEvent(eventType, data) {\n  utils.logInfo(`${analyticsName}Event ${eventType} ${pwAnalyticsEnabled}`, data);\n\n  // put the typical items in the data bag\n  let dataBag = {\n    eventType: eventType,\n    args: data,\n    target_site: configOptions.site,\n    pubwiseSchema: pubwiseSchema,\n    debug: configOptions.debug ? 1 : 0,\n  };\n\n  dataBag = enrichWithMetrics(dataBag);\n  // for certain events, track additional info\n  if (eventType == CONSTANTS.EVENTS.AUCTION_INIT) {\n    dataBag = enrichWithUTM(dataBag);\n  }\n\n  ajax(configOptions.endpoint, (result) => utils.logInfo(`${analyticsName}Result`, result), JSON.stringify(dataBag));\n}\n\nlet pubwiseAnalytics = Object.assign(adapter(\n  {\n    defaultUrl,\n    analyticsType\n  }),\n{\n  // Override AnalyticsAdapter functions by supplying custom methods\n  track({eventType, args}) {\n    sendEvent(eventType, args);\n  }\n});\n\npubwiseAnalytics.adapterEnableAnalytics = pubwiseAnalytics.enableAnalytics;\n\npubwiseAnalytics.enableAnalytics = function (config) {\n  if (config.options.debug === undefined) {\n    config.options.debug = utils.debugTurnedOn();\n  }\n  configOptions = config.options;\n  markEnabled();\n  pubwiseAnalytics.adapterEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: pubwiseAnalytics,\n  code: 'pubwise'\n});\n\nexport default pubwiseAnalytics;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pubwiseAnalyticsAdapter.js","/**\n * pulsepoint.js - Analytics Adapter for PulsePoint\n */\n\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\n\nvar pulsepointAdapter = adapter({\n  global: 'PulsePointPrebidAnalytics',\n  handler: 'on',\n  analyticsType: 'bundle'\n});\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: pulsepointAdapter,\n  code: 'pulsepoint'\n});\n\nexport default pulsepointAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pulsepointAnalyticsAdapter.js","/* eslint dot-notation:0, quote-props:0 */\nimport * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst NATIVE_DEFAULTS = {\n  TITLE_LEN: 100,\n  DESCR_LEN: 200,\n  SPONSORED_BY_LEN: 50,\n  IMG_MIN: 150,\n  ICON_MIN: 50,\n};\n\nconst DEFAULT_BID_TTL = 20;\nconst DEFAULT_CURRENCY = 'USD';\nconst DEFAULT_NET_REVENUE = true;\n\n/**\n * PulsePoint Bid Adapter.\n * Contact: ExchangeTeam@pulsepoint.com\n *\n * Aliases - pulseLite and pulsepointLite are supported for backwards compatibility.\n * Formats - Display/Native/Outstream formats supported.\n *\n */\nexport const spec = {\n\n  code: 'pulsepoint',\n\n  aliases: ['pulseLite', 'pulsepointLite'],\n\n  supportedMediaTypes: ['banner', 'native'],\n\n  isBidRequestValid: bid => (\n    !!(bid && bid.params && bid.params.cp && bid.params.ct)\n  ),\n\n  buildRequests: (bidRequests, bidderRequest) => {\n    const request = {\n      id: bidRequests[0].bidderRequestId,\n      imp: bidRequests.map(slot => impression(slot)),\n      site: site(bidRequests),\n      app: app(bidRequests),\n      device: device(),\n    };\n    applyGdpr(bidderRequest, request);\n    return {\n      method: 'POST',\n      url: '//bid.contextweb.com/header/ortb',\n      data: JSON.stringify(request),\n    };\n  },\n\n  interpretResponse: (response, request) => (\n    bidResponseAvailable(request, response)\n  ),\n\n  getUserSyncs: syncOptions => {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//bh.contextweb.com/visitormatch'\n      }];\n    } else if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: '//bh.contextweb.com/visitormatch/prebid'\n      }];\n    }\n  },\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'cf': 'string',\n      'cp': 'number',\n      'ct': 'number'\n    }, params);\n  }\n};\n\n/**\n * Callback for bids, after the call to PulsePoint completes.\n */\nfunction bidResponseAvailable(bidRequest, bidResponse) {\n  const idToImpMap = {};\n  const idToBidMap = {};\n  bidResponse = bidResponse.body\n  // extract the request bids and the response bids, keyed by impr-id\n  const ortbRequest = parse(bidRequest.data);\n  ortbRequest.imp.forEach(imp => {\n    idToImpMap[imp.id] = imp;\n  });\n  if (bidResponse) {\n    bidResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n      idToBidMap[bid.impid] = bid;\n    }));\n  }\n  const bids = [];\n  Object.keys(idToImpMap).forEach(id => {\n    if (idToBidMap[id]) {\n      const bid = {\n        requestId: id,\n        cpm: idToBidMap[id].price,\n        creative_id: id,\n        creativeId: id,\n        adId: id,\n        ttl: DEFAULT_BID_TTL,\n        netRevenue: DEFAULT_NET_REVENUE,\n        currency: DEFAULT_CURRENCY\n      };\n      if (idToImpMap[id]['native']) {\n        bid['native'] = nativeResponse(idToImpMap[id], idToBidMap[id]);\n        bid.mediaType = 'native';\n      } else {\n        bid.ad = idToBidMap[id].adm;\n        bid.width = idToImpMap[id].banner.w;\n        bid.height = idToImpMap[id].banner.h;\n      }\n      applyExt(bid, idToBidMap[id])\n      bids.push(bid);\n    }\n  });\n  return bids;\n}\n\nfunction applyExt(bid, ortbBid) {\n  if (ortbBid && ortbBid.ext) {\n    bid.ttl = ortbBid.ext.ttl || bid.ttl;\n    bid.currency = ortbBid.ext.currency || bid.currency;\n    bid.netRevenue = ortbBid.ext.netRevenue != null ? ortbBid.ext.netRevenue : bid.netRevenue;\n  }\n}\n\n/**\n * Produces an OpenRTBImpression from a slot config.\n */\nfunction impression(slot) {\n  return {\n    id: slot.bidId,\n    banner: banner(slot),\n    'native': nativeImpression(slot),\n    tagid: slot.params.ct.toString(),\n  };\n}\n\n/**\n * Produces an OpenRTB Banner object for the slot given.\n */\nfunction banner(slot) {\n  const size = adSize(slot);\n  return slot.nativeParams ? null : {\n    w: size[0],\n    h: size[1],\n  };\n}\n\n/**\n * Produces an OpenRTB Native object for the slot given.\n */\nfunction nativeImpression(slot) {\n  if (slot.nativeParams) {\n    const assets = [];\n    addAsset(assets, titleAsset(assets.length + 1, slot.nativeParams.title, NATIVE_DEFAULTS.TITLE_LEN));\n    addAsset(assets, dataAsset(assets.length + 1, slot.nativeParams.body, 2, NATIVE_DEFAULTS.DESCR_LEN));\n    addAsset(assets, dataAsset(assets.length + 1, slot.nativeParams.sponsoredBy, 1, NATIVE_DEFAULTS.SPONSORED_BY_LEN));\n    addAsset(assets, imageAsset(assets.length + 1, slot.nativeParams.icon, 1, NATIVE_DEFAULTS.ICON_MIN, NATIVE_DEFAULTS.ICON_MIN));\n    addAsset(assets, imageAsset(assets.length + 1, slot.nativeParams.image, 3, NATIVE_DEFAULTS.IMG_MIN, NATIVE_DEFAULTS.IMG_MIN));\n    return {\n      request: JSON.stringify({ assets }),\n      ver: '1.1',\n    };\n  }\n  return null;\n}\n\n/**\n * Helper method to add an asset to the assets list.\n */\nfunction addAsset(assets, asset) {\n  if (asset) {\n    assets.push(asset);\n  }\n}\n\n/**\n * Produces a Native Title asset for the configuration given.\n */\nfunction titleAsset(id, params, defaultLen) {\n  if (params) {\n    return {\n      id,\n      required: params.required ? 1 : 0,\n      title: {\n        len: params.len || defaultLen,\n      },\n    };\n  }\n  return null;\n}\n\n/**\n * Produces a Native Image asset for the configuration given.\n */\nfunction imageAsset(id, params, type, defaultMinWidth, defaultMinHeight) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    img: {\n      type,\n      wmin: params.wmin || defaultMinWidth,\n      hmin: params.hmin || defaultMinHeight,\n    }\n  } : null;\n}\n\n/**\n * Produces a Native Data asset for the configuration given.\n */\nfunction dataAsset(id, params, type, defaultLen) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    data: {\n      type,\n      len: params.len || defaultLen,\n    }\n  } : null;\n}\n\n/**\n * Produces an OpenRTB site object.\n */\nfunction site(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.cp : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (!appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n      },\n      ref: referrer(),\n      page: utils.getTopWindowLocation().href,\n    }\n  }\n  return null;\n}\n\n/**\n * Produces an OpenRTB App object.\n */\nfunction app(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.cp : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n      },\n      bundle: appParams.bundle,\n      storeurl: appParams.storeUrl,\n      domain: appParams.domain,\n    }\n  }\n  return null;\n}\n\n/**\n * Attempts to capture the referrer url.\n */\nfunction referrer() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    return document.referrer;\n  }\n}\n\n/**\n * Produces an OpenRTB Device object.\n */\nfunction device() {\n  return {\n    ua: navigator.userAgent,\n    language: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage),\n  };\n}\n\n/**\n * Safely parses the input given. Returns null on\n * parsing failure.\n */\nfunction parse(rawResponse) {\n  try {\n    if (rawResponse) {\n      return JSON.parse(rawResponse);\n    }\n  } catch (ex) {\n    utils.logError('pulsepointLite.safeParse', 'ERROR', ex);\n  }\n  return null;\n}\n\n/**\n * Determines the AdSize for the slot.\n */\nfunction adSize(slot) {\n  if (slot.params.cf) {\n    const size = slot.params.cf.toUpperCase().split('X');\n    const width = parseInt(slot.params.cw || size[0], 10);\n    const height = parseInt(slot.params.ch || size[1], 10);\n    return [width, height];\n  }\n  return [1, 1];\n}\n\n/**\n * Applies GDPR parameters to request.\n */\nfunction applyGdpr(bidderRequest, ortbRequest) {\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    ortbRequest.regs = { ext: { gdpr: bidderRequest.gdprConsent.gdprApplies ? 1 : 0 } };\n    ortbRequest.user = { ext: { consent: bidderRequest.gdprConsent.consentString } };\n  }\n}\n\n/**\n * Parses the native response from the Bid given.\n */\nfunction nativeResponse(imp, bid) {\n  if (imp['native']) {\n    const nativeAd = parse(bid.adm);\n    const keys = {};\n    if (nativeAd && nativeAd['native'] && nativeAd['native'].assets) {\n      nativeAd['native'].assets.forEach(asset => {\n        keys.title = asset.title ? asset.title.text : keys.title;\n        keys.body = asset.data && asset.data.type === 2 ? asset.data.value : keys.body;\n        keys.sponsoredBy = asset.data && asset.data.type === 1 ? asset.data.value : keys.sponsoredBy;\n        keys.image = asset.img && asset.img.type === 3 ? asset.img.url : keys.image;\n        keys.icon = asset.img && asset.img.type === 1 ? asset.img.url : keys.icon;\n      });\n      if (nativeAd['native'].link) {\n        keys.clickUrl = encodeURIComponent(nativeAd['native'].link.url);\n      }\n      keys.impressionTrackers = nativeAd['native'].imptrackers;\n      return keys;\n    }\n  }\n  return null;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/pulsepointBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'quantcast';\nconst DEFAULT_BID_FLOOR = 0.0000000001;\n\nexport const QUANTCAST_DOMAIN = 'qcx.quantserve.com';\nexport const QUANTCAST_TEST_DOMAIN = 's2s-canary.quantserve.com';\nexport const QUANTCAST_NET_REVENUE = true;\nexport const QUANTCAST_TEST_PUBLISHER = 'test-publisher';\nexport const QUANTCAST_TTL = 4;\nexport const QUANTCAST_PROTOCOL =\n  window.location.protocol === 'http:'\n    ? 'http'\n    : 'https';\nexport const QUANTCAST_PORT =\n  QUANTCAST_PROTOCOL === 'http'\n    ? '8080'\n    : '8443';\n\n/**\n * The documentation for Prebid.js Adapter 1.0 can be found at link below,\n * http://prebid.org/dev-docs/bidder-adapter-1.html\n */\nexport const spec = {\n  code: BIDDER_CODE,\n\n  /**\n   * Verify the `AdUnits.bids` response with `true` for valid request and `false`\n   * for invalid request.\n   *\n   * @param {object} bid\n   * @return boolean `true` is this is a valid bid, and `false` otherwise\n   */\n  isBidRequestValid(bid) {\n    if (!bid) {\n      return false;\n    }\n\n    if (bid.mediaType === 'video') {\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\n   * Make a server request when the page asks Prebid.js for bids from a list of\n   * `BidRequests`.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be send to Quantcast server\n   * @param bidderRequest\n   * @return ServerRequest information describing the request to the server.\n   */\n  buildRequests(bidRequests, bidderRequest) {\n    const bids = bidRequests || [];\n\n    const referrer = utils.getTopWindowUrl();\n    const loc = utils.getTopWindowLocation();\n    const domain = loc.hostname;\n\n    const bidRequestsList = bids.map(bid => {\n      const bidSizes = [];\n\n      bid.sizes.forEach(size => {\n        bidSizes.push({\n          width: size[0],\n          height: size[1]\n        });\n      });\n\n      const gdprConsent = bidderRequest ? bidderRequest.gdprConsent : {};\n\n      // Request Data Format can be found at https://wiki.corp.qc/display/adinf/QCX\n      const requestData = {\n        publisherId: bid.params.publisherId,\n        requestId: bid.bidId,\n        imp: [\n          {\n            banner: {\n              battr: bid.params.battr,\n              sizes: bidSizes\n            },\n            placementCode: bid.placementCode,\n            bidFloor: bid.params.bidFloor || DEFAULT_BID_FLOOR\n          }\n        ],\n        site: {\n          page: loc.href,\n          referrer,\n          domain\n        },\n        bidId: bid.bidId,\n        gdprSignal: gdprConsent.gdprApplies ? 1 : 0,\n        gdprConsent: gdprConsent.consentString\n      };\n\n      const data = JSON.stringify(requestData);\n\n      const qcDomain = bid.params.publisherId === QUANTCAST_TEST_PUBLISHER\n        ? QUANTCAST_TEST_DOMAIN\n        : QUANTCAST_DOMAIN;\n      const url = `${QUANTCAST_PROTOCOL}://${qcDomain}:${QUANTCAST_PORT}/qchb`;\n\n      return {\n        data,\n        method: 'POST',\n        url\n      };\n    });\n\n    return bidRequestsList;\n  },\n\n  /**\n   * Function get called when the browser has received the response from Quantcast server.\n   * The function parse the response and create a `bidResponse` object containing one/more bids.\n   * Returns an empty array if no valid bids\n   *\n   * Response Data Format can be found at https://wiki.corp.qc/display/adinf/QCX\n   *\n   * @param {*} serverResponse A successful response from Quantcast server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   *\n   */\n  interpretResponse(serverResponse) {\n    if (serverResponse === undefined) {\n      utils.logError('Server Response is undefined');\n      return [];\n    }\n\n    const response = serverResponse['body'];\n\n    if (\n      response === undefined ||\n      !response.hasOwnProperty('bids') ||\n      utils.isEmpty(response.bids)\n    ) {\n      utils.logError('Sub-optimal JSON received from Quantcast server');\n      return [];\n    }\n\n    const bidResponsesList = response.bids.map(bid => {\n      const { ad, cpm, width, height, creativeId, currency } = bid;\n\n      return {\n        requestId: response.requestId,\n        cpm,\n        width,\n        height,\n        ad,\n        ttl: QUANTCAST_TTL,\n        creativeId,\n        netRevenue: QUANTCAST_NET_REVENUE,\n        currency\n      };\n    });\n\n    return bidResponsesList;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/quantcastBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER, NATIVE } from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'quantum';\nconst ENDPOINT_URL = '//s.sspqns.com/hb';\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['quantx', 'qtx'], // short code\n  supportedMediaTypes: [BANNER, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n\n  isBidRequestValid: function (bid) {\n    return !!(bid.params && bid.params.placementId);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    return bidRequests.map(bid => {\n      const qtxRequest = {};\n      let bidId = '';\n\n      const params = bid.params;\n      let placementId = params.placementId;\n\n      let devEnpoint = false;\n      if (params.useDev && params.useDev === '1') {\n        devEnpoint = '//sdev.sspqns.com/hb';\n      }\n      let renderMode = 'native';\n      for (let i = 0; i < bid.sizes.length; i++) {\n        if (bid.sizes[i][0] > 1 && bid.sizes[i][1] > 1) {\n          renderMode = 'banner';\n          break;\n        }\n      }\n\n      let mediaType = (bid.mediaType === 'native' || utils.deepAccess(bid, 'mediaTypes.native')) ? 'native' : 'banner';\n\n      if (mediaType === 'native') {\n        renderMode = 'native';\n      }\n\n      if (!bidId) {\n        bidId = bid.bidId;\n      }\n      qtxRequest.auid = placementId;\n\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        qtxRequest.quantx_user_consent_string = bidderRequest.gdprConsent.consentString;\n        qtxRequest.quantx_gdpr = bidderRequest.gdprConsent.gdprApplies === true ? 1 : 0;\n      };\n\n      const url = devEnpoint || ENDPOINT_URL;\n\n      return {\n        method: 'GET',\n        bidId: bidId,\n        sizes: bid.sizes,\n        mediaType: mediaType,\n        renderMode: renderMode,\n        url: url,\n        'data': qtxRequest,\n        bidderRequest\n      };\n    });\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const serverBody = serverResponse.body;\n    const bidResponses = [];\n    let responseCPM;\n    let bid = {};\n    let id = bidRequest.bidId;\n\n    if (serverBody.price && serverBody.price !== 0) {\n      responseCPM = parseFloat(serverBody.price);\n\n      bid.creativeId = serverBody.creative_id || '0';\n      bid.cpm = responseCPM;\n      bid.requestId = bidRequest.bidId;\n      bid.width = 1;\n      bid.height = 1;\n      bid.ttl = 200;\n      bid.netRevenue = true;\n      bid.currency = 'USD';\n\n      if (serverBody.native) {\n        bid.native = serverBody.native;\n      }\n      if (serverBody.cobj) {\n        bid.cobj = serverBody.cobj;\n      }\n      if (bidRequest.sizes) {\n        bid.width = bidRequest.sizes[0][0];\n        bid.height = bidRequest.sizes[0][1];\n      }\n\n      bid.nurl = serverBody.nurl;\n      bid.sync = serverBody.sync;\n      if (bidRequest.renderMode && bidRequest.renderMode === 'banner') {\n        bid.mediaType = 'banner';\n        if (serverBody.native) {\n          const adAssetsUrl = '//cdn.elasticad.net/native/serve/js/quantx/quantumAd/';\n          let assets = serverBody.native.assets;\n          let link = serverBody.native.link;\n\n          let trackers = [];\n          if (serverBody.native.imptrackers) {\n            trackers = serverBody.native.imptrackers;\n          }\n\n          let jstracker = '';\n          if (serverBody.native.jstracker) {\n            jstracker = encodeURIComponent(serverBody.native.jstracker);\n          }\n\n          if (serverBody.nurl) {\n            trackers.push(serverBody.nurl);\n          }\n\n          let ad = {};\n          ad['trackers'] = trackers;\n          ad['jstrackers'] = jstracker;\n\n          for (let i = 0; i < assets.length; i++) {\n            let asset = assets[i];\n            switch (asset['id']) {\n              case 1:\n                ad['title'] = asset['title']['text'];\n                break;\n              case 2:\n                ad['sponsor_logo'] = asset['img']['url'];\n                break;\n              case 3:\n                ad['content'] = asset['data']['value'];\n                break;\n              case 4:\n                ad['main_image'] = asset['img']['url'];\n                break;\n              case 6:\n                ad['teaser_type'] = 'vast';\n                ad['video_url'] = asset['video']['vasttag'];\n                break;\n              case 10:\n                ad['sponsor_name'] = asset['data']['value'];\n                break;\n              case 2001:\n                ad['expanded_content_type'] = 'embed';\n                ad['expanded_summary'] = asset['data']['value'];\n                break;\n              case 2002:\n                ad['expanded_content_type'] = 'vast';\n                ad['expanded_summary'] = asset['data']['value'];\n                break;\n              case 2003:\n                ad['sponsor_url'] = asset['data']['value'];\n                break;\n              case 2004: // prism\n                ad['content_type'] = 'prism';\n                break;\n              case 2005: // internal_landing_page\n                ad['content_type'] = 'internal_landing_page';\n                ad['internal_content_link'] = asset['data']['value'];\n                break;\n              case 2006: // teaser as vast\n                ad['teaser_type'] = 'vast';\n                ad['video_url'] = asset['data']['value'];\n                break;\n              case 2007:\n                ad['autoexpand_content_type'] = asset['data']['value'];\n                break;\n              case 2022: // content page\n                ad['content_type'] = 'full_text';\n                ad['full_text'] = asset['data']['value'];\n                break;\n            }\n          }\n\n          ad['action_url'] = link.url;\n\n          if (!ad['sponsor_url']) {\n            ad['sponsor_url'] = ad['action_url'];\n          }\n\n          ad['clicktrackers'] = [];\n          if (link.clicktrackers) {\n            ad['clicktrackers'] = link.clicktrackers;\n          }\n\n          ad['main_image'] = '//resize-ssp.elasticad.net/scalecrop-290x130/' + window.btoa(ad['main_image']) + '/external';\n\n          bid.ad = '<div id=\"ead_' + id + '\\\">' +\n            '<div class=\"ad_container ead_' + id + '\" style=\"clear: both; display:inline-block;width:100%\">' +\n            '  <div class=\"image_content\">' +\n            '    <a href=\"' + ad['action_url'] + '\" class=\"ea_expand\" target=\"_blank\"><img src=\"' + ad['main_image'] + '\" class=\"ea_image ead_image\">' +\n            '    </a>' +\n            '  </div>' +\n            '  <div class=\"ead_content\"><a href=\"' + ad['action_url'] + '\" class=\"ea_expand\" style=\"text-decoration: none\" target=\"_blank\"><h2 style=\"margin:0px;\">' + ad['title'] + '</h2></a>' +\n            '    <p class=\"ea_summary\">' + ad['content'] + '&nbsp;</p></div>' +\n            '  <div style=\"text-align:right;\" class=\"ea_hide_brand_logo ea_hide_brand_name\">' +\n            '    <p style=\"margin:0;\"><span class=\"ea_creative_var_label\">Sponsored by</span>' +\n            '      <a href=\"' + ad['sponsor_url'] + '\" class=\"ea_link\" target=\"_blank\" style=\"display:inline;\" target=\"_blank\"><img src=\"' + ad['sponsor_logo'] + '\" class=\"ea_image\" style=\"vertical-align:middle;\"></a>' +\n            '    </p>' +\n            '  </div>' +\n            '</div>' +\n            '<script type=\"application/javascript\">var eanAD = ' + JSON.stringify(ad) + ';</script>' +\n            '<script src=\"' + adAssetsUrl + 'qad.js\" type=\"application/javascript\"></script>' +\n            '<link rel=\"stylesheet\" href=\"' + adAssetsUrl + 'qad.css\">' +\n            '</div>';\n        }\n      } else {\n        // native\n        bid.mediaType = 'native';\n        if (bidRequest.mediaType === 'native') {\n          if (serverBody.native) {\n            let assets = serverBody.native.assets;\n            let link = serverBody.native.link;\n\n            let trackers = [];\n            if (serverBody.native.imptrackers) {\n              trackers = serverBody.native.imptrackers;\n            }\n\n            if (serverBody.nurl) {\n              trackers.push(serverBody.nurl);\n            }\n\n            let native = {};\n\n            for (let i = 0; i < assets.length; i++) {\n              let asset = assets[i];\n              switch (asset['id']) {\n                case 1:\n                  native.title = asset['title']['text'];\n                  break;\n                case 2:\n                  native.icon = {\n                    url: asset['img']['url'],\n                    width: asset['img']['w'],\n                    height: asset['img']['h']\n                  };\n                  break;\n                case 3:\n                  native.body = asset['data']['value'];\n                  break;\n                case 4:\n                  native.image = {\n                    url: asset['img']['url'],\n                    width: asset['img']['w'],\n                    height: asset['img']['h']\n                  };\n                  break;\n                case 10:\n                  native.sponsoredBy = asset['data']['value'];\n                  break;\n              }\n            }\n            native.cta = 'read more';\n            if (serverBody.language) {\n              native.cta = 'read more';\n            }\n\n            native.clickUrl = link.url;\n            native.impressionTrackers = trackers;\n            if (link.clicktrackers) {\n              native.clickTrackers = link.clicktrackers;\n            }\n\n            bid.qtx_native = utils.deepClone(serverBody.native);\n            bid.native = native;\n          }\n        }\n      }\n      bidResponses.push(bid);\n    }\n\n    return bidResponses;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse} serverResponse A successful response from the server\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function (syncOptions, serverResponse) {\n    const syncs = [];\n    utils._each(serverResponse, function(serverResponse) {\n      if (serverResponse.body && serverResponse.body.sync) {\n        utils._each(serverResponse.body.sync, function (pixel) {\n          syncs.push({\n            type: 'image',\n            url: pixel\n          });\n        });\n      }\n    });\n    return syncs;\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/quantumBidAdapter.js","import { logError, getTopWindowLocation, replaceAuctionPrice, getTopWindowReferrer } from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nimport { NATIVE } from 'src/mediaTypes';\n\nexport const ENDPOINT = '//app.readpeak.com/header/prebid';\n\nconst NATIVE_DEFAULTS = {\n  TITLE_LEN: 70,\n  DESCR_LEN: 120,\n  SPONSORED_BY_LEN: 50,\n  IMG_MIN: 150,\n  ICON_MIN: 50,\n  CTA_LEN: 50,\n};\n\nconst BIDDER_CODE = 'readpeak'\n\nexport const spec = {\n\n  code: BIDDER_CODE,\n\n  supportedMediaTypes: [NATIVE],\n\n  isBidRequestValid: bid => (\n    !!(bid && bid.params && bid.params.publisherId && bid.nativeParams)\n  ),\n\n  buildRequests: bidRequests => {\n    const request = {\n      id: bidRequests[0].bidderRequestId,\n      imp: bidRequests.map(slot => impression(slot)).filter(imp => imp.native != null),\n      site: site(bidRequests),\n      app: app(bidRequests),\n      device: device(),\n      cur: config.getConfig('currency') || ['USD'],\n      source: {\n        fd: 1,\n        tid: bidRequests[0].transactionId,\n        ext: {\n          prebid: '1.25.0-pre',\n        },\n      },\n    }\n\n    return {\n      method: 'POST',\n      url: ENDPOINT,\n      data: JSON.stringify(request),\n    }\n  },\n\n  interpretResponse: (response, request) => (\n    bidResponseAvailable(request, response)\n  ),\n};\n\nfunction bidResponseAvailable(bidRequest, bidResponse) {\n  const idToImpMap = {};\n  const idToBidMap = {};\n  if (!bidResponse['body']) {\n    return []\n  }\n  bidResponse = bidResponse.body\n  parse(bidRequest.data).imp.forEach(imp => {\n    idToImpMap[imp.id] = imp;\n  });\n  if (bidResponse) {\n    bidResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n      idToBidMap[bid.impid] = bid;\n    }));\n  }\n  const bids = [];\n  Object.keys(idToImpMap).forEach(id => {\n    if (idToBidMap[id]) {\n      const bid = {\n        requestId: id,\n        cpm: idToBidMap[id].price,\n        creativeId: idToBidMap[id].crid,\n        ttl: 300,\n        netRevenue: true,\n        mediaType: NATIVE,\n        currency: bidResponse.cur,\n        native: nativeResponse(idToImpMap[id], idToBidMap[id]),\n      };\n      bids.push(bid);\n    }\n  });\n  return bids;\n}\n\nfunction impression(slot) {\n  return {\n    id: slot.bidId,\n    native: nativeImpression(slot),\n    bidfloor: slot.params.bidfloor || 0,\n    bidfloorcur: slot.params.bidfloorcur || 'USD'\n  };\n}\n\nfunction nativeImpression(slot) {\n  if (slot.nativeParams) {\n    const assets = [];\n    addAsset(assets, titleAsset(1, slot.nativeParams.title, NATIVE_DEFAULTS.TITLE_LEN));\n    addAsset(assets, imageAsset(2, slot.nativeParams.image, 3, slot.nativeParams.wmin || NATIVE_DEFAULTS.IMG_MIN, slot.nativeParams.hmin || NATIVE_DEFAULTS.IMG_MIN));\n    addAsset(assets, dataAsset(3, slot.nativeParams.sponsoredBy, 1, NATIVE_DEFAULTS.SPONSORED_BY_LEN));\n    addAsset(assets, dataAsset(4, slot.nativeParams.body, 2, NATIVE_DEFAULTS.DESCR_LEN));\n    addAsset(assets, dataAsset(5, slot.nativeParams.cta, 12, NATIVE_DEFAULTS.CTA_LEN));\n    return {\n      request: JSON.stringify({ assets }),\n      ver: '1.1',\n    };\n  }\n  return null;\n}\n\nfunction addAsset(assets, asset) {\n  if (asset) {\n    assets.push(asset);\n  }\n}\n\nfunction titleAsset(id, params, defaultLen) {\n  if (params) {\n    return {\n      id,\n      required: params.required ? 1 : 0,\n      title: {\n        len: params.len || defaultLen,\n      },\n    };\n  }\n  return null;\n}\n\nfunction imageAsset(id, params, type, defaultMinWidth, defaultMinHeight) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    img: {\n      type,\n      wmin: params.wmin || defaultMinWidth,\n      hmin: params.hmin || defaultMinHeight,\n    }\n  } : null;\n}\n\nfunction dataAsset(id, params, type, defaultLen) {\n  return params ? {\n    id,\n    required: params.required ? 1 : 0,\n    data: {\n      type,\n      len: params.len || defaultLen,\n    }\n  } : null;\n}\n\nfunction site(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.publisherId : '0';\n  const siteId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.siteId : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (!appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n        domain: config.getConfig('publisherDomain'),\n      },\n      id: siteId ? siteId.toString() : pubId.toString(),\n      ref: getTopWindowReferrer(),\n      page: config.getConfig('pageUrl') || getTopWindowLocation().href,\n      domain: getTopWindowLocation().hostname\n    }\n  }\n  return undefined;\n}\n\nfunction app(bidderRequest) {\n  const pubId = bidderRequest && bidderRequest.length > 0 ? bidderRequest[0].params.publisherId : '0';\n  const appParams = bidderRequest[0].params.app;\n  if (appParams) {\n    return {\n      publisher: {\n        id: pubId.toString(),\n      },\n      bundle: appParams.bundle,\n      storeurl: appParams.storeUrl,\n      domain: appParams.domain,\n    }\n  }\n  return undefined;\n}\n\nfunction device() {\n  return {\n    ua: navigator.userAgent,\n    language: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage),\n    devicetype: 1\n  };\n}\n\nfunction parse(rawResponse) {\n  try {\n    if (rawResponse) {\n      if (typeof rawResponse === 'object') {\n        return rawResponse\n      } else {\n        return JSON.parse(rawResponse);\n      }\n    }\n  } catch (ex) {\n    logError('readpeakBidAdapter.safeParse', 'ERROR', ex);\n  }\n  return null;\n}\n\nfunction nativeResponse(imp, bid) {\n  if (imp && imp['native']) {\n    const nativeAd = parse(bid.adm);\n    const keys = {};\n    if (nativeAd && nativeAd.assets) {\n      nativeAd.assets.forEach(asset => {\n        keys.title = asset.title ? asset.title.text : keys.title;\n        keys.body = asset.data && asset.id === 4 ? asset.data.value : keys.body;\n        keys.sponsoredBy = asset.data && asset.id === 3 ? asset.data.value : keys.sponsoredBy;\n        keys.image = asset.img && asset.id === 2 ? {\n          url: asset.img.url,\n          width: asset.img.w || 750,\n          height: asset.img.h || 500,\n        } : keys.image;\n        keys.cta = asset.data && asset.id === 5 ? asset.data.value : keys.cta;\n      });\n      if (nativeAd.link) {\n        keys.clickUrl = encodeURIComponent(nativeAd.link.url);\n      }\n      const trackers = nativeAd.imptrackers || [];\n      trackers.unshift(replaceAuctionPrice(bid.burl, bid.price));\n      keys.impressionTrackers = trackers;\n      return keys;\n    }\n  }\n  return null;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/readpeakBidAdapter.js","// RealVu Analytics Adapter\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\n\nconst utils = require('src/utils.js');\n\nlet realvuAnalyticsAdapter = adapter({\n  global: 'realvuAnalytics',\n  handler: 'on',\n  analyticsType: 'bundle'\n});\nwindow.top1 = window;\ntry {\n  let wnd = window;\n  while ((window.top1 != top) && (typeof (wnd.document) != 'undefined')) {\n    window.top1 = wnd;\n    wnd = wnd.parent;\n  }\n} catch (e) {\n  /* continue regardless of error */\n}\nwindow.top1.realvu_aa_fifo = window.top1.realvu_aa_fifo || [];\nwindow.top1.realvu_aa = window.top1.realvu_aa || {\n  ads: [],\n  x1: 0,\n  y1: 0,\n  x2: 0,\n  y2: 0,\n  t0: new Date(),\n  nn: 0,\n  frm: false, // check first if we are inside other domain iframe\n  msg: [],\n  foc: !window.top1.document.hidden, // 1-in, 0-out of focus\n  c: '', // owner id\n  sr: '', //\n  beacons: [], // array of beacons to collect while 'conf' is not responded\n  init: function () {\n    let z = this;\n    let u = navigator.userAgent;\n    z.device = u.match(/iPad|Tablet/gi) ? 'tablet' : u.match(/iPhone|iPod|Android|Opera Mini|IEMobile/gi) ? 'mobile' : 'desktop';\n    if (typeof (z.len) == 'undefined') z.len = 0; // check, meybe too much, just make it len:0,\n    z.ie = navigator.appVersion.match(/MSIE/);\n    z.saf = (u.match(/Safari/) && !u.match(/Chrome/));\n    z.ff = u.match(/Firefox/i);\n    z.cr = (u.match(/Chrome/));\n    z.ope = window.opera;\n    z.fr = 0;\n    if (window.top1 != top) {\n      z.fr = 2;\n      if (typeof window.top1.$sf != 'undefined') {\n        z.fr = 1;\n      }\n    }\n    z.add_evt(window.top1, 'focus', function () {\n      window.top1.realvu_aa.foc = 1; /* window.top1.realvu_aa.log('focus',-1); */\n    });\n    // z.add_evt(window.top1, \"scroll\", function(){window.top1.realvu_aa.foc=1;window.top1.realvu_aa.log('scroll focus',-1);});\n    z.add_evt(window.top1, 'blur', function () {\n      window.top1.realvu_aa.foc = 0; /* window.top1.realvu_aa.log('blur',-1); */\n    });\n    // + http://www.w3.org/TR/page-visibility/\n    z.add_evt(window.top1.document, 'blur', function () {\n      window.top1.realvu_aa.foc = 0; /* window.top1.realvu_aa.log('blur',-1); */\n    });\n    z.add_evt(window.top1, 'visibilitychange', function () {\n      window.top1.realvu_aa.foc = !window.top1.document.hidden;\n      /* window.top1.realvu_aa.log('vis-ch '+window.top1.realvu_aa.foc,-1); */\n    });\n    // -\n    z.doLog = (window.top1.location.search.match(/boost_log/) || document.referrer.match(/boost_log/)) ? 1 : 0;\n    if (z.doLog) {\n      window.setTimeout(z.scr(window.top1.location.protocol + '//ac.realvu.net/realvu_aa_viz.js'), 500);\n    }\n  },\n\n  add_evt: function (elem, evtType, func) {\n    if (elem.addEventListener) {\n      elem.addEventListener(evtType, func, true);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + evtType, func);\n    } else {\n      elem['on' + evtType] = func;\n    }\n  },\n\n  update: function () {\n    let z = this;\n    let de = window.top1.document.documentElement;\n    z.x1 = window.top1.pageXOffset ? window.top1.pageXOffset : de.scrollLeft;\n    z.y1 = window.top1.pageYOffset ? window.top1.pageYOffset : de.scrollTop;\n    let w1 = window.top1.innerWidth ? window.top1.innerWidth : de.clientWidth;\n    let h1 = window.top1.innerHeight ? window.top1.innerHeight : de.clientHeight;\n    z.x2 = z.x1 + w1;\n    z.y2 = z.y1 + h1;\n  },\n  brd: function (s, p) { // return a board Width, s-element, p={Top,Right,Bottom, Left}\n    let u;\n    if (window.getComputedStyle) u = window.getComputedStyle(s, null);\n    else u = s.style;\n    let a = u['border' + p + 'Width'];\n    return parseInt(a.length > 2 ? a.slice(0, -2) : 0);\n  },\n\n  padd: function (s, p) { // return a board Width, s-element, p={Top,Right,Bottom, Left}\n    let u;\n    if (window.getComputedStyle) u = window.getComputedStyle(s, null);\n    else u = s.style;\n    let a = u['padding' + p];\n    return parseInt(a.length > 2 ? a.slice(0, -2) : 0);\n  },\n\n  viz_area: function (x1, x2, y1, y2) { // coords of Ad\n    if (this.fr == 1) {\n      try {\n        let iv = Math.round(100 * window.top1.$sf.ext.geom().self.iv);\n        return iv;\n      } catch (e) {\n        /* continue regardless of error */\n      }\n    }\n    let xv1 = Math.max(x1, this.x1);\n    let yv1 = Math.max(y1, this.y1);\n    let xv2 = Math.min(x2, this.x2);\n    let yv2 = Math.min(y2, this.y2);\n    let A = Math.round(100 * ((xv2 - xv1) * (yv2 - yv1)) / ((x2 - x1) * (y2 - y1)));\n    return (A > 0) ? A : 0;\n  },\n\n  viz_dist: function (x1, x2, y1, y2) { // coords of Ad\n    let d = Math.max(0, this.x1 - x2, x1 - this.x2) + Math.max(0, this.y1 - y2, y1 - this.y2);\n    return d;\n  },\n\n  track: function (a, f, params) {\n    let z = this;\n    let s1 = z.tru(a, f) + params;\n    if (f == 'conf') {\n      z.scr(s1, a);\n      z.log(' <a href=\\'' + s1 + '\\'>' + f + '</a>', a.num);\n    } else {\n      let bk = {\n        s1: s1,\n        a: a,\n        f: f\n      };\n      z.beacons.push(bk);\n    }\n  },\n\n  send_track: function () {\n    let z = this;\n    if (z.sr >= 'a') { // conf, send beacons\n      let bk = z.beacons.shift();\n      while (typeof bk != 'undefined') {\n        bk.s1 = bk.s1.replace(/_sr=0*_/, '_sr=' + z.sr + '_');\n        z.log(' ' + bk.a.riff + ' ' + bk.a.unit_id + /* \" \"+pin.mode+ */ ' ' + bk.a.w + 'x' + bk.a.h + '@' + bk.a.x + ',' + bk.a.y +\n          ' <a href=\\'' + bk.s1 + '\\'>' + bk.f + '</a>', bk.a.num);\n        if (bk.a.rnd < Math.pow(10, 1 - (z.sr.charCodeAt(0) & 7))) {\n          z.scr(bk.s1, bk.a);\n        }\n        bk = z.beacons.shift();\n      }\n    }\n  },\n\n  scr: function (s1, a) {\n    let st = document.createElement('script');\n    st.async = true;\n    st.type = 'text/javascript';\n    st.src = s1;\n    if (a && a.dv0 != null) {\n      a.dv0.appendChild(st);\n    } else {\n      let x = document.getElementsByTagName('script')[0];\n      x.parentNode.insertBefore(st, x);\n    }\n  },\n\n  tru: function (a, f) {\n    let pin = a.pins[0];\n    let s2 = '//ac.realvu.net/flip/3/c=' + pin.partner_id +\n      '_f=' + f + '_r=' + a.riff +\n      '_s=' + a.w + 'x' + a.h;\n    if (a.p) s2 += '_p=' + a.p;\n    s2 += '_ps=' + this.enc(a.unit_id) + // 08-Jun-15 - _p= is replaced with _ps= - p-number, ps-string\n      '_dv=' + this.device +\n      // + '_a=' + this.enc(a.a)\n      '_d=' + pin.mode +\n      '_sr=' + this.sr +\n      '_h=' + this.enc(a.ru) + '?';\n    return s2.replace(/%/g, '!');\n  },\n\n  enc: function (s1) {\n    // return escape(s1).replace(/[0-9a-f]{5,}/gi,'RANDOM').replace(/\\*/g, \"%2A\").replace(/_/g, \"%5F\").replace(/\\+/g,\n    return escape(s1).replace(/\\*/g, '%2A').replace(/_/g, '%5F').replace(/\\+/g,\n      '%2B').replace(/\\./g, '%2E').replace(/\\x2F/g, '%2F');\n  },\n\n  findPosG: function (adi) {\n    let t = this;\n    let ad = adi;\n    let xp = 0;\n    let yp = 0;\n    let dc = adi.ownerDocument;\n    let wnd = dc.defaultView || dc.parentWindow;\n\n    try {\n      while (ad != null && typeof (ad) != 'undefined') {\n        if (ad.getBoundingClientRect) { // Internet Explorer, Firefox 3+, Google Chrome, Opera 9.5+, Safari 4+\n          let r = ad.getBoundingClientRect();\n          xp += r.left; // +sL;\n          yp += r.top; // +sT;\n          if (wnd == window.top1) {\n            xp += t.x1;\n            yp += t.y1;\n          }\n        } else {\n          if (ad.tagName == 'IFRAME') {\n            xp += t.brd(ad, 'Left');\n            yp += t.brd(ad, 'Top');\n          }\n          xp += ad.offsetLeft;\n          yp += ad.offsetTop;\n\n          let op = ad.offsetParent;\n          let pn = ad.parentNode;\n          let opf = ad;\n          while (opf != null) {\n            let cs = window.getComputedStyle(opf, null);\n            if (cs.position == 'fixed') {\n              if (cs.top) yp += parseInt(cs.top) + this.y1;\n            }\n            if (opf == op) break;\n            opf = opf.parentNode;\n          }\n          while (op != null && typeof (op) != 'undefined') {\n            xp += op.offsetLeft;\n            yp += op.offsetTop;\n            let ptn = op.tagName;\n            if (t.cr || t.saf || (t.ff && ptn == 'TD')) {\n              xp += t.brd(op, 'Left');\n              yp += t.brd(op, 'Top');\n            }\n            if (ad.tagName != 'IFRAME' && op != document.body && op != document.documentElement) {\n              xp -= op.scrollLeft;\n              yp -= op.scrollTop;\n            }\n            if (!t.ie) {\n              while (op != pn && pn != null) {\n                xp -= pn.scrollLeft;\n                yp -= pn.scrollTop;\n                if (t.ff_o) {\n                  xp += t.brd(pn, 'Left');\n                  yp += t.brd(pn, 'Top');\n                }\n                pn = pn.parentNode;\n              }\n            }\n            pn = pn.parentNode;\n            op = op.offsetParent;\n          }\n        }\n        if (this.fr) break; // inside different domain iframe or sf\n        ad = wnd.frameElement; // in case Ad is allocated inside iframe here we go up\n        wnd = wnd.parent;\n      }\n    } catch (e) {\n      /* continue regardless of error */\n    }\n    let q = {\n      'x': Math.round(xp),\n      'y': Math.round(yp)\n    };\n    return q;\n  },\n\n  poll: function () {\n    let fifo = window.top1.realvu_aa_fifo;\n    while (fifo.length > 0) {\n      (fifo.shift())();\n    }\n    let z = this;\n    z.update();\n    let now = new Date();\n    if (typeof (z.ptm) == 'undefined') {\n      z.ptm = now;\n    }\n    let dvz = now - z.ptm;\n    z.ptm = now;\n    for (let i = 0; i < z.len; i++) {\n      let a = z.ads[i];\n      let restored = false;\n      if (a.div == null) { // ad unit is not found yet\n        let adobj = document.getElementById(a.pins[0].unit_id);\n        if (adobj == null) {\n          restored = z.readPos(a);\n          if (!restored) continue; // do nothing if not found\n        } else {\n          z.bind_obj(a, adobj);\n          z.log('{m}\"' + a.unit_id + '\" is bound', a.num);\n        }\n      }\n      if (!restored) {\n        a.target = z.questA(a.div);\n        let target = (a.target !== null) ? a.target : a.div;\n        a.box.w = Math.max(target.offsetWidth, a.w);\n        a.box.h = Math.max(target.offsetHeight, a.h);\n        let q = z.findPosG(target);\n        let pad = {};\n        pad.t = z.padd(target, 'Top');\n        pad.l = z.padd(target, 'Left');\n        pad.r = z.padd(target, 'Right');\n        pad.b = z.padd(target, 'Bottom');\n        let ax = q.x + pad.l;\n        let ay = q.y + pad.t;\n        a.box.x = ax;\n        a.box.y = ay;\n        if (a.box.w > a.w && a.box.w > 1) {\n          ax += (a.box.w - a.w - pad.l - pad.r) / 2;\n        }\n        if (a.box.h > a.h && a.box.h > 1) {\n          ay += (a.box.h - a.h - pad.t - pad.b) / 2;\n        }\n        if ((ax > 0 && ay > 0) && (a.x != ax || a.y != ay)) {\n          a.x = ax;\n          a.y = ay;\n          z.writePos(a);\n        }\n      }\n      let vtr = ((a.box.w * a.box.h) < 242500) ? 49 : 29; // treashfold more then 49% and more then 29% for \"oversized\"\n      if (a.pins[0].edge) {\n        vtr = a.pins[0].edge - 1; // override default edge 50% (>49)\n      }\n      a.vz = z.viz_area(a.box.x, a.box.x + a.box.w, a.box.y, a.box.y + a.box.h);\n      a.r = (z.fr > 1 ? 'frame' : (((a.vz > vtr) && z.foc) ? 'yes' : 'no')); // f-frame, y-yes in view,n-not in view\n      if (a.y < 0) {\n        a.r = 'out'; // if the unit intentionaly moved out, count it as out.\n      }\n      if (a.vz > vtr && z.foc) {\n        a.vt += dvz; // real dt counter in milliseconds, because of poll() can be called irregularly\n        a.vtu += dvz;\n      }\n      // now process every pin\n      let plen = a.pins.length;\n      for (let j = 0; j < plen; j++) {\n        let pin = a.pins[j];\n        if (pin.state <= 1) {\n          let dist = z.viz_dist(a.x, a.x + a.w, a.y, a.y + a.h);\n          let near = (pin.dist != null && dist <= pin.dist);\n          // apply \"near\" rule for ad call only\n          a.r = (z.fr > 1) ? 'frame' : (((a.vz > vtr) && z.foc) ? 'yes' : 'no');\n          if (near && a.r == 'no') {\n            a.r = 'yes';\n          }\n          if (a.riff === '') {\n            a.riff = a.r;\n            let vrScore = z.score(a, 'v:r');\n            if (vrScore != null) {\n              if (a.r == 'no' && vrScore > 75) {\n                a.riff = 'yes';\n              }\n            }\n            let vv0Score = z.score(a, 'v:v0');\n            if (vv0Score != null) {\n              if (a.r == 'yes' && vv0Score < (30 + 25 * Math.random())) {\n                a.riff = 'no';\n              }\n            }\n          }\n          if ((pin.mode == 'kvp' || pin.mode == 'tx2') || (((a.vz > vtr) || near) && ((pin.mode == 'in-view' || pin.mode == 'video')))) {\n            z.show(a, pin); // in-view or flip show immediately if initial realvu=yes, or delay is over\n          }\n        }\n        if (pin.state == 2) {\n          a.target = z.questA(a.div);\n          if (a.target != null) {\n            pin.state = 3;\n            dvz = 0;\n            a.vt = 0;\n            // @if NODE_ENV='debug'\n            let now = new Date();\n            let msg = (now.getTime() - time0) / 1000 + ' RENDERED ' + a.unit_id;\n            utils.logMessage(msg);\n            // @endif\n            let rpt = z.bids_rpt(a, true);\n            z.track(a, 'rend', rpt);\n            z.incrMem(a, 'r', 'v:r');\n          }\n        }\n        if (pin.state > 2) {\n          let tmin = (pin.mode == 'video') ? 2E3 : 1E3; // mrc min view time\n          if (a.vz > vtr) {\n            pin.vt += dvz; // real dt counter in milliseconds, because of poll() can be called irregularly\n            if (pin.state == 3) {\n              pin.state = 4;\n              z.incrMem(a, 'r', 'v:v0');\n            }\n            if (pin.state == 4 && pin.vt >= tmin) {\n              pin.state = 5;\n              let rpt = z.bids_rpt(a, true);\n              z.track(a, 'view', rpt);\n              z.incrMem(a, 'v', 'v:r');\n              z.incrMem(a, 'v', 'v:v0');\n            }\n            if (pin.state == 5 && pin.vt >= 5 * tmin) {\n              pin.state = 6;\n              let rpt = z.bids_rpt(a, true);\n              z.track(a, 'view2', rpt);\n            }\n          } else if (pin.vt < tmin) {\n            pin.vt = 0; // reset to track continuous 1 sec\n          }\n        }\n        if (pin.state >= 2 && pin.mode === 'tx2' &&\n          ((a.vtu > pin.rotate) || (pin.delay > 0 && a.vtu > pin.delay && a.riff === 'no' && a.ncall < 2)) && pin.tx2n > 0) {\n          // flip or rotate\n          pin.tx2n--;\n          pin.state = 1;\n          a.vtu = 0;\n          a.target = null;\n        }\n      }\n    }\n    this.send_track();\n  },\n\n  questA: function (a) { // look for the visible object of ad_sizes size\n    // returns the object or null\n    if (a == null) return a;\n    if (a.nodeType == Node.TEXT_NODE) {\n      let dc = a.ownerDocument;\n      let wnd = dc.defaultView || dc.parentWindow;\n      let par = a.parentNode;\n      if (wnd == wnd.top) {\n        return par;\n      } else {\n        return par.offsetParent;\n      }\n    }\n    let notFriendly = false;\n    let ain = null;\n    let tn = a.tagName;\n    if (tn == 'HEAD' || tn == 'SCRIPT') return null;\n    if (tn == 'IFRAME') {\n      ain = this.doc(a);\n      if (ain == null) {\n        notFriendly = true;\n      } else {\n        a = ain;\n        tn = a.tagName;\n      }\n    }\n    if (notFriendly || tn == 'OBJECT' || tn == 'IMG' || tn == 'EMBED' || tn == 'SVG' || tn == 'CANVAS' ||\n      (tn == 'DIV' && a.style.backgroundImage)) {\n      let w1 = a.offsetWidth;\n      let h1 = a.offsetHeight;\n      if (w1 > 33 && h1 > 33 && a.style.display != 'none') return a;\n    }\n    if (a.hasChildNodes()) {\n      let b = a.firstChild;\n      while (b != null) {\n        let c = this.questA(b);\n        if (c != null) return c;\n        b = b.nextSibling;\n      }\n    }\n    return null;\n  },\n\n  doc: function(f) { // return document of f-iframe, keep here \"n\" as a parameter because of call from setTimeout()\n    let d = null;\n    try {\n      if (f.contentDocument) d = f.contentDocument; // DOM\n      else if (f.contentWindow) d = f.contentWindow.document; // IE\n    } catch (e) {\n      /* continue regardless of error */\n    }\n    return d;\n  },\n\n  bind_obj: function (a, adobj) {\n    a.div = adobj;\n    a.target = null; // initially null, found ad when served\n    a.unit_id = adobj.id; // placement id or name\n    a.w = adobj.offsetWidth || 1; // width, min 1\n    a.h = adobj.offsetHeight || 1; // height, min 1\n  },\n  add: function (wnd1, p) { // p - realvu unit id\n    let a = {\n      num: this.len,\n      x: 0,\n      y: 0,\n      box: {\n        x: 0,\n        y: 0,\n        h: 1,\n        w: 1\n      }, // measured ad box\n      p: p,\n      state: 0, // 0-init, (1-loaded,2-rendered,3-viewed)\n      delay: 0, // delay in msec to show ad after gets in view\n      vt: 0, // total view time\n      vtu: 0, // view time to update and mem\n      a: '', // ad_placement id\n      wnd: wnd1,\n      div: null,\n      pins: [],\n      frm: null, // it will be frame when \"show\"\n      riff: '', // r to report\n      rnd: Math.random(),\n      ncall: 0, // a callback number\n      rq_bids: [], // rq bids of registered partners\n      bids: [] // array of bids\n    };\n    a.ru = window.top1.location.hostname;\n    window.top1.realvu_aa.ads[this.len++] = a;\n    return a;\n  },\n\n  fmt: function (a, pin) {\n    return {\n      'realvu': a.r,\n      'riff': a.riff,\n      'area': a.vz,\n      'ncall': a.ncall,\n      'n': a.num,\n      'id': a.unit_id,\n      'pin': pin\n    };\n  },\n\n  show: function (a, pin) {\n    pin.state = 2; // 2-published\n    pin.vt = 0; // reset view time counter\n    if (pin.size) {\n      let asz = this.setSize(pin.size);\n      if (asz != null) {\n        a.w = asz.w;\n        a.h = asz.h;\n      }\n    }\n    if (typeof pin.callback != 'undefined') {\n      pin.callback(this.fmt(a, pin));\n    }\n    a.ncall++;\n    this.track(a, 'show', '');\n  },\n\n  check: function (p1) {\n    let pin = {\n      dist: 150,\n      state: 0,\n      tx2n: 7\n    }; // if dist is set trigger ad when distance < pin.dist\n    for (let attr in p1) {\n      if (p1.hasOwnProperty(attr)) {\n        if ((attr == 'ad_sizes') && (typeof (p1[attr]) == 'string')) {\n          pin[attr] = p1[attr].split(',');\n        } else if (attr == 'edge') {\n          try {\n            let ed = parseInt(p1[attr]);\n            if (ed > 0 && ed < 251) pin[attr] = ed;\n          } catch (e) {\n            /* continue regardless of error */\n          }\n        } else {\n          pin[attr] = p1[attr];\n        }\n      }\n    }\n    let a = null;\n    let z = this;\n    try {\n      // not to track the same object more than one time\n      for (let i = 0; i < z.len; i++) {\n        //         if (z.ads[i].div == adobj) { a = z.ads[i]; break; }\n        if (z.ads[i].unit_id == pin.unit_id) {\n          a = z.ads[i];\n          break;\n        }\n      }\n      pin.wnd = pin.wnd || window;\n      if (a == null) {\n        a = z.add(pin.wnd, pin.p);\n        a.unit_id = pin.unit_id;\n        let adobj = (pin.unit) ? pin.unit : document.getElementById(a.unit_id);\n        if (adobj != null) {\n          z.bind_obj(a, adobj);\n        } else {\n          z.log('{w}\"' + pin.unit_id + '\" not found', a.num);\n        }\n        if (pin.size) {\n          let asz = z.setSize(pin.size);\n          if (asz != null) {\n            a.w = asz.w;\n            a.h = asz.h;\n          }\n        }\n        pin.delay = pin.delay || 0; // delay in msec\n        if (typeof pin.mode == 'undefined') {\n          if ((typeof pin.callback != 'undefined') || (typeof pin.content != 'undefined')) {\n            pin.mode = (pin.delay > 0) ? 'tx2' : 'in-view';\n          } else {\n            pin.mode = 'kvp';\n          }\n          // delays are for views only\n        }\n        pin.vt = 0; // view time\n        pin.state = 0;\n        a.pins.push(pin);\n      }\n      if (this.sr === '') {\n        z.track(a, 'conf', '');\n        this.sr = '0';\n      }\n      this.poll();\n      return a;\n    } catch (e) {\n      z.log(e.message, -1);\n      return {\n        r: 'err'\n      };\n    }\n  },\n\n  setSize: function (sa) {\n    let sb = sa;\n    try {\n      if (typeof (sa) == 'string') sb = sa.split('x'); // pin.size is a string WWWxHHH or array\n      else if (Array.isArray(sa)) {\n        let mm = 4;\n        while (--mm > 0 && Array.isArray(sa[0]) && Array.isArray(sa[0][0])) {\n          sa = sa[0];\n        }\n        for (let m = 0; m < sa.length; m++) {\n          if (Array.isArray(sa[m])) {\n            sb = sa[m]; // if size is [][]\n            let s = sb[0] + 'x' + sb[1];\n            if (s == '300x250' || s == '728x90' || s == '320x50' || s == '970x90') {\n              break; // use most popular sizes\n            }\n          } else if (sa.length > 1) {\n            sb = sa;\n          }\n        }\n      }\n      let w1 = parseInt(sb[0]);\n      let h1 = parseInt(sb[1]);\n      return {\n        w: w1,\n        h: h1\n      };\n    } catch (e) {\n      /* continue regardless of error */\n    }\n    return null;\n  },\n  // API functions\n  addUnitById: function (partnerId, unitId, callback, delay) {\n    let p1 = partnerId;\n    if (typeof (p1) == 'string') {\n      p1 = {\n        partner_id: partnerId,\n        unit_id: unitId,\n        callback: callback,\n        delay: delay\n      };\n    }\n    let a = window.top1.realvu_aa.check(p1);\n    return a.r;\n  },\n\n  checkBidIn: function(partnerId, args, b) { // process a bid from hb\n    // b==true - add/update, b==false - update only\n    if (args.cpm == 0) return; // collect only bids submitted\n    const boost = window.top1.realvu_aa;\n    let pushBid = false;\n    let adi = null;\n    if (!b) { // update only if already checked in by xyzBidAdapter\n      for (let i = 0; i < boost.ads.length; i++) {\n        adi = boost.ads[i];\n        if (adi.unit_id == args.adUnitCode) {\n          pushBid = true;\n          break;\n        }\n      }\n    } else {\n      pushBid = true;\n      adi = window.top1.realvu_aa.check({\n        unit_id: args.adUnitCode,\n        size: args.size,\n        partner_id: partnerId\n      });\n    }\n    if (pushBid) {\n      let pb = {\n        bidder: args.bidder,\n        cpm: args.cpm,\n        size: args.size,\n        adId: args.adId,\n        requestId: args.requestId,\n        crid: '',\n        ttr: args.timeToRespond,\n        winner: 0\n      };\n      if (args.creative_id) {\n        pb.crid = args.creative_id;\n      }\n      adi.bids.push(pb);\n    }\n  },\n\n  checkBidWon: function(partnerId, args, b) {\n    // b==true - add/update, b==false - update only\n    const z = this;\n    const unitId = args.adUnitCode;\n    for (let i = 0; i < z.ads.length; i++) {\n      let adi = z.ads[i];\n      if (adi.unit_id == unitId) {\n        for (let j = 0; j < adi.bids.length; j++) {\n          let bj = adi.bids[j];\n          if (bj.adId == args.adId) {\n            bj.winner = 1;\n            break;\n          }\n        }\n        let rpt = z.bids_rpt(adi, false);\n        z.track(adi, 'win', rpt);\n        break;\n      }\n    }\n  },\n\n  bids_rpt: function(a, wo) { // a-unit, wo=true - WinnerOnly\n    let rpt = '';\n    for (let i = 0; i < a.bids.length; i++) {\n      let g = a.bids[i];\n      if (wo && !g.winner) continue;\n      rpt += '&bdr=' + g.bidder + '&cpm=' + g.cpm + '&vi=' + a.riff +\n        '&gw=' + g.winner + '&crt=' + g.crid + '&ttr=' + g.ttr;\n      // append bid partner_id if any\n      let pid = '';\n      for (let j = 0; j < a.rq_bids.length; j++) {\n        let rqb = a.rq_bids[j];\n        if (rqb.adId == g.adId) {\n          pid = rqb.partner_id;\n          break;\n        }\n      }\n      rpt += '&bc=' + pid;\n    }\n    return rpt;\n  },\n\n  getStatusById: function (unitId) { // return status object\n    for (let i = 0; i < this.ads.length; i++) {\n      let adi = this.ads[i];\n      if (adi.unit_id == unitId) return this.fmt(adi);\n    }\n    return null;\n  },\n\n  log: function (m1, i) {\n    if (this.doLog) {\n      this.msg.push({\n        dt: new Date() - this.t0,\n        s: 'U' + (i + 1) + m1\n      });\n    }\n  },\n\n  keyPos: function (a) {\n    if (a.pins[0].unit_id) {\n      let level = 'L' + (window.top1.location.pathname.match(/\\//g) || []).length;\n      return 'realvu.' + level + '.' + a.pins[0].unit_id.replace(/[0-9]{5,}/gi, 'RANDOM');\n    }\n  },\n\n  writePos: function (a) {\n    try {\n      let v = a.x + ',' + a.y + ',' + a.w + ',' + a.h;\n      localStorage.setItem(this.keyPos(a), v);\n    } catch (ex) {\n      /* continue regardless of error */\n    }\n  },\n\n  readPos: function (a) {\n    try {\n      let s = localStorage.getItem(this.keyPos(a));\n      if (s) {\n        let v = s.split(',');\n        a.x = parseInt(v[0], 10);\n        a.y = parseInt(v[1], 10);\n        a.w = parseInt(v[2], 10);\n        a.h = parseInt(v[3], 10);\n        a.box = {x: a.x, y: a.y, w: a.w, h: a.h};\n        return true;\n      }\n    } catch (ex) {\n      /* do nothing */\n    }\n    return false;\n  },\n\n  incrMem: function(a, evt, name) {\n    try {\n      let k1 = this.keyPos(a) + '.' + name;\n      let vmem = localStorage.getItem(k1);\n      if (vmem == null) vmem = '1:3';\n      let vr = vmem.split(':');\n      let nv = parseInt(vr[0], 10);\n      let nr = parseInt(vr[1], 10);\n      if (evt == 'r') {\n        nr <<= 1;\n        nr |= 1;\n        nv <<= 1;\n      }\n      if (evt == 'v') {\n        nv |= 1;\n      }\n      localStorage.setItem(k1, nv + ':' + nr);\n    } catch (ex) {\n      /* do nothing */\n    }\n  },\n\n  score: function (a, name) {\n    try {\n      let vstr = localStorage.getItem(this.keyPos(a) + '.' + name);\n      if (vstr != null) {\n        let vr = vstr.split(':');\n        let nv = parseInt(vr[0], 10);\n        let nr = parseInt(vr[1], 10);\n        let sv = 0;\n        let sr = 0;\n        for (nr &= 0x3FF; nr > 0; nr >>>= 1, nv >>>= 1) { // count 10 deliveries\n          if (nr & 0x1) sr++;\n          if (nv & 0x1) sv++;\n        }\n        return Math.round(sv * 100 / sr);\n      }\n    } catch (ex) {\n      /* do nothing */\n    }\n    return null;\n  }\n};\n\nif (typeof (window.top1.boost_poll) == 'undefined') {\n  window.top1.realvu_aa.init();\n  window.top1.boost_poll = setInterval(function () {\n    window.top1 && window.top1.realvu_aa && window.top1.realvu_aa.poll();\n  }, 20);\n}\n\nlet _options = {};\n\nrealvuAnalyticsAdapter.originEnableAnalytics = realvuAnalyticsAdapter.enableAnalytics;\n\nrealvuAnalyticsAdapter.enableAnalytics = function (config) {\n  _options = config.options;\n  if (typeof (_options.partnerId) == 'undefined' || _options.partnerId == '') {\n    utils.logError('Missed realvu.com partnerId parameter', 101, 'Missed partnerId parameter');\n  }\n  realvuAnalyticsAdapter.originEnableAnalytics(config);\n  return _options.partnerId;\n};\n\nconst time0 = (new Date()).getTime();\n\nrealvuAnalyticsAdapter.track = function ({eventType, args}) {\n  // @if NODE_ENV='debug'\n  let msg = '';\n  let now = new Date();\n  msg += (now.getTime() - time0) / 1000 + ' eventType=' + eventType;\n  if (typeof (args) != 'undefined') {\n    msg += ', args.bidder=' + args.bidder + ' args.adUnitCode=' + args.adUnitCode +\n      ' args.adId=' + args.adId +\n      ' args.cpm=' + args.cpm +\n      ' creativei_id=' + args.creative_id;\n  }\n  // msg += '\\nargs=' + JSON.stringify(args) + '<br>';\n  utils.logMessage(msg);\n  // @endif\n\n  const boost = window.top1.realvu_aa;\n  let b = false; // false - update only, true - add if not checked in yet\n  let partnerId = null;\n  if (_options && _options.partnerId && args) {\n    partnerId = _options.partnerId;\n    let code = args.adUnitCode;\n    b = _options.regAllUnits;\n    if (!b && _options.unitIds) {\n      for (let j = 0; j < _options.unitIds.length; j++) {\n        if (code === _options.unitIds[j]) {\n          b = true;\n          break;\n        }\n      }\n    }\n  }\n  if (eventType === CONSTANTS.EVENTS.BID_RESPONSE) {\n    boost.checkBidIn(partnerId, args, b);\n  } else if (eventType === CONSTANTS.EVENTS.BID_WON) {\n    boost.checkBidWon(partnerId, args, b);\n  }\n};\n\n// xyzBidAdapter calls checkin() to obtain \"yes/no\" viewability\nrealvuAnalyticsAdapter.checkIn = function (bid, partnerId) {\n  // find (or add if not registered yet) the unit in boost\n  if (typeof (partnerId) == 'undefined' || partnerId == '') {\n    utils.logError('Missed realvu.com partnerId parameter', 102, 'Missed partnerId parameter');\n  }\n  let a = window.top1.realvu_aa.check({\n    unit_id: bid.adUnitCode,\n    size: bid.sizes,\n    partner_id: partnerId\n  });\n  a.rq_bids.push({\n    bidder: bid.bidder,\n    adId: bid.bidId,\n    partner_id: partnerId\n  });\n  return a.riff;\n};\n\nrealvuAnalyticsAdapter.isInView = function (adUnitCode) {\n  let r = 'NA';\n  let s = window.top1.realvu_aa.getStatusById(adUnitCode);\n  if (s) {\n    r = s.realvu;\n  }\n  return r;\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: realvuAnalyticsAdapter,\n  code: 'realvuAnalytics'\n});\n\nmodule.exports = realvuAnalyticsAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/realvuAnalyticsAdapter.js","'use strict';\n\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\n\nfunction RhythmOneBidAdapter() {\n  this.code = 'rhythmone';\n  this.supportedMediaTypes = [VIDEO, BANNER];\n\n  this.isBidRequestValid = function (bid) {\n    return true;\n  };\n\n  this.getUserSyncs = function (syncOptions, responses, gdprConsent) {\n    let slots = [];\n    let placementIds = [];\n\n    for (let k in slotsToBids) {\n      slots.push(k);\n      placementIds.push(getFirstParam('placementId', [slotsToBids[k]]));\n    }\n\n    let data = {\n      doc_version: 1,\n      doc_type: 'Prebid Audit',\n      placement_id: placementIds.join(',').replace(/[,]+/g, ',').replace(/^,|,$/g, '')\n    };\n    let w = typeof (window) !== 'undefined' ? window : {document: {location: {href: ''}}};\n    let ao = w.document.location.ancestorOrigins;\n    let q = [];\n    let u = '//hbevents.1rx.io/audit?';\n\n    if (ao && ao.length > 0) {\n      data.ancestor_origins = ao[ao.length - 1];\n    }\n\n    data.popped = w.opener !== null ? 1 : 0;\n    data.framed = w.top === w ? 0 : 1;\n\n    try {\n      data.url = w.top.document.location.href.toString();\n    } catch (ex) {\n      data.url = w.document.location.href.toString();\n    }\n\n    try {\n      data.prebid_version = '1.25.0-pre';\n      data.prebid_timeout = config.getConfig('bidderTimeout');\n    } catch (ex) { }\n\n    data.response_ms = Date.now() - loadStart;\n    data.placement_codes = slots.join(',');\n    data.bidder_version = version;\n    if (gdprConsent) {\n      data.gdpr_consent = gdprConsent.consentString;\n      data.gdpr = (typeof gdprConsent.gdprApplies === 'boolean') ? gdprConsent.gdprApplies : true;\n    }\n\n    for (let k in data) {\n      q.push(encodeURIComponent(k) + '=' + encodeURIComponent((typeof data[k] === 'object' ? JSON.stringify(data[k]) : data[k])));\n    }\n\n    q.sort();\n\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: u + q.join('&')\n      }];\n    }\n  };\n\n  function getFirstParam(key, validBidRequests) {\n    for (let i = 0; i < validBidRequests.length; i++) {\n      if (validBidRequests[i].params && validBidRequests[i].params[key]) {\n        return validBidRequests[i].params[key];\n      }\n    }\n  }\n\n  let slotsToBids = {};\n  let that = this;\n  let version = '1.0.1.0';\n  let loadStart = Date.now();\n\n  this.buildRequests = function (BRs, bidderRequest) {\n    let fallbackPlacementId = getFirstParam('placementId', BRs);\n    if (fallbackPlacementId === undefined || BRs.length < 1) {\n      return [];\n    }\n\n    loadStart = Date.now();\n    slotsToBids = {};\n\n    let query = [];\n    let w = (typeof window !== 'undefined' ? window : {});\n\n    function p(k, v, d) {\n      if (v instanceof Array) { v = v.join((d || ',')); }\n      if (typeof v !== 'undefined') { query.push(encodeURIComponent(k) + '=' + encodeURIComponent(v)); }\n    }\n\n    function attempt(valueFunction, defaultValue) {\n      try {\n        return valueFunction();\n      } catch (ex) { }\n      return defaultValue;\n    }\n\n    p('domain', attempt(function() {\n      var d = w.document.location.ancestorOrigins;\n      if (d && d.length > 0) {\n        return d[d.length - 1];\n      }\n      return w.top.document.location.hostname; // try/catch is in the attempt function\n    }, ''));\n    p('url', attempt(function() {\n      var l;\n      // try/catch is in the attempt function\n      try {\n        l = w.top.document.location.href.toString();\n      } catch (ex) {\n        l = w.document.location.href.toString();\n      }\n      return l;\n    }, ''));\n\n    function getRMPUrl() {\n      let url = getFirstParam('endpoint', BRs) || '//tag.1rx.io/rmp/{placementId}/0/{path}?z={zone}';\n      let defaultZone = getFirstParam('zone', BRs) || '1r';\n      let defaultPath = getFirstParam('path', BRs) || 'mvo';\n\n      url = url.replace(/\\{placementId\\}/i, fallbackPlacementId);\n      url = url.replace(/\\{zone\\}/i, defaultZone);\n      url = url.replace(/\\{path\\}/i, defaultPath);\n\n      p('title', attempt(function() { return w.top.document.title; }, '')); // try/catch is in the attempt function\n      p('dsh', (w.screen ? w.screen.height : ''));\n      p('dsw', (w.screen ? w.screen.width : ''));\n      p('tz', (new Date()).getTimezoneOffset());\n      p('dtype', ((/(ios|ipod|ipad|iphone|android)/i).test(w.navigator.userAgent) ? 1 : ((/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\\.tv|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b)/i).test(w.navigator.userAgent) ? 3 : 2)));\n      p('flash', attempt(function() {\n        let n = w.navigator;\n        let p = n.plugins;\n        let m = n.mimeTypes;\n        let t = 'application/x-shockwave-flash';\n        let x = w.ActiveXObject;\n\n        if (p &&\n          p['Shockwave Flash'] &&\n          m &&\n          m[t] &&\n          m[t].enabledPlugin) {\n          return 1;\n        }\n\n        if (x) {\n          try {\n            if ((new w.ActiveXObject('ShockwaveFlash.ShockwaveFlash'))) {\n              return 1;\n            }\n          } catch (e) { }\n        }\n\n        return 0;\n      }, 0));\n\n      let heights = [];\n      let widths = [];\n      let floors = [];\n      let mediaTypes = [];\n      let i = 0;\n      let configuredPlacements = [];\n      let fat = /(^v|(\\.0)+$)/gi;\n\n      p('hbv', w.pbjs.version.replace(fat, '') + ',' + version.replace(fat, ''));\n\n      for (; i < BRs.length; i++) {\n        let th = [];\n        let tw = [];\n        let params = BRs[i].params || {};\n\n        slotsToBids[BRs[i].adUnitCode || BRs[i].placementCode] = BRs[i];\n\n        if (BRs[i].sizes.length > 0 && typeof BRs[i].sizes[0] === 'number') {\n          BRs[i].sizes = [BRs[i].sizes];\n        }\n\n        for (let j = 0; j < BRs[i].sizes.length; j++) {\n          tw.push(BRs[i].sizes[j][0]);\n          th.push(BRs[i].sizes[j][1]);\n        }\n        configuredPlacements.push(BRs[i].adUnitCode || BRs[i].placementCode);\n        heights.push(th.join('|'));\n        widths.push(tw.join('|'));\n        mediaTypes.push((BRs[i].mediaTypes && BRs[i].mediaTypes.video ? 'v' : 'd'));\n        floors.push(params.floor || 0);\n      }\n\n      p('imp', configuredPlacements);\n      p('w', widths);\n      p('h', heights);\n      p('floor', floors);\n      p('t', mediaTypes);\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        p('gdpr_consent', bidderRequest.gdprConsent.consentString);\n        p('gdpr', (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true);\n      }\n      url += '&' + query.join('&') + '&';\n\n      return url;\n    }\n\n    return [{\n      method: 'GET',\n      url: getRMPUrl()\n    }];\n  };\n\n  this.interpretResponse = function (serverResponse) {\n    let responses = serverResponse.body || [];\n    let bids = [];\n    let i = 0;\n\n    if (responses.seatbid) {\n      let temp = [];\n      for (i = 0; i < responses.seatbid.length; i++) {\n        for (let j = 0; j < responses.seatbid[i].bid.length; j++) {\n          temp.push(responses.seatbid[i].bid[j]);\n        }\n      }\n      responses = temp;\n    }\n\n    for (i = 0; i < responses.length; i++) {\n      let bid = responses[i];\n      let bidRequest = slotsToBids[bid.impid];\n      let bidResponse = {\n        requestId: bidRequest.bidId,\n        bidderCode: that.code,\n        cpm: parseFloat(bid.price),\n        width: bid.w,\n        height: bid.h,\n        creativeId: bid.crid,\n        currency: 'USD',\n        netRevenue: true,\n        ttl: 1000\n      };\n\n      if (bidRequest.mediaTypes && bidRequest.mediaTypes.video) {\n        bidResponse.vastUrl = bid.nurl;\n        bidResponse.mediaType = 'video';\n        bidResponse.ttl = 10000;\n      } else {\n        bidResponse.ad = bid.adm;\n      }\n      bids.push(bidResponse);\n    }\n\n    return bids;\n  };\n}\n\nexport const spec = new RhythmOneBidAdapter();\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rhythmoneBidAdapter.js","import * as utils from 'src/utils';\nimport { Renderer } from 'src/Renderer';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'rockyou';\n\nconst BASE_REQUEST_PATH = 'https://tas.rockyou.net/servlet/rotator/';\nconst IFRAME_SYNC_URL = 'https://prebid.tas-sync.rockyou.net/usersync2/prebid';\nconst VAST_PLAYER_LOCATION = 'https://rya-static.rockyou.com/rya/js/PreBidPlayer.js';\nexport const ROTATION_ZONE = 'prod';\n\nlet isBidRequestValid = (bid) => {\n  return !!bid.params && !!bid.params.placementId;\n};\n\n/**\n* The RockYou Ad Serving system currently only accepts one placementId\n* per Ad request. For this reason, the first placementId indicated\n* will be chosen as the predominant placementId for this request.\n*/\nlet determineOptimalPlacementId = (bidRequest) => {\n  return bidRequest.params.placementId;\n}\n\nlet determineOptimalRequestId = (bidRequest) => {\n  return bidRequest.bidId;\n}\n\nlet buildSiteComponent = (bidRequest) => {\n  let topLocation = utils.getTopWindowLocation();\n\n  let site = {\n    domain: topLocation.hostname,\n    page: topLocation.href,\n    ref: topLocation.origin\n  };\n\n  return site;\n}\n\nlet buildDeviceComponent = (bidRequest) => {\n  let device = {\n    js: 1,\n    language: ('language' in navigator) ? navigator.language : null\n  };\n\n  return device;\n};\n\nlet extractValidSize = (bidRequest) => {\n  let width = null;\n  let height = null;\n\n  let requestedSizes = [];\n  let mediaTypes = bidRequest.mediaTypes;\n  if (mediaTypes && ((mediaTypes.banner && mediaTypes.banner.sizes) || (mediaTypes.video && mediaTypes.video.playerSize))) {\n    if (mediaTypes.banner) {\n      requestedSizes = mediaTypes.banner.sizes;\n    } else {\n      requestedSizes = [mediaTypes.video.playerSize];\n    }\n  } else if (!utils.isEmpty(bidRequest.sizes)) {\n    requestedSizes = bidRequest.sizes\n  }\n\n  // Ensure the size array is normalized\n  let conformingSize = utils.parseSizesInput(requestedSizes);\n\n  if (!utils.isEmpty(conformingSize) && conformingSize[0] != null) {\n    // Currently only the first size is utilized\n    let splitSizes = conformingSize[0].split('x');\n\n    width = parseInt(splitSizes[0]);\n    height = parseInt(splitSizes[1]);\n  }\n\n  return {\n    w: width,\n    h: height\n  };\n};\n\nlet generateVideoComponent = (bidRequest) => {\n  let impSize = extractValidSize(bidRequest);\n\n  return {\n    w: impSize.w,\n    h: impSize.h\n  }\n}\n\nlet generateBannerComponent = (bidRequest) => {\n  let impSize = extractValidSize(bidRequest);\n\n  return {\n    w: impSize.w,\n    h: impSize.h\n  }\n}\n\nlet generateImpBody = (bidRequest) => {\n  let mediaTypes = bidRequest.mediaTypes;\n\n  let banner = null;\n  let video = null;\n\n  // Assume banner if the mediatype is not included\n  if (mediaTypes && mediaTypes.video) {\n    video = generateVideoComponent(bidRequest);\n  } else {\n    banner = generateBannerComponent(bidRequest);\n  }\n\n  return {\n    id: bidRequest.index,\n    banner: banner,\n    video: video\n  };\n}\n\nlet generatePayload = (bidRequest) => {\n  // Generate the expected OpenRTB payload\n\n  let payload = {\n    id: determineOptimalRequestId(bidRequest),\n    site: buildSiteComponent(bidRequest),\n    device: buildDeviceComponent(bidRequest),\n    imp: [generateImpBody(bidRequest)]\n  };\n\n  return JSON.stringify(payload);\n};\n\nlet overridableProperties = (request) => {\n  let rendererLocation = VAST_PLAYER_LOCATION;\n  let baseRequestPath = BASE_REQUEST_PATH;\n  let rotationZone = ROTATION_ZONE;\n\n  if (!utils.isEmpty(request.rendererOverride)) {\n    rendererLocation = request.rendererOverride;\n  }\n\n  if (request.params) {\n    if (!utils.isEmpty(request.params.baseRequestPath)) {\n      baseRequestPath = request.params.baseRequestPath;\n    }\n\n    if (!utils.isEmpty(request.params.rotationZone)) {\n      rotationZone = request.params.rotationZone;\n    }\n  }\n\n  return {\n    rendererLocation,\n    baseRequestPath,\n    rotationZone\n  }\n}\n\nlet buildRequests = (validBidRequests, requestRoot) => {\n  const requestType = 'POST';\n\n  let requestUrl = null;\n  let requestPayload = null;\n  let mediaTypes = null;\n  let adUnitCode = null;\n  let rendererOverride = null;\n\n  let results = [];\n  // Due to the nature of how URLs are generated, there must\n  // be at least one bid request present for this to function\n  // correctly\n  if (!utils.isEmpty(validBidRequests)) {\n    results = validBidRequests.map(\n      bidRequest => {\n        let serverLocations = overridableProperties(bidRequest);\n\n        // requestUrl is the full endpoint w/ relevant adspot paramters\n        let placementId = determineOptimalPlacementId(bidRequest);\n        requestUrl = `${serverLocations.baseRequestPath}${placementId}/0/vo?z=${serverLocations.rotationZone}`;\n\n        // requestPayload is the POST body JSON for the OpenRtb request\n        requestPayload = generatePayload(bidRequest);\n\n        mediaTypes = bidRequest.mediaTypes;\n        adUnitCode = bidRequest.adUnitCode;\n        rendererOverride = bidRequest.rendererOverride;\n\n        return {\n          method: requestType,\n          type: requestType,\n          url: requestUrl,\n          data: requestPayload,\n          mediaTypes,\n          requestId: requestRoot.bidderRequestId,\n          bidId: bidRequest.bidId,\n          adUnitCode,\n          rendererOverride\n        };\n      }\n    );\n  }\n\n  return results;\n};\n\nlet outstreamRender = (bid) => {\n  // push to render queue because player may not be loaded yet\n  bid.renderer.push(() => {\n    let adUnitCode = bid.renderer.config.adUnitCode;\n\n    try {\n      RockYouVastPlayer.render(adUnitCode, bid, playerCallbacks(bid.renderer));\n    } catch (pbe) {\n      utils.logError(pbe);\n    }\n  });\n}\n\nlet rockYouEventTranslation = (rockYouEvent) => {\n  let translated;\n  switch (rockYouEvent) {\n    case 'LOAD':\n      translated = 'loaded';\n      break;\n    case 'IMPRESSION':\n      translated = 'impression';\n      break;\n    case 'COMPLETE':\n    case 'ERROR':\n      translated = 'ended'\n      break;\n  }\n\n  return translated;\n}\n\nlet playerCallbacks = (renderer) => (id, eventName) => {\n  eventName = rockYouEventTranslation(eventName);\n\n  if (eventName) {\n    renderer.handleVideoEvent({ id, eventName });\n  }\n};\n\nlet generateRenderer = (bid, adUnitCode, rendererLocation) => {\n  let renderer = Renderer.install({\n    url: rendererLocation,\n    config: {\n      adText: `RockYou Outstream Video Ad`,\n      adUnitCode: adUnitCode\n    },\n    id: bid.id\n  });\n\n  bid.renderer = renderer;\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  renderer.setEventHandlers({\n    impression: () => utils.logMessage('RockYou outstream video impression event'),\n    loaded: () => utils.logMessage('RockYou outstream video loaded event'),\n    ended: () => {\n      utils.logMessage('RockYou outstream renderer video event');\n      document.querySelector(`#${adUnitCode}`).style.display = 'none';\n    }\n  });\n\n  return renderer;\n};\n\nlet interpretResponse = (serverResponse, request) => {\n  let responses = [];\n\n  if (serverResponse.body) {\n    let responseBody = serverResponse.body;\n\n    if (responseBody != null) {\n      let seatBids = responseBody.seatbid;\n\n      if (!(utils.isEmpty(seatBids) ||\n            utils.isEmpty(seatBids[0].bid))) {\n        let bid = seatBids[0].bid[0];\n\n        // handle any values that may end up undefined\n        let nullify = (value) => typeof value === 'undefined' ? null : value;\n\n        let ttl = null;\n        if (bid.ext) {\n          ttl = nullify(bid.ext.ttl);\n        }\n\n        let bidWidth = nullify(bid.w);\n        let bidHeight = nullify(bid.h);\n\n        let bannerCreative = null;\n        let videoXml = null;\n        let mediaType = null;\n        let renderer = null;\n\n        if (request.mediaTypes && request.mediaTypes.video) {\n          videoXml = bid.adm;\n          mediaType = VIDEO;\n\n          let serversideLocations = overridableProperties(request);\n\n          renderer = generateRenderer(bid, request.adUnitCode, serversideLocations.rendererLocation);\n        } else {\n          bannerCreative = bid.adm;\n        }\n\n        let response = {\n          requestId: request.bidId,\n          cpm: bid.price,\n          width: bidWidth,\n          height: bidHeight,\n          ad: bannerCreative,\n          ttl: ttl,\n          creativeId: bid.adid,\n          netRevenue: true,\n          currency: responseBody.cur,\n          vastUrl: null,\n          vastXml: videoXml,\n          dealId: null,\n          mediaType: mediaType,\n          renderer: renderer\n        };\n\n        responses.push(response);\n      }\n    }\n  }\n\n  return responses;\n};\n\nlet getUserSyncs = (syncOptions, serverResponses) => {\n  const syncs = []\n\n  if (syncOptions.iframeEnabled) {\n    syncs.push({\n      type: 'iframe',\n      url: IFRAME_SYNC_URL\n    });\n  }\n\n  return syncs;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['ry'],\n  isBidRequestValid: isBidRequestValid,\n  buildRequests: buildRequests,\n  interpretResponse: interpretResponse,\n  getUserSyncs: getUserSyncs,\n  supportedMediaTypes: [BANNER, VIDEO]\n};\n\nexport const internals = {\n  playerCallbacks,\n  generateRenderer\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rockyouBidAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport CONSTANTS from 'src/constants.json';\nimport adaptermanager from 'src/adaptermanager';\nimport includes from 'core-js/library/fn/array/includes';\nimport {ajaxBuilder} from 'src/ajax';\n\nconst utils = require('src/utils');\nlet ajax = ajaxBuilder(0);\n\nconst DEFAULT_EVENT_URL = 'pa.rxthdr.com/v3';\nconst DEFAULT_SERVER_CONFIG_URL = 'pa.rxthdr.com/v3';\nconst analyticsType = 'endpoint';\n\nconst {\n  EVENTS: {\n    AUCTION_INIT,\n    AUCTION_END,\n    BID_REQUESTED,\n    BID_ADJUSTMENT,\n    BIDDER_DONE,\n    BID_WON\n  }\n} = CONSTANTS;\n\nconst AUCTION_STATUS = {\n  'RUNNING': 'running',\n  'FINISHED': 'finished'\n};\nconst BIDDER_STATUS = {\n  'REQUESTED': 'requested',\n  'BID': 'bid',\n  'NO_BID': 'noBid',\n  'TIMEOUT': 'timeout'\n};\nconst ROXOT_EVENTS = {\n  'AUCTION': 'a',\n  'IMPRESSION': 'i',\n  'BID_AFTER_TIMEOUT': 'bat'\n};\n\nlet initOptions = {};\n\nlet localStoragePrefix = 'roxot_analytics_';\n\nlet utmTags = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];\nlet utmTtlKey = 'utm_ttl';\nlet utmTtl = 60 * 60 * 1000;\n\nlet isNewKey = 'is_new_flag';\nlet isNewTtl = 60 * 60 * 1000;\n\nlet auctionCache = {};\nlet auctionTtl = 60 * 60 * 1000;\n\nlet sendEventCache = [];\nlet sendEventTimeoutId = null;\nlet sendEventTimeoutTime = 1000;\n\nfunction detectDevice() {\n  if ((/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase()))) {\n    return 'tablet';\n  }\n  if ((/iphone|ipod|android|blackberry|opera|mini|windows\\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase()))) {\n    return 'mobile';\n  }\n  return 'desktop';\n}\n\nfunction checkIsNewFlag() {\n  let key = buildLocalStorageKey(isNewKey);\n  let lastUpdate = Number(localStorage.getItem(key));\n  localStorage.setItem(key, Date.now());\n  return Date.now() - lastUpdate > isNewTtl;\n}\n\nfunction updateUtmTimeout() {\n  localStorage.setItem(buildLocalStorageKey(utmTtlKey), Date.now());\n}\n\nfunction isUtmTimeoutExpired() {\n  let utmTimestamp = localStorage.getItem(buildLocalStorageKey(utmTtlKey));\n  return (Date.now() - utmTimestamp) > utmTtl;\n}\n\nfunction buildLocalStorageKey(key) {\n  return localStoragePrefix.concat(key);\n}\n\nfunction isSupportedAdUnit(adUnit) {\n  if (!initOptions.adUnits.length) {\n    return true;\n  }\n\n  return includes(initOptions.adUnits, adUnit);\n}\n\nfunction deleteOldAuctions() {\n  for (let auctionId in auctionCache) {\n    let auction = auctionCache[auctionId];\n    if (Date.now() - auction.start > auctionTtl) {\n      delete auctionCache[auctionId];\n    }\n  }\n}\n\nfunction buildAuctionEntity(args) {\n  return {\n    'id': args.auctionId,\n    'start': args.timestamp,\n    'timeout': args.timeout,\n    'adUnits': {}\n  };\n}\n\nfunction extractAdUnitCode(args) {\n  return args.adUnitCode.toLowerCase();\n}\n\nfunction extractBidder(args) {\n  return args.bidder.toLowerCase();\n}\n\nfunction buildAdUnitAuctionEntity(auction, bidRequest) {\n  return {\n    'adUnit': extractAdUnitCode(bidRequest),\n    'start': auction.start,\n    'timeout': auction.timeout,\n    'finish': 0,\n    'status': AUCTION_STATUS.RUNNING,\n    'bidders': {}\n  };\n}\n\nfunction buildBidderRequest(auction, bidRequest) {\n  return {\n    'bidder': extractBidder(bidRequest),\n    'isAfterTimeout': auction.status === AUCTION_STATUS.FINISHED ? 1 : 0,\n    'start': bidRequest.startTime || Date.now(),\n    'finish': 0,\n    'status': BIDDER_STATUS.REQUESTED,\n    'cpm': -1,\n    'size': {\n      'width': 0,\n      'height': 0\n    },\n    'mediaType': '-',\n    'source': bidRequest.source || 'client'\n  };\n}\n\nfunction buildBidAfterTimeout(adUnitAuction, args) {\n  return {\n    'auction': utils.deepClone(adUnitAuction),\n    'adUnit': extractAdUnitCode(args),\n    'bidder': extractBidder(args),\n    'cpm': args.cpm,\n    'size': {\n      'width': args.width || 0,\n      'height': args.height || 0\n    },\n    'mediaType': args.mediaType || '-',\n    'start': args.requestTimestamp,\n    'finish': args.responseTimestamp,\n  };\n}\n\nfunction buildImpression(adUnitAuction, args) {\n  return {\n    'isNew': checkIsNewFlag() ? 1 : 0,\n    'auction': utils.deepClone(adUnitAuction),\n    'adUnit': extractAdUnitCode(args),\n    'bidder': extractBidder(args),\n    'cpm': args.cpm,\n    'size': {\n      'width': args.width,\n      'height': args.height\n    },\n    'mediaType': args.mediaType,\n    'source': args.source || 'client'\n  };\n}\n\nfunction handleAuctionInit(args) {\n  auctionCache[args.auctionId] = buildAuctionEntity(args);\n  deleteOldAuctions();\n}\n\nfunction handleBidRequested(args) {\n  let auction = auctionCache[args.auctionId];\n  args.bids.forEach(function (bidRequest) {\n    let adUnitCode = extractAdUnitCode(bidRequest);\n    let bidder = extractBidder(bidRequest);\n    if (!isSupportedAdUnit(adUnitCode)) {\n      return;\n    }\n    auction['adUnits'][adUnitCode] = auction['adUnits'][adUnitCode] || buildAdUnitAuctionEntity(auction, bidRequest);\n    let adUnitAuction = auction['adUnits'][adUnitCode];\n    adUnitAuction['bidders'][bidder] = adUnitAuction['bidders'][bidder] || buildBidderRequest(auction, bidRequest);\n  });\n}\n\nfunction handleBidAdjustment(args) {\n  let adUnitCode = extractAdUnitCode(args);\n  let bidder = extractBidder(args);\n  if (!isSupportedAdUnit(adUnitCode)) {\n    return;\n  }\n\n  let adUnitAuction = auctionCache[args.auctionId]['adUnits'][adUnitCode];\n  if (adUnitAuction.status === AUCTION_STATUS.FINISHED) {\n    handleBidAfterTimeout(adUnitAuction, args);\n    return;\n  }\n\n  let bidderRequest = adUnitAuction['bidders'][bidder];\n  if (bidderRequest.cpm < args.cpm) {\n    bidderRequest.cpm = args.cpm;\n    bidderRequest.finish = args.responseTimestamp;\n    bidderRequest.status = args.cpm === 0 ? BIDDER_STATUS.NO_BID : BIDDER_STATUS.BID;\n    bidderRequest.size.width = args.width || 0;\n    bidderRequest.size.height = args.height || 0;\n    bidderRequest.mediaType = args.mediaType || '-';\n    bidderRequest.source = args.source || 'client';\n  }\n}\n\nfunction handleBidAfterTimeout(adUnitAuction, args) {\n  let bidder = extractBidder(args);\n  let bidderRequest = adUnitAuction['bidders'][bidder];\n  let bidAfterTimeout = buildBidAfterTimeout(adUnitAuction, args);\n\n  if (bidAfterTimeout.cpm > bidderRequest.cpm) {\n    bidderRequest.cpm = bidAfterTimeout.cpm;\n    bidderRequest.isAfterTimeout = 1;\n    bidderRequest.finish = bidAfterTimeout.finish;\n    bidderRequest.size = bidAfterTimeout.size;\n    bidderRequest.mediaType = bidAfterTimeout.mediaType;\n    bidderRequest.status = bidAfterTimeout.cpm === 0 ? BIDDER_STATUS.NO_BID : BIDDER_STATUS.BID;\n  }\n\n  registerEvent(ROXOT_EVENTS.BID_AFTER_TIMEOUT, 'Bid After Timeout', bidAfterTimeout);\n}\n\nfunction handleBidderDone(args) {\n  let auction = auctionCache[args.auctionId];\n\n  args.bids.forEach(function (bidDone) {\n    let adUnitCode = extractAdUnitCode(bidDone);\n    let bidder = extractBidder(bidDone);\n    if (!isSupportedAdUnit(adUnitCode)) {\n      return;\n    }\n\n    let adUnitAuction = auction['adUnits'][adUnitCode];\n    if (adUnitAuction.status === AUCTION_STATUS.FINISHED) {\n      return;\n    }\n    let bidderRequest = adUnitAuction['bidders'][bidder];\n    if (bidderRequest.status !== BIDDER_STATUS.REQUESTED) {\n      return;\n    }\n\n    bidderRequest.finish = Date.now();\n    bidderRequest.status = BIDDER_STATUS.NO_BID;\n    bidderRequest.cpm = 0;\n  });\n}\n\nfunction handleAuctionEnd(args) {\n  let auction = auctionCache[args.auctionId];\n  if (!Object.keys(auction.adUnits).length) {\n    delete auctionCache[args.auctionId];\n  }\n\n  let finish = Date.now();\n  auction.finish = finish;\n  for (let adUnit in auction.adUnits) {\n    let adUnitAuction = auction.adUnits[adUnit];\n    adUnitAuction.finish = finish;\n    adUnitAuction.status = AUCTION_STATUS.FINISHED;\n\n    for (let bidder in adUnitAuction.bidders) {\n      let bidderRequest = adUnitAuction.bidders[bidder];\n      if (bidderRequest.status !== BIDDER_STATUS.REQUESTED) {\n        continue;\n      }\n\n      bidderRequest.status = BIDDER_STATUS.TIMEOUT;\n    }\n  }\n\n  registerEvent(ROXOT_EVENTS.AUCTION, 'Auction', auction);\n}\n\nfunction handleBidWon(args) {\n  let adUnitCode = extractAdUnitCode(args);\n  if (!isSupportedAdUnit(adUnitCode)) {\n    return;\n  }\n  let adUnitAuction = auctionCache[args.auctionId]['adUnits'][adUnitCode];\n  let impression = buildImpression(adUnitAuction, args);\n  registerEvent(ROXOT_EVENTS.IMPRESSION, 'Bid won', impression);\n}\n\nfunction handleOtherEvents(eventType, args) {\n  registerEvent(eventType, eventType, args);\n}\n\nlet roxotAdapter = Object.assign(adapter({url: DEFAULT_EVENT_URL, analyticsType}), {\n  track({eventType, args}) {\n    switch (eventType) {\n      case AUCTION_INIT:\n        handleAuctionInit(args);\n        break;\n      case BID_REQUESTED:\n        handleBidRequested(args);\n        break;\n      case BID_ADJUSTMENT:\n        handleBidAdjustment(args);\n        break;\n      case BIDDER_DONE:\n        handleBidderDone(args);\n        break;\n      case AUCTION_END:\n        handleAuctionEnd(args);\n        break;\n      case BID_WON:\n        handleBidWon(args);\n        break;\n      default:\n        handleOtherEvents(eventType, args);\n        break;\n    }\n  },\n\n});\n\nroxotAdapter.originEnableAnalytics = roxotAdapter.enableAnalytics;\n\nroxotAdapter.enableAnalytics = function (config) {\n  if (this.initConfig(config)) {\n    logInfo('Analytics adapter enabled', initOptions);\n    roxotAdapter.originEnableAnalytics(config);\n  }\n};\n\nroxotAdapter.buildUtmTagData = function () {\n  let utmTagData = {};\n  let utmTagsDetected = false;\n  utmTags.forEach(function (utmTagKey) {\n    let utmTagValue = utils.getParameterByName(utmTagKey);\n    if (utmTagValue !== '') {\n      utmTagsDetected = true;\n    }\n    utmTagData[utmTagKey] = utmTagValue;\n  });\n  utmTags.forEach(function (utmTagKey) {\n    if (utmTagsDetected) {\n      localStorage.setItem(buildLocalStorageKey(utmTagKey), utmTagData[utmTagKey]);\n      updateUtmTimeout();\n    } else {\n      if (!isUtmTimeoutExpired()) {\n        utmTagData[utmTagKey] = localStorage.getItem(buildLocalStorageKey(utmTagKey)) ? localStorage.getItem(buildLocalStorageKey(utmTagKey)) : '';\n        updateUtmTimeout();\n      }\n    }\n  });\n  return utmTagData;\n};\n\nroxotAdapter.initConfig = function (config) {\n  let isCorrectConfig = true;\n  initOptions = {};\n  initOptions.options = utils.deepClone(config.options);\n\n  initOptions.publisherId = initOptions.options.publisherId || (initOptions.options.publisherIds[0]) || null;\n  if (!initOptions.publisherId) {\n    logError('\"options.publisherId\" is empty');\n    isCorrectConfig = false;\n  }\n\n  initOptions.adUnits = initOptions.options.adUnits || [];\n  initOptions.adUnits = initOptions.adUnits.map(value => value.toLowerCase());\n  initOptions.server = initOptions.options.server || DEFAULT_EVENT_URL;\n  initOptions.configServer = initOptions.options.configServer || (initOptions.options.server || DEFAULT_SERVER_CONFIG_URL);\n  initOptions.utmTagData = this.buildUtmTagData();\n  initOptions.host = initOptions.options.host || window.location.hostname;\n  initOptions.device = detectDevice();\n\n  loadServerConfig();\n  return isCorrectConfig;\n};\n\nroxotAdapter.getOptions = function () {\n  return initOptions;\n};\n\nfunction registerEvent(eventType, eventName, data) {\n  let eventData = {\n    eventType: eventType,\n    eventName: eventName,\n    data: data\n  };\n\n  sendEventCache.push(eventData);\n\n  logInfo('Register event', eventData);\n\n  (typeof initOptions.serverConfig === 'undefined') ? checkEventAfterTimeout() : checkSendEvent();\n}\n\nfunction checkSendEvent() {\n  if (sendEventTimeoutId) {\n    clearTimeout(sendEventTimeoutId);\n    sendEventTimeoutId = null;\n  }\n\n  if (typeof initOptions.serverConfig === 'undefined') {\n    checkEventAfterTimeout();\n    return;\n  }\n\n  while (sendEventCache.length) {\n    let event = sendEventCache.shift();\n    let isNeedSend = initOptions.serverConfig[event.eventType] || 0;\n    if (Number(isNeedSend) === 0) {\n      logInfo('Skip event ' + event.eventName, event);\n      continue;\n    }\n    sendEvent(event.eventType, event.eventName, event.data);\n  }\n}\n\nfunction checkEventAfterTimeout() {\n  if (sendEventTimeoutId) {\n    return;\n  }\n\n  sendEventTimeoutId = setTimeout(checkSendEvent, sendEventTimeoutTime);\n}\n\nfunction sendEvent(eventType, eventName, data) {\n  let url = '//' + initOptions.server + '/' + eventType + '?publisherId=' + initOptions.publisherId + '&host=' + initOptions.host;\n  let eventData = {\n    'event': eventType,\n    'eventName': eventName,\n    'options': initOptions,\n    'data': data\n  };\n\n  ajax(\n    url,\n    function () {\n      logInfo(eventName + ' sent', eventData);\n    },\n    JSON.stringify(eventData),\n    {\n      contentType: 'text/plain',\n      method: 'POST',\n      withCredentials: true\n    }\n  );\n}\n\nfunction loadServerConfig() {\n  let url = '//' + initOptions.configServer + '/c' + '?publisherId=' + initOptions.publisherId + '&host=' + initOptions.host;\n  ajax(\n    url,\n    {\n      'success': function (data) {\n        initOptions.serverConfig = JSON.parse(data);\n      },\n      'error': function () {\n        initOptions.serverConfig = {};\n        initOptions.serverConfig[ROXOT_EVENTS.AUCTION] = 1;\n        initOptions.serverConfig[ROXOT_EVENTS.IMPRESSION] = 1;\n        initOptions.serverConfig[ROXOT_EVENTS.BID_AFTER_TIMEOUT] = 1;\n        initOptions.serverConfig['isError'] = 1;\n      }\n    },\n    null,\n    {\n      contentType: 'text/json',\n      method: 'GET',\n      withCredentials: true\n    }\n  );\n}\n\nfunction logInfo(message, meta) {\n  utils.logInfo(buildLogMessage(message), meta);\n}\n\nfunction logError(message) {\n  utils.logError(buildLogMessage(message));\n}\n\nfunction buildLogMessage(message) {\n  return 'Roxot Prebid Analytics: ' + message;\n}\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: roxotAdapter,\n  code: 'roxot'\n});\n\nexport default roxotAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/roxotAnalyticsAdapter.js","import * as utils from 'src/utils';\r\nimport {registerBidder} from 'src/adapters/bidderFactory';\r\n\r\nconst BIDDER_CODE = 'rtbdemand';\r\nconst BIDDER_SERVER = 'bidding.rtbdemand.com';\r\nexport const spec = {\r\n  code: BIDDER_CODE,\r\n  isBidRequestValid: function(bid) {\r\n    return !!(bid && bid.params && bid.params.zoneid);\r\n  },\r\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      var server = bidRequest.params.server || BIDDER_SERVER;\n      var parse = getSize(bidderRequest.bids[0].sizes);\n      const payload = {\n        from: 'hb',\n        v: '1.0',\n        request_id: bidRequest.bidderRequestId,\n        imp_id: bidRequest.bidId,\n        aff: bidRequest.params.zoneid,\n        bid_floor: parseFloat(bidRequest.params.floor) > 0 ? bidRequest.params.floor : 0,\n        charset: document.charSet || document.characterSet,\n        site_domain: document.location.hostname,\n        site_page: window.location.href,\n        subid: 'hb',\n        flashver: getFlashVersion(),\n        tmax: bidderRequest.timeout,\n        hb: '1',\n        name: document.location.hostname,\n        width: parse.width,\n        height: parse.height,\n        device_width: screen.width,\n        device_height: screen.height,\n        dnt: (navigator.doNotTrack == 'yes' || navigator.doNotTrack == '1' || navigator.msDoNotTrack == '1') ? 1 : 0,\n        secure: isSecure(),\n        make: navigator.vendor ? navigator.vendor : '',\n      };\n      if (document.referrer) {\n        payload.referrer = document.referrer;\r\n      }\r\n\n      return {\n        method: 'GET',\n        url: '//' + server + '/hb',\n        data: payload\n      };\n    });\n  },\n  interpretResponse: function(serverResponse) {\r\n    serverResponse = serverResponse.body;\r\n    const bidResponses = [];\n    if (serverResponse && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(seatBid => seatBid.bid.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.impid,\r\n          creativeId: bid.impid,\n          cpm: bid.price,\n          width: bid.w,\n          height: bid.h,\n          ad: bid.adm,\n          netRevenue: true,\n          currency: 'USD',\n          ttl: 360,\r\n        };\n\n        bidResponses.push(bidResponse);\n      }));\n    }\n    return bidResponses;\r\n  },\n  getUserSyncs: function getUserSyncs(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\r\n        type: 'iframe',\r\n        url: '//' + BIDDER_SERVER + '/delivery/matches.php?type=iframe',\r\n      }];\n    }\n  }\r\n}\r\n\r\nfunction getFlashVersion() {\n  var plugins, plugin, result;\n\n  if (navigator.plugins && navigator.plugins.length > 0) {\n    plugins = navigator.plugins;\n    for (var i = 0; i < plugins.length && !result; i++) {\n      plugin = plugins[i];\n      if (plugin.name.indexOf('Shockwave Flash') > -1) {\n        result = plugin.description.split('Shockwave Flash ')[1];\n      }\n    }\n  }\n  return result || '';\n}\r\n\n/* Get parsed size from request size */\nfunction getSize(requestSizes) {\n  const parsed = {};\n  const size = utils.parseSizesInput(requestSizes)[0];\n\n  if (typeof size !== 'string') {\n    return parsed;\n  }\n\n  const parsedSize = size.toUpperCase().split('X');\n  const width = parseInt(parsedSize[0], 10);\n  if (width) {\n    parsed.width = width;\n  }\n\n  const height = parseInt(parsedSize[1], 10);\n  if (height) {\n    parsed.height = height;\n  }\n\n  return parsed;\n}\n\nfunction isSecure() {\n  return document.location.protocol === 'https:';\n}\n\nregisterBidder(spec);\r\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rtbdemandBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst VIDEO_TARGETING = ['mimes', 'minduration', 'maxduration', 'protocols',\n  'startdelay', 'linearity', 'boxingallowed', 'playbackmethod', 'delivery',\n  'pos', 'api', 'ext'];\nconst VERSION = '1.1';\n\n/**\n * Adapter for requesting bids from RtbdemandAdk white-label display platform\n */\nexport const spec = {\n\n  code: 'rtbdemandadk',\n  aliases: ['headbidding'],\n  supportedMediaTypes: [BANNER, VIDEO],\n  isBidRequestValid: function(bidRequest) {\n    return 'params' in bidRequest && typeof bidRequest.params.host !== 'undefined' &&\n      'zoneId' in bidRequest.params && !isNaN(Number(bidRequest.params.zoneId));\n  },\n  buildRequests: function(bidRequests) {\n    let auctionId;\n    let dispatch = bidRequests.map(buildImp)\n      .reduce((acc, curr, index) => {\n        let bidRequest = bidRequests[index];\n        let zoneId = bidRequest.params.zoneId;\n        let host = bidRequest.params.host;\n        acc[host] = acc[host] || {};\n        acc[host][zoneId] = acc[host][zoneId] || [];\n        acc[host][zoneId].push(curr);\n        auctionId = bidRequest.bidderRequestId;\n        return acc;\n      }, {});\n    let requests = [];\n    Object.keys(dispatch).forEach(host => {\n      Object.keys(dispatch[host]).forEach(zoneId => {\n        const request = buildRtbRequest(dispatch[host][zoneId], auctionId);\n        requests.push({\n          method: 'GET',\n          url: `${window.location.protocol}//${host}/rtbg`,\n          data: {\n            zone: Number(zoneId),\n            ad_type: 'rtb',\n            v: VERSION,\n            r: JSON.stringify(request)\n          }\n        });\n      });\n    });\n    return requests;\n  },\n  interpretResponse: function(serverResponse, request) {\n    let response = serverResponse.body;\n    if (!response.seatbid) {\n      return [];\n    }\n\n    let rtbRequest = JSON.parse(request.data.r);\n    let rtbImps = rtbRequest.imp;\n    let rtbBids = response.seatbid\n      .map(seatbid => seatbid.bid)\n      .reduce((a, b) => a.concat(b), []);\n\n    return rtbBids.map(rtbBid => {\n      let imp = find(rtbImps, imp => imp.id === rtbBid.impid);\n      let prBid = {\n        requestId: rtbBid.impid,\n        cpm: rtbBid.price,\n        creativeId: rtbBid.crid,\n        currency: 'USD',\n        ttl: 360,\n        netRevenue: true\n      };\n      if ('banner' in imp) {\n        prBid.mediaType = BANNER;\n        prBid.width = rtbBid.w;\n        prBid.height = rtbBid.h;\n        prBid.ad = formatAdMarkup(rtbBid);\n      }\n      if ('video' in imp) {\n        prBid.mediaType = VIDEO;\n        prBid.vastUrl = rtbBid.nurl;\n        prBid.width = imp.video.w;\n        prBid.height = imp.video.h;\n      }\n      return prBid;\n    });\n  },\n  getUserSyncs: function(syncOptions, serverResponses) {\n    if (!syncOptions.iframeEnabled || !serverResponses || serverResponses.length === 0) {\n      return [];\n    }\n    return serverResponses.filter(rsp => rsp.body && rsp.body.ext && rsp.body.ext.adk_usersync)\n      .map(rsp => rsp.body.ext.adk_usersync)\n      .reduce((a, b) => a.concat(b), [])\n      .map(syncUrl => ({type: 'iframe', url: syncUrl}));\n  }\n};\n\nregisterBidder(spec);\n\n/**\n *  Builds parameters object for single impression\n */\nfunction buildImp(bid) {\n  const sizes = bid.sizes;\n  const imp = {\n    'id': bid.bidId,\n    'tagid': bid.placementCode\n  };\n\n  if (bid.mediaType === 'video') {\n    imp.video = {w: sizes[0], h: sizes[1]};\n    if (bid.params.video) {\n      Object.keys(bid.params.video)\n        .filter(param => includes(VIDEO_TARGETING, param))\n        .forEach(param => imp.video[param] = bid.params.video[param]);\n    }\n  } else {\n    imp.banner = {\n      format: sizes.map(s => ({'w': s[0], 'h': s[1]})),\n      topframe: 0\n    };\n  }\n  if (utils.getTopWindowLocation().protocol === 'https:') {\n    imp.secure = 1;\n  }\n  return imp;\n}\n\n/**\n * Builds complete rtb request\n * @param imps collection of impressions\n * @param auctionId\n */\nfunction buildRtbRequest(imps, auctionId) {\n  let req = {\n    'id': auctionId,\n    'imp': imps,\n    'site': createSite(),\n    'at': 1,\n    'device': {\n      'ip': 'caller',\n      'ua': 'caller',\n      'js': 1,\n      'language': getLanguage()\n    },\n    'ext': {\n      'adk_usersync': 1\n    }\n  };\n  if (utils.getDNT()) {\n    req.device.dnt = 1;\n  }\n  return req;\n}\n\nfunction getLanguage() {\n  const language = navigator.language ? 'language' : 'userLanguage';\n  return navigator[language].split('-')[0];\n}\n\n/**\n * Creates site description object\n */\nfunction createSite() {\n  var location = utils.getTopWindowLocation();\n  return {\n    'domain': location.hostname,\n    'page': location.href.split('?')[0]\n  };\n}\n\n/**\n *  Format creative with optional nurl call\n *  @param bid rtb Bid object\n */\nfunction formatAdMarkup(bid) {\n  var adm = bid.adm;\n  if ('nurl' in bid) {\n    adm += utils.createTrackPixelHtml(`${bid.nurl}&px=1`);\n  }\n  return `<!DOCTYPE html><html><head><title></title><body style='margin:0px;padding:0px;'>${adm}</body></head>`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rtbdemandadkBidAdapter.js","import * as utils from 'src/utils';\nimport { BANNER } from 'src/mediaTypes';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'rtbhouse';\nconst REGIONS = ['prebid-eu', 'prebid-us', 'prebid-asia'];\nconst ENDPOINT_URL = 'creativecdn.com/bidder/prebid/bids';\nconst DEFAULT_CURRENCY_ARR = ['USD']; // NOTE - USD is the only supported currency right now; Hardcoded for bids\n\n/**\n * Helpers\n */\n\nfunction buildEndpointUrl(region) {\n  return 'https://' + region + '.' + ENDPOINT_URL;\n}\n\n/**\n * Produces an OpenRTBImpression from a slot config.\n */\nfunction mapImpression(slot) {\n  return {\n    id: slot.bidId,\n    banner: mapBanner(slot),\n    tagid: slot.adUnitCode.toString(),\n  };\n}\n\n/**\n * Produces an OpenRTB Banner object for the slot given.\n */\nfunction mapBanner(slot) {\n  return {\n    w: slot.sizes[0][0],\n    h: slot.sizes[0][1],\n    format: mapSizes(slot.sizes)\n  };\n}\n\n/**\n * Produce openRTB banner.format object\n */\nfunction mapSizes(slotSizes) {\n  const format = [];\n  slotSizes.forEach(elem => {\n    format.push({\n      w: elem[0],\n      h: elem[1]\n    });\n  });\n  return format;\n}\n\n/**\n * Produces an OpenRTB site object.\n */\nfunction mapSite(validRequest) {\n  const pubId = validRequest && validRequest.length > 0 ? validRequest[0].params.publisherId : 'unknown';\n  return {\n    publisher: {\n      id: pubId.toString(),\n    },\n    page: utils.getTopWindowUrl(),\n    name: utils.getOrigin()\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: function (bid) {\n    return !!(includes(REGIONS, bid.params.region) && bid.params.publisherId);\n  },\n  buildRequests: function (validBidRequests, bidderRequest) {\n    const request = {\n      id: validBidRequests[0].auctionId,\n      imp: validBidRequests.map(slot => mapImpression(slot)),\n      site: mapSite(validBidRequests),\n      cur: DEFAULT_CURRENCY_ARR,\n      test: validBidRequests[0].params.test || 0\n    };\n    if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.gdprApplies) {\n      const consentStr = (bidderRequest.gdprConsent.consentString)\n        ? bidderRequest.gdprConsent.consentString.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '') : '';\n      const gdpr = bidderRequest.gdprConsent.gdprApplies ? 1 : 0;\n      request.regs = {ext: {gdpr: gdpr}};\n      request.user = {ext: {consent: consentStr}};\n    };\n\n    return {\n      method: 'POST',\n      url: buildEndpointUrl(validBidRequests[0].params.region),\n      data: JSON.stringify(request)\n    };\n  },\n  interpretResponse: function (serverResponse, originalRequest) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n\n    if (utils.isArray(serverResponse)) {\n      serverResponse.forEach(serverBid => {\n        if (serverBid.price !== 0) {\n          const bid = {\n            requestId: serverBid.impid,\n            mediaType: BANNER,\n            cpm: serverBid.price,\n            creativeId: serverBid.adid,\n            ad: serverBid.adm,\n            width: serverBid.w,\n            height: serverBid.h,\n            ttl: 55,\n            netRevenue: true,\n            currency: 'USD'\n          };\n          bids.push(bid);\n        }\n      });\n    }\n    return bids;\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rtbhouseBidAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\nimport { ajax } from 'src/ajax';\nimport { config } from 'src/config';\nimport * as utils from 'src/utils';\n\nconst {\n  EVENTS: {\n    AUCTION_INIT,\n    AUCTION_END,\n    BID_REQUESTED,\n    BID_RESPONSE,\n    BIDDER_DONE,\n    BID_TIMEOUT,\n    BID_WON,\n    SET_TARGETING\n  },\n  STATUS: {\n    GOOD,\n    NO_BID\n  }\n} = CONSTANTS;\n\nlet serverConfig;\nconfig.getConfig('s2sConfig', ({s2sConfig}) => {\n  serverConfig = s2sConfig;\n});\n\nexport const SEND_TIMEOUT = 3000;\nconst INTEGRATION = 'pbjs';\n\nconst cache = {\n  auctions: {},\n  targeting: {},\n  timeouts: {},\n};\n\n// basically lodash#pick that also allows transformation functions and property renaming\nfunction _pick(obj, properties) {\n  return properties.reduce((newObj, prop, i) => {\n    if (typeof prop === 'function') {\n      return newObj;\n    }\n\n    let newProp = prop;\n    let match = prop.match(/^(.+?)\\sas\\s(.+?)$/i);\n\n    if (match) {\n      prop = match[1];\n      newProp = match[2];\n    }\n\n    let value = obj[prop];\n    if (typeof properties[i + 1] === 'function') {\n      value = properties[i + 1](value, newObj);\n    }\n    if (typeof value !== 'undefined') {\n      newObj[newProp] = value;\n    }\n\n    return newObj;\n  }, {});\n}\n\nfunction stringProperties(obj) {\n  return Object.keys(obj).reduce((newObj, prop) => {\n    let value = obj[prop];\n    if (typeof value === 'number') {\n      value = value.toFixed(3);\n    } else if (typeof value !== 'string') {\n      value = String(value);\n    }\n    newObj[prop] = value;\n    return newObj;\n  }, {});\n}\n\nfunction sizeToDimensions(size) {\n  return {\n    width: size.w || size[0],\n    height: size.h || size[1]\n  };\n}\n\nfunction validMediaType(type) {\n  return ['banner', 'native', 'video'].indexOf(type) !== -1;\n}\n\nfunction formatSource(src) {\n  if (typeof src === 'undefined') {\n    src = 'client';\n  } else if (src === 's2s') {\n    src = 'server';\n  }\n  return src.toLowerCase();\n}\n\nfunction sendMessage(auctionId, bidWonId) {\n  function formatBid(bid) {\n    return _pick(bid, [\n      'bidder',\n      'bidId',\n      'status',\n      'error',\n      'source', (source, bid) => {\n        if (source) {\n          return source;\n        }\n        return serverConfig && Array.isArray(serverConfig.bidders) && serverConfig.bidders.indexOf(bid.bidder) !== -1\n          ? 'server' : 'client'\n      },\n      'clientLatencyMillis',\n      'serverLatencyMillis',\n      'params',\n      'bidResponse', bidResponse => bidResponse ? _pick(bidResponse, [\n        'bidPriceUSD',\n        'dealId',\n        'dimensions',\n        'mediaType'\n      ]) : undefined\n    ]);\n  }\n  function formatBidWon(bid) {\n    return Object.assign(formatBid(bid), _pick(bid.adUnit, [\n      'adUnitCode',\n      'transactionId',\n      'videoAdFormat', () => bid.videoAdFormat,\n      'mediaTypes'\n    ]), {\n      adserverTargeting: stringProperties(cache.targeting[bid.adUnit.adUnitCode] || {}),\n      bidwonStatus: 'success', // hard-coded for now\n      accountId,\n      samplingFactor\n    });\n  }\n  let referrer = config.getConfig('pageUrl') || utils.getTopWindowUrl();\n  let message = {\n    eventTimeMillis: Date.now(),\n    integration: INTEGRATION,\n    version: '1.25.0-pre',\n    referrerUri: referrer\n  };\n  let auctionCache = cache.auctions[auctionId];\n  if (auctionCache && !auctionCache.sent) {\n    let adUnitMap = Object.keys(auctionCache.bids).reduce((adUnits, bidId) => {\n      let bid = auctionCache.bids[bidId];\n      let adUnit = adUnits[bid.adUnit.adUnitCode];\n      if (!adUnit) {\n        adUnit = adUnits[bid.adUnit.adUnitCode] = _pick(bid.adUnit, [\n          'adUnitCode',\n          'transactionId',\n          'mediaTypes',\n          'dimensions',\n          'adserverTargeting', () => stringProperties(cache.targeting[bid.adUnit.adUnitCode] || {})\n        ]);\n        adUnit.bids = [];\n      }\n\n      if (bid.videoAdFormat && !adUnit.videoAdFormat) {\n        adUnit.videoAdFormat = bid.videoAdFormat;\n      }\n\n      // determine adUnit.status from its bid statuses.  Use priority below to determine, higher index is better\n      let statusPriority = ['error', 'no-bid', 'success'];\n      if (statusPriority.indexOf(bid.status) > statusPriority.indexOf(adUnit.status)) {\n        adUnit.status = bid.status;\n      }\n\n      adUnit.bids.push(formatBid(bid));\n\n      return adUnits;\n    }, {});\n\n    let auction = {\n      clientTimeoutMillis: auctionCache.timeout,\n      samplingFactor,\n      accountId,\n      adUnits: Object.keys(adUnitMap).map(i => adUnitMap[i])\n    };\n\n    if (serverConfig) {\n      auction.serverTimeoutMillis = serverConfig.timeout;\n    }\n\n    message.auctions = [auction];\n\n    let bidsWon = Object.keys(auctionCache.bidsWon).reduce((memo, adUnitCode) => {\n      let bidId = auctionCache.bidsWon[adUnitCode];\n      if (bidId) {\n        memo.push(formatBidWon(auctionCache.bids[bidId]));\n      }\n      return memo;\n    }, []);\n\n    if (bidsWon.length > 0) {\n      message.bidsWon = bidsWon;\n    }\n\n    auctionCache.sent = true;\n  } else if (bidWonId && auctionCache && auctionCache.bids[bidWonId]) {\n    message.bidsWon = [\n      formatBidWon(auctionCache.bids[bidWonId])\n    ];\n  }\n\n  ajax(\n    this.getUrl(),\n    null,\n    JSON.stringify(message),\n    {\n      contentType: 'application/json'\n    }\n  );\n}\n\nfunction parseBidResponse(bid) {\n  return _pick(bid, [\n    'getCpmInNewCurrency as bidPriceUSD', (fn) => {\n      if (bid.currency === 'USD') {\n        return Number(bid.cpm);\n      }\n      // use currency conversion function if present\n      if (typeof fn === 'function') {\n        return Number(fn('USD'));\n      }\n      // TODO: throw error or something if not USD and currency module wasn't present?\n    },\n    'dealId',\n    'status',\n    'mediaType',\n    'dimensions', () => _pick(bid, [\n      'width',\n      'height'\n    ])\n  ]);\n}\n\nlet samplingFactor = 1;\nlet accountId;\n\nlet baseAdapter = adapter({analyticsType: 'endpoint'});\nlet rubiconAdapter = Object.assign({}, baseAdapter, {\n  enableAnalytics(config = {}) {\n    let error = false;\n    samplingFactor = 1;\n\n    if (typeof config.options === 'object') {\n      if (config.options.accountId) {\n        accountId = Number(config.options.accountId);\n      }\n      if (config.options.endpoint) {\n        this.getUrl = () => config.options.endpoint;\n      } else {\n        utils.logError('required endpoint missing from rubicon analytics');\n        error = true;\n      }\n      if (typeof config.options.sampling !== 'undefined') {\n        samplingFactor = 1 / parseFloat(config.options.sampling);\n      }\n      if (typeof config.options.samplingFactor !== 'undefined') {\n        if (typeof config.options.sampling !== 'undefined') {\n          utils.logWarn('Both options.samplingFactor and options.sampling enabled in rubicon analytics, defaulting to samplingFactor');\n        }\n        samplingFactor = parseFloat(config.options.samplingFactor);\n        config.options.sampling = 1 / samplingFactor;\n      }\n    }\n\n    let validSamplingFactors = [1, 10, 20, 40, 100];\n    if (validSamplingFactors.indexOf(samplingFactor) === -1) {\n      error = true;\n      utils.logError('invalid samplingFactor for rubicon analytics: ' + samplingFactor + ', must be one of ' + validSamplingFactors.join(', '));\n    } else if (!accountId) {\n      error = true;\n      utils.logError('required accountId missing for rubicon analytics');\n    }\n\n    if (!error) {\n      baseAdapter.enableAnalytics.call(this, config);\n    }\n  },\n  disableAnalytics() {\n    this.getUrl = baseAdapter.getUrl;\n    accountId = null;\n    baseAdapter.disableAnalytics.apply(this, arguments);\n  },\n  track({eventType, args}) {\n    switch (eventType) {\n      case AUCTION_INIT:\n        let cacheEntry = _pick(args, [\n          'timestamp',\n          'timeout'\n        ]);\n        cacheEntry.bids = {};\n        cacheEntry.bidsWon = {};\n        cache.auctions[args.auctionId] = cacheEntry;\n        break;\n      case BID_REQUESTED:\n        Object.assign(cache.auctions[args.auctionId].bids, args.bids.reduce((memo, bid) => {\n          // mark adUnits we expect bidWon events for\n          cache.auctions[args.auctionId].bidsWon[bid.adUnitCode] = false;\n\n          memo[bid.bidId] = _pick(bid, [\n            'bidder', bidder => bidder.toLowerCase(),\n            'bidId',\n            'status', () => 'no-bid', // default a bid to no-bid until response is recieved or bid is timed out\n            'finalSource as source',\n            'params', (params, bid) => {\n              switch (bid.bidder) {\n                // specify bidder params we want here\n                case 'rubicon':\n                  return _pick(params, [\n                    'accountId',\n                    'siteId',\n                    'zoneId'\n                  ]);\n              }\n            },\n            'videoAdFormat', (_, cachedBid) => {\n              if (cachedBid.bidder === 'rubicon') {\n                return ({\n                  201: 'pre-roll',\n                  202: 'interstitial',\n                  203: 'outstream',\n                  204: 'mid-roll',\n                  205: 'post-roll',\n                  207: 'vertical'\n                })[utils.deepAccess(bid, 'params.video.size_id')];\n              } else {\n                let startdelay = parseInt(utils.deepAccess(bid, 'params.video.startdelay'), 10);\n                if (!isNaN(startdelay)) {\n                  if (startdelay > 0) {\n                    return 'mid-roll';\n                  }\n                  return ({\n                    '0': 'pre-roll',\n                    '-1': 'mid-roll',\n                    '-2': 'post-roll'\n                  })[startdelay]\n                }\n              }\n            },\n            'adUnit', () => _pick(bid, [\n              'adUnitCode',\n              'transactionId',\n              'sizes as dimensions', sizes => sizes.map(sizeToDimensions),\n              'mediaTypes', (types) => {\n                if (bid.mediaType && validMediaType(bid.mediaType)) {\n                  return [bid.mediaType];\n                }\n                if (Array.isArray(types)) {\n                  return types.filter(validMediaType);\n                }\n                if (typeof types === 'object') {\n                  if (!bid.sizes) {\n                    bid.dimensions = [];\n                    utils._each(types, (type) =>\n                      bid.dimensions = bid.dimensions.concat(\n                        type.sizes.map(sizeToDimensions)\n                      )\n                    );\n                  }\n                  return Object.keys(types).filter(validMediaType);\n                }\n                return ['banner'];\n              }\n            ])\n          ]);\n          return memo;\n        }, {}));\n        break;\n      case BID_RESPONSE:\n        let bid = cache.auctions[args.auctionId].bids[args.adId];\n        bid.source = formatSource(bid.source || args.source);\n        switch (args.getStatusCode()) {\n          case GOOD:\n            bid.status = 'success';\n            delete bid.error; // it's possible for this to be set by a previous timeout\n            break;\n          case NO_BID:\n            bid.status = 'no-bid';\n            delete bid.error;\n            break;\n          default:\n            bid.status = 'error';\n            bid.error = {\n              code: 'request-error'\n            };\n        }\n        bid.clientLatencyMillis = Date.now() - cache.auctions[args.auctionId].timestamp;\n        bid.bidResponse = parseBidResponse(args);\n        break;\n      case BIDDER_DONE:\n        args.bids.forEach(bid => {\n          let cachedBid = cache.auctions[bid.auctionId].bids[bid.bidId || bid.adId];\n          if (typeof bid.serverResponseTimeMs !== 'undefined') {\n            cachedBid.serverLatencyMillis = bid.serverResponseTimeMs;\n          }\n          if (!cachedBid.status) {\n            cachedBid.status = 'no-bid';\n          }\n          if (!cachedBid.clientLatencyMillis) {\n            cachedBid.clientLatencyMillis = Date.now() - cache.auctions[bid.auctionId].timestamp;\n          }\n        });\n        break;\n      case SET_TARGETING:\n        Object.assign(cache.targeting, args);\n        break;\n      case BID_WON:\n        let auctionCache = cache.auctions[args.auctionId];\n        auctionCache.bidsWon[args.adUnitCode] = args.adId;\n\n        // check if this BID_WON missed the boat, if so send by itself\n        if (auctionCache.sent === true) {\n          sendMessage.call(this, args.auctionId, args.adId);\n        } else if (Object.keys(auctionCache.bidsWon).reduce((memo, adUnitCode) => {\n          // only send if we've received bidWon events for all adUnits in auction\n          memo = memo && auctionCache.bidsWon[adUnitCode];\n          return memo;\n        }, true)) {\n          clearTimeout(cache.timeouts[args.auctionId]);\n          delete cache.timeouts[args.auctionId];\n\n          sendMessage.call(this, args.auctionId);\n        }\n        break;\n      case AUCTION_END:\n        // start timer to send batched payload just in case we don't hear any BID_WON events\n        cache.timeouts[args.auctionId] = setTimeout(() => {\n          sendMessage.call(this, args.auctionId);\n        }, SEND_TIMEOUT);\n        break;\n      case BID_TIMEOUT:\n        args.forEach(badBid => {\n          let auctionCache = cache.auctions[badBid.auctionId];\n          let bid = auctionCache.bids[badBid.bidId || badBid.adId];\n          bid.status = 'error';\n          bid.error = {\n            code: 'timeout-error'\n          };\n        });\n        break;\n    }\n  }\n});\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: rubiconAdapter,\n  code: 'rubicon'\n});\n\nexport default rubiconAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rubiconAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\nimport {BANNER, VIDEO} from 'src/mediaTypes';\n\nconst INTEGRATION = 'pbjs_lite_v1.25.0-pre';\n\nfunction isSecure() {\n  return location.protocol === 'https:';\n}\n\n// use protocol relative urls for http or https\nexport const FASTLANE_ENDPOINT = '//fastlane.rubiconproject.com/a/api/fastlane.json';\nexport const VIDEO_ENDPOINT = '//fastlane-adv.rubiconproject.com/v1/auction/video';\nexport const SYNC_ENDPOINT = 'https://eus.rubiconproject.com/usync.html';\n\nconst TIMEOUT_BUFFER = 500;\n\nvar sizeMap = {\n  1: '468x60',\n  2: '728x90',\n  5: '120x90',\n  8: '120x600',\n  9: '160x600',\n  10: '300x600',\n  13: '200x200',\n  14: '250x250',\n  15: '300x250',\n  16: '336x280',\n  19: '300x100',\n  31: '980x120',\n  32: '250x360',\n  33: '180x500',\n  35: '980x150',\n  37: '468x400',\n  38: '930x180',\n  43: '320x50',\n  44: '300x50',\n  48: '300x300',\n  53: '1024x768',\n  54: '300x1050',\n  55: '970x90',\n  57: '970x250',\n  58: '1000x90',\n  59: '320x80',\n  60: '320x150',\n  61: '1000x1000',\n  64: '580x500',\n  65: '640x480',\n  67: '320x480',\n  68: '1800x1000',\n  72: '320x320',\n  73: '320x160',\n  78: '980x240',\n  79: '980x300',\n  80: '980x400',\n  83: '480x300',\n  94: '970x310',\n  96: '970x210',\n  101: '480x320',\n  102: '768x1024',\n  103: '480x280',\n  108: '320x240',\n  113: '1000x300',\n  117: '320x100',\n  125: '800x250',\n  126: '200x600',\n  144: '980x600',\n  159: '320x250',\n  195: '600x300',\n  199: '640x200',\n  213: '1030x590',\n  214: '980x360',\n  229: '320x180',\n  232: '580x400',\n  257: '400x600'\n};\nutils._each(sizeMap, (item, key) => sizeMap[item] = key);\n\nexport const spec = {\n  code: 'rubicon',\n  aliases: ['rubiconLite'],\n  supportedMediaTypes: [BANNER, VIDEO],\n  /**\n   * @param {object} bid\n   * @return boolean\n   */\n  isBidRequestValid: function (bid) {\n    if (typeof bid.params !== 'object') {\n      return false;\n    }\n\n    if (!/^\\d+$/.test(bid.params.accountId)) {\n      return false;\n    }\n\n    return !!bidType(bid, true);\n  },\n  /**\n   * @param {BidRequest[]} bidRequests\n   * @param bidderRequest\n   * @return ServerRequest[]\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    // separate video bids because the requests are structured differently\n    let requests = [];\n    const videoRequests = bidRequests.filter(bidRequest => bidType(bidRequest) === 'video').map(bidRequest => {\n      bidRequest.startTime = new Date().getTime();\n\n      let params = bidRequest.params;\n      let size = parseSizes(bidRequest);\n\n      let data = {\n        page_url: _getPageUrl(bidRequest),\n        resolution: _getScreenResolution(),\n        account_id: params.accountId,\n        integration: INTEGRATION,\n        'x_source.tid': bidRequest.transactionId,\n        timeout: bidderRequest.timeout - (Date.now() - bidderRequest.auctionStart + TIMEOUT_BUFFER),\n        stash_creatives: true,\n        slots: []\n      };\n\n      // Define the slot object\n      let slotData = {\n        site_id: params.siteId,\n        zone_id: params.zoneId,\n        position: params.position === 'atf' || params.position === 'btf' ? params.position : 'unknown',\n        floor: parseFloat(params.floor) > 0.01 ? params.floor : 0.01,\n        element_id: bidRequest.adUnitCode,\n        name: bidRequest.adUnitCode,\n        width: size[0],\n        height: size[1],\n        size_id: utils.deepAccess(bidRequest, `mediaTypes.${VIDEO}.context`) === 'outstream' ? 203 : params.video.size_id\n      };\n\n      if (params.video) {\n        data.ae_pass_through_parameters = params.video.aeParams;\n        slotData.language = params.video.language;\n      }\n\n      if (params.inventory && typeof params.inventory === 'object') {\n        slotData.inventory = params.inventory;\n      }\n\n      if (params.keywords && Array.isArray(params.keywords)) {\n        slotData.keywords = params.keywords;\n      }\n\n      if (params.visitor && typeof params.visitor === 'object') {\n        slotData.visitor = params.visitor;\n      }\n\n      data.slots.push(slotData);\n\n      if (bidderRequest.gdprConsent) {\n        // add 'gdpr' only if 'gdprApplies' is defined\n        if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n          data.gdpr = Number(bidderRequest.gdprConsent.gdprApplies);\n        }\n        data.gdpr_consent = bidderRequest.gdprConsent.consentString;\n      }\n\n      return {\n        method: 'POST',\n        url: VIDEO_ENDPOINT,\n        data,\n        bidRequest\n      }\n    });\n\n    if (config.getConfig('rubicon.singleRequest') !== true) {\n      // bids are not grouped if single request mode is not enabled\n      requests = videoRequests.concat(bidRequests.filter(bidRequest => bidType(bidRequest) === 'banner').map(bidRequest => {\n        const bidParams = spec.createSlotParams(bidRequest, bidderRequest);\n        return {\n          method: 'GET',\n          url: FASTLANE_ENDPOINT,\n          data: spec.getOrderedParams(bidParams).reduce((paramString, key) => {\n            const propValue = bidParams[key];\n            return ((utils.isStr(propValue) && propValue !== '') || utils.isNumber(propValue)) ? `${paramString}${key}=${encodeURIComponent(propValue)}&` : paramString;\n          }, '') + `slots=1&rand=${Math.random()}`,\n          bidRequest\n        };\n      }));\n    } else {\n      // single request requires bids to be grouped by site id into a single request\n      // note: utils.groupBy wasn't used because deep property access was needed\n      const nonVideoRequests = bidRequests.filter(bidRequest => bidType(bidRequest) === 'banner');\n      const groupedBidRequests = nonVideoRequests.reduce((groupedBids, bid) => {\n        (groupedBids[bid.params['siteId']] = groupedBids[bid.params['siteId']] || []).push(bid);\n        return groupedBids;\n      }, {});\n\n      requests = videoRequests.concat(Object.keys(groupedBidRequests).map(bidGroupKey => {\n        let bidsInGroup = groupedBidRequests[bidGroupKey];\n\n        // fastlane SRA has a limit of 10 slots\n        if (bidsInGroup.length > 10) {\n          utils.logWarn(`Rubicon bid adapter Warning: single request mode has a limit of 10 bids: ${bidsInGroup.length - 10} bids were not sent`);\n          bidsInGroup = bidsInGroup.slice(0, 10);\n        }\n\n        const combinedSlotParams = spec.combineSlotUrlParams(bidsInGroup.map(bidRequest => {\n          return spec.createSlotParams(bidRequest, bidderRequest);\n        }));\n\n        // SRA request returns grouped bidRequest arrays not a plain bidRequest\n        return {\n          method: 'GET',\n          url: FASTLANE_ENDPOINT,\n          data: spec.getOrderedParams(combinedSlotParams).reduce((paramString, key) => {\n            const propValue = combinedSlotParams[key];\n            return ((utils.isStr(propValue) && propValue !== '') || utils.isNumber(propValue)) ? `${paramString}${key}=${encodeURIComponent(propValue)}&` : paramString;\n          }, '') + `slots=${bidsInGroup.length}&rand=${Math.random()}`,\n          bidRequest: bidsInGroup,\n        };\n      }));\n    }\n    return requests;\n  },\n\n  getOrderedParams: function(params) {\n    const containsTgV = /^tg_v/\n    const containsTgI = /^tg_i/\n\n    const orderedParams = [\n      'account_id',\n      'site_id',\n      'zone_id',\n      'size_id',\n      'alt_size_ids',\n      'p_pos',\n      'gdpr',\n      'gdpr_consent',\n      'rf',\n      'dt.id',\n      'dt.keyv',\n      'dt.pref',\n      'p_geo.latitude',\n      'p_geo.longitude',\n      'kw'\n    ].concat(Object.keys(params).filter(item => containsTgV.test(item)))\n      .concat(Object.keys(params).filter(item => containsTgI.test(item)))\n      .concat([\n        'tk_flint',\n        'x_source.tid',\n        'p_screen_res',\n        'rp_floor',\n        'rp_secure',\n        'tk_user_key'\n      ]);\n\n    return orderedParams.concat(Object.keys(params).filter(item => (orderedParams.indexOf(item) === -1)));\n  },\n\n  /**\n   * @summary combines param values from an array of slots into a single semicolon delineated value\n   * or just one value if they are all the same.\n   * @param {Object[]} aSlotUrlParams - example [{p1: 'foo', p2: 'test'}, {p2: 'test'}, {p1: 'bar', p2: 'test'}]\n   * @return {Object} - example {p1: 'foo;;bar', p2: 'test'}\n   */\n  combineSlotUrlParams: function(aSlotUrlParams) {\n    // if only have params for one slot, return those params\n    if (aSlotUrlParams.length === 1) {\n      return aSlotUrlParams[0];\n    }\n\n    // reduce param values from all slot objects into an array of values in a single object\n    const oCombinedSlotUrlParams = aSlotUrlParams.reduce(function(oCombinedParams, oSlotUrlParams, iIndex) {\n      Object.keys(oSlotUrlParams).forEach(function(param) {\n        if (!oCombinedParams.hasOwnProperty(param)) {\n          oCombinedParams[param] = new Array(aSlotUrlParams.length); // initialize array;\n        }\n        // insert into the proper element of the array\n        oCombinedParams[param].splice(iIndex, 1, oSlotUrlParams[param]);\n      });\n\n      return oCombinedParams;\n    }, {});\n\n    // convert arrays into semicolon delimited strings\n    const re = new RegExp('^([^;]*)(;\\\\1)+$'); // regex to test for duplication\n\n    Object.keys(oCombinedSlotUrlParams).forEach(function(param) {\n      const sValues = oCombinedSlotUrlParams[param].join(';');\n      // consolidate param values into one value if they are all the same\n      const match = sValues.match(re);\n      oCombinedSlotUrlParams[param] = match ? match[1] : sValues;\n    });\n\n    return oCombinedSlotUrlParams;\n  },\n\n  /**\n   * @param {BidRequest} bidRequest\n   * @param {Object} bidderRequest\n   * @returns {Object} - object key values named and formatted as slot params\n   */\n  createSlotParams: function(bidRequest, bidderRequest) {\n    bidRequest.startTime = new Date().getTime();\n\n    const params = bidRequest.params;\n\n    // use rubicon sizes if provided, otherwise adUnit.sizes\n    const parsedSizes = parseSizes(bidRequest);\n\n    const [latitude, longitude] = params.latLong || [];\n\n    const data = {\n      'account_id': params.accountId,\n      'site_id': params.siteId,\n      'zone_id': params.zoneId,\n      'size_id': parsedSizes[0],\n      'alt_size_ids': parsedSizes.slice(1).join(',') || undefined,\n      'p_pos': params.position === 'atf' || params.position === 'btf' ? params.position : 'unknown',\n      'rp_floor': (params.floor = parseFloat(params.floor)) > 0.01 ? params.floor : 0.01,\n      'rp_secure': isSecure() ? '1' : '0',\n      'tk_flint': INTEGRATION,\n      'x_source.tid': bidRequest.transactionId,\n      'p_screen_res': _getScreenResolution(),\n      'kw': Array.isArray(params.keywords) ? params.keywords.join(',') : '',\n      'tk_user_key': params.userId,\n      'p_geo.latitude': isNaN(parseFloat(latitude)) ? undefined : parseFloat(latitude).toFixed(4),\n      'p_geo.longitude': isNaN(parseFloat(longitude)) ? undefined : parseFloat(longitude).toFixed(4),\n      'tg_fl.eid': bidRequest.code,\n      'rf': _getPageUrl(bidRequest)\n    };\n\n    if (bidderRequest.gdprConsent) {\n      // add 'gdpr' only if 'gdprApplies' is defined\n      if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n        data['gdpr'] = Number(bidderRequest.gdprConsent.gdprApplies);\n      }\n      data['gdpr_consent'] = bidderRequest.gdprConsent.consentString;\n    }\n\n    // visitor properties\n    if (params.visitor !== null && typeof params.visitor === 'object') {\n      Object.keys(params.visitor).forEach((key) => {\n        data[`tg_v.${key}`] = params.visitor[key].toString();\n      });\n    }\n\n    // inventory properties\n    if (params.inventory !== null && typeof params.inventory === 'object') {\n      Object.keys(params.inventory).forEach((key) => {\n        data[`tg_i.${key}`] = params.inventory[key].toString();\n      });\n    }\n\n    // digitrust properties\n    const digitrustParams = _getDigiTrustQueryParams();\n    Object.keys(digitrustParams).forEach(paramKey => {\n      data[paramKey] = digitrustParams[paramKey];\n    });\n\n    return data;\n  },\n\n  /**\n   * @param {*} responseObj\n   * @param {BidRequest|Object.<string, BidRequest[]>} bidRequest - if request was SRA the bidRequest argument will be a keyed BidRequest array object,\n   * non-SRA responses return a plain BidRequest object\n   * @return {Bid[]} An array of bids which\n   */\n  interpretResponse: function (responseObj, {bidRequest}) {\n    responseObj = responseObj.body;\n\n    // check overall response\n    if (!responseObj || typeof responseObj !== 'object') {\n      return [];\n    }\n\n    let ads = responseObj.ads;\n\n    // video ads array is wrapped in an object\n    if (typeof bidRequest === 'object' && !Array.isArray(bidRequest) && bidType(bidRequest) === 'video' && typeof ads === 'object') {\n      ads = ads[bidRequest.adUnitCode];\n    }\n\n    // check the ad response\n    if (!Array.isArray(ads) || ads.length < 1) {\n      return [];\n    }\n\n    return ads.reduce((bids, ad, i) => {\n      if (ad.status !== 'ok') {\n        return bids;\n      }\n\n      // associate bidRequests; assuming ads matches bidRequest\n      const associatedBidRequest = Array.isArray(bidRequest) ? bidRequest[i] : bidRequest;\n\n      if (associatedBidRequest && typeof associatedBidRequest === 'object') {\n        let bid = {\n          requestId: associatedBidRequest.bidId,\n          currency: 'USD',\n          creativeId: ad.creative_id || `${ad.network || ''}-${ad.advertiser || ''}`,\n          cpm: ad.cpm || 0,\n          dealId: ad.deal,\n          ttl: 300, // 5 minutes\n          netRevenue: config.getConfig('rubicon.netRevenue') || false,\n          rubicon: {\n            advertiserId: ad.advertiser, networkId: ad.network\n          }\n        };\n\n        if (ad.creative_type) {\n          bid.mediaType = ad.creative_type;\n        }\n\n        if (ad.creative_type === VIDEO) {\n          bid.width = associatedBidRequest.params.video.playerWidth;\n          bid.height = associatedBidRequest.params.video.playerHeight;\n          bid.vastUrl = ad.creative_depot_url;\n          bid.impression_id = ad.impression_id;\n          bid.videoCacheKey = ad.impression_id;\n        } else {\n          bid.ad = _renderCreative(ad.script, ad.impression_id);\n          [bid.width, bid.height] = sizeMap[ad.size_id].split('x').map(num => Number(num));\n        }\n\n        // add server-side targeting\n        bid.rubiconTargeting = (Array.isArray(ad.targeting) ? ad.targeting : [])\n          .reduce((memo, item) => {\n            memo[item.key] = item.values[0];\n            return memo;\n          }, {'rpfl_elemid': associatedBidRequest.adUnitCode});\n\n        bids.push(bid);\n      } else {\n        utils.logError(`Rubicon bid adapter Error: bidRequest undefined at index position:${i}`, bidRequest, responseObj);\n      }\n\n      return bids;\n    }, []).sort((adA, adB) => {\n      return (adB.cpm || 0.0) - (adA.cpm || 0.0);\n    });\n  },\n  getUserSyncs: function (syncOptions, responses, gdprConsent) {\n    if (!hasSynced && syncOptions.iframeEnabled) {\n      // data is only assigned if params are available to pass to SYNC_ENDPOINT\n      let params = '';\n\n      if (gdprConsent && typeof gdprConsent.consentString === 'string') {\n        // add 'gdpr' only if 'gdprApplies' is defined\n        if (typeof gdprConsent.gdprApplies === 'boolean') {\n          params += `?gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`;\n        } else {\n          params += `?gdpr_consent=${gdprConsent.consentString}`;\n        }\n      }\n\n      hasSynced = true;\n      return {\n        type: 'iframe',\n        url: SYNC_ENDPOINT + params\n      };\n    }\n  },\n  /**\n   * Covert bid param types for S2S\n   * @param {Object} params bid params\n   * @param {Boolean} isOpenRtb boolean to check openrtb2 protocol\n   * @return {Object} params bid params\n   */\n  transformBidParams: function(params, isOpenRtb) {\n    return utils.convertTypes({\n      'accountId': 'number',\n      'siteId': 'number',\n      'zoneId': 'number'\n    }, params);\n  }\n};\n\nfunction _getScreenResolution() {\n  return [window.screen.width, window.screen.height].join('x');\n}\n\nfunction _getDigiTrustQueryParams() {\n  function getDigiTrustId() {\n    let digiTrustUser = window.DigiTrust && (config.getConfig('digiTrustId') || window.DigiTrust.getUser({member: 'T9QSFKPDN9'}));\n    return (digiTrustUser && digiTrustUser.success && digiTrustUser.identity) || null;\n  }\n\n  let digiTrustId = getDigiTrustId();\n  // Verify there is an ID and this user has not opted out\n  if (!digiTrustId || (digiTrustId.privacy && digiTrustId.privacy.optout)) {\n    return [];\n  }\n  return {\n    'dt.id': digiTrustId.id,\n    'dt.keyv': digiTrustId.keyv,\n    'dt.pref': 0\n  };\n}\n\n/**\n * @param {BidRequest} bidRequest\n * @returns {string}\n */\nfunction _getPageUrl(bidRequest) {\n  let pageUrl = config.getConfig('pageUrl');\n  if (bidRequest.params.referrer) {\n    pageUrl = bidRequest.params.referrer;\n  } else if (!pageUrl) {\n    pageUrl = utils.getTopWindowUrl();\n  }\n  return bidRequest.params.secure ? pageUrl.replace(/^http:/i, 'https:') : pageUrl;\n}\n\nfunction _renderCreative(script, impId) {\n  return `<html>\n<head><script type='text/javascript'>inDapIF=true;</script></head>\n<body style='margin : 0; padding: 0;'>\n<!-- Rubicon Project Ad Tag -->\n<div data-rp-impression-id='${impId}'>\n<script type='text/javascript'>${script}</script>\n</div>\n</body>\n</html>`;\n}\n\nfunction parseSizes(bid) {\n  let params = bid.params;\n  if (hasVideoMediaType(bid)) {\n    let size = [];\n    if (params.video && params.video.playerWidth && params.video.playerHeight) {\n      size = [\n        params.video.playerWidth,\n        params.video.playerHeight\n      ];\n    } else if (Array.isArray(utils.deepAccess(bid, 'mediaTypes.video.playerSize')) && bid.mediaTypes.video.playerSize.length === 1) {\n      size = bid.mediaTypes.video.playerSize[0];\n    } else if (Array.isArray(bid.sizes) && bid.sizes.length > 0 && Array.isArray(bid.sizes[0]) && bid.sizes[0].length > 1) {\n      size = bid.sizes[0];\n    }\n    return size;\n  }\n\n  // deprecated: temp legacy support\n  let sizes = [];\n  if (Array.isArray(params.sizes)) {\n    sizes = params.sizes;\n  } else if (typeof utils.deepAccess(bid, 'mediaTypes.banner.sizes') !== 'undefined') {\n    sizes = mapSizes(bid.mediaTypes.banner.sizes);\n  } else if (Array.isArray(bid.sizes) && bid.sizes.length > 0) {\n    sizes = mapSizes(bid.sizes)\n  } else {\n    utils.logWarn('Warning: no sizes are setup or found');\n  }\n\n  return masSizeOrdering(sizes);\n}\n\nfunction mapSizes(sizes) {\n  return utils.parseSizesInput(sizes)\n  // map sizes while excluding non-matches\n    .reduce((result, size) => {\n      let mappedSize = parseInt(sizeMap[size], 10);\n      if (mappedSize) {\n        result.push(mappedSize);\n      }\n      return result;\n    }, []);\n}\n\n/**\n * Test if bid has mediaType or mediaTypes set for video.\n * note: 'mediaType' has been deprecated, however support will remain for a transitional period\n * @param {BidRequest} bidRequest\n * @returns {boolean}\n */\nexport function hasVideoMediaType(bidRequest) {\n  return bidRequest.mediaType === VIDEO || typeof utils.deepAccess(bidRequest, `mediaTypes.${VIDEO}`) !== 'undefined';\n}\n\n/**\n * Determine bidRequest mediaType\n * @param bid the bid to test\n * @param log whether we should log errors/warnings for invalid bids\n * @returns {string|undefined} Returns 'video' or 'banner' if resolves to a type, or undefined otherwise (invalid).\n */\nfunction bidType(bid, log = false) {\n  let validVideo;\n  if (hasVideoMediaType(bid)) {\n    validVideo = true;\n\n    if (utils.deepAccess(bid, `mediaTypes.${VIDEO}.context`) === 'instream' || bid.mediaType === VIDEO) {\n      if (typeof utils.deepAccess(bid, 'params.video.size_id') === 'undefined') {\n        if (log) {\n          utils.logError('Rubicon bid adapter Error: size id is missing for instream video request.');\n        }\n        validVideo = false;\n      }\n    } else if (utils.deepAccess(bid, `mediaTypes.${VIDEO}.context`) === 'outstream') {\n      if (utils.deepAccess(bid, 'params.video.size_id') !== 203) {\n        if (log) {\n          utils.logWarn('Rubicon bid adapter Warning: outstream video is sending invalid size id, converting size id to 203.');\n        }\n      }\n    } else {\n      if (log) {\n        utils.logError('Rubicon bid adapter Error: no instream or outstream context defined in mediaTypes.');\n      }\n      validVideo = false;\n    }\n    if (validVideo) {\n      if (typeof utils.deepAccess(bid, `mediaTypes.${BANNER}`) !== 'undefined') {\n        if (log) {\n          utils.logWarn('Rubicon bid adapter Warning: video and banner requested for same adUnit, continuing with video request, multi-format request is not supported by rubicon yet.');\n        }\n      }\n      return 'video';\n    } else if (typeof utils.deepAccess(bid, `mediaTypes.${BANNER}`) === 'undefined') {\n      return undefined;\n    }\n  }\n  if (parseSizes(bid).length > 0) {\n    if (log && validVideo === false) {\n      utils.logWarn('Rubicon bid adapter Warning: invalid video requested for adUnit, continuing with banner request.');\n    }\n    return 'banner';\n  }\n}\n\nexport function masSizeOrdering(sizes) {\n  const MAS_SIZE_PRIORITY = [15, 2, 9];\n\n  return sizes.sort((first, second) => {\n    // sort by MAS_SIZE_PRIORITY priority order\n    const firstPriority = MAS_SIZE_PRIORITY.indexOf(first);\n    const secondPriority = MAS_SIZE_PRIORITY.indexOf(second);\n\n    if (firstPriority > -1 || secondPriority > -1) {\n      if (firstPriority === -1) {\n        return 1;\n      }\n      if (secondPriority === -1) {\n        return -1;\n      }\n      return firstPriority - secondPriority;\n    }\n\n    // and finally ascending order\n    return first - second;\n  });\n}\n\nvar hasSynced = false;\n\nexport function resetUserSync() {\n  hasSynced = false;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rubiconBidAdapter.js","import * as utils from 'src/utils';\nimport {BANNER} from 'src/mediaTypes';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\n\nconst BIDDER_CODE = 'rxrtb';\nconst DEFAULT_HOST = 'bid.rxrtb.bid';\nconst AUCTION_TYPE = 2;\nconst RESPONSE_TTL = 900;\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid: function (bidRequest) {\n    return 'params' in bidRequest && bidRequest.params.source !== undefined && bidRequest.params.id !== undefined && utils.isInteger(bidRequest.params.id) && bidRequest.params.token !== undefined;\n  },\n  buildRequests: function (validBidRequests) {\n    var requests = [];\n    for (let i = 0; i < validBidRequests.length; i++) {\n      let prebidReq = makePrebidRequest(validBidRequests[i]);\n      if (prebidReq) {\n        requests.push(prebidReq);\n      }\n    }\n\n    return requests;\n  },\n  interpretResponse: function (serverResponse, bidRequest) {\n    let rtbResp = serverResponse.body;\n    if ((!rtbResp) || (!rtbResp.seatbid)) {\n      return [];\n    }\n    let bidResponses = [];\n    for (let i = 0; i < rtbResp.seatbid.length; i++) {\n      let seatbid = rtbResp.seatbid[i];\n      for (let j = 0; j < seatbid.bid.length; j++) {\n        let bid = seatbid.bid[j];\n        let bidResponse = {\n          requestId: bid.impid,\n          cpm: bid.price,\n          width: bid.w,\n          height: bid.h,\n          mediaType: BANNER,\n          creativeId: bid.crid,\n          currency: rtbResp.cur || 'USD',\n          netRevenue: true,\n          ttl: bid.exp || RESPONSE_TTL,\n          ad: bid.adm\n        };\n        bidResponses.push(bidResponse);\n      }\n    }\n    return bidResponses;\n  },\n  getUserSyncs: function (syncOptions, serverResponses) {\n    return [];\n  }\n}\n\nregisterBidder(spec);\n\nfunction getDomain(url) {\n  var a = document.createElement('a');\n  a.href = url;\n\n  return a.host;\n}\n\nfunction makePrebidRequest(req) {\n  let host = req.params.host || DEFAULT_HOST;\n  let url = '//' + host + '/dsp?id=' + req.params.id + '&token=' + req.params.token;\n  let reqData = makeRtbRequest(req);\n  return {\n    method: 'POST',\n    url: url,\n    data: JSON.stringify(reqData)\n  };\n}\n\nfunction makeRtbRequest(req) {\n  let imp = [];\n  imp.push(makeImp(req));\n  return {\n    'id': req.auctionId,\n    'imp': imp,\n    'site': makeSite(req),\n    'device': makeDevice(),\n    'hb': 1,\n    'at': req.params.at || AUCTION_TYPE,\n    'cur': ['USD'],\n    'badv': req.params.badv || '',\n    'bcat': req.params.bcat || '',\n  };\n}\n\nfunction makeImp(req) {\n  let imp = {\n    'id': req.bidId,\n    'tagid': req.adUnitCode,\n    'banner': makeBanner(req)\n  };\n\n  if (req.params.bidfloor && isFinite(req.params.bidfloor)) {\n    imp.bidfloor = req.params.bidfloor\n  }\n\n  return imp;\n}\n\nfunction makeBanner(req) {\n  let format = [];\n  let banner = {};\n  for (let i = 0; i < req.sizes.length; i++) {\n    format.push({\n      w: req.sizes[i][0],\n      h: req.sizes[i][1]\n    });\n  }\n  banner.format = format;\n  if (req.params.pos && utils.isInteger(req.params.pos)) {\n    banner.pos = req.params.pos;\n  }\n  return banner;\n}\n\nfunction makeSite(req) {\n  return {\n    'id': req.params.source,\n    'domain': getDomain(config.getConfig('publisherDomain')),\n    'page': utils.getTopWindowUrl(),\n    'ref': utils.getTopWindowReferrer()\n  };\n}\n\nfunction makeDevice() {\n  return {\n    'ua': window.navigator.userAgent || '',\n    'ip': 1\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/rxrtbBidAdapter.js","import { config } from 'src/config';\nimport { setS2STestingModule } from 'src/adaptermanager';\n\nexport const SERVER = 'server';\nexport const CLIENT = 'client';\n\nvar testing = false; // whether testing is turned on\nvar bidSource = {}; // store bidder sources determined from s2sConfing bidderControl\n\n// load s2sConfig\nconfig.getConfig('s2sConfig', config => {\n  testing = config.s2sConfig && config.s2sConfig.testing;\n  calculateBidSources(config.s2sConfig);\n});\n\nexport function getSourceBidderMap(adUnits = []) {\n  var sourceBidders = {[SERVER]: {}, [CLIENT]: {}};\n\n  // bail if testing is not turned on\n  if (!testing) {\n    return {[SERVER]: [], [CLIENT]: []};\n  }\n\n  adUnits.forEach((adUnit) => {\n    // if any adUnit bidders specify a bidSource, include them\n    (adUnit.bids || []).forEach((bid) => {\n      // calculate the source once and store on bid object\n      bid.calcSource = bid.calcSource || getSource(bid.bidSource);\n      // if no bidSource at bid level, default to bidSource from bidder\n      bid.finalSource = bid.calcSource || bidSource[bid.bidder] || CLIENT; // default to client\n      // add bidder to sourceBidders data structure\n      sourceBidders[bid.finalSource][bid.bidder] = true;\n    });\n  });\n\n  // make sure all bidders in bidSource are in sourceBidders\n  Object.keys(bidSource).forEach((bidder) => {\n    sourceBidders[bidSource[bidder]][bidder] = true;\n  });\n\n  // return map of source => array of bidders\n  return {\n    [SERVER]: Object.keys(sourceBidders[SERVER]),\n    [CLIENT]: Object.keys(sourceBidders[CLIENT])\n  };\n}\n\n/**\n * @function calculateBidSources determines the source for each s2s bidder based on bidderControl weightings.  these can be overridden at the adUnit level\n * @param s2sConfig server-to-server configuration\n */\nfunction calculateBidSources(s2sConfig = {}) {\n  // bail if testing is not turned on\n  if (!testing) {\n    return;\n  }\n  bidSource = {}; // reset bid sources\n  // calculate bid source (server/client) for each s2s bidder\n  var bidderControl = s2sConfig.bidderControl || {};\n  (s2sConfig.bidders || []).forEach((bidder) => {\n    bidSource[bidder] = getSource(bidderControl[bidder] && bidderControl[bidder].bidSource) || SERVER; // default to server\n  });\n}\n\n/**\n * @function getSource() gets a random source based on the given sourceWeights (export just for testing)\n * @param sourceWeights mapping of relative weights of potential sources. for example {server: 1, client: 3} should do a server request 25% of the time and a client request 75% of the time.\n * @param bidSources list of possible bid sources: \"server\", \"client\".  In theory could get the sources from the sourceWeights keys, but this is publisher config defined, so bidSources let's us constrain that.\n * @return the chosen source (\"server\" or \"client\"), or undefined if none chosen\n */\nexport function getSource(sourceWeights = {}, bidSources = [SERVER, CLIENT]) {\n  var srcIncWeight = {}; // store incremental weights of each source\n  var totWeight = 0;\n  bidSources.forEach((source) => {\n    totWeight += (sourceWeights[source] || 0);\n    srcIncWeight[source] = totWeight;\n  });\n  if (!totWeight) return; // bail if no source weights\n  // choose a source randomly based on weights\n  var rndWeight = Math.random() * totWeight;\n  for (var i = 0; i < bidSources.length; i++) {\n    let source = bidSources[i];\n    // choose the first source with an incremental weight > random weight\n    if (rndWeight < srcIncWeight[source]) return source;\n  }\n}\n\n// inject the s2sTesting module into the adaptermanager rather than importing it\n// importing it causes the packager to include it even when it's not explicitly included in the build\nsetS2STestingModule(exports);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/s2sTesting.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'sara';\nconst ENDPOINT_URL = '//ad.sara.media/hb';\nconst ADAPTER_SYNC_URL = '//ad.sara.media/push_sync';\nconst TIME_TO_LIVE = 360;\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should be not empty',\n  emptySeatbid: 'Seatbid array from response has empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\n\n/**\n * Dentsu Aegis Network Marketplace Bid Adapter.\n * Contact: niels@baarsma.net\n *\n */\nexport const spec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n\n  buildRequests: function(validBidRequests) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n      reqId = bid.bidderRequestId;\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      r: reqId,\n    };\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: utils.parseQueryStringParameters(payload).replace(/\\&$/, ''),\n      bidsMap: bidsMap,\n    };\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL\n      }];\n    }\n  }\n}\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId, // bid.bidderRequestId,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid, // bid.bidId,\n          currency: 'USD',\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/saraBidAdapter.js","import * as utils from 'src/utils';\r\nimport {registerBidder} from 'src/adapters/bidderFactory';\r\nexport const spec = {\r\n  code: 'sekindoUM',\r\n  supportedMediaTypes: ['banner', 'video'],\r\n  /**\r\n   * Determines whether or not the given bid request is valid.\r\n   *\r\n   * @param {BidRequest} bid The bid params to validate.\r\n   * @return boolean True if this is a valid bid, and false otherwise.\r\n   */\r\n  isBidRequestValid: function(bid) {\r\n    if (bid.mediaType == 'video' || (typeof bid.mediaTypes == 'object' && typeof bid.mediaTypes.video == 'object')) {\r\n      if (typeof bid.params.video != 'object' || typeof bid.params.video.playerWidth == 'undefined' || typeof bid.params.video.playerHeight == 'undefined') {\r\n        return false;\r\n      }\r\n    }\r\n    return !!(bid.params.spaceId);\r\n  },\r\n  /**\r\n   * Make a server request from the list of BidRequests.\r\n   *\r\n   * @param {validBidRequests[]} - an array of bids\r\n   * @return ServerRequest Info describing the request to the server.\r\n   */\r\n  buildRequests: function(validBidRequests, bidderRequest) {\r\n    var pubUrl = null;\r\n    try {\r\n      if (window.top == window) {\r\n        pubUrl = window.location.href;\r\n      } else {\r\n        try {\r\n          pubUrl = window.top.location.href;\r\n        } catch (e2) {\r\n          pubUrl = document.referrer;\r\n        }\r\n      }\r\n    } catch (e1) {}\r\n\r\n    return validBidRequests.map(bidRequest => {\r\n      var subId = utils.getBidIdParameter('subId', bidRequest.params);\r\n      var spaceId = utils.getBidIdParameter('spaceId', bidRequest.params);\r\n      var bidfloor = utils.getBidIdParameter('bidfloor', bidRequest.params);\r\n      var protocol = (document.location.protocol === 'https:' ? 's' : '');\r\n      var queryString = '';\r\n\r\n      queryString = utils.tryAppendQueryString(queryString, 's', spaceId);\r\n      queryString = utils.tryAppendQueryString(queryString, 'subId', subId);\r\n      queryString = utils.tryAppendQueryString(queryString, 'pubUrl', pubUrl);\r\n      queryString = utils.tryAppendQueryString(queryString, 'hbTId', bidRequest.transactionId);\r\n      queryString = utils.tryAppendQueryString(queryString, 'hbBidId', bidRequest.bidId);\r\n      queryString = utils.tryAppendQueryString(queryString, 'hbver', '4');\r\n      queryString = utils.tryAppendQueryString(queryString, 'hbcb', '1');/// legasy\r\n      queryString = utils.tryAppendQueryString(queryString, 'dcpmflr', bidfloor);\r\n      queryString = utils.tryAppendQueryString(queryString, 'protocol', protocol);\r\n      queryString = utils.tryAppendQueryString(queryString, 'x', bidRequest.params.width);\r\n      queryString = utils.tryAppendQueryString(queryString, 'y', bidRequest.params.height);\r\n      if (bidderRequest && bidderRequest.gdprConsent) {\r\n        queryString = utils.tryAppendQueryString(queryString, 'gdprConsent', bidderRequest.gdprConsent.consentString);\r\n        queryString = utils.tryAppendQueryString(queryString, 'gdpr', (bidderRequest.gdprConsent.gdprApplies) ? '1' : '0');\r\n      }\r\n      if (bidRequest.mediaType === 'video' || (typeof bidRequest.mediaTypes == 'object' && typeof bidRequest.mediaTypes.video == 'object')) {\r\n        queryString = utils.tryAppendQueryString(queryString, 'x', bidRequest.params.playerWidth);\r\n        queryString = utils.tryAppendQueryString(queryString, 'y', bidRequest.params.playerHeight);\r\n        if (typeof vid_vastType != 'undefined') { // eslint-disable-line camelcase\r\n          queryString = utils.tryAppendQueryString(queryString, 'vid_vastType', bidRequest.params.vid_vastType);\r\n        }\r\n        if (typeof bidRequest.mediaTypes == 'object' && typeof bidRequest.mediaTypes.video == 'object' && typeof bidRequest.mediaTypes.video.context == 'string') {\r\n          queryString = utils.tryAppendQueryString(queryString, 'vid_context', bidRequest.mediaTypes.video.context);\r\n        }\r\n      }\r\n\r\n      var endpointUrl = 'http' + protocol + '://hb.sekindo.com/live/liveView.php';\r\n\r\n      return {\r\n        method: 'GET',\r\n        url: endpointUrl,\r\n        data: queryString,\r\n      };\r\n    });\r\n  },\r\n  /**\r\n   * Unpack the response from the server into a list of bids.\r\n   *\r\n   * @param {*} serverResponse A successful response from the server.\r\n   * @return {Bid[]} An array of bids which were nested inside the server.\r\n   */\r\n  interpretResponse: function(serverResponse, bidRequest) {\r\n    if (typeof serverResponse !== 'object') {\r\n      return [];\r\n    }\r\n\r\n    let bidResponses = [];\r\n    var bidResponse = {\r\n      requestId: serverResponse.body.id,\r\n      bidderCode: spec.code,\r\n      cpm: serverResponse.body.cpm,\r\n      width: serverResponse.body.width,\r\n      height: serverResponse.body.height,\r\n      creativeId: serverResponse.body.creativeId,\r\n      currency: serverResponse.body.currency,\r\n      netRevenue: serverResponse.body.netRevenue,\r\n      ttl: serverResponse.body.ttl\r\n    };\r\n    if (bidRequest.mediaType == 'video') {\r\n      if (typeof serverResponse.body.vastUrl != 'undefined') {\r\n        bidResponse.vastUrl = serverResponse.body.vastUrl;\r\n      } else {\r\n        bidResponse.vastXml = serverResponse.body.vastXml;\r\n      }\r\n    } else {\r\n      bidResponse.ad = serverResponse.body.ad;\r\n    }\r\n\r\n    bidResponses.push(bidResponse);\r\n    return bidResponses;\r\n  }\r\n}\r\nregisterBidder(spec);\r\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sekindoUMBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'serverbid';\n\nconst CONFIG = {\n  'serverbid': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'connectad': {\n    'BASE_URI': 'https://i.connectad.io/api/v2'\n  },\n  'onefiftytwo': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'insticator': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'adsparc': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'automatad': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'archon': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'buysellads': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  },\n  'answermedia': {\n    'BASE_URI': 'https://e.serverbid.com/api/v2'\n  }\n};\n\nlet siteId = 0;\nlet bidder = 'serverbid';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['connectad', 'onefiftytwo', 'insticator', 'adsparc', 'automatad', 'archon', 'buysellads', 'answermedia'],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.networkId && bid.params.siteId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n\n  buildRequests: function(validBidRequests) {\n    // Do we need to group by bidder? i.e. to make multiple requests for\n    // different endpoints.\n\n    let ret = {\n      method: 'POST',\n      url: '',\n      data: '',\n      bidRequest: []\n    };\n\n    if (validBidRequests.length < 1) {\n      return ret;\n    }\n\n    let ENDPOINT_URL;\n\n    // These variables are used in creating the user sync URL.\n    siteId = validBidRequests[0].params.siteId;\n    bidder = validBidRequests[0].bidder;\n\n    const data = Object.assign({\n      placements: [],\n      time: Date.now(),\n      user: {},\n      url: utils.getTopWindowUrl(),\n      referrer: document.referrer,\n      enableBotFiltering: true,\n      includePricingData: true,\n      parallel: true\n    }, validBidRequests[0].params);\n\n    validBidRequests.map(bid => {\n      let config = CONFIG[bid.bidder];\n      ENDPOINT_URL = config.BASE_URI;\n\n      const placement = Object.assign({\n        divName: bid.bidId,\n        adTypes: bid.adTypes || getSize(bid.sizes)\n      }, bid.params);\n\n      if (placement.networkId && placement.siteId) {\n        data.placements.push(placement);\n      }\n    });\n\n    ret.data = JSON.stringify(data);\n    ret.bidRequest = validBidRequests;\n    ret.url = ENDPOINT_URL;\n\n    return ret;\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    let bid;\n    let bids;\n    let bidId;\n    let bidObj;\n    let bidResponses = [];\n\n    bids = bidRequest.bidRequest;\n\n    serverResponse = (serverResponse || {}).body;\n    for (let i = 0; i < bids.length; i++) {\n      bid = {};\n      bidObj = bids[i];\n      bidId = bidObj.bidId;\n\n      if (serverResponse) {\n        const decision = serverResponse.decisions && serverResponse.decisions[bidId];\n        const price = decision && decision.pricing && decision.pricing.clearPrice;\n\n        if (decision && price) {\n          bid.requestId = bidId;\n          bid.cpm = price;\n          bid.width = decision.width;\n          bid.height = decision.height;\n          bid.ad = retrieveAd(decision);\n          bid.currency = 'USD';\n          bid.creativeId = decision.adId;\n          bid.ttl = 360;\n          bid.netRevenue = true;\n          bid.referrer = utils.getTopWindowUrl();\n\n          bidResponses.push(bid);\n        }\n      }\n    }\n\n    return bidResponses;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      if (bidder === 'connectad') {\n        return [{\n          type: 'iframe',\n          url: '//cdn.connectad.io/connectmyusers.php'\n        }];\n      } else {\n        return [{\n          type: 'iframe',\n          url: '//s.zkcdn.net/ss/' + siteId + '.html'\n        }];\n      }\n    } else {\n      utils.logWarn(bidder + ': Please enable iframe based user syncing.');\n    }\n  }\n};\n\nconst sizeMap = [\n  null,\n  '120x90',\n  '120x90',\n  '468x60',\n  '728x90',\n  '300x250',\n  '160x600',\n  '120x600',\n  '300x100',\n  '180x150',\n  '336x280',\n  '240x400',\n  '234x60',\n  '88x31',\n  '120x60',\n  '120x240',\n  '125x125',\n  '220x250',\n  '250x250',\n  '250x90',\n  '0x0',\n  '200x90',\n  '300x50',\n  '320x50',\n  '320x480',\n  '185x185',\n  '620x45',\n  '300x125',\n  '800x250'\n];\n\nsizeMap[77] = '970x90';\nsizeMap[123] = '970x250';\nsizeMap[43] = '300x600';\nsizeMap[286] = '970x66';\nsizeMap[3230] = '970x280';\nsizeMap[429] = '486x60';\nsizeMap[374] = '700x500';\nsizeMap[934] = '300x1050';\nsizeMap[1578] = '320x100';\nsizeMap[331] = '320x250';\nsizeMap[3301] = '320x267';\nsizeMap[2730] = '728x250';\n\nfunction getSize(sizes) {\n  const result = [];\n  sizes.forEach(function(size) {\n    const index = sizeMap.indexOf(size[0] + 'x' + size[1]);\n    if (index >= 0) {\n      result.push(index);\n    }\n  });\n  return result;\n}\n\nfunction retrieveAd(decision) {\n  return decision.contents && decision.contents[0] && decision.contents[0].body + utils.createTrackPixelHtml(decision.impressionUrl);\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/serverbidBidAdapter.js","import Adapter from 'src/adapter';\nimport bidfactory from 'src/bidfactory';\nimport * as utils from 'src/utils';\nimport adaptermanager from 'src/adaptermanager';\nimport { STATUS, S2S } from 'src/constants';\nimport { config } from 'src/config';\n\nconst TYPE = S2S.SRC;\nconst getConfig = config.getConfig;\nconst REQUIRED_S2S_CONFIG_KEYS = ['siteId', 'networkId', 'bidders'];\n\nlet _s2sConfig;\n\nconst bidder = 'serverbidServer';\n\nvar ServerBidServerAdapter;\nServerBidServerAdapter = function ServerBidServerAdapter() {\n  const baseAdapter = new Adapter('serverbidServer');\n\n  const BASE_URI = 'https://e.serverbid.com/api/v2';\n\n  const sizeMap = [\n    null,\n    '120x90',\n    '120x90',\n    '468x60',\n    '728x90',\n    '300x250',\n    '160x600',\n    '120x600',\n    '300x100',\n    '180x150',\n    '336x280',\n    '240x400',\n    '234x60',\n    '88x31',\n    '120x60',\n    '120x240',\n    '125x125',\n    '220x250',\n    '250x250',\n    '250x90',\n    '0x0',\n    '200x90',\n    '300x50',\n    '320x50',\n    '320x480',\n    '185x185',\n    '620x45',\n    '300x125',\n    '800x250'\n  ];\n\n  sizeMap[77] = '970x90';\n  sizeMap[123] = '970x250';\n  sizeMap[43] = '300x600';\n\n  function setS2sConfig(options) {\n    if (options.adapter != bidder) return;\n\n    let contains = (xs, x) => xs.indexOf(x) > -1;\n    let userConfig = Object.keys(options);\n\n    REQUIRED_S2S_CONFIG_KEYS.forEach(key => {\n      if (!contains(userConfig, key)) {\n        utils.logError(key + ' missing in server to server config');\n        return void 0; // void 0 to beat the linter\n      }\n    })\n\n    _s2sConfig = options;\n  }\n  getConfig('s2sConfig', ({s2sConfig}) => setS2sConfig(s2sConfig));\n\n  function getLocalConfig() {\n    return (_s2sConfig || {});\n  }\n\n  function _convertFields(bid) {\n    let safeBid = bid || {};\n    let converted = {};\n    let name = safeBid.bidder;\n    converted[name] = safeBid.params;\n    return converted;\n  }\n\n  baseAdapter.callBids = function(s2sBidRequest, bidRequests, addBidResponse, done, ajax) {\n    let params = s2sBidRequest;\n    let shouldDoWorkFn = function(bidRequest) {\n      return bidRequest &&\n        bidRequest.ad_units &&\n        utils.isArray(bidRequest.ad_units) &&\n        bidRequest.ad_units.length;\n    }\n    if (shouldDoWorkFn(params)) {\n      _callBids(s2sBidRequest, bidRequests, addBidResponse, done, ajax);\n    }\n  };\n\n  function _callBids(s2sBidRequest, bidRequests, addBidResponse, done, ajax) {\n    let bidRequest = s2sBidRequest;\n\n    const data = {\n      placements: [],\n      time: Date.now(),\n      user: {},\n      url: utils.getTopWindowUrl(),\n      referrer: document.referrer,\n      enableBotFiltering: true,\n      includePricingData: true,\n      parallel: true\n    };\n    const allBids = [];\n\n    for (let i = 0; i < bidRequest.ad_units.length; i++) {\n      let adunit = bidRequest.ad_units[i];\n      let siteId = _s2sConfig.siteId;\n      let networkId = getLocalConfig().networkId;\n      let sizes = adunit.sizes;\n\n      var bids = adunit.bids || [];\n      // one placement for each of the bids\n      for (let i = 0; i < bids.length; i++) {\n        const bid = bids[i];\n        bid.code = adunit.code;\n        allBids.push(bid);\n\n        const placement = Object.assign({}, {\n          divName: bid.bid_id,\n          networkId: networkId,\n          siteId: siteId,\n          adTypes: bid.adTypes || getSize(sizes),\n          bidders: _convertFields(bid),\n          skipSelection: true\n        });\n\n        if (placement.networkId && placement.siteId) {\n          data.placements.push(placement);\n        }\n      }\n    }\n    if (data.placements.length) {\n      ajax(BASE_URI, _responseCallback(addBidResponse, allBids, done), JSON.stringify(data), { method: 'POST', withCredentials: true, contentType: 'application/json' });\n    }\n  }\n\n  function _responseCallback(addBidResponse, bids, done) {\n    return function (resp) {\n      let bid;\n      let bidId;\n      let result;\n      let bidObj;\n      let bidCode;\n      let placementCode;\n      let skipSelectionRequestsReturnArray = function (decision) {\n        return (decision || []).length ? decision[0] : {};\n      };\n\n      try {\n        result = JSON.parse(resp);\n      } catch (error) {\n        utils.logError(error);\n      }\n\n      for (let i = 0; i < bids.length; i++) {\n        bidObj = bids[i];\n        bidId = bidObj.bid_id;\n        bidObj.bidId = bidObj.bid_id;\n        bidCode = bidObj.bidder;\n        placementCode = bidObj.code;\n        let noBid = function(bidObj) {\n          bid = bidfactory.createBid(STATUS.NO_BID, bidObj);\n          bid.bidderCode = bidCode;\n          return bid;\n        };\n\n        if (result) {\n          const decision = result.decisions && skipSelectionRequestsReturnArray(result.decisions[bidId]);\n          const price = decision && decision.pricing && decision.pricing.clearPrice;\n\n          if (decision && price) {\n            bid = bidfactory.createBid(STATUS.GOOD, bidObj);\n            bid = Object.assign(bid, {bidderCode: bidCode,\n              cpm: price,\n              width: decision.width,\n              height: decision.height,\n              ad: retrieveAd(decision)})\n          } else {\n            bid = noBid(bidObj);\n          }\n        } else {\n          bid = noBid(bidObj);\n        }\n        addBidResponse(placementCode, bid);\n      }\n      done()\n    }\n  };\n\n  function retrieveAd(decision) {\n    return decision.contents && decision.contents[0] && decision.contents[0].body + utils.createTrackPixelHtml(decision.impressionUrl);\n  }\n\n  function getSize(sizes) {\n    let width = 'w';\n    let height = 'h';\n    const result = [];\n    sizes.forEach(function(size) {\n      const index = sizeMap.indexOf(size[width] + 'x' + size[height]);\n      if (index >= 0) {\n        result.push(index);\n      }\n    });\n    return result;\n  }\n\n  // Export the `callBids` function, so that Prebid.js can execute\n  // this function when the page asks to send out bid requests.\n  return Object.assign(this, {\n    queueSync: baseAdapter.queueSync,\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    type: TYPE\n  });\n};\n\nServerBidServerAdapter.createNew = function() {\n  return new ServerBidServerAdapter();\n};\n\nadaptermanager.registerBidAdapter(new ServerBidServerAdapter(), bidder);\n\nmodule.exports = ServerBidServerAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/serverbidServerBidAdapter.js","import adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nconst utils = require('src/utils');\n\nconst emptyUrl = '';\nconst analyticsType = 'endpoint';\nconst STR_BIDDER_CODE = 'sharethrough';\nconst STR_VERSION = '0.1.0';\n\nvar sharethroughAdapter = Object.assign(adapter(\n  {\n    emptyUrl,\n    analyticsType\n  }\n),\n{\n  STR_BEACON_HOST: document.location.protocol + '//b.sharethrough.com/butler?',\n  placementCodeSet: {},\n\n  track({ eventType, args }) {\n    if (eventType === 'bidRequested' && args.bidderCode === 'sharethrough') {\n      var bids = args.bids;\n      var keys = Object.keys(bids);\n      for (var i = 0; i < keys.length; i++) {\n        this.placementCodeSet[bids[keys[i]].placementCode] = args.bids[keys[i]];\n      }\n    }\n\n    if (eventType === 'bidWon') {\n      this.bidWon(args);\n    }\n  },\n\n  bidWon(args) {\n    const curBidderCode = args.bidderCode;\n\n    if (curBidderCode !== STR_BIDDER_CODE && (args.adUnitCode in this.placementCodeSet)) {\n      let strBid = this.placementCodeSet[args.adUnitCode];\n      this.fireLoseBeacon(curBidderCode, args.cpm, strBid.adserverRequestId, 'headerBidLose');\n    }\n  },\n\n  fireLoseBeacon(winningBidderCode, winningCPM, arid, type) {\n    let loseBeaconUrl = this.STR_BEACON_HOST;\n    loseBeaconUrl = utils.tryAppendQueryString(loseBeaconUrl, 'winnerBidderCode', winningBidderCode);\n    loseBeaconUrl = utils.tryAppendQueryString(loseBeaconUrl, 'winnerCpm', winningCPM);\n    loseBeaconUrl = utils.tryAppendQueryString(loseBeaconUrl, 'arid', arid);\n    loseBeaconUrl = utils.tryAppendQueryString(loseBeaconUrl, 'type', type);\n    loseBeaconUrl = this.appendEnvFields(loseBeaconUrl);\n\n    this.fireBeacon(loseBeaconUrl);\n  },\n  appendEnvFields(url) {\n    url = utils.tryAppendQueryString(url, 'hbVersion', '1.25.0-pre');\n    url = utils.tryAppendQueryString(url, 'strVersion', STR_VERSION);\n    url = utils.tryAppendQueryString(url, 'hbSource', 'prebid');\n\n    return url;\n  },\n  fireBeacon(theUrl) {\n    const img = new Image();\n    img.src = theUrl;\n  }\n});\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: sharethroughAdapter,\n  code: 'sharethrough'\n});\n\nexport default sharethroughAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sharethroughAnalyticsAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\n\nconst VERSION = '3.0.1';\nconst BIDDER_CODE = 'sharethrough';\nconst STR_ENDPOINT = document.location.protocol + '//btlr.sharethrough.com/header-bid/v1';\n\nexport const sharethroughAdapterSpec = {\n  code: BIDDER_CODE,\n\n  isBidRequestValid: bid => !!bid.params.pkey && bid.bidder === BIDDER_CODE,\n\n  buildRequests: (bidRequests, bidderRequest) => {\n    return bidRequests.map(bid => {\n      let query = {\n        bidId: bid.bidId,\n        placement_key: bid.params.pkey,\n        hbVersion: '1.25.0-pre',\n        strVersion: VERSION,\n        hbSource: 'prebid',\n        consent_required: false\n      };\n\n      if (bidderRequest && bidderRequest.gdprConsent && bidderRequest.gdprConsent.consentString) {\n        query.consent_string = bidderRequest.gdprConsent.consentString;\n      }\n\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        query.consent_required = !!bidderRequest.gdprConsent.gdprApplies;\n      }\n\n      // Data that does not need to go to the server,\n      // but we need as part of interpretResponse()\n      const strData = {\n        stayInIframe: bid.params.iframe,\n        iframeSize: bid.params.iframeSize,\n        sizes: bid.sizes\n      }\n\n      return {\n        method: 'GET',\n        url: STR_ENDPOINT,\n        data: query,\n        strData: strData\n      };\n    })\n  },\n\n  interpretResponse: ({ body }, req) => {\n    if (!body || !body.creatives || !body.creatives.length) {\n      return [];\n    }\n\n    const creative = body.creatives[0];\n    let size = [0, 0];\n    if (req.strData.stayInIframe) {\n      size = req.strData.iframeSize != undefined\n        ? req.strData.iframeSize\n        : getLargestSize(req.strData.sizes);\n    }\n\n    return [{\n      requestId: req.data.bidId,\n      width: size[0],\n      height: size[1],\n      cpm: creative.cpm,\n      creativeId: creative.creative.creative_key,\n      dealId: creative.creative.deal_id,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 360,\n      ad: generateAd(body, req)\n    }];\n  },\n\n  getUserSyncs: (syncOptions, serverResponses) => {\n    const syncs = [];\n    const shouldCookieSync = syncOptions.pixelEnabled &&\n                             serverResponses.length > 0 &&\n                             serverResponses[0].body &&\n                             serverResponses[0].body.cookieSyncUrls;\n\n    if (shouldCookieSync) {\n      serverResponses[0].body.cookieSyncUrls.forEach(url => {\n        syncs.push({ type: 'image', url: url });\n      });\n    }\n\n    return syncs;\n  }\n}\n\nfunction getLargestSize(sizes) {\n  function area(size) {\n    return size[0] * size[1];\n  }\n\n  return sizes.reduce((prev, current) => {\n    if (area(current) > area(prev)) {\n      return current\n    } else {\n      return prev\n    }\n  }, [0, 0]);\n}\n\nfunction generateAd(body, req) {\n  const strRespId = `str_response_${req.data.bidId}`;\n\n  let adMarkup = `\n    <div data-str-native-key=\"${req.data.placement_key}\" data-stx-response-name=\"${strRespId}\">\n    </div>\n    <script>var ${strRespId} = \"${b64EncodeUnicode(JSON.stringify(body))}\"</script>\n  `\n\n  if (req.strData.stayInIframe) {\n    // Don't break out of iframe\n    adMarkup = adMarkup + `<script src=\"//native.sharethrough.com/assets/sfp.js\"></script>`\n  } else {\n    // Break out of iframe\n    adMarkup = adMarkup + `\n      <script src=\"//native.sharethrough.com/assets/sfp-set-targeting.js\"></script>\n      <script>\n        (function() {\n          if (!(window.STR && window.STR.Tag) && !(window.top.STR && window.top.STR.Tag)) {\n            const sfp_js = document.createElement('script');\n            sfp_js.src = \"//native.sharethrough.com/assets/sfp.js\";\n            sfp_js.type = 'text/javascript';\n            sfp_js.charset = 'utf-8';\n            try {\n                window.top.document.getElementsByTagName('body')[0].appendChild(sfp_js);\n            } catch (e) {\n              console.log(e);\n            }\n          }\n        })()\n    </script>`\n  }\n\n  return adMarkup;\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\nfunction b64EncodeUnicode(str) {\n  return btoa(\n    encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,\n      function toSolidBytes(match, p1) {\n        return String.fromCharCode('0x' + p1);\n      }));\n}\n\nregisterBidder(sharethroughAdapterSpec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sharethroughBidAdapter.js","/* Sigmoid Analytics Adapter for prebid.js v1.1.0-pre\nUpdated : 2018-03-28 */\nimport includes from 'core-js/library/fn/array/includes';\nimport adapter from 'src/AnalyticsAdapter';\nimport CONSTANTS from 'src/constants.json';\nimport adaptermanager from 'src/adaptermanager';\n\nconst utils = require('src/utils');\n\nconst url = 'https://kinesis.us-east-1.amazonaws.com/';\nconst analyticsType = 'endpoint';\n\nconst auctionInitConst = CONSTANTS.EVENTS.AUCTION_INIT;\nconst auctionEndConst = CONSTANTS.EVENTS.AUCTION_END;\nconst bidWonConst = CONSTANTS.EVENTS.BID_WON;\nconst bidRequestConst = CONSTANTS.EVENTS.BID_REQUESTED;\nconst bidAdjustmentConst = CONSTANTS.EVENTS.BID_ADJUSTMENT;\nconst bidResponseConst = CONSTANTS.EVENTS.BID_RESPONSE;\n\nlet initOptions = { publisherIds: [], utmTagData: [], adUnits: [] };\nlet bidWon = {options: {}, events: []};\nlet eventStack = {options: {}, events: []};\n\nlet auctionStatus = 'not_started';\n\nlet localStoragePrefix = 'sigmoid_analytics_';\nlet utmTags = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];\nlet utmTimeoutKey = 'utm_timeout';\nlet utmTimeout = 60 * 60 * 1000;\nlet sessionTimeout = 60 * 60 * 1000;\nlet sessionIdStorageKey = 'session_id';\nlet sessionTimeoutKey = 'session_timeout';\n\nfunction getParameterByName(param) {\n  let vars = {};\n  window.location.href.replace(location.hash, '').replace(\n    /[?&]+([^=&]+)=?([^&]*)?/gi,\n    function(m, key, value) {\n      vars[key] = value !== undefined ? value : '';\n    }\n  );\n\n  return vars[param] ? vars[param] : '';\n}\n\nfunction buildSessionIdLocalStorageKey() {\n  return localStoragePrefix.concat(sessionIdStorageKey);\n}\n\nfunction buildSessionIdTimeoutLocalStorageKey() {\n  return localStoragePrefix.concat(sessionTimeoutKey);\n}\n\nfunction updateSessionId() {\n  if (isSessionIdTimeoutExpired()) {\n    let newSessionId = utils.generateUUID();\n    localStorage.setItem(buildSessionIdLocalStorageKey(), newSessionId);\n  }\n  initOptions.sessionId = getSessionId();\n  updateSessionIdTimeout();\n}\n\nfunction updateSessionIdTimeout() {\n  localStorage.setItem(buildSessionIdTimeoutLocalStorageKey(), Date.now());\n}\n\nfunction isSessionIdTimeoutExpired() {\n  let cpmSessionTimestamp = localStorage.getItem(buildSessionIdTimeoutLocalStorageKey());\n  return Date.now() - cpmSessionTimestamp > sessionTimeout;\n}\n\nfunction getSessionId() {\n  return localStorage.getItem(buildSessionIdLocalStorageKey()) ? localStorage.getItem(buildSessionIdLocalStorageKey()) : '';\n}\n\nfunction updateUtmTimeout() {\n  localStorage.setItem(buildUtmLocalStorageTimeoutKey(), Date.now());\n}\n\nfunction isUtmTimeoutExpired() {\n  let utmTimestamp = localStorage.getItem(buildUtmLocalStorageTimeoutKey());\n  return (Date.now() - utmTimestamp) > utmTimeout;\n}\n\nfunction buildUtmLocalStorageTimeoutKey() {\n  return localStoragePrefix.concat(utmTimeoutKey);\n}\n\nfunction buildUtmLocalStorageKey(utmMarkKey) {\n  return localStoragePrefix.concat(utmMarkKey);\n}\n\nfunction checkOptions() {\n  if (typeof initOptions.publisherIds === 'undefined') {\n    return false;\n  }\n\n  return initOptions.publisherIds.length > 0;\n}\n\nfunction checkAdUnitConfig() {\n  if (typeof initOptions.adUnits === 'undefined') {\n    return false;\n  }\n\n  return initOptions.adUnits.length > 0;\n}\n\nfunction buildBidWon(eventType, args) {\n  bidWon.options = initOptions;\n  if (checkAdUnitConfig()) {\n    if (includes(initOptions.adUnits, args.adUnitCode)) {\n      bidWon.events = [{ args: args, eventType: eventType }];\n    }\n  } else {\n    bidWon.events = [{ args: args, eventType: eventType }];\n  }\n}\n\nfunction buildEventStack() {\n  eventStack.options = initOptions;\n}\n\nfunction filterBidsByAdUnit(bids) {\n  var filteredBids = [];\n  bids.forEach(function (bid) {\n    if (includes(initOptions.adUnits, bid.placementCode)) {\n      filteredBids.push(bid);\n    }\n  });\n  return filteredBids;\n}\n\nfunction isValidEvent(eventType, adUnitCode) {\n  if (checkAdUnitConfig()) {\n    let validationEvents = [bidAdjustmentConst, bidResponseConst, bidWonConst];\n    if (!includes(initOptions.adUnits, adUnitCode) && includes(validationEvents, eventType)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isValidEventStack() {\n  if (eventStack.events.length > 0) {\n    return eventStack.events.some(function(event) {\n      return bidRequestConst === event.eventType || bidWonConst === event.eventType;\n    });\n  }\n  return false;\n}\n\nfunction isValidBidWon() {\n  return bidWon.events.length > 0;\n}\n\nfunction flushEventStack() {\n  eventStack.events = [];\n}\n\nlet sigmoidAdapter = Object.assign(adapter({url, analyticsType}),\n  {\n    track({eventType, args}) {\n      if (!checkOptions()) {\n        return;\n      }\n\n      let info = Object.assign({}, args);\n\n      if (info && info.ad) {\n        info.ad = '';\n      }\n\n      if (eventType === auctionInitConst) {\n        auctionStatus = 'started';\n      }\n\n      if (eventType === bidWonConst && auctionStatus === 'not_started') {\n        updateSessionId();\n        buildBidWon(eventType, info);\n        if (isValidBidWon()) {\n          send(eventType, bidWon, 'bidWon');\n        }\n        return;\n      }\n\n      if (eventType === auctionEndConst) {\n        updateSessionId();\n        buildEventStack();\n        if (isValidEventStack()) {\n          send(eventType, eventStack, 'eventStack');\n        }\n        auctionStatus = 'not_started';\n      } else {\n        pushEvent(eventType, info);\n      }\n    },\n\n  });\n\nsigmoidAdapter.originEnableAnalytics = sigmoidAdapter.enableAnalytics;\n\nsigmoidAdapter.enableAnalytics = function (config) {\n  initOptions = config.options;\n  initOptions.utmTagData = this.buildUtmTagData();\n  utils.logInfo('Sigmoid Analytics enabled with config', initOptions);\n  sigmoidAdapter.originEnableAnalytics(config);\n};\n\nsigmoidAdapter.buildUtmTagData = function () {\n  let utmTagData = {};\n  let utmTagsDetected = false;\n  utmTags.forEach(function(utmTagKey) {\n    let utmTagValue = getParameterByName(utmTagKey);\n    if (utmTagValue !== '') {\n      utmTagsDetected = true;\n    }\n    utmTagData[utmTagKey] = utmTagValue;\n  });\n  utmTags.forEach(function(utmTagKey) {\n    if (utmTagsDetected) {\n      localStorage.setItem(buildUtmLocalStorageKey(utmTagKey), utmTagData[utmTagKey]);\n      updateUtmTimeout();\n    } else {\n      if (!isUtmTimeoutExpired()) {\n        utmTagData[utmTagKey] = localStorage.getItem(buildUtmLocalStorageKey(utmTagKey)) ? localStorage.getItem(buildUtmLocalStorageKey(utmTagKey)) : '';\n        updateUtmTimeout();\n      }\n    }\n  });\n  return utmTagData;\n};\n\nfunction send(eventType, data, sendDataType) {\n  AWS.config.credentials = new AWS.Credentials({\n    accessKeyId: 'accesskey', secretAccessKey: 'secretkey'\n  });\n\n  AWS.config.region = 'us-east-1';\n  AWS.config.credentials.get(function(err) {\n    // attach event listener\n    if (err) {\n      utils.logError(err);\n      return;\n    }\n    // create kinesis service object\n    var kinesis = new AWS.Kinesis({\n      apiVersion: '2013-12-02'\n    });\n    var dataList = [];\n    var jsonData = {};\n    jsonData['Data'] = JSON.stringify(data) + '\\n';\n    jsonData['PartitionKey'] = 'partition-' + Math.random().toString(36).substring(7);\n    dataList.push(jsonData);\n    kinesis.putRecords({\n      Records: dataList,\n      StreamName: 'sample-stream'\n    });\n    if (sendDataType === 'eventStack') {\n      flushEventStack();\n    }\n  });\n};\n\nfunction pushEvent(eventType, args) {\n  if (eventType === bidRequestConst) {\n    if (checkAdUnitConfig()) {\n      args.bids = filterBidsByAdUnit(args.bids);\n    }\n    if (args.bids.length > 0) {\n      eventStack.events.push({ eventType: eventType, args: args });\n    }\n  } else {\n    if (isValidEvent(eventType, args.adUnitCode)) {\n      eventStack.events.push({ eventType: eventType, args: args });\n    }\n  }\n}\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: sigmoidAdapter,\n  code: 'sigmoid'\n});\n\nexport default sigmoidAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sigmoidAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport {\n  config\n} from 'src/config';\nimport {\n  registerBidder\n} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'smartadserver';\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['smart'], // short code\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid.params && bid.params.siteId && bid.params.pageId && bid.params.formatId && bid.params.domain);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @param {bidderRequest} - bidder request object\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests, bidderRequest) {\n    // use bidderRequest.bids[] to get bidder-dependent request info\n\n    // if your bidder supports multiple currencies, use config.getConfig(currency)\n    // to find which one the ad server needs\n\n    // pull requested transaction ID from bidderRequest.bids[].transactionId\n    return validBidRequests.map(bid => {\n      var payload = {\n        siteid: bid.params.siteId,\n        pageid: bid.params.pageId,\n        formatid: bid.params.formatId,\n        currencyCode: config.getConfig('currency.adServerCurrency'),\n        bidfloor: bid.params.bidfloor || 0.0,\n        targeting: bid.params.target && bid.params.target != '' ? bid.params.target : undefined,\n        buid: bid.params.buId && bid.params.buId != '' ? bid.params.buId : undefined,\n        appname: bid.params.appName && bid.params.appName != '' ? bid.params.appName : undefined,\n        ckid: bid.params.ckId || 0,\n        tagId: bid.adUnitCode,\n        sizes: bid.sizes.map(size => ({\n          w: size[0],\n          h: size[1]\n        })),\n        pageDomain: utils.getTopWindowUrl(),\n        transactionId: bid.transactionId,\n        timeout: config.getConfig('bidderTimeout'),\n        bidId: bid.bidId,\n        prebidVersion: '1.25.0-pre'\n      };\n\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        payload.gdpr_consent = bidderRequest.gdprConsent.consentString;\n        payload.gdpr = bidderRequest.gdprConsent.gdprApplies; // we're handling the undefined case server side\n      }\n\n      var payloadString = JSON.stringify(payload);\n      return {\n        method: 'POST',\n        url: bid.params.domain + '/prebid/v1',\n        data: payloadString,\n      };\n    });\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    var response = serverResponse.body;\n    try {\n      if (response) {\n        const bidResponse = {\n          requestId: JSON.parse(bidRequest.data).bidId,\n          cpm: response.cpm,\n          width: response.width,\n          height: response.height,\n          creativeId: response.creativeId,\n          dealId: response.dealId,\n          currency: response.currency,\n          netRevenue: response.isNetCpm,\n          ttl: response.ttl,\n          referrer: utils.getTopWindowUrl(),\n          adUrl: response.adUrl,\n          ad: response.ad\n        };\n        bidResponses.push(bidResponse);\n      }\n    } catch (error) {\n      utils.logError('Error while parsing smart server response', error);\n    }\n    return bidResponses;\n  },\n  /**\n   * User syncs.\n   *\n   * @param {*} syncOptions Publisher prebid configuration.\n   * @param {*} serverResponses A successful response from the server.\n   * @return {Syncs[]} An array of syncs that should be executed.\n   */\n  getUserSyncs: function (syncOptions, serverResponses) {\n    const syncs = []\n    if (syncOptions.iframeEnabled && serverResponses.length > 0) {\n      syncs.push({\n        type: 'iframe',\n        url: serverResponses[0].body.cSyncUrl\n      });\n    }\n    return syncs;\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/smartadserverBidAdapter.js","import {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'smartyads';\nconst URL = '//ssp-nj.webtradehub.com/?c=o&m=multi';\nconst URL_SYNC = '//ssp-nj.webtradehub.com/?c=o&m=cookie';\n\nfunction isBidResponseValid(bid) {\n  if (!bid.requestId || !bid.cpm || !bid.creativeId ||\n    !bid.ttl || !bid.currency) {\n    return false;\n  }\n  switch (bid['mediaType']) {\n    case BANNER:\n      return Boolean(bid.width && bid.height && bid.ad);\n    case VIDEO:\n      return Boolean(bid.vastUrl);\n    case NATIVE:\n      return Boolean(bid.title && bid.image && bid.impressionTrackers);\n    default:\n      return false;\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  isBidRequestValid: (bid) => {\n    return Boolean(bid.bidId && bid.params && !isNaN(bid.params.placementId));\n  },\n\n  buildRequests: (validBidRequests = []) => {\n    let winTop = window;\n    try {\n      window.top.location.toString();\n      winTop = window.top;\n    } catch (e) {\n      utils.logMessage(e);\n    }\n    let location = utils.getTopWindowLocation();\n    let placements = [];\n    let request = {\n      'deviceWidth': winTop.screen.width,\n      'deviceHeight': winTop.screen.height,\n      'language': (navigator && navigator.language) ? navigator.language : '',\n      'secure': location.protocol === 'https:' ? 1 : 0,\n      'host': location.host,\n      'page': location.pathname,\n      'placements': placements\n    };\n    const len = validBidRequests.length;\n    for (let i = 0; i < len; i++) {\n      let bid = validBidRequests[i];\n      placements.push({\n        placementId: bid.params.placementId,\n        bidId: bid.bidId,\n        traffic: bid.params.traffic || BANNER\n      });\n    }\n    return {\n      method: 'POST',\n      url: URL,\n      data: request\n    };\n  },\n\n  interpretResponse: (serverResponse) => {\n    let response = [];\n    serverResponse = serverResponse.body;\n    for (let i = 0; i < serverResponse.length; i++) {\n      let resItem = serverResponse[i];\n      if (isBidResponseValid(resItem)) {\n        delete resItem.mediaType;\n        response.push(resItem);\n      }\n    }\n    return response;\n  },\n\n  getUserSyncs: (syncOptions, serverResponses) => {\n    return [{\n      type: 'image',\n      url: URL_SYNC\n    }];\n  }\n\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/smartyadsBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport includes from 'core-js/library/fn/array/includes';\nimport {BANNER, VIDEO} from 'src/mediaTypes';\n\nconst VIDEO_TARGETING = ['mimes', 'minduration', 'maxduration', 'protocols',\n  'startdelay', 'linearity', 'skip', 'delivery',\n  'pos', 'api', 'ext', 'battr'];\nconst BANNER_TARGETING = ['battr', 'btype', 'pos', 'mimes', 'ext'];\n\nconst SITE_TARGETING = ['name', 'domain', 'cat', 'keywords', 'content']\nconst APP_TARGETING = ['name', 'bundle', 'domain', 'storeUrl', 'cat', 'ver', 'keywords', 'content']\n\nexport const spec = {\n\n  code: 'somoaudience',\n\n  supportedMediaTypes: [BANNER, VIDEO],\n  aliases: ['somo'],\n\n  isBidRequestValid: bid => (\n    !!(bid && bid.params && bid.params.placementId)\n  ),\n\n  buildRequests: function(bidRequests, bidderRequest) {\n    return bidRequests.map(bidRequest => {\n      let da = openRtbRequest(bidRequest, bidderRequest);\n      if (window.top1 && window.top1.realvu_aa) {\n        let a = window.top1.realvu_aa.check({\n          unit_id: bidRequest.adUnitCode,\n          size: bidRequest.sizes,\n          partner_id: 'E321'\n        });\n        a.rq_bids.push({\n          bidder: bidRequest.bidder,\n          adId: bidRequest.bidId,\n          partner_id: 'E321'\n        });\n        if (a.riff == 'yes') {\n          da.imp[0].pmp = {\n            private_auction: 0,\n            deals: [\n              {\n                id: 'realvu',\n                bidfloor: 1.5\n              }\n            ]\n          };\n        }\n      }\n      return {\n        method: 'POST',\n        url: '//publisher-east.mobileadtrading.com/rtb/bid?s=' + bidRequest.params.placementId.toString(),\n        data: da,\n        bidRequest: bidRequest\n      };\n    });\n  },\n\n  interpretResponse(response, request) {\n    return bidResponseAvailable(request, response);\n  },\n\n  getUserSyncs: (syncOptions, serverResponses, gdprConsent) => {\n    const syncs = [];\n    var url = '//publisher-east.mobileadtrading.com/usersync';\n\n    if (syncOptions.pixelEnabled) {\n      if (gdprConsent && typeof gdprConsent.consentString === 'string') {\n        // add 'gdpr' only if 'gdprApplies' is defined\n        if (typeof gdprConsent.gdprApplies === 'boolean') {\n          url += `?gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`;\n        }\n      }\n      syncs.push({\n        type: 'image',\n        url: url\n      });\n    }\n    return syncs;\n  }\n};\n\nfunction bidResponseAvailable(bidRequest, bidResponse) {\n  let bidResponses = [];\n  if (bidResponse.body) {\n    let bidData = bidResponse.body.seatbid[0].bid[0];\n    const bid = {\n      requestId: bidData.impid,\n      cpm: bidData.price,\n      width: bidData.w,\n      height: bidData.h,\n      ad: bidData.adm,\n      ttl: 360,\n      creativeId: bidData.crid,\n      adId: bidData.impid,\n      netRevenue: false,\n      currency: 'USD',\n    };\n    if (isVideo(bidRequest.bidRequest)) {\n      bid.vastXml = bidData.adm;\n      bid.mediaType = 'video';\n    } else {\n      bid.ad = bidData.adm;\n      bid.mediaType = 'banner';\n    }\n    bidResponses.push(bid);\n  }\n  return bidResponses;\n}\n\nfunction openRtbRequest(bidRequest, bidderRequest) {\n  var openRtbRequest = {\n    id: bidRequest.bidderRequestId,\n    imp: [openRtbImpression(bidRequest)],\n    at: 1,\n    tmax: 400,\n    site: openRtbSite(bidRequest),\n    app: openRtbApp(bidRequest),\n    device: openRtbDevice(),\n    bcat: openRtbBCat(bidRequest),\n    badv: openRtbBAdv(bidRequest),\n    ext: {\n      prebid: '1.25.0-pre',\n    },\n  };\n  if (bidderRequest != undefined) {\n    openRtbRequest = populateOpenRtbGdpr(bidderRequest.gdprConsent, openRtbRequest);\n  }\n\n  return openRtbRequest;\n}\n\nfunction populateOpenRtbGdpr(gdpr, bidRequest) {\n  if (gdpr && bidRequest && 'gdprApplies' in gdpr) {\n    if (!('reqs' in bidRequest)) {\n      bidRequest.reqs = {};\n    }\n    if (!('ext' in bidRequest.reqs)) {\n      bidRequest.reqs.ext = {};\n    }\n    bidRequest.reqs.ext.gdpr = gdpr.gdprApplies;\n\n    if ('consentString' in gdpr) {\n      if (!('user' in bidRequest)) {\n        bidRequest.user = {};\n      }\n      if (!('ext' in bidRequest.user)) {\n        bidRequest.user.ext = {};\n      }\n      bidRequest.user.ext.consent = gdpr.consentString;\n    }\n  }\n\n  return bidRequest;\n}\n\nfunction openRtbImpression(bidRequest) {\n  const imp = {\n    'id': bidRequest.bidId,\n    bidfloor: bidRequest.params.bidfloor || 0,\n  };\n  if (isVideo(bidRequest)) {\n    imp.video = {};\n    if (bidRequest.sizes) {\n      const sizes = getSizes(bidRequest.sizes);\n      imp.video.w = sizes[0];\n      imp.video.h = sizes[1];\n    }\n    if (bidRequest.params.video) {\n      Object.keys(bidRequest.params.video)\n        .filter(param => includes(VIDEO_TARGETING, param))\n        .forEach(param => imp.video[param] = bidRequest.params.video[param]);\n    }\n  } else {\n    imp.banner = {\n      topframe: 0\n    };\n    if (bidRequest.sizes) {\n      const sizes = getSizes(bidRequest.sizes);\n      imp.banner.w = sizes[0];\n      imp.banner.h = sizes[1];\n    }\n    if (bidRequest.params.banner) {\n      Object.keys(bidRequest.params.banner)\n        .filter(param => includes(BANNER_TARGETING, param))\n        .forEach(param => imp.banner[param] = bidRequest.params.banner[param]);\n    }\n  }\n  return imp;\n}\n\nfunction isApp(bidRequest) {\n  if (bidRequest.params.app) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction openRtbSite(bidRequest) {\n  if (!isApp(bidRequest)) {\n    const site = {\n      ref: utils.getTopWindowReferrer(),\n      page: utils.getTopWindowLocation().href\n    };\n    if (bidRequest.params.site) {\n      Object.keys(bidRequest.params.site)\n        .filter(param => includes(SITE_TARGETING, param))\n        .forEach(param => site[param] = bidRequest.params.site[param]);\n    }\n    if (site.domain == undefined) {\n      site.domain = utils.getTopWindowLocation().hostname;\n    }\n\n    return site;\n  } else {\n    return null;\n  }\n}\n\nfunction openRtbApp(bidRequest) {\n  if (isApp(bidRequest)) {\n    const app = {\n\n    }\n    Object.keys(bidRequest.params.app)\n      .filter(param => includes(APP_TARGETING, param))\n      .forEach(param => app[param] = bidRequest.params.app[param]);\n\n    return app;\n  } else {\n    return null;\n  }\n}\n\nfunction openRtbDevice() {\n  return {\n    ip: 'check',\n    ua: navigator.userAgent,\n    language: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage),\n  };\n}\n\nfunction openRtbBCat(bidRequest) {\n  if (utils.isArray(bidRequest.params.bcat)) {\n    return bidRequest.params.bcat;\n  }\n  return [];\n}\n\nfunction openRtbBAdv(bidRequest) {\n  if (utils.isArray(bidRequest.params.badv)) {\n    return bidRequest.params.badv;\n  }\n  return [];\n}\n\nfunction isVideo (format) {\n  return utils.deepAccess(format, 'mediaTypes.video') || format.mediaType == 'video';\n}\n\n/* Turn bid request sizes into compatible format */\nfunction getSizes(requestSizes) {\n  let width = 0;\n  let height = 0;\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    width = parseInt(requestSizes[0], 10);\n    height = parseInt(requestSizes[1], 10);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      width = parseInt(size[0], 10);\n      height = parseInt(size[1], 10);\n      break;\n    }\n  }\n  return [width, height];\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/somoaudienceBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { getTopWindowLocation, parseSizesInput, logError, generateUUID, deepAccess, isEmpty } from '../src/utils';\nimport { BANNER, VIDEO } from '../src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport { config } from '../src/config';\n\nconst BIDDER_CODE = 'sonobi';\nconst STR_ENDPOINT = 'https://apex.go.sonobi.com/trinity.json';\nconst PAGEVIEW_ID = generateUUID();\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO],\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid - The bid params to validate.\n   * @return {boolean} True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: bid => !!(bid.params && (bid.params.ad_unit || bid.params.placement_id) && (bid.params.sizes || bid.sizes)),\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @return {object} ServerRequest - Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests, bidderRequest) => {\n    const bids = validBidRequests.map(bid => {\n      let slotIdentifier = _validateSlot(bid);\n      if (/^[\\/]?[\\d]+[[\\/].+[\\/]?]?$/.test(slotIdentifier)) {\n        slotIdentifier = slotIdentifier.charAt(0) === '/' ? slotIdentifier : '/' + slotIdentifier;\n        return {\n          [`${slotIdentifier}|${bid.bidId}`]: `${_validateSize(bid)}${_validateFloor(bid)}`\n        }\n      } else if (/^[0-9a-fA-F]{20}$/.test(slotIdentifier) && slotIdentifier.length === 20) {\n        return {\n          [bid.bidId]: `${slotIdentifier}|${_validateSize(bid)}${_validateFloor(bid)}`\n        }\n      } else {\n        logError(`The ad unit code or Sonobi Placement id for slot ${bid.bidId} is invalid`);\n      }\n    });\n\n    let data = {};\n    bids.forEach((bid) => { Object.assign(data, bid); });\n\n    const payload = {\n      'key_maker': JSON.stringify(data),\n      'ref': getTopWindowLocation().href,\n      's': generateUUID(),\n      'pv': PAGEVIEW_ID,\n      'vp': _getPlatform(),\n      'lib_name': 'prebid',\n      'lib_v': '1.25.0-pre',\n      'us': 0,\n    };\n\n    if (config.getConfig('userSync') && config.getConfig('userSync').syncsPerBidder) {\n      payload.us = config.getConfig('userSync').syncsPerBidder;\n    }\n\n    if (validBidRequests[0].params.hfa) {\n      payload.hfa = validBidRequests[0].params.hfa;\n    }\n    if (validBidRequests[0].params.referrer) {\n      payload.ref = validBidRequests[0].params.referrer;\n    }\n\n    // Apply GDPR parameters to request.\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      payload.gdpr = bidderRequest.gdprConsent.gdprApplies ? 'true' : 'false';\n      if (bidderRequest.gdprConsent.consentString) {\n        payload.consent_string = bidderRequest.gdprConsent.consentString;\n      }\n    }\n\n    // If there is no key_maker data, then don't make the request.\n    if (isEmpty(data)) {\n      return null;\n    }\n\n    return {\n      method: 'GET',\n      url: STR_ENDPOINT,\n      withCredentials: true,\n      data: payload,\n      bidderRequests: validBidRequests\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param {*} bidderRequests - Info describing the request to the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: (serverResponse, { bidderRequests }) => {\n    const bidResponse = serverResponse.body;\n    const bidsReturned = [];\n\n    if (Object.keys(bidResponse.slots).length === 0) {\n      return bidsReturned;\n    }\n\n    Object.keys(bidResponse.slots).forEach(slot => {\n      const bidId = _getBidIdFromTrinityKey(slot);\n      const bidRequest = find(bidderRequests, bidReqest => bidReqest.bidId === bidId);\n      const videoMediaType = deepAccess(bidRequest, 'mediaTypes.video');\n      const mediaType = bidRequest.mediaType || (videoMediaType ? 'video' : null);\n      const createCreative = _creative(mediaType);\n      const bid = bidResponse.slots[slot];\n      if (bid.sbi_aid && bid.sbi_mouse && bid.sbi_size) {\n        const [\n          width = 1,\n          height = 1\n        ] = bid.sbi_size.split('x');\n        const bids = {\n          requestId: bidId,\n          cpm: Number(bid.sbi_mouse),\n          width: Number(width),\n          height: Number(height),\n          ad: createCreative(bidResponse.sbi_dc, bid.sbi_aid),\n          ttl: 500,\n          creativeId: bid.sbi_crid || bid.sbi_aid,\n          aid: bid.sbi_aid,\n          netRevenue: true,\n          currency: 'USD'\n        };\n\n        if (bid.sbi_dozer) {\n          bids.dealId = bid.sbi_dozer;\n        }\n\n        const creativeType = bid.sbi_ct;\n        if (creativeType && (creativeType === 'video' || creativeType === 'outstream')) {\n          bids.mediaType = 'video';\n          bids.vastUrl = createCreative(bidResponse.sbi_dc, bid.sbi_aid);\n          delete bids.ad;\n          delete bids.width;\n          delete bids.height;\n        }\n        bidsReturned.push(bids);\n      }\n    });\n    return bidsReturned;\n  },\n  /**\n   * Register User Sync.\n   */\n  getUserSyncs: (syncOptions, serverResponses) => {\n    const syncs = [];\n    try {\n      if (syncOptions.pixelEnabled) {\n        serverResponses[0].body.sbi_px.forEach(pixel => {\n          syncs.push({\n            type: pixel.type,\n            url: pixel.url\n          });\n        });\n      }\n    } catch (e) {}\n    return syncs;\n  }\n};\n\nfunction _validateSize (bid) {\n  if (bid.params.sizes) {\n    return parseSizesInput(bid.params.sizes).join(',');\n  }\n  return parseSizesInput(bid.sizes).join(',');\n}\n\nfunction _validateSlot (bid) {\n  if (bid.params.ad_unit) {\n    return bid.params.ad_unit;\n  }\n  return bid.params.placement_id;\n}\n\nfunction _validateFloor (bid) {\n  if (bid.params.floor) {\n    return `|f=${bid.params.floor}`;\n  }\n  return '';\n}\n\nconst _creative = (mediaType) => (sbiDc, sbiAid) => {\n  if (mediaType === 'video') {\n    return _videoCreative(sbiDc, sbiAid)\n  }\n  const src = 'https://' + sbiDc + 'apex.go.sonobi.com/sbi.js?aid=' + sbiAid + '&as=null' + '&ref=' + getTopWindowLocation().href;\n  return '<script type=\"text/javascript\" src=\"' + src + '\"></script>';\n};\n\nfunction _videoCreative(sbiDc, sbiAid) {\n  return `https://${sbiDc}apex.go.sonobi.com/vast.xml?vid=${sbiAid}&ref=${getTopWindowLocation().href}`\n}\n\nfunction _getBidIdFromTrinityKey (key) {\n  return key.split('|').slice(-1)[0]\n}\n\n/**\n * @param context - the window to determine the innerWidth from. This is purely for test purposes as it should always be the current window\n */\nexport const _isInbounds = (context = window) => (lowerBound = 0, upperBound = Number.MAX_SAFE_INTEGER) => context.innerWidth >= lowerBound && context.innerWidth < upperBound;\n\n/**\n * @param context - the window to determine the innerWidth from. This is purely for test purposes as it should always be the current window\n */\nexport function _getPlatform(context = window) {\n  const isInBounds = _isInbounds(context);\n  const MOBILE_VIEWPORT = {\n    lt: 768\n  };\n  const TABLET_VIEWPORT = {\n    lt: 992,\n    ge: 768\n  };\n  if (isInBounds(0, MOBILE_VIEWPORT.lt)) {\n    return 'mobile'\n  }\n  if (isInBounds(TABLET_VIEWPORT.ge, TABLET_VIEWPORT.lt)) {\n    return 'tablet'\n  }\n  return 'desktop';\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sonobiBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nimport { BANNER } from 'src/mediaTypes';\nimport { REPO_AND_VERSION } from 'src/constants';\n\nconst BIDDER_CODE = 'sortable';\nconst SERVER_URL = 'c.deployads.com';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  isBidRequestValid: function(bid) {\n    const sortableConfig = config.getConfig('sortable');\n    const haveSiteId = (sortableConfig && !!sortableConfig.siteId) || bid.params.siteId;\n    const validFloor = !bid.params.floor || utils.isNumber(bid.params.floor);\n    const validSize = /\\d+x\\d+/;\n    const validFloorSizeMap = !bid.params.floorSizeMap ||\n      (utils.isPlainObject(bid.params.floorSizeMap) &&\n        Object.keys(bid.params.floorSizeMap).every(size =>\n          size.match(validSize) && utils.isNumber(bid.params.floorSizeMap[size])\n        ))\n    const validKeywords = !bid.params.keywords ||\n      (utils.isPlainObject(bid.params.keywords) &&\n        Object.keys(bid.params.keywords).every(key =>\n          utils.isStr(key) && utils.isStr(bid.params.keywords[key])\n        ))\n    return !!(bid.params.tagId && haveSiteId && validFloor && validFloorSizeMap && validKeywords && bid.sizes &&\n      bid.sizes.every(sizeArr => sizeArr.length == 2 && sizeArr.every(num => utils.isNumber(num))));\n  },\n\n  buildRequests: function(validBidReqs, bidderRequest) {\n    const sortableConfig = config.getConfig('sortable') || {};\n    const globalSiteId = sortableConfig.siteId;\n    let loc = utils.getTopWindowLocation();\n\n    const sortableImps = utils._map(validBidReqs, bid => {\n      let rv = {\n        id: bid.bidId,\n        tagid: bid.params.tagId,\n        banner: {\n          format: utils._map(bid.sizes, ([width, height]) => ({w: width, h: height}))\n        },\n        ext: {}\n      };\n      if (bid.params.floor) {\n        rv.bidfloor = bid.params.floor;\n      }\n      if (bid.params.keywords) {\n        rv.ext.keywords = bid.params.keywords;\n      }\n      if (bid.params.bidderParams) {\n        utils._each(bid.params.bidderParams, (params, partner) => {\n          rv.ext[partner] = params;\n        });\n      }\n      if (bid.params.floorSizeMap) {\n        rv.ext.floorSizeMap = bid.params.floorSizeMap;\n      }\n      return rv;\n    });\n    const gdprConsent = bidderRequest && bidderRequest.gdprConsent;\n    const sortableBidReq = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: sortableImps,\n      site: {\n        domain: loc.hostname,\n        page: loc.href,\n        ref: utils.getTopWindowReferrer(),\n        publisher: {\n          id: globalSiteId || validBidReqs[0].params.siteId,\n        },\n        device: {\n          w: screen.width,\n          h: screen.height\n        },\n      },\n    };\n    if (gdprConsent) {\n      sortableBidReq.user = {\n        ext: {\n          consent: gdprConsent.consentString\n        }\n      };\n      sortableBidReq.regs = {\n        ext: {\n          gdpr: gdprConsent.gdprApplies ? 1 : 0\n        }\n      };\n    }\n\n    return {\n      method: 'POST',\n      url: `//${SERVER_URL}/openrtb2/auction?src=${REPO_AND_VERSION}&host=${loc.host}`,\n      data: JSON.stringify(sortableBidReq),\n      options: {contentType: 'text/plain'}\n    };\n  },\n\n  interpretResponse: function(serverResponse) {\n    const { body: {id, seatbid} } = serverResponse;\n    const sortableBids = [];\n    if (id && seatbid) {\n      utils._each(seatbid, seatbid => {\n        utils._each(seatbid.bid, bid => {\n          const bidObj = {\n            requestId: bid.impid,\n            cpm: parseFloat(bid.price),\n            width: parseInt(bid.w),\n            height: parseInt(bid.h),\n            creativeId: bid.crid || bid.id,\n            dealId: bid.dealid || null,\n            currency: 'USD',\n            netRevenue: true,\n            mediaType: BANNER,\n            ttl: 60\n          };\n          if (bid.adm && bid.nurl) {\n            bidObj.ad = bid.adm;\n            bidObj.ad += utils.createTrackPixelHtml(decodeURIComponent(bid.nurl));\n          } else if (bid.adm) {\n            bidObj.ad = bid.adm;\n          } else if (bid.nurl) {\n            bidObj.adUrl = bid.nurl;\n          }\n          sortableBids.push(bidObj);\n        });\n      });\n    }\n    return sortableBids;\n  },\n\n  getUserSyncs: (syncOptions, responses, gdprConsent) => {\n    const sortableConfig = config.getConfig('sortable');\n    if (syncOptions.iframeEnabled && sortableConfig && !!sortableConfig.siteId) {\n      let syncUrl = `//${SERVER_URL}/sync?f=html&s=${sortableConfig.siteId}&u=${encodeURIComponent(utils.getTopWindowLocation())}`;\n\n      if (gdprConsent) {\n        syncurl += '&g=' + (gdprConsent.gdprApplies ? 1 : 0);\n        syncurl += '&cs=' + encodeURIComponent(gdprConsent.consentString || '');\n      }\n\n      return [{\n        type: 'iframe',\n        url: syncUrl\n      }];\n    }\n  },\n\n  onTimeout(details) {\n    fetch(`//${SERVER_URL}/prebid/timeout`, {\n      method: 'POST',\n      body: JSON.stringify(details),\n      mode: 'no-cors',\n      headers: new Headers({\n        'Content-Type': 'text/plain'\n      })\n    });\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sortableBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\nimport { REPO_AND_VERSION } from 'src/constants';\n\nexport const spec = {\n  code: 'sovrn',\n  supportedMediaTypes: [BANNER],\n\n  /**\n   * Check if the bid is a valid zone ID in either number or string form\n   * @param {object} bid the Sovrn bid to validate\n   * @return boolean for whether or not a bid is valid\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.tagid && !isNaN(parseFloat(bid.params.tagid)) && isFinite(bid.params.tagid));\n  },\n\n  /**\n   * Format the bid request object for our endpoint\n   * @param {BidRequest[]} bidRequests Array of Sovrn bidders\n   * @return object of parameters for Prebid AJAX request\n   */\n  buildRequests: function(bidReqs, bidderRequest) {\n    const loc = utils.getTopWindowLocation();\n    let sovrnImps = [];\n    let iv;\n    utils._each(bidReqs, function (bid) {\n      iv = iv || utils.getBidIdParameter('iv', bid.params);\n      sovrnImps.push({\n        id: bid.bidId,\n        banner: { w: 1, h: 1 },\n        tagid: String(utils.getBidIdParameter('tagid', bid.params)),\n        bidfloor: utils.getBidIdParameter('bidfloor', bid.params)\n      });\n    });\n    const sovrnBidReq = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: sovrnImps,\n      site: {\n        domain: loc.host,\n        page: loc.host + loc.pathname + loc.search + loc.hash\n      }\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      sovrnBidReq.regs = {\n        ext: {\n          gdpr: +bidderRequest.gdprConsent.gdprApplies\n        }};\n      sovrnBidReq.user = {\n        ext: {\n          consent: bidderRequest.gdprConsent.consentString\n        }};\n    }\n\n    let url = `//ap.lijit.com/rtb/bid?` +\n      `src=${REPO_AND_VERSION}`;\n    if (iv) url += `&iv=${iv}`;\n\n    return {\n      method: 'POST',\n      url: url,\n      data: JSON.stringify(sovrnBidReq),\n      options: {contentType: 'text/plain'}\n    };\n  },\n\n  /**\n   * Format Sovrn responses as Prebid bid responses\n   * @param {id, seatbid} sovrnResponse A successful response from Sovrn.\n   * @return {Bid[]} An array of formatted bids.\n  */\n  interpretResponse: function({ body: {id, seatbid} }) {\n    let sovrnBidResponses = [];\n    if (id &&\n      seatbid &&\n      seatbid.length > 0 &&\n      seatbid[0].bid &&\n      seatbid[0].bid.length > 0) {\n      seatbid[0].bid.map(sovrnBid => {\n        sovrnBidResponses.push({\n          requestId: sovrnBid.impid,\n          cpm: parseFloat(sovrnBid.price),\n          width: parseInt(sovrnBid.w),\n          height: parseInt(sovrnBid.h),\n          creativeId: sovrnBid.crid || sovrnBid.id,\n          dealId: sovrnBid.dealid || null,\n          currency: 'USD',\n          netRevenue: true,\n          mediaType: BANNER,\n          ad: decodeURIComponent(`${sovrnBid.adm}<img src=\"${sovrnBid.nurl}\">`),\n          ttl: 60\n        });\n      });\n    }\n    return sovrnBidResponses;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    if (serverResponses && serverResponses.length !== 0 && syncOptions.iframeEnabled) {\n      let iidArr = serverResponses.filter(rsp => rsp.body && rsp.body.ext && rsp.body.ext.iid)\n        .map(rsp => { return rsp.body.ext.iid });\n      let consentString = '';\n      if (gdprConsent && gdprConsent.gdprApplies && typeof gdprConsent.consentString === 'string') {\n        consentString = gdprConsent.consentString\n      }\n      if (iidArr[0]) {\n        return [{\n          type: 'iframe',\n          url: '//ap.lijit.com/beacon?informer=' + iidArr[0] + '&gdpr_consent=' + consentString,\n        }];\n      }\n    }\n    return [];\n  },\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/sovrnBidAdapter.js","import * as utils from 'src/utils';\nimport * as bidfactory from 'src/bidfactory';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {config} from 'src/config';\nimport {VIDEO} from '../src/mediaTypes';\nimport {STATUS} from 'src/constants';\n\nconst BIDDER_CODE = 'telaria';\nconst ENDPOINT = '.ads.tremorhub.com/ad/tag';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['tremor', 'tremorvideo'],\n  supportedMediaTypes: [VIDEO],\n  /**\n   * Determines if the request is valid\n   * @param bid\n   * @returns {*|string}\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid && bid.params && bid.params.adCode && bid.params.supplyCode);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   * @param validBidRequests list of valid bid requests that have passed isBidRequestValid check\n   * @returns {Array} of url objects\n   */\n  buildRequests: function (validBidRequests) {\n    let requests = [];\n\n    validBidRequests.forEach(bid => {\n      let url = generateUrl(bid);\n      if (url) {\n        requests.push({\n          method: 'GET',\n          url: generateUrl(bid),\n          bidId: bid.bidId,\n          vastUrl: url.split('&fmt=json')[0]\n        });\n      }\n    });\n\n    return requests;\n  },\n\n  /**\n   * convert the server response into a list of BidObjects that prebid accepts\n   * http://prebid.org/dev-docs/bidder-adaptor.html#interpreting-the-response\n   * @param serverResponse\n   * @param bidderRequest\n   * @returns {Array}\n   */\n  interpretResponse: function (serverResponse, bidderRequest) {\n    let bidResult;\n    let width, height;\n\n    let bids = [];\n\n    try {\n      bidResult = serverResponse.body;\n\n      bidderRequest.url.split('&').forEach(param => {\n        let lower = param.toLowerCase();\n        if (lower.indexOf('player') > -1) {\n          if (lower.indexOf('width') > -1) {\n            width = param.split('=')[1];\n          } else if (lower.indexOf('height') > -1) {\n            height = param.split('=')[1];\n          }\n        }\n      });\n    } catch (error) {\n      utils.logError(error);\n      width = 0;\n      height = 0;\n    }\n\n    if (!bidResult || bidResult.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (bidResult && bidResult.error) {\n        errorMessage += `: ${bidResult.error}`;\n      }\n      utils.logError(errorMessage);\n    } else if (bidResult.seatbid && bidResult.seatbid.length > 0) {\n      bidResult.seatbid[0].bid.forEach(tag => {\n        bids.push(createBid(STATUS.GOOD, bidderRequest, tag, width, height, bidResult.seatbid[0].seat));\n      });\n    }\n\n    return bids;\n  },\n  /**\n   * We support pixel syncing only at the moment. Telaria ad server returns 'ext'\n   * as an optional parameter if the tag has 'incIdSync' parameter set to true\n   * @param syncOptions\n   * @param serverResponses\n   * @returns {Array}\n   */\n  getUserSyncs: function (syncOptions, serverResponses) {\n    const syncs = [];\n    if (syncOptions.pixelEnabled && serverResponses.length) {\n      try {\n        serverResponses[0].body.ext.telaria.userSync.forEach(url => syncs.push({type: 'image', url: url}));\n      } catch (e) {}\n    }\n    return syncs;\n  }\n};\n\n/**\n * Generates the url based on the parameters given. Sizes, supplyCode & adCode are required.\n * The format is: [L,W] or [[L1,W1],...]\n * @param bid\n * @returns {string}\n */\nfunction generateUrl(bid) {\n  let width, height;\n  if (!bid.sizes) {\n    return '';\n  }\n\n  if (utils.isArray(bid.sizes) && (bid.sizes.length === 2) && (!isNaN(bid.sizes[0]) && !isNaN(bid.sizes[1]))) {\n    width = bid.sizes[0];\n    height = bid.sizes[1];\n  } else if (typeof bid.sizes === 'object') {\n    // take the primary (first) size from the array\n    width = bid.sizes[0][0];\n    height = bid.sizes[0][1];\n  }\n  if (width && height && bid.params.supplyCode && bid.params.adCode) {\n    let scheme = ((document.location.protocol === 'https:') ? 'https' : 'http') + '://';\n    let url = scheme + bid.params.supplyCode + ENDPOINT + '?adCode=' + bid.params.adCode;\n\n    url += ('&playerWidth=' + width);\n    url += ('&playerHeight=' + height);\n\n    for (let key in bid.params) {\n      if (bid.params.hasOwnProperty(key) && bid.params[key]) {\n        url += ('&' + key + '=' + bid.params[key]);\n      }\n    }\n\n    if (!bid.params['srcPageUrl']) {\n      url += ('&srcPageUrl=' + encodeURIComponent(document.location.href));\n    }\n\n    url += ('&transactionId=' + bid.transactionId);\n    url += ('&referrer=' + config.getConfig('pageUrl') || utils.getTopWindowUrl());\n\n    return (url + '&fmt=json');\n  }\n}\n\n/**\n * Create and return a bid object based on status and tag\n * @param status\n * @param reqBid\n * @param response\n * @param width\n * @param height\n * @param bidderCode\n */\nfunction createBid(status, reqBid, response, width, height, bidderCode) {\n  let bid = bidfactory.createBid(status, reqBid);\n\n  // TTL 5 mins by default, future support for extended imp wait time\n  if (response) {\n    Object.assign(bid, {\n      requestId: reqBid.bidId,\n      cpm: response.price,\n      creativeId: response.crid || '-1',\n      vastXml: response.adm,\n      vastUrl: reqBid.vastUrl,\n      mediaType: 'video',\n      width: width,\n      height: height,\n      bidderCode: bidderCode,\n      adId: response.id,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 300,\n      ad: response.adm\n    });\n  }\n\n  return bid;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/telariaBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BID_REQUEST_BASE_URL = 'https://in-appadvertising.com/api/bidRequest';\nconst USER_SYNC_URL = 'https://in-appadvertising.com/api/userSync.html';\nconst BIDDER_CODE = 'trion';\nconst BASE_KEY = '_trion_';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function (bid) {\n    return !!(bid && bid.params && bid.params.pubId && bid.params.sectionId);\n  },\n  buildRequests: function (validBidRequests) {\n    var bidRequests = [];\n\n    for (var i = 0; i < validBidRequests.length; i++) {\n      var bid = validBidRequests[i];\n\n      var trionUrlParams = buildTrionUrlParams(bid);\n\n      bidRequests.push({\n        method: 'GET',\n        url: BID_REQUEST_BASE_URL,\n        bidRequest: bid,\n        data: trionUrlParams\n      });\n    }\n    return bidRequests;\n  },\n\n  interpretResponse: function (trionResponseObj, request) {\n    var bid = {};\n    var bidResponses = [];\n    var bidRequest = request.bidRequest;\n    var responseBody = trionResponseObj ? trionResponseObj.body : {};\n\n    if (responseBody && responseBody.bidId && bidRequest) {\n      var result = responseBody.result;\n\n      if (result && result.cpm && result.placeBid && result.ad) {\n        var cpm = parseInt(result.cpm, 10) / 100;\n\n        bid.requestId = bidRequest.bidId;\n        bid.cpm = cpm;\n        bid.ad = result.ad;\n        bid.width = result.width;\n        bid.height = result.height;\n        bid.ttl = result.ttl;\n        bid.creativeId = result.creativeId;\n        bid.currency = result.currency;\n        bid.netRevenue = result.netRevenue;\n        bidResponses.push(bid);\n      }\n    }\n\n    return bidResponses;\n  },\n  getUserSyncs: function getUserSyncs(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      handlePostMessage();\n      return [{\n        type: 'iframe',\n        url: getSyncUrl()\n      }];\n    }\n  }\n\n};\nregisterBidder(spec);\n\nfunction getSyncUrl() {\n  var unParsedPubAndSection = getStorageData(BASE_KEY + 'lps') || ':';\n  var pubSectionArray = unParsedPubAndSection.split(':') || [];\n  var pubId = pubSectionArray[0] || -1;\n  var sectionId = pubSectionArray[1] || -1;\n  var url = utils.getTopWindowUrl();\n  return USER_SYNC_URL + `?p=${pubId}&s=${sectionId}&u=${url}`;\n}\n\nfunction buildTrionUrlParams(bid) {\n  var pubId = utils.getBidIdParameter('pubId', bid.params);\n  var sectionId = utils.getBidIdParameter('sectionId', bid.params);\n  var re = utils.getBidIdParameter('re', bid.params);\n  var url = utils.getTopWindowUrl();\n  var sizes = utils.parseSizesInput(bid.sizes).join(',');\n\n  var intT = window.TR_INT_T && window.TR_INT_T != -1 ? window.TR_INT_T : null;\n  if (!intT) {\n    intT = getStorageData(BASE_KEY + 'int_t');\n  }\n  if (intT) {\n    setStorageData(BASE_KEY + 'int_t', intT)\n  }\n  setStorageData(BASE_KEY + 'lps', pubId + ':' + sectionId);\n  var trionUrl = '';\n\n  trionUrl = utils.tryAppendQueryString(trionUrl, 'bidId', bid.bidId);\n  trionUrl = utils.tryAppendQueryString(trionUrl, 'pubId', pubId);\n  trionUrl = utils.tryAppendQueryString(trionUrl, 'sectionId', sectionId);\n  trionUrl = utils.tryAppendQueryString(trionUrl, 're', re);\n  if (url) {\n    trionUrl += 'url=' + url + '&';\n  }\n  if (sizes) {\n    trionUrl += 'sizes=' + sizes + '&';\n  }\n  if (intT) {\n    trionUrl = utils.tryAppendQueryString(trionUrl, 'int_t', encodeURIComponent(intT));\n  }\n\n  // remove the trailing \"&\"\n  if (trionUrl.lastIndexOf('&') === trionUrl.length - 1) {\n    trionUrl = trionUrl.substring(0, trionUrl.length - 1);\n  }\n  return trionUrl;\n}\n\nfunction handlePostMessage() {\n  try {\n    if (window.addEventListener) {\n      window.addEventListener('message', acceptPostMessage);\n    }\n  } catch (e) {\n  }\n}\n\nexport function getStorageData(key) {\n  var item = null;\n  try {\n    if (window.localStorage) {\n      item = window.localStorage.getItem(key);\n    }\n  } catch (e) {\n  }\n  return item;\n}\n\nexport function setStorageData(key, item) {\n  try {\n    if (window.localStorage) {\n      window.localStorage.setItem(key, item);\n    }\n  } catch (e) {\n  }\n}\n\nexport function acceptPostMessage(e) {\n  var message = e.data || '';\n  if (message.indexOf(BASE_KEY + 'userId') !== 0) {\n    return;\n  }\n  var intT = message.split(BASE_KEY + 'userId=')[1];\n  if (intT) {\n    setStorageData(BASE_KEY + 'int_t', intT);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/trionBidAdapter.js","import { BANNER } from 'src/mediaTypes';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'triplelift';\nconst STR_ENDPOINT = document.location.protocol + '//tlx.3lift.com/header/auction?';\nlet gdprApplies = true;\nlet consentString = null;\n\nexport const tripleliftAdapterSpec = {\n\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid: function(bid) {\n    return (typeof bid.params.inventoryCode !== 'undefined');\n  },\n\n  buildRequests: function(bidRequests, bidderRequest) {\n    let tlCall = STR_ENDPOINT;\n    let referrer = utils.getTopWindowUrl();\n    let data = _buildPostBody(bidRequests);\n\n    tlCall = utils.tryAppendQueryString(tlCall, 'lib', 'prebid');\n    tlCall = utils.tryAppendQueryString(tlCall, 'v', '1.25.0-pre');\n    tlCall = utils.tryAppendQueryString(tlCall, 'referrer', referrer);\n\n    if (bidderRequest && bidderRequest.timeout) {\n      tlCall = utils.tryAppendQueryString(tlCall, 'tmax', bidderRequest.timeout);\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      if (typeof bidderRequest.gdprConsent.gdprApplies !== 'undefined') {\n        gdprApplies = bidderRequest.gdprConsent.gdprApplies;\n        tlCall = utils.tryAppendQueryString(tlCall, 'gdpr', gdprApplies.toString());\n      }\n      if (typeof bidderRequest.gdprConsent.consentString !== 'undefined') {\n        consentString = bidderRequest.gdprConsent.consentString;\n        tlCall = utils.tryAppendQueryString(tlCall, 'cmp_cs', consentString);\n      }\n    }\n\n    if (tlCall.lastIndexOf('&') === tlCall.length - 1) {\n      tlCall = tlCall.substring(0, tlCall.length - 1);\n    }\n    utils.logMessage('tlCall request built: ' + tlCall);\n\n    return {\n      method: 'POST',\n      url: tlCall,\n      data,\n      bidderRequest\n    };\n  },\n\n  interpretResponse: function(serverResponse, {bidderRequest}) {\n    let bids = serverResponse.body.bids || [];\n    return bids.map(function(bid) {\n      return _buildResponseObject(bidderRequest, bid);\n    });\n  },\n\n  getUserSyncs: function(syncOptions) {\n    let ibCall = '//ib.3lift.com/sync?';\n    if (consentString !== null) {\n      ibCall = utils.tryAppendQueryString(ibCall, 'gdpr', gdprApplies);\n      ibCall = utils.tryAppendQueryString(ibCall, 'cmp_cs', consentString);\n    }\n\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: ibCall\n      }];\n    }\n  }\n}\n\nfunction _buildPostBody(bidRequests) {\n  let data = {};\n  data.imp = bidRequests.map(function(bid, index) {\n    return {\n      id: index,\n      tagid: bid.params.inventoryCode,\n      floor: bid.params.floor,\n      banner: {\n        format: _sizes(bid.sizes)\n      }\n    }\n  });\n\n  return data;\n}\n\nfunction _sizes(sizeArray) {\n  let sizes = sizeArray.filter(_isValidSize);\n  return sizes.map(function(size) {\n    return {\n      w: size[0],\n      h: size[1]\n    };\n  });\n}\n\nfunction _isValidSize(size) {\n  return (size.length === 2 && typeof size[0] === 'number' && typeof size[1] === 'number');\n}\n\nfunction _buildResponseObject(bidderRequest, bid) {\n  let bidResponse = {};\n  let width = bid.width || 1;\n  let height = bid.height || 1;\n  let dealId = bid.deal_id || '';\n  let creativeId = bid.imp_id;\n\n  if (bid.cpm != 0 && bid.ad) {\n    bidResponse = {\n      requestId: bidderRequest.bids[creativeId].bidId,\n      cpm: bid.cpm,\n      width: width,\n      height: height,\n      netRevenue: true,\n      ad: bid.ad,\n      creativeId: creativeId,\n      dealId: dealId,\n      currency: 'USD',\n      ttl: 33,\n    };\n  };\n  return bidResponse;\n}\n\nregisterBidder(tripleliftAdapterSpec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/tripleliftBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'trustx';\nconst ENDPOINT_URL = '//sofia.trustx.org/hb';\nconst TIME_TO_LIVE = 360;\nconst ADAPTER_SYNC_URL = '//sofia.trustx.org/push_sync';\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should be not empty',\n  emptySeatbid: 'Seatbid array from response has empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\nexport const spec = {\n  code: BIDDER_CODE,\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests - an array of bids\n   * @param {bidderRequest} - bidder request object\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      reqId = bid.bidderRequestId;\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      r: reqId\n    };\n\n    if (bidderRequest) {\n      if (bidderRequest.timeout) {\n        payload.wtimeout = bidderRequest.timeout;\n      }\n      if (bidderRequest.gdprConsent) {\n        if (bidderRequest.gdprConsent.consentString) {\n          payload.gdpr_consent = bidderRequest.gdprConsent.consentString;\n        }\n        payload.gdpr_applies =\n          (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean')\n            ? Number(bidderRequest.gdprConsent.gdprApplies) : 1;\n      }\n    }\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: utils.parseQueryStringParameters(payload).replace(/\\&$/, ''),\n      bidsMap: bidsMap,\n    };\n  },\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @param {*} bidRequest\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body;\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL\n      }];\n    }\n  }\n}\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId, // bid.bidderRequestId,\n          bidderCode: spec.code,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid, // bid.bidId,\n          currency: 'USD',\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/trustxBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER, VIDEO, NATIVE} from 'src/mediaTypes';\n\nconst VER = 'ADGENT_PREBID-2018011501';\nconst BIDDER_CODE = 'ucfunnel';\n\nconst VIDEO_CONTEXT = {\n  INSTREAM: 0,\n  OUSTREAM: 2\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  ENDPOINT: '//hb.aralego.com/header',\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n  /**\n   * Check if the bid is a valid zone ID in either number or string form\n   * @param {object} bid the ucfunnel bid to validate\n   * @return boolean for whether or not a bid is valid\n   */\n  isBidRequestValid: function(bid) {\n    const isVideoMediaType = utils.deepAccess(bid, 'mediaTypes.video');\n    const videoContext = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n    if (typeof bid.params !== 'object' || typeof bid.params.adid != 'string') {\n      return false;\n    }\n\n    if (isVideoMediaType && videoContext === 'outstream') {\n      utils.logWarn('Warning: outstream video is not supported yet');\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\n   * @param {BidRequest[]} bidRequests\n   * @param {*} bidderRequest\n   * @return {ServerRequest}\n   */\n  buildRequests: function(bids, bidderRequest) {\n    return bids.map(bid => {\n      return {\n        method: 'GET',\n        url: location.protocol + spec.ENDPOINT,\n        data: getRequestData(bid, bidderRequest),\n        bidRequest: bid\n      }\n    });\n  },\n\n  /**\n   * Format ucfunnel responses as Prebid bid responses\n   * @param {ucfunnelResponseObj} ucfunnelResponse A successful response from ucfunnel.\n   * @return {Bid[]} An array of formatted bids.\n  */\n  interpretResponse: function (ucfunnelResponseObj, request) {\n    const bidRequest = request.bidRequest;\n    const ad = ucfunnelResponseObj ? ucfunnelResponseObj.body : {};\n    const videoPlayerSize = parseSizes(bidRequest);\n\n    let bid = {\n      requestId: bidRequest.bidId,\n      cpm: ad.cpm || 0,\n      creativeId: ad.ad_id,\n      dealId: ad.deal || null,\n      currency: 'USD',\n      netRevenue: true,\n      ttl: 1000\n    };\n\n    if (ad.creative_type) {\n      bid.mediaType = ad.creative_type;\n    }\n\n    switch (ad.creative_type) {\n      case NATIVE:\n        let nativeAd = ad.native;\n        Object.assign(bid, {\n          width: 1,\n          height: 1,\n          native: {\n            title: nativeAd.title,\n            body: nativeAd.desc,\n            cta: nativeAd.ctatext,\n            sponsoredBy: nativeAd.sponsored,\n            image: nativeAd.image || nativeAd.image.url,\n            icon: nativeAd.icon || nativeAd.icon.url,\n            clickUrl: nativeAd.clickUrl,\n            impressionTrackers: nativeAd.impressionTrackers,\n          }\n        });\n        break;\n      case VIDEO:\n        Object.assign(bid, {\n          vastUrl: ad.vastUrl,\n          vastXml: ad.vastXml\n        });\n\n        if (videoPlayerSize && videoPlayerSize.length === 2) {\n          Object.assign(bid, {\n            width: videoPlayerSize[0],\n            height: videoPlayerSize[1]\n          });\n        }\n        break;\n      case BANNER:\n      default:\n        Object.assign(bid, {\n          width: ad.width,\n          height: ad.height,\n          ad: ad.adm\n        });\n    }\n\n    return [bid];\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//cdn.aralego.com/ucfad/cookie/sync.html'\n      }];\n    } else if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: '//sync.aralego.com/idSync'\n      }];\n    }\n  }\n};\nregisterBidder(spec);\n\nfunction transformSizes(requestSizes) {\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 && !utils.isArray(requestSizes[0])) {\n    return [parseInt(requestSizes[0], 10), parseInt(requestSizes[1], 10)];\n  } else if (typeof requestSizes === 'object' && requestSizes.length) {\n    return requestSizes[0];\n  }\n}\n\nfunction parseSizes(bid) {\n  let params = bid.params;\n  if (bid.mediaType === VIDEO) {\n    let size = [];\n    if (params.video && params.video.playerWidth && params.video.playerHeight) {\n      size = [\n        params.video.playerWidth,\n        params.video.playerHeight\n      ];\n      return size;\n    }\n  }\n\n  return transformSizes(bid.sizes);\n}\n\nfunction getRequestData(bid, bidderRequest) {\n  const size = parseSizes(bid);\n  const loc = utils.getTopWindowLocation();\n  const host = loc.host;\n  const page = loc.href;\n  const ref = utils.getTopWindowReferrer();\n  const language = navigator.language;\n  const dnt = (navigator.doNotTrack == 'yes' || navigator.doNotTrack == '1' || navigator.msDoNotTrack == '1') ? 1 : 0;\n  const videoContext = utils.deepAccess(bid, 'mediaTypes.video.context');\n  const videoMediaType = utils.deepAccess(bid, 'mediaTypes.video');\n\n  // general bid data\n  let bidData = {\n    ver: VER,\n    ifr: 0,\n    bl: language,\n    je: 1,\n    dnt: dnt,\n    host: host,\n    u: page,\n    ru: ref,\n    adid: utils.getBidIdParameter('adid', bid.params),\n    w: size[0],\n    h: size[1]\n  };\n\n  if (bid.mediaType === 'video' || videoMediaType) {\n    switch (videoContext) {\n      case 'outstream':\n        bidData.atype = VIDEO_CONTEXT.OUSTREAM;\n        break;\n      case 'instream':\n      default:\n        bidData.atype = VIDEO_CONTEXT.INSTREAM;\n        break;\n    }\n  }\n\n  if (bidderRequest && bidderRequest.gdprConsent) {\n    Object.assign(bidData, {\n      gdpr: bidderRequest.gdprConsent.gdprApplies ? 1 : 0,\n      euconsent: bidderRequest.gdprConsent.consentString\n    });\n  }\n\n  return bidData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/ucfunnelBidAdapter.js","import * as utils from 'src/utils';\nimport { config } from 'src/config';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'underdogmedia';\nconst UDM_ADAPTER_VERSION = '1.13V';\nconst UDM_VENDOR_ID = '159';\n\nutils.logMessage(`Initializing UDM Adapter. PBJS Version: ${pbjs.version} with adapter version: ${UDM_ADAPTER_VERSION}  Updated 20180604`);\n\nexport const spec = {\n  code: BIDDER_CODE,\n  bidParams: [],\n\n  isBidRequestValid: function (bid) {\n    return !!((bid.params && bid.params.siteId) && (bid.sizes && bid.sizes.length > 0));\n  },\n\n  buildRequests: function (validBidRequests, bidderRequest) {\n    var sizes = [];\n    var siteId = 0;\n\n    validBidRequests.forEach(bidParam => {\n      sizes = utils.flatten(sizes, utils.parseSizesInput(bidParam.sizes));\n      siteId = bidParam.params.siteId;\n    });\n\n    let data = {\n      tid: 1,\n      dt: 10,\n      sid: siteId,\n      sizes: sizes.join(',')\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      if (typeof bidderRequest.gdprConsent.gdprApplies !== 'undefined') {\n        data.gdprApplies = !!(bidderRequest.gdprConsent.gdprApplies);\n      }\n      if (bidderRequest.gdprConsent.vendorData && bidderRequest.gdprConsent.vendorData.vendorConsents &&\n        typeof bidderRequest.gdprConsent.vendorData.vendorConsents[UDM_VENDOR_ID] !== 'undefined') {\n        data.consentGiven = !!(bidderRequest.gdprConsent.vendorData.vendorConsents[UDM_VENDOR_ID]);\n      }\n      if (typeof bidderRequest.gdprConsent.consentString !== 'undefined') {\n        data.consentData = bidderRequest.gdprConsent.consentString;\n      }\n    }\n\n    if (!data.gdprApplies || data.consentGiven) {\n      return {\n        method: 'GET',\n        url: `${window.location.protocol}//udmserve.net/udm/img.fetch`,\n        data: data,\n        bidParams: validBidRequests\n      };\n    }\n  },\n\n  interpretResponse: function (serverResponse, bidRequest) {\n    const bidResponses = [];\n    bidRequest.bidParams.forEach(bidParam => {\n      serverResponse.body.mids.forEach(mid => {\n        if (mid.useCount > 0) {\n          return;\n        }\n\n        if (!mid.useCount) {\n          mid.useCount = 0;\n        }\n\n        var sizeNotFound = true;\n        utils.parseSizesInput(bidParam.sizes).forEach(size => {\n          if (size === mid.width + 'x' + mid.height) {\n            sizeNotFound = false;\n          }\n        });\n\n        if (sizeNotFound) {\n          return;\n        }\n\n        const bidResponse = {\n          requestId: bidParam.bidId,\n          bidderCode: spec.code,\n          cpm: parseFloat(mid.cpm),\n          width: mid.width,\n          height: mid.height,\n          ad: mid.ad_code_html,\n          creativeId: mid.mid,\n          currency: 'USD',\n          netRevenue: false,\n          ttl: config.getConfig('_bidderTimeout'),\n        };\n\n        if (bidResponse.cpm <= 0) {\n          return;\n        }\n        if (bidResponse.ad.length <= 0) {\n          return;\n        }\n\n        mid.useCount++;\n\n        bidResponse.ad += makeNotification(bidResponse, mid, bidParam);\n\n        bidResponses.push(bidResponse);\n      });\n    });\n\n    return bidResponses;\n  },\n};\n\nfunction makeNotification(bid, mid, bidParam) {\n  var url = mid.notification_url;\n\n  url += UDM_ADAPTER_VERSION;\n  url += ';cb=' + Math.random();\n  url += ';qqq=' + (1 / bid.cpm);\n  url += ';hbt=' + config.getConfig('_bidderTimeout');\n  url += ';style=adapter';\n  url += ';vis=' + encodeURIComponent(document.visibilityState);\n\n  url += ';traffic_info=' + encodeURIComponent(JSON.stringify(getUrlVars()));\n  if (bidParam.params.subId) {\n    url += ';subid=' + encodeURIComponent(bidParam.params.subId);\n  }\n  return '<script async src=\"' + url + '\"></script>';\n}\n\nfunction getUrlVars() {\n  var vars = {};\n  var hash;\n  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n  for (var i = 0; i < hashes.length; i++) {\n    hash = hashes[i].split('=');\n    if (hash[0].match(/^utm_/)) {\n      vars[hash[0]] = hash[1].substr(0, 150);\n    }\n  }\n  return vars;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/underdogmediaBidAdapter.js","/**\n * Adapter to send bids to Undertone\n */\n\nimport * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'undertone';\nconst URL = '//hb.undertone.com/hb';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    if (bid && bid.params && bid.params.publisherId) {\n      bid.params.publisherId = parseInt(bid.params.publisherId);\n      return true;\n    }\n  },\n  buildRequests: function(validBidRequests) {\n    const payload = {\n      'x-ut-hb-params': []\n    };\n    const location = utils.getTopWindowLocation();\n    let domains = /[-\\w]+\\.([-\\w]+|[-\\w]{3,}|[-\\w]{1,3}\\.[-\\w]{2})$/i.exec(location.host);\n    let domain = null;\n    if (domains != null && domains.length > 0) {\n      domain = domains[0];\n      for (let i = 1; i < domains.length; i++) {\n        if (domains[i].length > domain.length) {\n          domain = domains[i];\n        }\n      }\n    }\n\n    const pubid = validBidRequests[0].params.publisherId;\n    const REQ_URL = `${URL}?pid=${pubid}&domain=${domain}`;\n\n    validBidRequests.map(bidReq => {\n      const bid = {\n        bidRequestId: bidReq.bidId,\n        hbadaptor: 'prebid',\n        url: location.href,\n        domain: domain,\n        placementId: bidReq.params.placementId != undefined ? bidReq.params.placementId : null,\n        publisherId: bidReq.params.publisherId,\n        sizes: bidReq.sizes,\n        params: bidReq.params\n      };\n      payload['x-ut-hb-params'].push(bid);\n    });\n    return {\n      method: 'POST',\n      url: REQ_URL,\n      withCredentials: true,\n      data: JSON.stringify(payload)\n    };\n  },\n  interpretResponse: function(serverResponse, request) {\n    const bids = [];\n    const body = serverResponse.body;\n\n    if (body && Array.isArray(body) && body.length > 0) {\n      body.forEach((bidRes) => {\n        if (bidRes.ad && bidRes.cpm > 0) {\n          const bid = {\n            requestId: bidRes.bidRequestId,\n            cpm: bidRes.cpm,\n            width: bidRes.width,\n            height: bidRes.height,\n            creativeId: bidRes.adId,\n            currency: bidRes.currency,\n            netRevenue: bidRes.netRevenue,\n            ttl: bidRes.ttl || 360,\n            ad: bidRes.ad\n          };\n          bids.push(bid);\n        }\n      });\n    }\n    return bids;\n  }\n};\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/undertoneBidAdapter.js","import * as utils from 'src/utils'\nimport { Renderer } from 'src/Renderer'\nimport { registerBidder } from 'src/adapters/bidderFactory'\nimport { VIDEO } from 'src/mediaTypes'\n\nfunction configureUniversalTag (exchangeRenderer) {\n  parent.window.unruly = parent.window.unruly || {};\n  parent.window.unruly['native'] = parent.window.unruly['native'] || {};\n  parent.window.unruly['native'].siteId = parent.window.unruly['native'].siteId || exchangeRenderer.siteId;\n  parent.window.unruly['native'].supplyMode = 'prebid';\n}\n\nfunction configureRendererQueue () {\n  parent.window.unruly['native'].prebid = parent.window.unruly['native'].prebid || {};\n  parent.window.unruly['native'].prebid.uq = parent.window.unruly['native'].prebid.uq || [];\n}\n\nfunction notifyRenderer (bidResponseBid) {\n  parent.window.unruly['native'].prebid.uq.push(['render', bidResponseBid]);\n}\n\nconst serverResponseToBid = (bid, rendererInstance) => ({\n  requestId: bid.bidId,\n  cpm: bid.cpm,\n  width: bid.width,\n  height: bid.height,\n  vastUrl: bid.vastUrl,\n  netRevenue: true,\n  creativeId: bid.bidId,\n  ttl: 360,\n  currency: 'USD',\n  renderer: rendererInstance\n});\n\nconst buildPrebidResponseAndInstallRenderer = bids =>\n  bids\n    .filter(serverBid => !!utils.deepAccess(serverBid, 'ext.renderer'))\n    .map(serverBid => {\n      const exchangeRenderer = utils.deepAccess(serverBid, 'ext.renderer');\n      configureUniversalTag(exchangeRenderer);\n      configureRendererQueue();\n\n      const rendererInstance = Renderer.install(Object.assign({}, exchangeRenderer, { callback: () => {} }));\n      return { rendererInstance, serverBid };\n    })\n    .map(\n      ({rendererInstance, serverBid}) => {\n        const prebidBid = serverResponseToBid(serverBid, rendererInstance);\n\n        const rendererConfig = Object.assign(\n          {},\n          prebidBid,\n          {\n            renderer: rendererInstance,\n            adUnitCode: serverBid.ext.adUnitCode\n          }\n        );\n\n        rendererInstance.setRender(() => { notifyRenderer(rendererConfig) });\n\n        return prebidBid;\n      }\n    );\n\nexport const adapter = {\n  code: 'unruly',\n  supportedMediaTypes: [ VIDEO ],\n  isBidRequestValid: function(bid) {\n    if (!bid) return false;\n\n    const context = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n    return bid.mediaType === 'video' || context === 'outstream';\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const url = 'https://targeting.unrulymedia.com/prebid';\n    const method = 'POST';\n    const data = {\n      bidRequests: validBidRequests,\n      bidderRequest\n    };\n    const options = { contentType: 'application/json' };\n\n    return {\n      url,\n      method,\n      data,\n      options\n    };\n  },\n\n  interpretResponse: function(serverResponse = {}) {\n    const serverResponseBody = serverResponse.body;\n    const noBidsResponse = [];\n    const isInvalidResponse = !serverResponseBody || !serverResponseBody.bids;\n\n    return isInvalidResponse\n      ? noBidsResponse\n      : buildPrebidResponseAndInstallRenderer(serverResponseBody.bids);\n  }\n};\n\nregisterBidder(adapter);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/unrulyBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\nconst BIDDER_CODE = 'uol';\nconst ENDPOINT_URL = 'https://prebid.adilligo.com/v1/prebid.json';\nconst UOL_LOG_HEADER = 'UOL Bidder Error: '\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER], // not required since it is default\n  aliases: ['uol'], // short code\n  /**\n    * Determines whether or not the given bid request is valid.\n    *\n    * @param {BidRequest} bid The bid params to validate.\n    * @return boolean True if this is a valid bid, and false otherwise.\n    */\n  isBidRequestValid: function(bid) {\n    var isValid = true;\n    if (bid.params) {\n      if (!bid.params.placementId) {\n        utils.logError(UOL_LOG_HEADER + 'Param placementId was not defined for bidID ' + bid.bidId);\n        isValid = false;\n      }\n      if (typeof bid.params.cpmFactor != 'undefined' && !bid.params.test) {\n        utils.logError(UOL_LOG_HEADER + 'Cannot manipulate cpmFactor outside test environment - bidID ' + bid.bidId);\n        isValid = false;\n      }\n      if (bid.params.cpmFactor && (isNaN(bid.params.cpmFactor) || parseInt(Number(bid.params.cpmFactor)) != bid.params.cpmFactor || isNaN(parseInt(bid.params.cpmFactor, 10)))) {\n        utils.logError(UOL_LOG_HEADER + 'Invalid param definition for cpmFactor on bidID ' + bid.bidId);\n        isValid = false;\n      }\n    } else {\n      isValid = false;\n      utils.logError(UOL_LOG_HEADER + 'No params defined for bidID ' + bid.bidId);\n    }\n    if (getSizes(bid).length == 0) {\n      utils.logError(UOL_LOG_HEADER + 'No sizing definition found for bidID ' + bid.bidId);\n      isValid = false;\n    }\n    return isValid;\n  },\n  /**\n    * Make a server request from the list of BidRequests.\n    *\n    * @param {validBidRequests[]} - an array of bids\n    * @param {bidderRequests} - an object containing all bid params, including validBids.\n    * @return ServerRequest Info describing the request to the server.\n    */\n  buildRequests: function(validBidRequests, bidderRequest) {\n    var data = JSON.stringify(getPayloadFor(validBidRequests, bidderRequest));\n    return {\n      method: 'POST',\n      url: ENDPOINT_URL,\n      data,\n      bidRequest: validBidRequests,\n    };\n  },\n  /**\n     * Unpack the response from the server into a list of bids.\n     *\n     * @param {ServerResponse} serverResponse A successful response from the server.\n     * @return {Bid[]} An array of bids which were nested inside the server.\n     */\n  interpretResponse: function(serverResponse, {bidRequest}) {\n    const bidResponses = [];\n    if (serverResponse.body) {\n      const ads = serverResponse.body.ads;\n      for (var index = 0; index < ads.length; index++) {\n        const bidResponse = {\n          requestId: ads[index].bidId,\n          cpm: ads[index].cpm,\n          width: ads[index].width,\n          height: ads[index].height,\n          creativeId: ads[index].creativeId,\n          dealId: ads[index].dealId,\n          currency: ads[index].currency,\n          netRevenue: ads[index].netRevenue,\n          ttl: ads[index].ttl,\n          ad: ads[index].ad,\n          mediaType: ads[index].mediaType\n        };\n        bidResponses.push(bidResponse);\n      }\n    }\n    return bidResponses;\n  },\n\n  /**\n     * Register the user sync pixels which should be dropped after the auction.\n     *\n     * @param {SyncOptions} syncOptions Which user syncs are allowed?\n     * @param {ServerResponse[]} serverResponses List of server's responses.\n     * @return {UserSync[]} The user syncs which should be dropped.\n     */\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const syncs = [];\n    if (syncOptions.iframeEnabled) {\n      for (var index = 0; index < serverResponses.length; index++) {\n        if (serverResponses[index].body && serverResponses[index].body.trackingPixel) {\n          syncs.push({\n            type: 'iframe',\n            url: serverResponses[index].body.trackingPixel\n          });\n        }\n      }\n    }\n    return syncs;\n  }\n}\n\nfunction getPayloadFor(bidRequests, bidderRequest) {\n  var payload = {\n    auctionId: bidderRequest.auctionId,\n    requestId: bidderRequest.bidderRequestId,\n    referrerURL: utils.getTopWindowUrl(),\n    trackingAllowed: !utils.getDNT()\n  };\n  if (payload.trackingAllowed) {\n    try {\n      var location = getLastLocation();\n      if (location != null) {\n        payload.geolocation = location;\n      }\n    } catch (error) { utils.logError(UOL_LOG_HEADER + 'Location acquisition error - ' + error.toString()); }\n  }\n  payload.requests = [];\n  for (var index = 0; index < bidRequests.length; index++) {\n    var request = {\n      bidId: bidRequests[index].bidId,\n      transactionId: bidRequests[index].transactionId,\n      adUnitCode: bidRequests[index].adUnitCode,\n      sizes: getSizes(bidRequests[index]),\n      customParams: extractCustomParams(bidRequests[index].params),\n      type: 'banner'\n    }\n    payload.requests.push(request);\n  }\n  return payload;\n};\n\nfunction getLastLocation() {\n  var location = localStorage.getItem('uolLocationTracker');\n  if (navigator.permissions && navigator.permissions.query) {\n    getUserCoordinates().then(data => {\n      if (data != null) {\n        var coordinates = {\n          lat: data.latitude,\n          long: data.longitude,\n          timestamp: new Date().getTime()\n        };\n        localStorage.setItem('uolLocationTracker', JSON.stringify(coordinates));\n      }\n    }, {})\n  } else {\n    location = null;\n    localStorage.removeItem('uolLocationTracker');\n  }\n  return JSON.parse(location);\n}\n\nfunction getUserCoordinates() {\n  return new Promise((resolve, reject) =>\n    navigator.permissions.query({name: 'geolocation'})\n      .then(permission =>\n        permission.state === 'granted'\n          ? navigator.geolocation.getCurrentPosition(pos => resolve(pos.coords))\n          : resolve(null)\n      ));\n}\n\nfunction extractCustomParams(data) {\n  var params = {\n    placementId: data.placementId\n  }\n  if (data.test) {\n    params.test = data.test;\n    if (data.cpmFactor) {\n      params.cpmFactor = data.cpmFactor;\n    }\n  }\n  return params;\n}\n\nfunction getSizes(bid) {\n  var adSizes = [];\n  if ((Array.isArray(bid.sizes)) && bid.sizes.length > 0) {\n    adSizes = bid.sizes;\n  }\n  return adSizes;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/uolBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {VIDEO, BANNER} from 'src/mediaTypes';\nimport {Renderer} from 'src/Renderer';\nimport findIndex from 'core-js/library/fn/array/find-index';\n\nconst URL = '//hb2.vertamedia.com/auction/';\nconst OUTSTREAM_SRC = '//player.vertamedia.com/outstream-unit/2.01/outstream.min.js';\nconst BIDDER_CODE = 'vertamedia';\nconst OUTSTREAM = 'outstream';\nconst DISPLAY = 'display';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [VIDEO, BANNER],\n  isBidRequestValid: function (bid) {\n    return bid && bid.params && bid.params.aid;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests\n   * @param bidRequests\n   * @param bidderRequest\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    return {\n      data: bidToTag(bidRequests),\n      bidderRequest,\n      method: 'GET',\n      url: URL\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids\n   * @param serverResponse\n   * @param bidderRequest\n   * @return {Bid[]} An array of bids which were nested inside the server\n   */\n  interpretResponse: function (serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    let bids = [];\n\n    if (!utils.isArray(serverResponse)) {\n      return parseRTBResponse(serverResponse, bidderRequest);\n    }\n\n    serverResponse.forEach(serverBidResponse => {\n      bids = utils.flatten(bids, parseRTBResponse(serverBidResponse, bidderRequest));\n    });\n\n    return bids;\n  }\n};\n\nfunction parseRTBResponse(serverResponse, bidderRequest) {\n  const isInvalidValidResp = !serverResponse || !serverResponse.bids || !serverResponse.bids.length;\n\n  let bids = [];\n\n  if (isInvalidValidResp) {\n    let extMessage = serverResponse && serverResponse.ext && serverResponse.ext.message ? `: ${serverResponse.ext.message}` : '';\n    let errorMessage = `in response for ${bidderRequest.bidderCode} adapter ${extMessage}`;\n\n    utils.logError(errorMessage);\n\n    return bids;\n  }\n\n  serverResponse.bids.forEach(serverBid => {\n    const requestId = findIndex(bidderRequest.bids, (bidRequest) => {\n      return bidRequest.bidId === serverBid.requestId;\n    });\n\n    if (serverBid.cpm !== 0 && requestId !== -1) {\n      const bid = createBid(serverBid, getMediaType(bidderRequest.bids[requestId]));\n\n      bids.push(bid);\n    }\n  });\n\n  return bids;\n}\n\nfunction bidToTag(bidRequests) {\n  let tag = {\n    domain: utils.getTopWindowLocation().hostname\n  };\n\n  for (let i = 0, length = bidRequests.length; i < length; i++) {\n    Object.assign(tag, prepareRTBRequestParams(i, bidRequests[i]));\n  }\n\n  return tag;\n}\n\n/**\n * Parse mediaType\n * @param _index {number}\n * @param bid {object}\n * @returns {object}\n */\nfunction prepareRTBRequestParams(_index, bid) {\n  const mediaType = utils.deepAccess(bid, 'mediaTypes.video') ? VIDEO : DISPLAY;\n  const index = !_index ? '' : `${_index + 1}`;\n\n  return {\n    ['callbackId' + index]: bid.bidId,\n    ['aid' + index]: bid.params.aid,\n    ['ad_type' + index]: mediaType,\n    ['sizes' + index]: utils.parseSizesInput(bid.sizes).join()\n  };\n}\n\n/**\n * Prepare all parameters for request\n * @param bidderRequest {object}\n * @returns {object}\n */\nfunction getMediaType(bidderRequest) {\n  const videoMediaType = utils.deepAccess(bidderRequest, 'mediaTypes.video');\n  const context = utils.deepAccess(bidderRequest, 'mediaTypes.video.context');\n\n  return !videoMediaType ? DISPLAY : context === OUTSTREAM ? OUTSTREAM : VIDEO;\n}\n\n/**\n * Configure new bid by response\n * @param bidResponse {object}\n * @param mediaType {Object}\n * @returns {object}\n */\nfunction createBid(bidResponse, mediaType) {\n  let bid = {\n    requestId: bidResponse.requestId,\n    creativeId: bidResponse.cmpId,\n    height: bidResponse.height,\n    currency: bidResponse.cur,\n    width: bidResponse.width,\n    cpm: bidResponse.cpm,\n    netRevenue: true,\n    mediaType,\n    ttl: 3600\n  };\n\n  if (mediaType === DISPLAY) {\n    return Object.assign(bid, {\n      ad: bidResponse.ad\n    });\n  }\n\n  Object.assign(bid, {\n    vastUrl: bidResponse.vastUrl\n  });\n\n  if (mediaType === OUTSTREAM) {\n    Object.assign(bid, {\n      mediaType: 'video',\n      adResponse: bidResponse,\n      renderer: newRenderer(bidResponse.requestId)\n    });\n  }\n\n  return bid;\n}\n\n/**\n * Create Vertamedia renderer\n * @param requestId\n * @returns {*}\n */\nfunction newRenderer(requestId) {\n  const renderer = Renderer.install({\n    id: requestId,\n    url: OUTSTREAM_SRC,\n    loaded: false\n  });\n\n  renderer.setRender(outstreamRender);\n\n  return renderer;\n}\n\n/**\n * Initialise Vertamedia outstream\n * @param bid\n */\nfunction outstreamRender(bid) {\n  bid.renderer.push(() => {\n    window.VOutstreamAPI.initOutstreams([{\n      width: bid.width,\n      height: bid.height,\n      vastUrl: bid.vastUrl,\n      elId: bid.adUnitCode\n    }]);\n  });\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vertamediaBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nconst BIDDER_CODE = 'vertoz';\nconst BASE_URI = '//hb.vrtzads.com/vzhbidder/bid?';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  /**\n  * Determines whether or not the given bid request is valid.\n  *\n  * @param {BidRequest} bid The bid params to validate.\n  * @return boolean True if this is a valid bid, and false otherwise.\n  */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId);\n  },\n  /**\n  * Make a server request from the list of BidRequests.\n  *\n  * @param {validBidRequests[]} - an array of bids\n  * @return ServerRequest Info describing the request to the server.\n  */\n  buildRequests: function(bidRequestsArr) {\n    var bidRequests = bidRequestsArr || [];\n    return bidRequests.map(bid => {\n      let slotBidId = utils.getValue(bid, 'bidId');\n      let cb = Math.round(new Date().getTime() / 1000);\n      let vzEndPoint = BASE_URI;\n      let reqParams = bid.params || {};\n      let placementId = utils.getValue(reqParams, 'placementId');\n      let cpm = utils.getValue(reqParams, 'cpmFloor');\n\n      if (utils.isEmptyStr(placementId)) {\n        utils.logError('missing params:', BIDDER_CODE, 'Enter valid vzPlacementId');\n        return;\n      }\n\n      let reqSrc = utils.getTopWindowLocation().href;\n      var vzReq = {\n        _vzPlacementId: placementId,\n        _rqsrc: reqSrc,\n        _cb: cb,\n        _slotBidId: slotBidId,\n        _cpm: cpm,\n        _cbn: 'pbjs'\n      };\n\n      let queryParamValue = encodeURIComponent(JSON.stringify(vzReq));\n\n      return {\n        method: 'POST',\n        data: {q: queryParamValue},\n        url: vzEndPoint\n      };\n    })\n  },\n  /**\n  * Unpack the response from the server into a list of bids.\n  *\n  * @param {ServerResponse} serverResponse A successful response from the server.\n  * @return {Bid[]} An array of bids which were nested inside the server.\n  */\n  interpretResponse: function(serverResponse) {\n    var bidRespObj = serverResponse.body;\n    const bidResponses = [];\n\n    if (bidRespObj.cpm) {\n      const bidResponse = {\n        requestId: bidRespObj.slotBidId,\n        cpm: Number(bidRespObj.cpm),\n        width: Number(bidRespObj.adWidth),\n        height: Number(bidRespObj.adHeight),\n        netRevenue: true,\n        mediaType: 'banner',\n        currency: 'USD',\n        dealId: null,\n        creativeId: null,\n        ttl: 300,\n        ad: bidRespObj.ad + utils.createTrackPixelHtml(decodeURIComponent(bidRespObj.nurl))\n      };\n      bidResponses.push(bidResponse);\n    }\n    return bidResponses;\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vertozBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'vi';\nconst SUPPORTED_MEDIA_TYPES = [BANNER];\n\nfunction isBidRequestValid(bid) {\n  return !!(bid.params.pubId);\n}\n\nfunction buildRequests(bidReqs) {\n  let imps = [];\n  utils._each(bidReqs, function (bid) {\n    imps.push({\n      id: bid.bidId,\n      sizes: utils.parseSizesInput(bid.sizes).map(size => size.split('x')),\n      bidFloor: parseFloat(bid.params.bidFloor) > 0 ? bid.params.bidFloor : 0\n    });\n  });\n\n  const bidRequest = {\n    id: bidReqs[0].requestId,\n    imps: imps,\n    publisherId: utils.getBidIdParameter('pubId', bidReqs[0].params),\n    siteId: utils.getBidIdParameter('siteId', bidReqs[0].params),\n    cat: utils.getBidIdParameter('cat', bidReqs[0].params),\n    language: utils.getBidIdParameter('lang', bidReqs[0].params),\n    domain: utils.getTopWindowLocation().hostname,\n    page: utils.getTopWindowUrl(),\n    referrer: utils.getTopWindowReferrer()\n  };\n  return {\n    method: 'POST',\n    url: `//pb.vi-serve.com/prebid/bid`,\n    data: JSON.stringify(bidRequest),\n    options: {contentType: 'application/json', withCredentials: false}\n  };\n}\n\nfunction interpretResponse(bids) {\n  let responses = [];\n  utils._each(bids.body, function(bid) {\n    responses.push({\n      requestId: bid.id,\n      cpm: parseFloat(bid.price),\n      width: parseInt(bid.width, 10),\n      height: parseInt(bid.height, 10),\n      creativeId: bid.creativeId,\n      dealId: bid.dealId || null,\n      currency: 'USD',\n      netRevenue: true,\n      mediaType: BANNER,\n      ad: decodeURIComponent(`${bid.ad}`),\n      ttl: 60000\n    });\n  });\n  return responses;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: SUPPORTED_MEDIA_TYPES,\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/viBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport {BANNER} from 'src/mediaTypes';\nexport const URL = '//prebid.nininin.com';\nconst BIDDER_CODE = 'vidazoo';\nconst CURRENCY = 'USD';\nconst TTL_SECONDS = 60 * 5;\nconst INTERNAL_SYNC_TYPE = {\n  IFRAME: 'iframe',\n  IMAGE: 'img'\n};\nconst EXTERNAL_SYNC_TYPE = {\n  IFRAME: 'iframe',\n  IMAGE: 'image'\n};\n\nfunction isBidRequestValid(bid) {\n  const params = bid.params || {};\n  return !!(params.cId && params.pId);\n}\n\nfunction buildRequest(bid, topWindowUrl, size, bidderRequest) {\n  const {params, bidId} = bid;\n  const {bidFloor, cId, pId, ext} = params;\n  // Prebid's util function returns AppNexus style sizes (i.e. 300x250)\n  const [width, height] = size.split('x');\n\n  const dto = {\n    method: 'GET',\n    url: `${URL}/prebid/${cId}`,\n    data: {\n      url: topWindowUrl,\n      cb: Date.now(),\n      bidFloor: bidFloor,\n      bidId: bidId,\n      publisherId: pId,\n      consent: bidderRequest.gdprConsent && bidderRequest.gdprConsent.consentString,\n      width,\n      height\n    }\n  }\n\n  utils._each(ext, (value, key) => {\n    dto.data['ext.' + key] = value;\n  });\n\n  return dto;\n}\n\nfunction buildRequests(validBidRequests, bidderRequest) {\n  const topWindowUrl = utils.getTopWindowUrl();\n  const requests = [];\n  validBidRequests.forEach(validBidRequest => {\n    const sizes = utils.parseSizesInput(validBidRequest.sizes);\n    sizes.forEach(size => {\n      const request = buildRequest(validBidRequest, topWindowUrl, size, bidderRequest);\n      requests.push(request);\n    });\n  });\n  return requests;\n}\n\nfunction interpretResponse(serverResponse, request) {\n  if (!serverResponse || !serverResponse.body) {\n    return [];\n  }\n  const {creativeId, ad, price, exp} = serverResponse.body;\n  if (!ad || !price) {\n    return [];\n  }\n  const {bidId, width, height} = request.data;\n  try {\n    return [{\n      requestId: bidId,\n      cpm: price,\n      width: width,\n      height: height,\n      creativeId: creativeId,\n      currency: CURRENCY,\n      netRevenue: true,\n      ttl: exp || TTL_SECONDS,\n      ad: ad\n    }];\n  } catch (e) {\n    return [];\n  }\n}\n\nfunction getUserSyncs(syncOptions, responses) {\n  const {iframeEnabled, pixelEnabled} = syncOptions;\n\n  if (iframeEnabled) {\n    return [{\n      type: 'iframe',\n      url: '//static.nininin.com/basev/sync/user_sync.html'\n    }];\n  }\n\n  if (pixelEnabled) {\n    const lookup = {};\n    const syncs = [];\n    responses.forEach(response => {\n      const {body} = response;\n      const cookies = body ? body.cookies || [] : [];\n      cookies.forEach(cookie => {\n        switch (cookie.type) {\n          case INTERNAL_SYNC_TYPE.IFRAME:\n            break;\n          case INTERNAL_SYNC_TYPE.IMAGE:\n            if (pixelEnabled && !lookup[cookie.src]) {\n              syncs.push({\n                type: EXTERNAL_SYNC_TYPE.IMAGE,\n                url: cookie.src\n              });\n            }\n            break;\n        }\n      });\n    });\n    return syncs;\n  }\n\n  return [];\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n  isBidRequestValid,\n  buildRequests,\n  interpretResponse,\n  getUserSyncs\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vidazooBidAdapter.js","import * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { config } from 'src/config';\nconst BIDDER_CODE = 'visx';\nconst ENDPOINT_URL = '//t.visx.net/hb';\nconst TIME_TO_LIVE = 360;\nconst DEFAULT_CUR = 'EUR';\nconst ADAPTER_SYNC_URL = '//t.visx.net/push_sync';\nconst LOG_ERROR_MESS = {\n  noAuid: 'Bid from response has no auid parameter - ',\n  noAdm: 'Bid from response has no adm parameter - ',\n  noBid: 'Array of bid objects is empty',\n  noPlacementCode: 'Can\\'t find in requested bids the bid with auid - ',\n  emptyUids: 'Uids should not be empty',\n  emptySeatbid: 'Seatbid array from response has an empty item',\n  emptyResponse: 'Response is empty',\n  hasEmptySeatbidArray: 'Response has empty seatbid array',\n  hasNoArrayOfBids: 'Seatbid from response has no array of bid objects - '\n};\nexport const spec = {\n  code: BIDDER_CODE,\n  isBidRequestValid: function(bid) {\n    return !!bid.params.uid;\n  },\n  buildRequests: function(validBidRequests, bidderRequest) {\n    const auids = [];\n    const bidsMap = {};\n    const bids = validBidRequests || [];\n    const currency =\n      config.getConfig(`currency.bidderCurrencyDefault.${BIDDER_CODE}`) ||\n      config.getConfig('currency.adServerCurrency') ||\n      DEFAULT_CUR;\n    let priceType = 'net';\n    let reqId;\n\n    bids.forEach(bid => {\n      if (bid.params.priceType === 'gross') {\n        priceType = 'gross';\n      }\n      if (!bidsMap[bid.params.uid]) {\n        bidsMap[bid.params.uid] = [bid];\n        auids.push(bid.params.uid);\n      } else {\n        bidsMap[bid.params.uid].push(bid);\n      }\n      reqId = bid.bidderRequestId;\n    });\n\n    const payload = {\n      u: utils.getTopWindowUrl(),\n      pt: priceType,\n      auids: auids.join(','),\n      test: 1,\n      r: reqId,\n      cur: currency,\n    };\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      if (bidderRequest.gdprConsent.consentString) {\n        payload.gdpr_consent = bidderRequest.gdprConsent.consentString;\n      }\n      payload.gdpr_applies =\n        (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean')\n          ? Number(bidderRequest.gdprConsent.gdprApplies) : 1;\n    }\n\n    return {\n      method: 'GET',\n      url: ENDPOINT_URL,\n      data: payload,\n      bidsMap: bidsMap,\n    };\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    serverResponse = serverResponse && serverResponse.body;\n    const bidResponses = [];\n    const bidsMap = bidRequest.bidsMap;\n    const priceType = bidRequest.data.pt;\n    const currency = bidRequest.data.cur;\n\n    let errorMessage;\n\n    if (!serverResponse) errorMessage = LOG_ERROR_MESS.emptyResponse;\n    else if (serverResponse.seatbid && !serverResponse.seatbid.length) {\n      errorMessage = LOG_ERROR_MESS.hasEmptySeatbidArray;\n    }\n\n    if (!errorMessage && serverResponse.seatbid) {\n      serverResponse.seatbid.forEach(respItem => {\n        _addBidResponse(_getBidFromResponse(respItem), bidsMap, priceType, currency, bidResponses);\n      });\n    }\n    if (errorMessage) utils.logError(errorMessage);\n    return bidResponses;\n  },\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    if (syncOptions.pixelEnabled) {\n      var query = [];\n      if (gdprConsent) {\n        if (gdprConsent.consentString) {\n          query.push('gdpr_consent=' + encodeURIComponent(gdprConsent.consentString));\n        }\n        query.push('gdpr_applies=' + encodeURIComponent(\n          (typeof gdprConsent.gdprApplies === 'boolean')\n            ? Number(gdprConsent.gdprApplies) : 1));\n      }\n      return [{\n        type: 'image',\n        url: ADAPTER_SYNC_URL + (query.length ? '?' + query.join('&') : '')\n      }];\n    }\n  }\n};\n\nfunction _getBidFromResponse(respItem) {\n  if (!respItem) {\n    utils.logError(LOG_ERROR_MESS.emptySeatbid);\n  } else if (!respItem.bid) {\n    utils.logError(LOG_ERROR_MESS.hasNoArrayOfBids + JSON.stringify(respItem));\n  } else if (!respItem.bid[0]) {\n    utils.logError(LOG_ERROR_MESS.noBid);\n  }\n  return respItem && respItem.bid && respItem.bid[0];\n}\n\nfunction _addBidResponse(serverBid, bidsMap, priceType, currency, bidResponses) {\n  if (!serverBid) return;\n  let errorMessage;\n  if (!serverBid.auid) errorMessage = LOG_ERROR_MESS.noAuid + JSON.stringify(serverBid);\n  if (!serverBid.adm) errorMessage = LOG_ERROR_MESS.noAdm + JSON.stringify(serverBid);\n  else {\n    const awaitingBids = bidsMap[serverBid.auid];\n    if (awaitingBids) {\n      awaitingBids.forEach(bid => {\n        const bidResponse = {\n          requestId: bid.bidId,\n          cpm: serverBid.price,\n          width: serverBid.w,\n          height: serverBid.h,\n          creativeId: serverBid.auid,\n          currency: currency || DEFAULT_CUR,\n          netRevenue: priceType !== 'gross',\n          ttl: TIME_TO_LIVE,\n          ad: serverBid.adm,\n          dealId: serverBid.dealid\n        };\n        bidResponses.push(bidResponse);\n      });\n    } else {\n      errorMessage = LOG_ERROR_MESS.noPlacementCode + serverBid.auid;\n    }\n  }\n  if (errorMessage) {\n    utils.logError(errorMessage);\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/visxBidAdapter.js","/**\n * vuble.js - Vuble Prebid Analytics Adapter\n */\n\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\nimport {ajax} from '../src/ajax';\nimport * as utils from '../src/utils';\n\nconst ANALYTICS_VERSION = '1.0.0';\nconst DEFAULT_QUEUE_TIMEOUT = 4000;\nconst DEFAULT_HOST = 'player.mediabong';\nconst analyticsType = 'endpoint';\n\nconst EVENTS = [\n  CONSTANTS.EVENTS.AUCTION_INIT,\n  CONSTANTS.EVENTS.AUCTION_END,\n  CONSTANTS.EVENTS.BID_REQUESTED,\n  CONSTANTS.EVENTS.BID_RESPONSE,\n  CONSTANTS.EVENTS.BID_WON,\n  CONSTANTS.EVENTS.BID_TIMEOUT,\n];\n\nvar vubleAnalytics = Object.assign(adapter({ analyticsType: analyticsType, }),\n  {\n    track: function({ eventType, args }) {\n      if (!vubleAnalytics.context) {\n        return;\n      }\n      if (EVENTS.indexOf(eventType) !== -1) {\n        if (eventType === CONSTANTS.EVENTS.AUCTION_INIT &&\n            vubleAnalytics.context.queue) {\n          vubleAnalytics.context.queue.init();\n        }\n\n        let events = deal[eventType](args);\n\n        if (vubleAnalytics.context.queue) {\n          vubleAnalytics.context.queue.push(events);\n        }\n        if (eventType === CONSTANTS.EVENTS.AUCTION_END) {\n          sendAll();\n        }\n      }\n    }\n  });\n\nvubleAnalytics.context = {};\n\nvubleAnalytics.originEnableAnalytics = vubleAnalytics.enableAnalytics;\n\nvubleAnalytics.enableAnalytics = config => {\n  if (!config.options.pubId) {\n    utils.logError('The publisher id is not defined. Analytics won\\'t work');\n\n    return;\n  }\n\n  if (!config.options.host) {\n    if (!config.options.env) {\n      utils.logError('The environement is not defined. Analytics won\\'t work');\n\n      return;\n    }\n    config.options.host = DEFAULT_HOST + '.' + config.options.env + '/t';\n  }\n\n  vubleAnalytics.context = {\n    host: config.options.host,\n    pubId: config.options.pubId,\n    requestTemplate: buildRequestTemplate(config.options.pubId),\n    queue: new ExpiringQueue(\n      sendAll,\n      config.options.queueTimeout || DEFAULT_QUEUE_TIMEOUT\n    ),\n  };\n  vubleAnalytics.originEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: vubleAnalytics,\n  code: 'vuble'\n});\n\nexport default vubleAnalytics;\n\nfunction sendAll() {\n  let events = vubleAnalytics.context.queue.popAll();\n  if (events.length !== 0) {\n    let req = Object.assign(\n      {},\n      vubleAnalytics.context.requestTemplate,\n      {rtb: events}\n    );\n    ajax(\n      `//${vubleAnalytics.context.host}/rtb.php`,\n      undefined,\n      JSON.stringify(req)\n    );\n  }\n}\n\nvar deal =\n{\n  auctionInit() {\n    vubleAnalytics.context.auctionTimeStart = Date.now();\n    return [{\n      event: CONSTANTS.EVENTS.AUCTION_INIT,\n      date: vubleAnalytics.context.auctionTimeStart,\n    }];\n  },\n\n  bidRequested(args) {\n    return args.bids.map(\n      function(bid) {\n        let vubleEvent = { event: CONSTANTS.EVENTS.BID_REQUESTED };\n\n        if (typeof args.bidderCode !== 'undefined') {\n          vubleEvent.adapter = args.bidderCode\n        }\n        if (typeof bid.bidId !== 'undefined') {\n          vubleEvent.bidder = bid.bidId;\n        }\n        if (typeof bid.bidderRequestId !== 'undefined') {\n          vubleEvent.id = bid.bidderRequestId;\n        }\n        if (typeof bid.params.floorPrice !== 'undefined') {\n          vubleEvent.floor = bid.params.floorPrice;\n        }\n        if (typeof bid.params.zoneId !== 'undefined') {\n          vubleEvent.zoneId = bid.params.zoneId;\n        }\n        if (typeof bid.mediaTypes !== 'undefined' &&\n            typeof bid.mediaTypes.videos !== 'undefined' &&\n            typeof bid.mediaTypes.videos.context !== 'undefined') {\n          vubleEvent.context = bid.mediaTypes.videos.context;\n        }\n        if (typeof bid.sizes !== 'undefined') {\n          vubleEvent.size = bid.sizes;\n        }\n\n        return vubleEvent;\n      }\n    );\n  },\n\n  bidResponse(args) {\n    const event = formalizeBidEvent(\n      args.bidderCode,\n      CONSTANTS.EVENTS.BID_RESPONSE,\n      args.cpm,\n      args.dealId,\n      args.adId\n    );\n\n    return [event];\n  },\n\n  bidWon(args) {\n    const event = formalizeBidEvent(\n      args.bidderCode,\n      CONSTANTS.EVENTS.BID_WON,\n      args.cpm,\n      args.dealId,\n    );\n\n    return [event];\n  },\n\n  auctionEnd() {\n    return [{\n      event: CONSTANTS.EVENTS.AUCTION_END,\n      time: (Date.now() - vubleAnalytics.context.auctionTimeStart) / 1000,\n    }];\n  },\n\n  bidTimeout(args) {\n    return args.map((bid) => {\n      return {\n        adapter: bid,\n        event: CONSTANTS.EVENTS.BID_TIMEOUT,\n      };\n    });\n  }\n};\n\nfunction formalizeBidEvent(adapter, event, value = 0, dealId = 0, id = 0) {\n  let vubleEvent = { event: event };\n\n  if (adapter) {\n    vubleEvent.adapter = adapter\n  }\n  if (value) {\n    vubleEvent.val = value;\n  }\n  if (dealId) {\n    vubleEvent.id = dealId;\n  }\n  if (id) {\n    vubleEvent.id = id;\n  }\n\n  return vubleEvent;\n}\n\nfunction buildRequestTemplate(pubId) {\n  const topLocation = utils.getTopWindowLocation();\n\n  return {\n    ver: ANALYTICS_VERSION,\n    domain: topLocation.hostname,\n    path: topLocation.pathname,\n    pubid: pubId,\n    width: window.screen.width,\n    height: window.screen.height,\n    lang: navigator.language,\n  }\n}\n\n/**\n * Expiring queue implementation\n * @param callback\n * @param time\n */\nexport function ExpiringQueue(callback, time) {\n  let queue = [];\n  let timeoutId;\n\n  this.push = event => {\n    if (event instanceof Array) {\n      queue.push.apply(queue, event);\n    } else {\n      queue.push(event);\n    }\n    reset();\n  };\n\n  this.popAll = () => {\n    let result = queue;\n    queue = [];\n    reset();\n    return result;\n  };\n\n  this.init = reset;\n\n  function reset() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      if (queue.length) {\n        callback();\n      }\n    }, time);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vubleAnalyticsAdapter.js","// Vuble Adapter\n\nimport * as utils from 'src/utils';\nimport {registerBidder} from 'src/adapters/bidderFactory';\nimport { Renderer } from 'src/Renderer';\n\nconst BIDDER_CODE = 'vuble';\n\nconst ENVS = ['com', 'net'];\nconst CURRENCIES = {\n  com: 'EUR',\n  net: 'USD'\n};\nconst TTL = 60;\n\nconst outstreamRender = bid => {\n  bid.renderer.push(() => {\n    window.ANOutstreamVideo.renderAd({\n      sizes: [bid.width, bid.height],\n      targetId: bid.adUnitCode,\n      adResponse: bid.adResponse,\n      rendererOptions: {\n        showBigPlayButton: false,\n        showProgressBar: 'bar',\n        showVolume: false,\n        allowFullscreen: false,\n        skippable: false,\n      }\n    });\n  });\n}\n\nconst createRenderer = (bid, serverResponse) => {\n  const renderer = Renderer.install({\n    id: serverResponse.renderer_id,\n    url: serverResponse.renderer_url,\n    loaded: false,\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  return renderer;\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: ['video'],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    if (utils.isEmpty(bid.sizes) || utils.parseSizesInput(bid.sizes).length == 0) {\n      return false;\n    }\n\n    if (!utils.deepAccess(bid, 'mediaTypes.video.context')) {\n      return false;\n    }\n\n    if (!utils.contains(ENVS, bid.params.env)) {\n      return false;\n    }\n\n    return !!(bid.params.env && bid.params.pubId && bid.params.zoneId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {validBidRequests[]} - an array of bids\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests) {\n    return validBidRequests.map(bidRequest => {\n      // We take the first size\n      let size = utils.parseSizesInput(bidRequest.sizes)[0].split('x');\n\n      // Get the page's url\n      let referrer = utils.getTopWindowUrl();\n      if (bidRequest.params.referrer) {\n        referrer = bidRequest.params.referrer;\n      }\n\n      // Get Video Context\n      let context = utils.deepAccess(bidRequest, 'mediaTypes.video.context');\n\n      let url = '//player.mediabong.' + bidRequest.params.env + '/prebid/request';\n      let data = {\n        width: size[0],\n        height: size[1],\n        pub_id: bidRequest.params.pubId,\n        zone_id: bidRequest.params.zoneId,\n        context: context,\n        floor_price: bidRequest.params.floorPrice ? bidRequest.params.floorPrice : 0,\n        url: referrer,\n        env: bidRequest.params.env,\n        bid_id: bidRequest.bidId,\n        adUnitCode: bidRequest.adUnitCode\n      };\n\n      return {\n        method: 'POST',\n        url: url,\n        data: data\n      };\n    });\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const responseBody = serverResponse.body;\n\n    if (typeof responseBody !== 'object' || responseBody.status !== 'ok') {\n      return [];\n    }\n\n    let bids = [];\n    let bid = {\n      requestId: bidRequest.data.bid_id,\n      cpm: responseBody.cpm,\n      width: bidRequest.data.width,\n      height: bidRequest.data.height,\n      ttl: TTL,\n      creativeId: responseBody.creativeId,\n      dealId: responseBody.dealId,\n      netRevenue: true,\n      currency: CURRENCIES[bidRequest.data.env],\n      vastUrl: responseBody.url,\n      mediaType: 'video'\n    };\n\n    if (responseBody.renderer_url) {\n      let adResponse = {\n        ad: {\n          video: {\n            content: responseBody.content\n          }\n        }\n      };\n\n      Object.assign(bid, {\n        adResponse: adResponse,\n        adUnitCode: bidRequest.data.adUnitCode,\n        renderer: createRenderer(bid, responseBody)\n      });\n    }\n\n    bids.push(bid);\n\n    return bids;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function (syncOptions, serverResponses) {\n    if (syncOptions.iframeEnabled) {\n      if (serverResponses.length > 0) {\n        let responseBody = serverResponses[0].body;\n        if (typeof responseBody !== 'object' || responseBody.iframeSync) {\n          return [{\n            type: 'iframe',\n            url: responseBody.iframeSync\n          }];\n        }\n      }\n    }\n    return [];\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/vubleBidAdapter.js","import { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport * as utils from 'src/utils';\n\nconst BIDDER_CODE = 'weborama';\nconst URL = '//supply.nl.weborama.fr/?c=o&m=multi';\nconst URL_SYNC = '//supply.nl.weborama.fr/?c=o&m=cookie';\n\nfunction isBidResponseValid(bid) {\n  if (!bid.requestId || !bid.cpm || !bid.creativeId || !bid.ttl || !bid.currency) {\n    return false;\n  }\n  switch (bid.mediaType) {\n    case BANNER:\n      return Boolean(bid.width && bid.height && bid.ad);\n    case VIDEO:\n      return Boolean(bid.vastUrl);\n    case NATIVE:\n      return Boolean(bid.native);\n    default:\n      return false;\n  }\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: (bid) => {\n    return Boolean(bid.bidId &&\n        bid.params &&\n        !isNaN(bid.params.placementId) &&\n        spec.supportedMediaTypes.indexOf(bid.params.traffic) !== -1\n    );\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} validBidRequests A non-empty list of valid bid requests that should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: (validBidRequests) => {\n    let winTop;\n    try {\n      winTop = utils.getWindowTop();\n      winTop.location.toString();\n    } catch (e) {\n      utils.logMessage(e);\n      winTop = window;\n    };\n\n    const location = utils.getTopWindowLocation();\n    const placements = [];\n    const request = {\n      'secure': (location.protocol === 'https:') ? 1 : 0,\n      'deviceWidth': winTop.screen.width,\n      'deviceHeight': winTop.screen.height,\n      'host': location.host,\n      'page': location.pathname,\n      'placements': placements\n    };\n\n    for (let i = 0; i < validBidRequests.length; i++) {\n      const bid = validBidRequests[i];\n      const params = bid.params;\n      placements.push({\n        placementId: params.placementId,\n        bidId: bid.bidId,\n        sizes: bid.sizes,\n        traffic: params.traffic\n      });\n    }\n    return {\n      method: 'POST',\n      url: URL,\n      data: request\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: (serverResponse) => {\n    let response = [];\n    try {\n      serverResponse = serverResponse.body;\n      for (let i = 0; i < serverResponse.length; i++) {\n        let resItem = serverResponse[i];\n        if (isBidResponseValid(resItem)) {\n          response.push(resItem);\n        }\n      }\n    } catch (e) {\n      utils.logMessage(e);\n    };\n    return response;\n  },\n\n  getUserSyncs: () => {\n    return [{\n      type: 'image',\n      url: URL_SYNC\n    }];\n  }\n};\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/weboramaBidAdapter.js","import { version } from '../package.json';\nimport { config } from 'src/config';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport {\n  cookiesAreEnabled,\n  parseQueryStringParameters,\n  parseSizesInput,\n  getTopWindowReferrer\n} from 'src/utils';\nimport includes from 'core-js/library/fn/array/includes';\nimport find from 'core-js/library/fn/array/find';\n\nconst BIDDER_CODE = 'widespace';\nconst WS_ADAPTER_VERSION = '2.0.1';\nconst LOCAL_STORAGE_AVAILABLE = window.localStorage;\nconst COOKIE_ENABLED = cookiesAreEnabled();\nconst LS_KEYS = {\n  PERF_DATA: 'wsPerfData',\n  LC_UID: 'wsLcuid',\n  CUST_DATA: 'wsCustomData'\n};\n\nlet preReqTime = 0;\n\nexport const spec = {\n  code: BIDDER_CODE,\n\n  supportedMediaTypes: ['banner'],\n\n  isBidRequestValid: function(bid) {\n    if (bid.params && bid.params.sid) {\n      return true;\n    }\n    return false;\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    let serverRequests = [];\n    const REQUEST_SERVER_URL = getEngineUrl();\n    const DEMO_DATA_PARAMS = ['gender', 'country', 'region', 'postal', 'city', 'yob'];\n    const PERF_DATA = getData(LS_KEYS.PERF_DATA).map(perfData => JSON.parse(perfData));\n    const CUST_DATA = getData(LS_KEYS.CUST_DATA, false)[0];\n    const LC_UID = getLcuid();\n\n    let isInHostileIframe = false;\n    try {\n      window.top.location.toString();\n      isInHostileIframe = false;\n    } catch (e) {\n      isInHostileIframe = true;\n    }\n\n    validBidRequests.forEach((bid, i) => {\n      let data = {\n        'screenWidthPx': screen && screen.width,\n        'screenHeightPx': screen && screen.height,\n        'adSpaceHttpRefUrl': getTopWindowReferrer(),\n        'referer': (isInHostileIframe ? window : window.top).location.href.split('#')[0],\n        'inFrame': 1,\n        'sid': bid.params.sid,\n        'lcuid': LC_UID,\n        'vol': isInHostileIframe ? '' : visibleOnLoad(document.getElementById(bid.adUnitCode)),\n        'gdprCmp': bidderRequest && bidderRequest.gdprConsent ? 1 : 0,\n        'hb': '1',\n        'hb.cd': CUST_DATA ? encodedParamValue(CUST_DATA) : '',\n        'hb.floor': bid.bidfloor || '',\n        'hb.spb': i === 0 ? pixelSyncPossibility() : -1,\n        'hb.ver': WS_ADAPTER_VERSION,\n        'hb.name': `prebidjs-${version}`,\n        'hb.bidId': bid.bidId,\n        'hb.sizes': parseSizesInput(bid.sizes).join(','),\n        'hb.currency': bid.params.cur || bid.params.currency || ''\n      };\n\n      // Include demo data\n      if (bid.params.demo) {\n        DEMO_DATA_PARAMS.forEach((key) => {\n          if (bid.params.demo[key]) {\n            data[key] = bid.params.demo[key];\n          }\n        });\n      }\n\n      // Include performance data\n      if (PERF_DATA[i]) {\n        Object.keys(PERF_DATA[i]).forEach((perfDataKey) => {\n          data[perfDataKey] = PERF_DATA[i][perfDataKey];\n        });\n      }\n\n      // Include connection info if available\n      const CONNECTION = navigator.connection || navigator.webkitConnection;\n      if (CONNECTION && CONNECTION.type && CONNECTION.downlinkMax) {\n        data['netinfo.type'] = CONNECTION.type;\n        data['netinfo.downlinkMax'] = CONNECTION.downlinkMax;\n      }\n\n      // Include debug data when available\n      if (!isInHostileIframe) {\n        const DEBUG_AD = (find(window.top.location.hash.split('&'),\n          val => includes(val, 'WS_DEBUG_FORCEADID')\n        ) || '').split('=')[1];\n        data.forceAdId = DEBUG_AD;\n      }\n\n      // GDPR Consent info\n      if (data.gdprCmp) {\n        const { gdprApplies, consentString, vendorData } = bidderRequest.gdprConsent;\n        const hasGlobalScope = vendorData && vendorData.hasGlobalScope;\n        data.gdprApplies = gdprApplies ? 1 : gdprApplies === undefined ? '' : 0;\n        data.gdprConsentData = consentString;\n        data.gdprHasGlobalScope = hasGlobalScope ? 1 : hasGlobalScope === undefined ? '' : 0;\n      }\n\n      // Remove empty params\n      Object.keys(data).forEach((key) => {\n        if (data[key] === '' || data[key] === undefined) {\n          delete data[key];\n        }\n      });\n\n      serverRequests.push({\n        method: 'POST',\n        options: {\n          contentType: 'application/x-www-form-urlencoded'\n        },\n        url: REQUEST_SERVER_URL,\n        data: parseQueryStringParameters(data)\n      });\n    });\n    preReqTime = Date.now();\n    return serverRequests;\n  },\n\n  interpretResponse: function(serverResponse, request) {\n    const responseTime = Date.now() - preReqTime;\n    const successBids = serverResponse.body || [];\n    let bidResponses = [];\n    successBids.forEach((bid) => {\n      storeData({\n        'perf_status': 'OK',\n        'perf_reqid': bid.reqId,\n        'perf_ms': responseTime\n      }, `${LS_KEYS.PERF_DATA}${bid.reqId}`);\n      if (bid.status === 'ad') {\n        bidResponses.push({\n          requestId: bid.bidId,\n          cpm: bid.cpm,\n          width: bid.width,\n          height: bid.height,\n          creativeId: bid.adId,\n          currency: bid.currency,\n          netRevenue: Boolean(bid.netRev),\n          ttl: bid.ttl,\n          referrer: getTopWindowReferrer(),\n          ad: bid.code\n        });\n      }\n    });\n\n    return bidResponses\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses = []) {\n    let userSyncs = [];\n    userSyncs = serverResponses.reduce((allSyncPixels, response) => {\n      if (response && response.body && response.body[0]) {\n        (response.body[0].syncPixels || []).forEach((url) => {\n          allSyncPixels.push({type: 'image', url});\n        });\n      }\n      return allSyncPixels;\n    }, []);\n    return userSyncs;\n  }\n};\n\nfunction storeData(data, name, stringify = true) {\n  const value = stringify ? JSON.stringify(data) : data;\n  if (LOCAL_STORAGE_AVAILABLE) {\n    localStorage.setItem(name, value);\n    return true;\n  } else if (COOKIE_ENABLED) {\n    const theDate = new Date();\n    const expDate = new Date(theDate.setMonth(theDate.getMonth() + 12)).toGMTString();\n    window.document.cookie = `${name}=${value};path=/;expires=${expDate}`;\n    return true;\n  }\n}\n\nfunction getData(name, remove = true) {\n  let data = [];\n  if (LOCAL_STORAGE_AVAILABLE) {\n    Object.keys(localStorage).filter((key) => {\n      if (key.indexOf(name) > -1) {\n        data.push(localStorage.getItem(key));\n        if (remove) {\n          localStorage.removeItem(key);\n        }\n      }\n    });\n  }\n\n  if (COOKIE_ENABLED) {\n    document.cookie.split(';').forEach((item) => {\n      let value = item.split('=');\n      if (value[0].indexOf(name) > -1) {\n        data.push(value[1]);\n        if (remove) {\n          document.cookie = `${value[0]}=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n        }\n      }\n    });\n  }\n  return data;\n}\n\nfunction pixelSyncPossibility() {\n  const userSync = config.getConfig('userSync');\n  return userSync && userSync.pixelEnabled && userSync.syncEnabled ? userSync.syncsPerBidder : -1;\n}\n\nfunction visibleOnLoad(element) {\n  if (element && element.getBoundingClientRect) {\n    const topPos = element.getBoundingClientRect().top;\n    return topPos < screen.height && topPos >= window.top.pageYOffset ? 1 : 0;\n  };\n  return '';\n}\n\nfunction getLcuid() {\n  let lcuid = getData(LS_KEYS.LC_UID, false)[0];\n  if (!lcuid) {\n    const random = ('4' + new Date().getTime() + String(Math.floor(Math.random() * 1000000000))).substring(0, 18);\n    storeData(random, LS_KEYS.LC_UID, false);\n    lcuid = getData(LS_KEYS.LC_UID, false)[0];\n  }\n  return lcuid;\n}\n\nfunction encodedParamValue(value) {\n  const requiredStringify = typeof JSON.parse(JSON.stringify(value)) === 'object';\n  return encodeURIComponent(requiredStringify ? JSON.stringify(value) : value);\n}\n\nfunction getEngineUrl() {\n  const ENGINE_URL = 'https://engine.widespace.com/map/engine/dynadreq';\n  return window.wisp && window.wisp.ENGINE_URL ? window.wisp.ENGINE_URL : ENGINE_URL;\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/widespaceBidAdapter.js","module.exports = {\"name\":\"prebid.js\",\"version\":\"1.25.0-pre\",\"description\":\"Header Bidding Management Library\",\"main\":\"src/prebid.js\",\"scripts\":{\"test\":\"gulp run-tests\",\"lint\":\"gulp lint\"},\"repository\":{\"type\":\"git\",\"url\":\"https://github.com/prebid/Prebid.js.git\"},\"keywords\":[\"advertising\",\"auction\",\"header bidding\",\"prebid\"],\"globalVarName\":\"pbjs\",\"author\":\"the prebid.js contributors\",\"license\":\"Apache-2.0\",\"engines\":{\"node\":\">=4.0\"},\"devDependencies\":{\"ajv\":\"6.2.0\",\"babel-core\":\"6.22.0\",\"babel-loader\":\"^7.1.1\",\"babel-preset-env\":\"^1.6.1\",\"block-loader\":\"^2.1.0\",\"chai\":\"^3.3.0\",\"coveralls\":\"^3.0.1\",\"documentation\":\"^5.2.2\",\"ejs\":\"^2.5.1\",\"es5-shim\":\"^4.5.2\",\"eslint-config-standard\":\"^10.2.1\",\"eslint-plugin-import\":\"^2.2.0\",\"eslint-plugin-node\":\"^5.1.0\",\"eslint-plugin-promise\":\"^3.5.0\",\"eslint-plugin-standard\":\"^3.0.1\",\"faker\":\"^3.1.0\",\"fs.extra\":\"^1.3.2\",\"gulp\":\"^4.0.0\",\"gulp-babel\":\"^6.1.2\",\"gulp-clean\":\"^0.3.2\",\"gulp-concat\":\"^2.6.0\",\"gulp-connect\":\"5.5.0\",\"gulp-eslint\":\"^4.0.0\",\"gulp-footer\":\"^1.0.5\",\"gulp-header\":\"^1.7.1\",\"gulp-if\":\"^2.0.2\",\"gulp-js-escape\":\"^1.0.1\",\"gulp-optimize-js\":\"^1.1.0\",\"gulp-rename\":\"^1.2.0\",\"gulp-replace\":\"^0.4.0\",\"gulp-shell\":\"^0.5.2\",\"gulp-uglify\":\"^3.0.0\",\"gulp-util\":\"^3.0.0\",\"ignore-loader\":\"^0.1.2\",\"is-docker\":\"^1.1.0\",\"istanbul\":\"^0.4.5\",\"istanbul-instrumenter-loader\":\"^3.0.0\",\"json-loader\":\"^0.5.1\",\"karma\":\"^2.0.0\",\"karma-babel-preprocessor\":\"^6.0.1\",\"karma-browserstack-launcher\":\"^1.0.1\",\"karma-chai\":\"^0.1.0\",\"karma-chrome-launcher\":\"^2.2.0\",\"karma-coverage-istanbul-reporter\":\"^1.3.0\",\"karma-es5-shim\":\"^0.0.4\",\"karma-firefox-launcher\":\"^1.0.1\",\"karma-ie-launcher\":\"^1.0.0\",\"karma-mocha\":\"^1.3.0\",\"karma-mocha-reporter\":\"^2.2.5\",\"karma-opera-launcher\":\"^1.0.0\",\"karma-requirejs\":\"^1.1.0\",\"karma-safari-launcher\":\"^1.0.0\",\"karma-script-launcher\":\"^1.0.0\",\"karma-sinon\":\"^1.0.5\",\"karma-sourcemap-loader\":\"^0.3.7\",\"karma-spec-reporter\":\"^0.0.31\",\"karma-webpack\":\"^2.0.3\",\"localtunnel\":\"^1.3.0\",\"lodash\":\"^4.17.4\",\"mkpath\":\"^1.0.0\",\"mocha\":\"2.2.5\",\"mock-fs\":\"^3.11.0\",\"nightwatch\":\"^1.0.6\",\"open\":\"0.0.5\",\"proxyquire\":\"^1.7.10\",\"querystringify\":\"0.0.3\",\"requirejs\":\"^2.1.20\",\"sinon\":\"^4.1.3\",\"string-replace-webpack-plugin\":\"^0.1.3\",\"through2\":\"^2.0.3\",\"uglify-js\":\"^2.8.10\",\"url-parse\":\"^1.0.5\",\"webpack\":\"^3.0.0\",\"webpack-stream\":\"^3.2.0\",\"yargs\":\"^1.3.1\"},\"dependencies\":{\"babel-plugin-transform-object-assign\":\"^6.22.0\",\"core-js\":\"^2.4.1\",\"gulp-sourcemaps\":\"^2.6.0\",\"just-clone\":\"^1.0.2\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 534\n// module chunks = 3","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER } from 'src/mediaTypes';\n\nconst BIDDER_CODE = 'xendiz';\nconst PREBID_ENDPOINT = 'prebid.xendiz.com';\nconst SYNC_ENDPOINT = 'https://advsync.com/xendiz/ssp/?pixel=1';\n\nconst buildURI = () => {\n  return `//${PREBID_ENDPOINT}/request`;\n}\n\nconst getDevice = () => {\n  const lang = navigator.language || '';\n  const width = window.screen.width;\n  const height = window.screen.height;\n\n  return [lang, width, height];\n};\n\nconst buildItem = (req) => {\n  return [\n    req.bidId,\n    req.params,\n    req.adUnitCode,\n    req.sizes.map(s => `${s[0]}x${s[1]}`)\n  ]\n}\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [BANNER],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!bid.params.pid;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests) {\n    const payload = {\n      id: bidRequests[0].auctionId,\n      items: bidRequests.map(buildItem),\n      device: getDevice(),\n      page: utils.getTopWindowUrl(),\n      dt: +new Date()\n    };\n    const payloadString = JSON.stringify(payload);\n\n    return {\n      method: 'POST',\n      url: buildURI(),\n      data: payloadString\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse) {\n    const bids = serverResponse.body.bids.map(bid => {\n      return {\n        requestId: bid.id,\n        cpm: bid.price,\n        width: bid.w,\n        height: bid.h,\n        creativeId: bid.crid,\n        netRevenue: bid.netRevenue !== undefined ? bid.netRevenue : true,\n        dealId: bid.dealid,\n        currency: bid.cur || 'USD',\n        ttl: bid.exp || 900,\n        ad: bid.adm,\n      }\n    });\n\n    return bids;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.pixelEnabled) {\n      return [{\n        type: 'image',\n        url: SYNC_ENDPOINT\n      }];\n    }\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xendizBidAdapter.js","import { Renderer } from 'src/Renderer';\nimport * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, NATIVE, VIDEO } from 'src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst BIDDER_CODE = 'xhb';\nconst URL = '//ib.adnxs.com/ut/v3/prebid';\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\nconst USER_PARAMS = ['age', 'external_uid', 'segments', 'gender', 'dnt', 'language'];\nconst NATIVE_MAPPING = {\n  body: 'description',\n  cta: 'ctatext',\n  image: {\n    serverName: 'main_image',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  icon: {\n    serverName: 'icon',\n    requiredParams: { required: true },\n    minimumParams: { sizes: [{}] },\n  },\n  sponsoredBy: 'sponsored_by',\n};\nconst SOURCE = 'pbjs';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: [],\n  supportedMediaTypes: [BANNER, VIDEO, NATIVE],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId || (bid.params.member && bid.params.invCode));\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests, bidderRequest) {\n    const tags = bidRequests.map(bidToTag);\n    const userObjBid = find(bidRequests, hasUserInfo);\n    let userObj;\n    if (userObjBid) {\n      userObj = {};\n      Object.keys(userObjBid.params.user)\n        .filter(param => includes(USER_PARAMS, param))\n        .forEach(param => userObj[param] = userObjBid.params.user[param]);\n    }\n\n    const memberIdBid = find(bidRequests, hasMemberId);\n    const member = memberIdBid ? parseInt(memberIdBid.params.member, 10) : 0;\n\n    const payload = {\n      tags: [...tags],\n      user: userObj,\n      sdk: {\n        source: SOURCE,\n        version: '1.25.0-pre'\n      }\n    };\n    if (member > 0) {\n      payload.member_id = member;\n    }\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      // note - objects for impbus use underscore instead of camelCase\n      payload.gdpr_consent = {\n        consent_string: bidderRequest.gdprConsent.consentString,\n        consent_required: bidderRequest.gdprConsent.gdprApplies\n      };\n    }\n\n    const payloadString = JSON.stringify(payload);\n    return {\n      method: 'POST',\n      url: URL,\n      data: payloadString,\n      bidderRequest\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function(serverResponse, {bidderRequest}) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${bidderRequest.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (serverResponse.tags) {\n      serverResponse.tags.forEach(serverBid => {\n        const rtbBid = getRtbBid(serverBid);\n        if (rtbBid) {\n          if (rtbBid.cpm !== 0 && includes(this.supportedMediaTypes, rtbBid.ad_type)) {\n            const bid = newBid(serverBid, rtbBid, bidderRequest);\n            bid.mediaType = parseMediaType(rtbBid);\n            bids.push(bid);\n          }\n        }\n      });\n    }\n    return bids;\n  },\n\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html'\n      }];\n    }\n  }\n};\n\nfunction newRenderer(adUnitCode, rtbBid, rendererOptions = {}) {\n  const renderer = Renderer.install({\n    id: rtbBid.renderer_id,\n    url: rtbBid.renderer_url,\n    config: rendererOptions,\n    loaded: false,\n  });\n\n  try {\n    renderer.setRender(outstreamRender);\n  } catch (err) {\n    utils.logWarn('Prebid Error calling setRender on renderer', err);\n  }\n\n  renderer.setEventHandlers({\n    impression: () => utils.logMessage('xhb outstream video impression event'),\n    loaded: () => utils.logMessage('xhb outstream video loaded event'),\n    ended: () => {\n      utils.logMessage('xhb outstream renderer video event');\n      document.querySelector(`#${adUnitCode}`).style.display = 'none';\n    }\n  });\n  return renderer;\n}\n\n/* Turn keywords parameter into ut-compatible format */\nfunction getKeywords(keywords) {\n  let arrs = [];\n\n  utils._each(keywords, (v, k) => {\n    if (utils.isArray(v)) {\n      let values = [];\n      utils._each(v, (val) => {\n        val = utils.getValueString('keywords.' + k, val);\n        if (val) { values.push(val); }\n      });\n      v = values;\n    } else {\n      v = utils.getValueString('keywords.' + k, v);\n      if (utils.isStr(v)) {\n        v = [v];\n      } else {\n        return;\n      } // unsuported types - don't send a key\n    }\n    arrs.push({key: k, value: v});\n  });\n\n  return arrs;\n}\n\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @param rtbBid\n * @param bidderRequest\n * @return Bid\n */\nfunction newBid(serverBid, rtbBid, bidderRequest) {\n  const bid = {\n    requestId: serverBid.uuid,\n    cpm: 0.00,\n    creativeId: rtbBid.creative_id,\n    dealId: 99999999,\n    currency: 'USD',\n    netRevenue: true,\n    ttl: 300,\n    appnexus: {\n      buyerMemberId: rtbBid.buyer_member_id\n    }\n  };\n\n  if (rtbBid.rtb.video) {\n    Object.assign(bid, {\n      width: rtbBid.rtb.video.player_width,\n      height: rtbBid.rtb.video.player_height,\n      vastUrl: rtbBid.rtb.video.asset_url,\n      vastImpUrl: rtbBid.notify_url,\n      ttl: 3600\n    });\n    // This supports Outstream Video\n    if (rtbBid.renderer_url) {\n      const rendererOptions = utils.deepAccess(\n        bidderRequest.bids[0],\n        'renderer.options'\n      );\n\n      Object.assign(bid, {\n        adResponse: serverBid,\n        renderer: newRenderer(bid.adUnitCode, rtbBid, rendererOptions)\n      });\n      bid.adResponse.ad = bid.adResponse.ads[0];\n      bid.adResponse.ad.video = bid.adResponse.ad.rtb.video;\n    }\n  } else if (rtbBid.rtb[NATIVE]) {\n    const nativeAd = rtbBid.rtb[NATIVE];\n    bid[NATIVE] = {\n      title: nativeAd.title,\n      body: nativeAd.desc,\n      cta: nativeAd.ctatext,\n      sponsoredBy: nativeAd.sponsored,\n      clickUrl: nativeAd.link.url,\n      clickTrackers: nativeAd.link.click_trackers,\n      impressionTrackers: nativeAd.impression_trackers,\n      javascriptTrackers: nativeAd.javascript_trackers,\n    };\n    if (nativeAd.main_img) {\n      bid['native'].image = {\n        url: nativeAd.main_img.url,\n        height: nativeAd.main_img.height,\n        width: nativeAd.main_img.width,\n      };\n    }\n    if (nativeAd.icon) {\n      bid['native'].icon = {\n        url: nativeAd.icon.url,\n        height: nativeAd.icon.height,\n        width: nativeAd.icon.width,\n      };\n    }\n  } else {\n    Object.assign(bid, {\n      width: rtbBid.rtb.banner.width,\n      height: rtbBid.rtb.banner.height,\n      ad: rtbBid.rtb.banner.content\n    });\n    try {\n      const url = rtbBid.rtb.trackers[0].impression_urls[0];\n      const tracker = utils.createTrackPixelHtml(url);\n      bid.ad += tracker;\n    } catch (error) {\n      utils.logError('Error appending tracking pixel', error);\n    }\n  }\n\n  return bid;\n}\n\nfunction bidToTag(bid) {\n  const tag = {};\n  tag.sizes = transformSizes(bid.sizes);\n  tag.primary_size = tag.sizes[0];\n  tag.ad_types = [];\n  tag.uuid = bid.bidId;\n  if (bid.params.placementId) {\n    tag.id = parseInt(bid.params.placementId, 10);\n  } else {\n    tag.code = bid.params.invCode;\n  }\n  tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\n  tag.use_pmt_rule = bid.params.usePaymentRule || false;\n  tag.prebid = true;\n  tag.disable_psa = true;\n  if (bid.params.reserve) {\n    tag.reserve = bid.params.reserve;\n  }\n  if (bid.params.position) {\n    tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\n  }\n  if (bid.params.trafficSourceCode) {\n    tag.traffic_source_code = bid.params.trafficSourceCode;\n  }\n  if (bid.params.privateSizes) {\n    tag.private_sizes = transformSizes(bid.params.privateSizes);\n  }\n  if (bid.params.supplyType) {\n    tag.supply_type = bid.params.supplyType;\n  }\n  if (bid.params.pubClick) {\n    tag.pubclick = bid.params.pubClick;\n  }\n  if (bid.params.extInvCode) {\n    tag.ext_inv_code = bid.params.extInvCode;\n  }\n  if (bid.params.externalImpId) {\n    tag.external_imp_id = bid.params.externalImpId;\n  }\n  if (!utils.isEmpty(bid.params.keywords)) {\n    tag.keywords = getKeywords(bid.params.keywords);\n  }\n\n  if (bid.mediaType === NATIVE || utils.deepAccess(bid, `mediaTypes.${NATIVE}`)) {\n    tag.ad_types.push(NATIVE);\n\n    if (bid.nativeParams) {\n      const nativeRequest = buildNativeRequest(bid.nativeParams);\n      tag[NATIVE] = {layouts: [nativeRequest]};\n    }\n  }\n\n  const videoMediaType = utils.deepAccess(bid, `mediaTypes.${VIDEO}`);\n  const context = utils.deepAccess(bid, 'mediaTypes.video.context');\n\n  if (bid.mediaType === VIDEO || videoMediaType) {\n    tag.ad_types.push(VIDEO);\n  }\n\n  // instream gets vastUrl, outstream gets vastXml\n  if (bid.mediaType === VIDEO || (videoMediaType && context !== 'outstream')) {\n    tag.require_asset_url = true;\n  }\n\n  if (bid.params.video) {\n    tag.video = {};\n    // place any valid video params on the tag\n    Object.keys(bid.params.video)\n      .filter(param => includes(VIDEO_TARGETING, param))\n      .forEach(param => tag.video[param] = bid.params.video[param]);\n  }\n\n  if (\n    (utils.isEmpty(bid.mediaType) && utils.isEmpty(bid.mediaTypes)) ||\n    (bid.mediaType === BANNER || (bid.mediaTypes && bid.mediaTypes[BANNER]))\n  ) {\n    tag.ad_types.push(BANNER);\n  }\n\n  return tag;\n}\n\n/* Turn bid request sizes into ut-compatible format */\nfunction transformSizes(requestSizes) {\n  let sizes = [];\n  let sizeObj = {};\n\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    sizeObj.width = parseInt(requestSizes[0], 10);\n    sizeObj.height = parseInt(requestSizes[1], 10);\n    sizes.push(sizeObj);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      sizeObj = {};\n      sizeObj.width = parseInt(size[0], 10);\n      sizeObj.height = parseInt(size[1], 10);\n      sizes.push(sizeObj);\n    }\n  }\n\n  return sizes;\n}\n\nfunction hasUserInfo(bid) {\n  return !!bid.params.user;\n}\n\nfunction hasMemberId(bid) {\n  return !!parseInt(bid.params.member, 10);\n}\n\nfunction getRtbBid(tag) {\n  return tag && tag.ads && tag.ads.length && find(tag.ads, ad => ad.rtb);\n}\n\nfunction buildNativeRequest(params) {\n  const request = {};\n\n  // map standard prebid native asset identifier to /ut parameters\n  // e.g., tag specifies `body` but /ut only knows `description`.\n  // mapping may be in form {tag: '<server name>'} or\n  // {tag: {serverName: '<server name>', requiredParams: {...}}}\n  Object.keys(params).forEach(key => {\n    // check if one of the <server name> forms is used, otherwise\n    // a mapping wasn't specified so pass the key straight through\n    const requestKey =\n      (NATIVE_MAPPING[key] && NATIVE_MAPPING[key].serverName) ||\n      NATIVE_MAPPING[key] ||\n      key;\n\n    // required params are always passed on request\n    const requiredParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].requiredParams;\n    request[requestKey] = Object.assign({}, requiredParams, params[key]);\n\n    // minimum params are passed if no non-required params given on adunit\n    const minimumParams = NATIVE_MAPPING[key] && NATIVE_MAPPING[key].minimumParams;\n\n    if (requiredParams && minimumParams) {\n      // subtract required keys from adunit keys\n      const adunitKeys = Object.keys(params[key]);\n      const requiredKeys = Object.keys(requiredParams);\n      const remaining = adunitKeys.filter(key => !includes(requiredKeys, key));\n\n      // if none are left over, the minimum params needs to be sent\n      if (remaining.length === 0) {\n        request[requestKey] = Object.assign({}, request[requestKey], minimumParams);\n      }\n    }\n  });\n\n  return request;\n}\n\nfunction outstreamRender(bid) {\n  // push to render queue because ANOutstreamVideo may not be loaded yet\n  bid.renderer.push(() => {\n    window.ANOutstreamVideo.renderAd({\n      tagId: bid.adResponse.tag_id,\n      sizes: [bid.getSize().split('x')],\n      targetId: bid.adUnitCode, // target div id to render video\n      uuid: bid.adResponse.uuid,\n      adResponse: bid.adResponse,\n      rendererOptions: bid.renderer.getConfig()\n    }, handleOutstreamRendererEvents.bind(null, bid));\n  });\n}\n\nfunction handleOutstreamRendererEvents(bid, id, eventName) {\n  bid.renderer.handleVideoEvent({ id, eventName });\n}\n\nfunction parseMediaType(rtbBid) {\n  const adType = rtbBid.ad_type;\n  if (adType === VIDEO) {\n    return VIDEO;\n  } else if (adType === NATIVE) {\n    return NATIVE;\n  } else {\n    return BANNER;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/xhbBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nimport { Renderer } from 'src/Renderer';\n\nconst pixKey = 'utrk';\n\nfunction startsWith(str, search) {\n  return str.substr(0, search.length) === search;\n}\n\nexport const spec = {\n  code: 'yieldnexus',\n  aliases: [],\n  supportedMediaTypes: [BANNER, VIDEO],\n\n  isBidRequestValid: function(bid) {\n    if (!bid.params.spid) {\n      return false;\n    } else if (typeof bid.params.spid !== 'string') {\n      return false;\n    }\n    return (typeof bid.params.instl === 'undefined' || bid.params.instl === 0 || bid.params.instl === 1) &&\n           (typeof bid.params.bidfloor === 'undefined' || typeof bid.params.bidfloor === 'number') &&\n           (typeof bid.params['protocols'] === 'undefined' || Array.isArray(bid.params['protocols'])) &&\n           (typeof bid.params['adpos'] === 'undefined' || typeof bid.params['adpos'] === 'number');\n  },\n\n  buildRequests: function(validBidRequests, bidderRequest) {\n    return validBidRequests.map(bidRequest => {\n      let referrer = '';\n      try {\n        referrer = window.top.document.referrer;\n      } catch (e) {\n        try {\n          referrer = window.document.referrer;\n        } catch (e) {\n        }\n      }\n      const url = utils.getTopWindowUrl();\n      const domainStart = url.indexOf('://') + 3;\n      const req = {\n        id: bidRequest.auctionId,\n        site: {\n          domain: url.substring(domainStart, url.indexOf('/', domainStart) < 0 ? url.length : url.indexOf('/', domainStart)),\n          page: url,\n          ref: referrer\n        },\n        device: {\n          ua: navigator.userAgent\n        },\n        imp: [],\n        ext: {}\n      };\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        req.ext.gdpr_consent = {\n          consent_string: bidderRequest.gdprConsent.consentString,\n          consent_required: bidderRequest.gdprConsent.gdprApplies\n        };\n      }\n      let topFrame;\n      try {\n        topFrame = window.top === window ? 1 : 0;\n      } catch (e) {\n        topFrame = 0;\n      }\n      const imp = {\n        id: bidRequest.transactionId,\n        instl: bidRequest.params.instl === 1 ? 1 : 0,\n        tagid: bidRequest.adUnitCode,\n        bidfloor: bidRequest.params.bidfloor || 0,\n        bidfloorcur: 'USD',\n        secure: startsWith(utils.getTopWindowUrl().toLowerCase(), 'http://') ? 0 : 1\n      };\n      if (!bidRequest.mediaTypes || bidRequest.mediaTypes.banner) {\n        imp.banner = {\n          w: bidRequest.sizes.length ? bidRequest.sizes[0][0] : 300,\n          h: bidRequest.sizes.length ? bidRequest.sizes[0][1] : 250,\n          pos: bidRequest.params.pos || 0,\n          topframe: topFrame\n        };\n      } else if (bidRequest.mediaTypes.video) {\n        imp.video = {\n          w: bidRequest.sizes.length ? bidRequest.sizes[0][0] : 300,\n          h: bidRequest.sizes.length ? bidRequest.sizes[0][1] : 250,\n          protocols: bidRequest.params.protocols || [1, 2, 3, 4, 5, 6],\n          pos: bidRequest.params.pos || 0,\n          topframe: topFrame\n        };\n      } else {\n        return;\n      }\n      req.imp.push(imp);\n      return {\n        method: 'POST',\n        url: `https://ssp.ynxs.io/r/${bidRequest.params.spid}/bidr?bidder=prebid&rformat=open_rtb&reqformat=rtb_json` + (bidRequest.params.query ? '&' + bidRequest.params.query : ''),\n        data: req,\n        bidRequest\n      };\n    });\n  },\n\n  interpretResponse: function(serverResponse, bidRequest) {\n    const outBids = [];\n    if (serverResponse && serverResponse.body) {\n      const bids = serverResponse.body.seatbid.reduce((acc, seatBid) => acc.concat(seatBid.bid), []);\n      bids.forEach(bid => {\n        const outBid = {\n          requestId: bidRequest.bidRequest.bidId,\n          cpm: bid.price,\n          width: bid.w,\n          height: bid.h,\n          ttl: 15 * 60,\n          creativeId: bid.crid,\n          netRevenue: true,\n          currency: bid.cur || serverResponse.body.cur\n        };\n        if (!bidRequest.bidRequest.mediaTypes || bidRequest.bidRequest.mediaTypes.banner) {\n          outBids.push(Object.assign({}, outBid, { mediaType: 'banner', ad: bid.adm }));\n        } else if (bidRequest.bidRequest.mediaTypes.video) {\n          const context = utils.deepAccess(bidRequest.bidRequest, 'mediaTypes.video.context');\n          outBids.push(Object.assign({}, outBid, {\n            mediaType: 'video',\n            vastUrl: bid.ext.vast_url,\n            vastXml: bid.adm,\n            renderer: context === 'outstream' ? newRenderer(bidRequest.bidRequest, bid) : undefined\n          }));\n        }\n      });\n    }\n    return outBids;\n  },\n\n  getUserSyncs: function(syncOptions, serverResponses, gdprConsent) {\n    const syncs = [];\n    const gdprApplies = gdprConsent && (typeof gdprConsent.gdprApplies === 'boolean') ? gdprConsent.gdprApplies : false;\n    const suffix = gdprApplies ? 'gc=' + encodeURIComponent(gdprConsent.consentString) : 'gc=missing';\n    serverResponses.forEach(resp => {\n      if (resp.body) {\n        const bidResponse = resp.body;\n        if (bidResponse.ext && Array.isArray(bidResponse.ext[pixKey])) {\n          bidResponse.ext[pixKey].forEach(pixel => syncs.push({ type: pixel.type, url: pixel.url + (pixel.url.indexOf('?') > 0 ? '&' + suffix : '?' + suffix) }));\n        }\n        if (Array.isArray(bidResponse.seatbid)) {\n          bidResponse.seatbid.forEach(seatBid => {\n            if (Array.isArray(seatBid.bid)) {\n              seatBid.bid.forEach(bid => {\n                if (bid.ext && Array.isArray(bid.ext[pixKey])) {\n                  bid.ext[pixKey].forEach(pixel => syncs.push({ type: pixel.type, url: pixel.url + (pixel.url.indexOf('?') > 0 ? '&' + suffix : '?' + suffix) }));\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n    return syncs;\n  }\n};\n\nfunction newRenderer(bidRequest, bid, rendererOptions = {}) {\n  let rendererUrl = '//s.gambid.io/video/latest/renderer.js';\n  if (bid.ext && bid.ext.renderer_url) {\n    rendererUrl = bid.ext.renderer_url;\n  }\n  if (bidRequest.params && bidRequest.params.rendererUrl) {\n    rendererUrl = bidRequest.params.rendererUrl;\n  }\n  const renderer = Renderer.install({ url: rendererUrl, config: rendererOptions, loaded: false });\n  renderer.setRender(renderOutstream);\n  return renderer;\n}\n\nfunction renderOutstream(bid) {\n  bid.renderer.push(() => {\n    window[ 'GambidPlayer' ].renderAd({\n      id: bid.adUnitCode + '/' + bid.adId,\n      debug: window.location.href.indexOf('pbjsDebug') >= 0,\n      placement: document.getElementById(bid.adUnitCode),\n      width: bid.width,\n      height: bid.height,\n      events: {\n        ALL_ADS_COMPLETED: () => window.setTimeout(() => {\n          window[ 'GambidPlayer' ].removeAd(bid.adUnitCode + '/' + bid.adId);\n        }, 300)\n      },\n      vastUrl: bid.vastUrl,\n      vastXml: bid.vastXml\n    });\n  });\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yieldNexusBidAdapter.js","import * as utils from 'src/utils';\nimport { formatQS as buildQueryString } from '../src/url';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\n/**\n * @module {BidderSpec} YieldbotBidAdapter\n * @description Adapter for requesting bids from Yieldbot\n * @see BidderSpec\n * @author [elljoh]{@link https://github.com/elljoh}\n * @private\n */\nexport const YieldbotAdapter = {\n  _adapterLoaded: utils.timestamp(),\n  _navigationStart: 0,\n  _version: 'pbjs-yb-0.0.1',\n  _bidRequestCount: 0,\n  _pageviewDepth: 0,\n  _lastPageviewId: '',\n  _sessionBlocked: false,\n  _isInitialized: false,\n  _sessionTimeout: 180000,\n  _userTimeout: 2592000000,\n  _cookieLabels: ['n', 'u', 'si', 'pvd', 'lpv', 'lpvi', 'c'],\n\n  initialize: function() {\n    if (!this._isInitialized) {\n      this._pageviewDepth = this.pageviewDepth;\n      this._sessionBlocked = this.sessionBlocked;\n      this._isInitialized = true;\n    }\n  },\n\n  /**\n   * Adapter version\n   * <code>pbjs-yb-x.x.x</code>\n   * @returns {string} The adapter version string\n   * @memberof module:YieldbotBidAdapter\n   */\n  get version() {\n    return this._version;\n  },\n\n  /**\n   * Is the user session blocked by the Yieldbot adserver.<br>\n   * The Yieldbot adserver may return <code>\"block_session\": true</code> in a bid response.\n   * A session may be blocked for efficiency (i.e. Yieldbot has decided no to bid for the session),\n   * security and/or fraud detection.\n   * @returns {boolean}\n   * @readonly\n   * @memberof module:YieldbotBidAdapter\n   * @private\n   */\n  get sessionBlocked() {\n    const cookieName = '__ybotn';\n    const cookieValue = this.getCookie(cookieName);\n    const sessionBlocked = cookieValue ? parseInt(cookieValue, 10) || 0 : 0;\n    if (sessionBlocked) {\n      this.setCookie(cookieName, 1, this._sessionTimeout, '/');\n    }\n    this._sessionBlocked = !!sessionBlocked;\n    return this._sessionBlocked;\n  },\n\n  set sessionBlocked(blockSession) {\n    const cookieName = '__ybotn';\n    const sessionBlocked = blockSession ? 1 : 0;\n    this.setCookie(cookieName, sessionBlocked, this._sessionTimeout, '/');\n  },\n\n  get userId() {\n    const cookieName = '__ybotu';\n    let cookieValue = this.getCookie(cookieName);\n    if (!cookieValue) {\n      cookieValue = this.newId();\n      this.setCookie(cookieName, cookieValue, this._userTimeout, '/');\n    }\n    return cookieValue;\n  },\n\n  get sessionId() {\n    const cookieName = '__ybotsi';\n    let cookieValue = this.getCookie(cookieName);\n    if (!cookieValue) {\n      cookieValue = this.newId();\n      this.setCookie(cookieName, cookieValue, this._sessionTimeout, '/');\n    }\n    return cookieValue;\n  },\n\n  get pageviewDepth() {\n    const cookieName = '__ybotpvd';\n    let cookieValue = parseInt(this.getCookie(cookieName), 10) || 0;\n    cookieValue++;\n    this.setCookie(cookieName, cookieValue, this._sessionTimeout, '/');\n    return cookieValue;\n  },\n\n  get lastPageviewId() {\n    const cookieName = '__ybotlpvi';\n    let cookieValue = this.getCookie(cookieName);\n    return cookieValue || '';\n  },\n\n  set lastPageviewId(id) {\n    const cookieName = '__ybotlpvi';\n    this.setCookie(cookieName, id, this._sessionTimeout, '/');\n  },\n\n  get lastPageviewTime() {\n    const cookieName = '__ybotlpv';\n    let cookieValue = this.getCookie(cookieName);\n    return cookieValue ? parseInt(cookieValue, 10) : 0;\n  },\n\n  set lastPageviewTime(ts) {\n    const cookieName = '__ybotlpv';\n    this.setCookie(cookieName, ts, this._sessionTimeout, '/');\n  },\n\n  /**\n   * Get/set the request base url used to form bid, ad markup and impression requests.\n   * @param {string} [prefix] the bidder request base url\n   * @returns {string} the request base Url string\n   * @memberof module:YieldbotBidAdapter\n   */\n  urlPrefix: function(prefix) {\n    const cookieName = '__ybotc';\n    const pIdx = prefix ? prefix.indexOf(':') : -1;\n    const url = pIdx !== -1 ? document.location.protocol + prefix.substr(pIdx + 1) : null;\n    let cookieValue = url || this.getCookie(cookieName);\n    if (!cookieValue) {\n      cookieValue = '//i.yldbt.com/m/';\n    }\n    this.setCookie(cookieName, cookieValue, this._sessionTimeout, '/');\n    return cookieValue;\n  },\n\n  /**\n   * Bidder identifier code.\n   * @type {string}\n   * @constant\n   * @memberof module:YieldbotBidAdapter\n   */\n  get code() { return 'yieldbot'; },\n\n  /**\n   * A list of aliases which should also resolve to this bidder.\n   * @type {string[]}\n   * @constant\n   * @memberof module:YieldbotBidAdapter\n   */\n  get aliases() { return []; },\n\n  /**\n   * @property {MediaType[]} [supportedMediaTypes]: A list of Media Types which the adapter supports.\n   * @constant\n   * @memberof module:YieldbotBidAdapter\n   */\n  get supportedMediaTypes() { return ['banner']; },\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @returns {boolean} True if this is a valid bid, and false otherwise.\n   * @memberof module:YieldbotBidAdapter\n   */\n  isBidRequestValid: function(bid) {\n    let invalidSizeArray = false;\n    if (utils.isArray(bid.sizes)) {\n      const arr = bid.sizes.reduce((acc, cur) => acc.concat(cur), []).filter((item) => {\n        return !utils.isNumber(item);\n      });\n      invalidSizeArray = arr.length !== 0;\n    }\n    const ret = bid &&\n            bid.params &&\n            utils.isStr(bid.params.psn) &&\n            utils.isStr(bid.params.slot) &&\n            !invalidSizeArray &&\n            !!bid.params.psn &&\n      !!bid.params.slot;\n    return ret;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   * @memberof module:YieldbotBidAdapter\n   */\n  buildRequests: function(bidRequests) {\n    const requests = [];\n    if (!this._optOut && !this.sessionBlocked) {\n      const searchParams = this.initBidRequestParams();\n      this._bidRequestCount++;\n\n      const pageviewIdToMap = searchParams['pvi'];\n\n      const yieldbotSlotParams = this.getSlotRequestParams(pageviewIdToMap, bidRequests);\n\n      searchParams['sn'] = yieldbotSlotParams['sn'] || '';\n      searchParams['ssz'] = yieldbotSlotParams['ssz'] || '';\n\n      const bidUrl = this.urlPrefix() + yieldbotSlotParams.psn + '/v1/init';\n\n      searchParams['cts_ini'] = utils.timestamp();\n      requests.push({\n        method: 'GET',\n        url: bidUrl,\n        data: searchParams,\n        yieldbotSlotParams: yieldbotSlotParams,\n        options: {\n          withCredentials: true,\n          customHeaders: {\n            Accept: 'application/json'\n          }\n        }\n      });\n    }\n    return requests;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   * @memberof module:YieldbotBidAdapter\n   */\n  getUserSyncs: function(syncOptions, serverResponses) {\n    const userSyncs = [];\n    if (syncOptions.pixelEnabled &&\n        serverResponses.length > 0 &&\n        serverResponses[0].body &&\n        serverResponses[0].body.user_syncs &&\n        utils.isArray(serverResponses[0].body.user_syncs)) {\n      const responseUserSyncs = serverResponses[0].body.user_syncs;\n      responseUserSyncs.forEach((pixel) => {\n        userSyncs.push({\n          type: 'image',\n          url: pixel\n        });\n      });\n    }\n    return userSyncs;\n  },\n\n  /**\n   * @typeDef {YieldbotBid} YieldbotBid\n   * @type {object}\n   * @property {string} slot Yieldbot config param slot\n   * @property {string} cpm Yieldbot bid quantity/label\n   * @property {string} size Slot dimensions of the form <code>&lt;width&gt;x&lt;height&gt;</code>\n   * @memberof module:YieldbotBidAdapter\n   */\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @param {BidRequest} bidRequest Request object submitted which produced the response.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   * @memberof module:YieldbotBidAdapter\n   */\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    const responseBody = serverResponse && serverResponse.body ? serverResponse.body : {};\n    this._optOut = responseBody.optout || false;\n    if (this._optOut) {\n      this.clearAllCookies();\n    }\n    if (!this._optOut && !this._sessionBlocked) {\n      const slotBids = responseBody.slots && responseBody.slots.length > 0 ? responseBody.slots : [];\n      slotBids.forEach((bid) => {\n        if (bid.slot && bid.size && bid.cpm) {\n          const sizeParts = bid.size ? bid.size.split('x') : [1, 1];\n          const width = sizeParts[0] || 1;\n          const height = sizeParts[1] || 1;\n          const cpm = parseInt(bid.cpm, 10) / 100.0 || 0;\n\n          const yieldbotSlotParams = bidRequest.yieldbotSlotParams || null;\n          const ybBidId = bidRequest.data['pvi'];\n          const paramKey = `${ybBidId}:${bid.slot}:${bid.size || ''}`;\n          const bidIdMap = yieldbotSlotParams && yieldbotSlotParams.bidIdMap ? yieldbotSlotParams.bidIdMap : {};\n          const requestId = bidIdMap[paramKey] || '';\n\n          const urlPrefix = this.urlPrefix(responseBody.url_prefix);\n          const tagObject = this.buildAdCreativeTag(urlPrefix, bid, bidRequest);\n          const bidResponse = {\n            requestId: requestId,\n            cpm: cpm,\n            width: width,\n            height: height,\n            creativeId: tagObject.creativeId,\n            currency: 'USD',\n            netRevenue: true,\n            ttl: this._sessionTimeout / 1000, // [s]\n            ad: tagObject.ad\n          };\n          bidResponses.push(bidResponse);\n        }\n      });\n    }\n    return bidResponses;\n  },\n\n  /**\n   * Initializes search parameters common to both ad request and impression Urls.\n   * @param {string} adRequestId Yieldbot ad request identifier\n   * @param {BidRequest} bidRequest The request that is the source of the impression\n   * @returns {object} Search parameter key/value pairs\n   * @memberof module:YieldbotBidAdapter\n   */\n  initAdRequestParams: function(adRequestId, bidRequest) {\n    let commonSearchParams = {};\n    commonSearchParams['v'] = this._version;\n    commonSearchParams['vi'] = bidRequest.data.vi || this._version + '-vi';\n    commonSearchParams['si'] = bidRequest.data.si || this._version + '-si';\n    commonSearchParams['pvi'] = bidRequest.data.pvi || this._version + '-pvi';\n    commonSearchParams['ri'] = adRequestId;\n    return commonSearchParams;\n  },\n\n  buildAdUrl: function(urlPrefix, publisherNumber, commonSearchParams, bid) {\n    const searchParams = Object.assign({}, commonSearchParams);\n    searchParams['cts_res'] = utils.timestamp();\n    searchParams['slot'] = bid.slot + ':' + bid.size;\n    searchParams['ioa'] = this.intersectionObserverAvailable(window);\n\n    const queryString = buildQueryString(searchParams) || '';\n    const adUrl = urlPrefix +\n            publisherNumber +\n            '/ad/creative.js?' +\n            queryString;\n    return adUrl;\n  },\n\n  buildImpressionUrl: function(urlPrefix, publisherNumber, commonSearchParams) {\n    const searchParams = Object.assign({}, commonSearchParams);\n    const queryString = buildQueryString(searchParams) || '';\n    const impressionUrl = urlPrefix +\n            publisherNumber +\n            '/ad/impression.gif?' +\n            queryString;\n    return impressionUrl;\n  },\n\n  /**\n   * Object with Yieldbot ad markup representation and unique creative identifier.\n   * @typeDef {TagObject} TagObject\n   * @type {object}\n   * @property {string} creativeId bidder specific creative identifier for tracking at the source\n   * @property {string} ad ad creative markup\n   * @memberof module:YieldbotBidAdapter\n   */\n  /**\n   * Builds the ad creative markup.\n   * @param {string} urlPrefix base url for Yieldbot requests\n   * @param {module:YieldbotBidAdapter.YieldbotBid} bid Bidder slot bid object\n   * @returns {module:YieldbotBidAdapter.TagObject}\n   * @memberof module:YieldbotBidAdapter\n   */\n  buildAdCreativeTag: function(urlPrefix, bid, bidRequest) {\n    const ybotAdRequestId = this.newId();\n    const commonSearchParams = this.initAdRequestParams(ybotAdRequestId, bidRequest);\n    const publisherNumber = bidRequest && bidRequest.yieldbotSlotParams ? bidRequest.yieldbotSlotParams.psn || '' : '';\n    const adUrl = this.buildAdUrl(urlPrefix, publisherNumber, commonSearchParams, bid);\n    const impressionUrl = this.buildImpressionUrl(urlPrefix, publisherNumber, commonSearchParams);\n\n    const htmlMarkup = `<div id=\"ybot-${ybotAdRequestId}\"></div><script type=\"text/javascript\">var yieldbot={iframeType:function(win){var it='none';while(win !== window.top){try{win=win.parent;var doc=win.document;it=doc?'so':'co';}catch(e){it='co';}}return it;},'_render':function(data){try{yieldbot['cts_rend_'+'${ybotAdRequestId}']=(new Date()).getTime();var bodyHtml=data.html,width=data.size[0]||0,height=data.size[1]||0,divEl=document.createElement('div');divEl.style.width=width+'px';divEl.style.height=height+'px';divEl.className='ybot-creativecreative-wrapper';var containerEl=document.getElementById(data.wrapper_id||'ybot-'+data.request_id);containerEl.appendChild(divEl);var iframeHtml='<!DOCTYPE html><head><meta charset=utf-8><style>'+data.style+'</style></head><body>'+data.html+'</body>',innerFrame=document.createElement('iframe');innerFrame.width=width;innerFrame.height=height;innerFrame.scrolling='no';innerFrame.marginWidth='0';innerFrame.marginHeight='0';innerFrame.frameBorder='0';innerFrame.style.border='0px';innerFrame.style['vertical-align']='bottom';innerFrame.id='ybot-'+data.request_id+'-iframe';divEl.appendChild(innerFrame);var innerFrameDoc=innerFrame.contentWindow.document;innerFrameDoc.open();innerFrameDoc.write(iframeHtml);innerFrameDoc.close();var image=new Image(1,1);image.onload=function(){};var cts_rend=yieldbot['cts_rend_'+'${ybotAdRequestId}']||0;image.src='${impressionUrl}'+'&cts_imp='+(new Date()).getTime()+'&cts_rend='+cts_rend+'&e';}catch(err){}}};</script><script type=\"text/javascript\">var jsEl=document.createElement('script');var src='${adUrl}'+'&it='+yieldbot.iframeType(window)+'&cts_ad='+(new Date()).getTime()+'&e';jsEl.src=src;var firstEl=document.getElementsByTagName('script')[0];firstEl.parentNode.insertBefore(jsEl,firstEl);</script>`;\n    return { ad: htmlMarkup, creativeId: ybotAdRequestId };\n  },\n\n  intersectionObserverAvailable: function (win) {\n    /* Ref:\n     * https://github.com/w3c/IntersectionObserver/blob/gh-pages/polyfill/intersection-observer.js#L23-L25\n     */\n    return win &&\n      win.IntersectionObserver &&\n      win.IntersectionObserverEntry &&\n      win.IntersectionObserverEntry.prototype &&\n      'intersectionRatio' in win.IntersectionObserverEntry.prototype;\n  },\n\n  /**\n   * @typeDef {BidParams} BidParams\n   * @property {string} psn Yieldbot publisher customer number\n   * @property {object} searchParams bid request Url search parameters\n   * @property {object} searchParams.sn slot names\n   * @property {object} searchParams.szz slot sizes\n   * @memberof module:YieldbotBidAdapter\n   * @private\n   */\n  /**\n   * Builds the common Yieldbot bid request Url query parameters.<br>\n   * Slot bid related parameters are handled separately. The so-called common parameters\n   * here are request identifiers, page properties and user-agent attributes.\n   * @returns {object} query parameter key/value items\n   * @memberof module:YieldbotBidAdapter\n   */\n  initBidRequestParams: function() {\n    const params = {};\n\n    params['cts_js'] = this._adapterLoaded;\n    params['cts_ns'] = this._navigationStart;\n    params['v'] = this._version;\n\n    const userId = this.userId;\n    const sessionId = this.sessionId;\n    const pageviewId = this.newId();\n    const currentBidTime = utils.timestamp();\n    const lastBidTime = this.lastPageviewTime;\n    const lastBidId = this.lastPageviewId;\n    this.lastPageviewTime = currentBidTime;\n    this.lastPageviewId = pageviewId;\n    params['vi'] = userId;\n    params['si'] = sessionId;\n    params['pvd'] = this._pageviewDepth;\n    params['pvi'] = pageviewId;\n    params['lpv'] = lastBidTime;\n    params['lpvi'] = lastBidId;\n    params['bt'] = this._bidRequestCount === 0 ? 'init' : 'refresh';\n\n    params['ua'] = navigator.userAgent;\n    params['np'] = navigator.platform;\n    params['la'] =\n      navigator.browserLanguage ? navigator.browserLanguage : navigator.language;\n    params['to'] =\n      (new Date()).getTimezoneOffset() / 60;\n    params['sd'] =\n      window.screen.width + 'x' + window.screen.height;\n\n    params['lo'] = utils.getTopWindowUrl();\n    params['r'] = utils.getTopWindowReferrer();\n\n    params['e'] = '';\n\n    return params;\n  },\n\n  /**\n   * Bid mapping key to the Prebid internal bidRequestId<br>\n   * Format <code>{pageview id}:{slot name}:{width}x{height}</code>\n   * @typeDef {BidRequestKey} BidRequestKey\n   * @type {string}\n   * @example \"jbgxsxqxyxvqm2oud7:leaderboard:728x90\"\n   * @memberof module:YieldbotBidAdapter\n   */\n\n  /**\n   * Internal Yieldbot adapter bid and ad markup request state\n   * <br>\n   * When interpreting a server response, the associated requestId is lookeded up\n   * in this map when creating a {@link Bid} response object.\n   * @typeDef {BidRequestMapping} BidRequestMapping\n   * @type {object}\n   * @property {Object.<module:YieldbotBidAdapter.BidRequestKey, string>} {*} Yieldbot bid to requestId mapping item\n   * @memberof module:YieldbotBidAdapter\n   * @example\n   * {\n   *   \"jbgxsxqxyxvqm2oud7:leaderboard:728x90\": \"2b7e31676ce17\",\n   *   \"jbgxsxqxyxvqm2oud7:medrec:300x250\": \"2b7e31676cd89\",\n   *   \"jcrvvd6eoileb8w8ko:medrec:300x250\": \"2b7e316788ca7\"\n   * }\n   * @memberof module:YieldbotBidAdapter\n   */\n\n  /**\n   * Rationalized set of Yieldbot bids for adUnits and mapping to respective Prebid.js bidId.\n   * @typeDef {BidSlots} BidSlots\n   * @property {string} psn Yieldbot publisher site identifier taken from bidder params\n   * @property {string} sn slot names\n   * @property {string} szz slot sizes\n   * @property {module:YieldbotBidAdapter.BidRequestMapping} bidIdMap Yieldbot bid to Prebid bidId mapping\n   * @memberof module:YieldbotBidAdapter\n   */\n\n  /**\n   * Gets unique slot name and sizes for query parameters object\n   * @param {string} pageviewId The Yieldbot bid request identifier\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server\n   * @returns {module:YieldbotBidAdapter.BidSlots} Yieldbot specific bid parameters and bid identifier mapping\n   * @memberof module:YieldbotBidAdapter\n   */\n  getSlotRequestParams: function(pageviewId, bidRequests) {\n    const params = {};\n    const bidIdMap = {};\n    bidRequests = bidRequests || [];\n    pageviewId = pageviewId || '';\n    try {\n      const slotBids = {};\n      bidRequests.forEach((bid) => {\n        params.psn = params.psn || bid.params.psn || '';\n        utils.parseSizesInput(bid.sizes).forEach(sz => {\n          const slotName = bid.params.slot;\n          if (sz && (!slotBids[slotName] || !slotBids[slotName].some(existingSize => existingSize === sz))) {\n            slotBids[slotName] = slotBids[slotName] || [];\n            slotBids[slotName].push(sz);\n            const paramKey = pageviewId + ':' + slotName + ':' + sz;\n            bidIdMap[paramKey] = bid.bidId;\n          }\n        });\n      });\n\n      const nm = [];\n      const sz = [];\n      for (let idx in slotBids) {\n        const slotName = idx;\n        const slotSizes = slotBids[idx];\n        nm.push(slotName);\n        sz.push(slotSizes.join('.'));\n      }\n      params['sn'] = nm.join('|');\n      params['ssz'] = sz.join('|');\n\n      params.bidIdMap = bidIdMap;\n    } catch (err) {}\n    return params;\n  },\n\n  getCookie: function(name) {\n    const cookies = document.cookie.split(';');\n    let value = null;\n    for (let idx = 0; idx < cookies.length; idx++) {\n      const item = cookies[idx].split('=');\n      const itemName = item[0].replace(/^\\s+|\\s+$/g, '');\n      if (itemName == name) {\n        value = item.length > 1 ? decodeURIComponent(item[1].replace(/^\\s+|\\s+$/g, '')) : null;\n        break;\n      }\n    }\n    return value;\n  },\n\n  setCookie: function(name, value, expireMillis, path, domain, secure) {\n    const dataValue = encodeURIComponent(value);\n    const cookieStr = name + '=' + dataValue +\n            (expireMillis ? ';expires=' + new Date(utils.timestamp() + expireMillis).toGMTString() : '') +\n            (path ? ';path=' + path : '') +\n            (domain ? ';domain=' + domain : '') +\n            (secure ? ';secure' : '');\n\n    document.cookie = cookieStr;\n  },\n\n  deleteCookie: function(name, path, domain, secure) {\n    return this.setCookie(name, '', -1, path, domain, secure);\n  },\n\n  /**\n   * Clear all first-party cookies.\n   */\n  clearAllCookies: function() {\n    const labels = this._cookieLabels;\n    for (let idx = 0; idx < labels.length; idx++) {\n      const label = '__ybot' + labels[idx];\n      this.deleteCookie(label);\n    }\n  },\n\n  /**\n   * Generate a new Yieldbot format id<br>\n   * Base 36 and lowercase: <[ms] since epoch><[base36]{10}>\n   * @example \"jbgxsyrlx9fxnr1hbl\"\n   * @private\n   */\n  newId: function() {\n    return (utils.timestamp()).toString(36) + 'xxxxxxxxxx'\n      .replace(/[x]/g, function() {\n        return (0 | Math.random() * 36).toString(36);\n      });\n  },\n\n  /**\n   * Create a delegate function with 'this' context of the YieldbotAdapter object.\n   * @param {object} instance Object for 'this' context in function apply\n   * @param {function} fn Function to execute in instance context\n   * @returns {function} the provided function bound to the instance context\n   * @memberof module:YieldbotBidAdapter\n   */\n  createDelegate: function(instance, fn) {\n    var outerArgs = Array.prototype.slice.call(arguments, 2);\n    return function() {\n      return fn.apply(instance, outerArgs.length > 0 ? Array.prototype.slice.call(arguments, 0).concat(outerArgs) : arguments);\n    };\n  }\n};\n\nYieldbotAdapter.initialize();\n\nexport const spec = {\n  code: YieldbotAdapter.code,\n  aliases: YieldbotAdapter.aliases,\n  supportedMediaTypes: YieldbotAdapter.supportedMediaTypes,\n  isBidRequestValid: YieldbotAdapter.createDelegate(YieldbotAdapter, YieldbotAdapter.isBidRequestValid),\n  buildRequests: YieldbotAdapter.createDelegate(YieldbotAdapter, YieldbotAdapter.buildRequests),\n  interpretResponse: YieldbotAdapter.createDelegate(YieldbotAdapter, YieldbotAdapter.interpretResponse),\n  getUserSyncs: YieldbotAdapter.createDelegate(YieldbotAdapter, YieldbotAdapter.getUserSyncs)\n};\n\nYieldbotAdapter._navigationStart = utils.timestamp();\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yieldbotBidAdapter.js","import * as utils from 'src/utils'\nimport { registerBidder } from 'src/adapters/bidderFactory'\nimport find from 'core-js/library/fn/array/find'\nimport { VIDEO, BANNER } from 'src/mediaTypes'\n\nconst ENDPOINT = 'https://ad.yieldlab.net'\nconst BIDDER_CODE = 'yieldlab'\nconst BID_RESPONSE_TTL_SEC = 300\nconst CURRENCY_CODE = 'EUR'\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: [VIDEO, BANNER],\n\n  isBidRequestValid: function (bid) {\n    if (bid && bid.params && bid.params.adslotId && bid.params.supplyId) {\n      return true\n    }\n    return false\n  },\n\n  /**\n   * This method should build correct URL\n   * @param validBidRequests\n   * @returns {{method: string, url: string}}\n   */\n  buildRequests: function (validBidRequests, bidderRequest) {\n    const adslotIds = []\n    const timestamp = Date.now()\n    const query = {\n      ts: timestamp,\n      json: true\n    }\n\n    utils._each(validBidRequests, function (bid) {\n      adslotIds.push(bid.params.adslotId)\n      if (bid.params.targeting) {\n        query.t = createQueryString(bid.params.targeting)\n      }\n    })\n\n    if (bidderRequest && bidderRequest.gdprConsent) {\n      query.gdpr = (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') ? bidderRequest.gdprConsent.gdprApplies : true\n      if (query.gdpr) {\n        query.consent = bidderRequest.gdprConsent.consentString\n      }\n    }\n\n    const adslots = adslotIds.join(',')\n    const queryString = createQueryString(query)\n\n    return {\n      method: 'GET',\n      url: `${ENDPOINT}/yp/${adslots}?${queryString}`,\n      validBidRequests: validBidRequests\n    }\n  },\n\n  /**\n   * Map ad values and pricing and stuff\n   * @param serverResponse\n   * @param originalBidRequest\n   */\n  interpretResponse: function (serverResponse, originalBidRequest) {\n    const bidResponses = []\n    const timestamp = Date.now()\n\n    originalBidRequest.validBidRequests.forEach(function (bidRequest) {\n      if (!serverResponse.body) {\n        return\n      }\n\n      let matchedBid = find(serverResponse.body, function (bidResponse) {\n        return bidRequest.params.adslotId == bidResponse.id\n      })\n\n      if (matchedBid) {\n        const primarysize = bidRequest.sizes.length === 2 && !utils.isArray(bidRequest.sizes[0]) ? bidRequest.sizes : bidRequest.sizes[0]\n        const customsize = bidRequest.params.adSize !== undefined ? parseSize(bidRequest.params.adSize) : primarysize\n        const bidResponse = {\n          requestId: bidRequest.bidId,\n          cpm: matchedBid.price / 100,\n          width: primarysize[0],\n          height: primarysize[1],\n          creativeId: '' + matchedBid.id,\n          dealId: matchedBid.pid,\n          currency: CURRENCY_CODE,\n          netRevenue: false,\n          ttl: BID_RESPONSE_TTL_SEC,\n          referrer: '',\n          ad: `<script src=\"${ENDPOINT}/d/${matchedBid.id}/${bidRequest.params.supplyId}/${customsize[0]}x${customsize[1]}?ts=${timestamp}\"></script>`\n        }\n        if (isVideo(bidRequest)) {\n          bidResponse.mediaType = VIDEO\n          bidResponse.vastUrl = `${ENDPOINT}/d/${matchedBid.id}/${bidRequest.params.supplyId}/${customsize[0]}x${customsize[1]}?ts=${timestamp}`\n        }\n\n        bidResponses.push(bidResponse)\n      }\n    })\n    return bidResponses\n  }\n};\n\n/**\n * Is this a video format?\n * @param {String} format\n * @returns {Boolean}\n */\nfunction isVideo (format) {\n  return utils.deepAccess(format, 'mediaTypes.video')\n}\n\n/**\n * Expands a 'WxH' string as a 2-element [W, H] array\n * @param {String} size\n * @returns {Array}\n */\nfunction parseSize (size) {\n  return size.split('x').map(Number)\n}\n\n/**\n * Creates a querystring out of an object with key-values\n * @param {Object} obj\n * @returns {String}\n */\nfunction createQueryString (obj) {\n  let str = []\n  for (var p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]))\n    }\n  }\n  return str.join('&')\n}\n\nregisterBidder(spec)\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yieldlabBidAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'yieldmo';\nconst CURRENCY = 'USD';\nconst TIME_TO_LIVE = 300;\nconst NET_REVENUE = true;\nconst SYNC_ENDPOINT = 'https://static.yieldmo.com/blank.min.html?orig=';\nconst SERVER_ENDPOINT = 'https://ads.yieldmo.com/exchange/prebid';\nconst localWindow = getTopWindow();\n\nexport const spec = {\n  code: BIDDER_CODE,\n  supportedMediaTypes: ['banner'],\n  /**\n    * Determines whether or not the given bid request is valid.\n    * @param {object} bid, bid to validate\n    * @return boolean, true if valid, otherwise false\n    */\n  isBidRequestValid: function(bid) {\n    return !!(bid && bid.adUnitCode && bid.bidId);\n  },\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function(bidRequests) {\n    let serverRequest = {\n      p: [],\n      page_url: utils.getTopWindowUrl(),\n      bust: new Date().getTime().toString(),\n      pr: utils.getTopWindowReferrer(),\n      scrd: localWindow.devicePixelRatio || 0,\n      dnt: getDNT(),\n      e: getEnvironment(),\n      description: getPageDescription(),\n      title: localWindow.document.title || '',\n      w: localWindow.innerWidth,\n      h: localWindow.innerHeight\n    };\n    bidRequests.forEach((request) => {\n      serverRequest.p.push(addPlacement(request));\n    });\n    serverRequest.p = '[' + serverRequest.p.toString() + ']';\n    return {\n      method: 'GET',\n      url: SERVER_ENDPOINT,\n      data: serverRequest\n    }\n  },\n  /**\n   * Makes Yieldmo Ad Server response compatible to Prebid specs\n   * @param serverResponse successful response from Ad Server\n   * @param bidderRequest original bidRequest\n   * @return {Bid[]} an array of bids\n   */\n  interpretResponse: function(serverResponse) {\n    let bids = [];\n    let data = serverResponse.body;\n    if (data.length > 0) {\n      data.forEach((response) => {\n        if (response.cpm && response.cpm > 0) {\n          bids.push(createNewBid(response));\n        }\n      });\n    }\n    return bids;\n  },\n  getUserSync: function(syncOptions) {\n    if (trackingEnabled(syncOptions)) {\n      return [{\n        type: 'iframe',\n        url: SYNC_ENDPOINT + utils.getOrigin()\n      }];\n    } else {\n      return [];\n    }\n  }\n}\nregisterBidder(spec);\n\n/***************************************\n * Helper Functions\n ***************************************/\n\n/**\n * Adds placement information to array\n * @param request bid request\n */\nfunction addPlacement(request) {\n  const placementInfo = {\n    placement_id: request.adUnitCode,\n    callback_id: request.bidId,\n    sizes: request.sizes\n  }\n  if (request.params && request.params.placementId) {\n    placementInfo.ym_placement_id = request.params.placementId\n  }\n  return JSON.stringify(placementInfo);\n}\n\n/**\n  * creates a new bid with response information\n  * @param response server response\n  */\nfunction createNewBid(response) {\n  return {\n    requestId: response['callback_id'],\n    cpm: response.cpm,\n    width: response.width,\n    height: response.height,\n    creativeId: response.creative_id,\n    currency: CURRENCY,\n    netRevenue: NET_REVENUE,\n    ttl: TIME_TO_LIVE,\n    ad: response.ad\n  };\n}\n\n/**\n * Detects if tracking is allowed\n * @returns false if dnt or if not iframe/pixel enabled\n */\nfunction trackingEnabled(options) {\n  return (isIOS() && !getDNT() && options.iframeEnabled);\n}\n\n/**\n  * Detects whether we're in iOS\n  * @returns true if in iOS\n  */\nfunction isIOS() {\n  return /iPhone|iPad|iPod/i.test(window.navigator.userAgent);\n}\n\n/**\n  * Detects whether dnt is true\n  * @returns true if user enabled dnt\n  */\nfunction getDNT() {\n  return window.doNotTrack === '1' || window.navigator.doNotTrack === '1' || false;\n}\n\n/**\n * get page description\n */\nfunction getPageDescription() {\n  if (document.querySelector('meta[name=\"description\"]')) {\n    return document.querySelector('meta[name=\"description\"]').getAttribute('content'); // Value of the description metadata from the publisher's page.\n  } else {\n    return '';\n  }\n}\n\nfunction getTopWindow() {\n  try {\n    return window.top;\n  } catch (e) {\n    return window;\n  }\n}\n\n/***************************************\n * Detect Environment Helper Functions\n ***************************************/\n\n/**\n * Represents a method for loading Yieldmo ads.  Environments affect\n * which formats can be loaded into the page\n * Environments:\n *    CodeOnPage: 0, // div directly on publisher's page\n *    Amp: 1, // google Accelerate Mobile Pages ampproject.org\n *    Mraid = 2, // native loaded through the MRAID spec, without Yieldmo's SDK https://www.iab.net/media/file/IAB_MRAID_v2_FINAL.pdf\n *    Dfp: 4, // google doubleclick for publishers https://www.doubleclickbygoogle.com/\n *    DfpInAmp: 5, // AMP page containing a DFP iframe\n *    SafeFrame: 10,\n *    DfpSafeFrame: 11,Sandboxed: 16, // An iframe that can't get to the top window.\n *    SuperSandboxed: 89, // An iframe without allow-same-origin\n *    Unknown: 90, // A default sandboxed implementation delivered by EnvironmentDispatch when all positive environment checks fail\n */\n\n/**\n  * Detects what environment we're in\n  * @returns Environment kind\n  */\nfunction getEnvironment() {\n  if (isSuperSandboxedIframe()) {\n    return 89;\n  } else if (isDfpInAmp()) {\n    return 5;\n  } else if (isDfp()) {\n    return 4;\n  } else if (isAmp()) {\n    return 1;\n  } else if (isDFPSafeFrame()) {\n    return 11;\n  } else if (isSafeFrame()) {\n    return 10;\n  } else if (isMraid()) {\n    return 2;\n  } else if (isCodeOnPage()) {\n    return 0;\n  } else if (isSandboxedIframe()) {\n    return 16;\n  } else {\n    return 90;\n  }\n}\n\n/**\n  * @returns true if we are running on the top window at dispatch time\n  */\nfunction isCodeOnPage() {\n  return window === window.parent;\n}\n\n/**\n  * @returns true if the environment is both DFP and AMP\n  */\nfunction isDfpInAmp() {\n  return isDfp() && isAmp();\n}\n\n/**\n  * @returns true if the window is in an iframe whose id and parent element id match DFP\n  */\nfunction isDfp() {\n  try {\n    const frameElement = window.frameElement;\n    const parentElement = window.frameElement.parentNode;\n    if (frameElement && parentElement) {\n      return frameElement.id.indexOf('google_ads_iframe') > -1 && parentElement.id.indexOf('google_ads_iframe') > -1;\n    }\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n* @returns true if there is an AMP context object\n*/\nfunction isAmp() {\n  try {\n    const ampContext = window.context || window.parent.context;\n    if (ampContext && ampContext.pageViewId) {\n      return ampContext;\n    }\n    return false;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * @returns true if the environment is a SafeFrame.\n */\nfunction isSafeFrame() {\n  return window.$sf && window.$sf.ext;\n}\n\n/**\n * @returns true if the environment is a dfp safe frame.\n */\nfunction isDFPSafeFrame() {\n  if (window.location && window.location.href) {\n    const href = window.location.href;\n    return isSafeFrame() && href.indexOf('google') !== -1 && href.indexOf('safeframe') !== -1;\n  }\n  return false;\n}\n\n/**\n * Return true if we are in an iframe and can't access the top window.\n */\nfunction isSandboxedIframe() {\n  return window.top !== window && !window.frameElement;\n}\n\n/**\n * Return true if we cannot document.write to a child iframe (this implies no allow-same-origin)\n */\nfunction isSuperSandboxedIframe() {\n  const sacrificialIframe = window.document.createElement('iframe');\n  try {\n    sacrificialIframe.setAttribute('style', 'display:none');\n    window.document.body.appendChild(sacrificialIframe);\n    sacrificialIframe.contentWindow._testVar = true;\n    window.document.body.removeChild(sacrificialIframe);\n    return false;\n  } catch (e) {\n    window.document.body.removeChild(sacrificialIframe);\n    return true;\n  }\n}\n\n/**\n * @returns true if the window has the attribute identifying MRAID\n */\nfunction isMraid() {\n  return !!(window.mraid);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yieldmoBidAdapter.js","import * as utils from 'src/utils';\nimport {config} from 'src/config';\nimport {registerBidder} from 'src/adapters/bidderFactory';\n\nconst BIDDER_CODE = 'yieldone';\nconst ENDPOINT_URL = '//y.one.impact-ad.jp/h_bid';\nconst USER_SYNC_URL = '//y.one.impact-ad.jp/push_sync';\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: ['y1'],\n  isBidRequestValid: function(bid) {\n    return !!(bid.params.placementId);\n  },\n  buildRequests: function(validBidRequests) {\n    return validBidRequests.map(bidRequest => {\n      const params = bidRequest.params;\n      const sizes = utils.parseSizesInput(bidRequest.sizes)[0];\n      const width = sizes.split('x')[0];\n      const height = sizes.split('x')[1];\n      const placementId = params.placementId;\n      const cb = Math.floor(Math.random() * 99999999999);\n      const referrer = encodeURIComponent(utils.getTopWindowUrl());\n      const bidId = bidRequest.bidId;\n      const payload = {\n        v: 'hb1',\n        p: placementId,\n        w: width,\n        h: height,\n        cb: cb,\n        r: referrer,\n        uid: bidId,\n        t: 'i'\n      };\n      return {\n        method: 'GET',\n        url: ENDPOINT_URL,\n        data: payload,\n      }\n    });\n  },\n  interpretResponse: function(serverResponse, bidRequest) {\n    const bidResponses = [];\n    const response = serverResponse.body;\n    const crid = response.crid || 0;\n    const width = response.width || 0;\n    const height = response.height || 0;\n    const cpm = response.cpm * 1000 || 0;\n    if (width !== 0 && height !== 0 && cpm !== 0 && crid !== 0) {\n      const dealId = response.dealid || '';\n      const currency = response.currency || 'JPY';\n      const netRevenue = (response.netRevenue === undefined) ? true : response.netRevenue;\n      const referrer = utils.getTopWindowUrl();\n      const bidResponse = {\n        requestId: bidRequest.data.uid,\n        cpm: cpm,\n        width: response.width,\n        height: response.height,\n        creativeId: crid,\n        dealId: dealId,\n        currency: currency,\n        netRevenue: netRevenue,\n        ttl: config.getConfig('_bidderTimeout'),\n        referrer: referrer,\n        ad: response.adTag\n      };\n      bidResponses.push(bidResponse);\n    }\n    return bidResponses;\n  },\n  getUserSyncs: function(syncOptions) {\n    if (syncOptions.iframeEnabled) {\n      return [{\n        type: 'iframe',\n        url: USER_SYNC_URL\n      }];\n    }\n  }\n}\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yieldoneBidAdapter.js","import { ajax } from 'src/ajax';\nimport adapter from 'src/AnalyticsAdapter';\nimport adaptermanager from 'src/adaptermanager';\nimport CONSTANTS from 'src/constants.json';\nimport * as url from 'src/url';\nimport * as utils from 'src/utils';\n\nconst emptyUrl = '';\nconst analyticsType = 'endpoint';\nconst yuktamediaAnalyticsVersion = 'v1.0.0';\n\nlet initOptions;\nlet auctionTimestamp;\nlet events = {\n  bids: []\n};\n\nvar yuktamediaAnalyticsAdapter = Object.assign(adapter(\n  {\n    emptyUrl,\n    analyticsType\n  }), {\n  track({ eventType, args }) {\n    if (typeof args !== 'undefined') {\n      if (eventType === CONSTANTS.EVENTS.BID_TIMEOUT) {\n        args.forEach(item => { mapBidResponse(item, 'timeout'); });\n      } else if (eventType === CONSTANTS.EVENTS.AUCTION_INIT) {\n        events.auctionInit = args;\n        auctionTimestamp = args.timestamp;\n      } else if (eventType === CONSTANTS.EVENTS.BID_REQUESTED) {\n        mapBidRequests(args).forEach(item => { events.bids.push(item) });\n      } else if (eventType === CONSTANTS.EVENTS.BID_RESPONSE) {\n        mapBidResponse(args, 'response');\n      } else if (eventType === CONSTANTS.EVENTS.BID_WON) {\n        send({\n          bidWon: mapBidResponse(args, 'win')\n        }, 'won');\n      }\n    }\n\n    if (eventType === CONSTANTS.EVENTS.AUCTION_END) {\n      send(events, 'auctionEnd');\n    }\n  }\n});\n\nfunction mapBidRequests(params) {\n  let arr = [];\n  if (typeof params.bids !== 'undefined' && params.bids.length) {\n    params.bids.forEach(function (bid) {\n      arr.push({\n        bidderCode: bid.bidder,\n        bidId: bid.bidId,\n        adUnitCode: bid.adUnitCode,\n        requestId: bid.bidderRequestId,\n        auctionId: bid.auctionId,\n        transactionId: bid.transactionId,\n        sizes: utils.parseSizesInput(bid.sizes).toString(),\n        renderStatus: 1,\n        requestTimestamp: params.auctionStart\n      });\n    });\n  }\n  return arr;\n}\n\nfunction mapBidResponse(bidResponse, status) {\n  if (status !== 'win') {\n    let bid = events.bids.filter(o => o.bidId == bidResponse.bidId || o.bidId == bidResponse.requestId)[0];\n    Object.assign(bid, {\n      bidderCode: bidResponse.bidder,\n      bidId: status == 'timeout' ? bidResponse.bidId : bidResponse.requestId,\n      adUnitCode: bidResponse.adUnitCode,\n      auctionId: bidResponse.auctionId,\n      creativeId: bidResponse.creativeId,\n      transactionId: bidResponse.transactionId,\n      currency: bidResponse.currency,\n      cpm: bidResponse.cpm,\n      netRevenue: bidResponse.netRevenue,\n      mediaType: bidResponse.mediaType,\n      statusMessage: bidResponse.statusMessage,\n      status: bidResponse.status,\n      renderStatus: status == 'timeout' ? 3 : 2,\n      timeToRespond: bidResponse.timeToRespond,\n      requestTimestamp: bidResponse.requestTimestamp,\n      responseTimestamp: bidResponse.responseTimestamp\n    });\n  } else if (status == 'win') {\n    return {\n      bidderCode: bidResponse.bidder,\n      bidId: bidResponse.requestId,\n      adUnitCode: bidResponse.adUnitCode,\n      auctionId: bidResponse.auctionId,\n      creativeId: bidResponse.creativeId,\n      transactionId: bidResponse.transactionId,\n      currency: bidResponse.currency,\n      cpm: bidResponse.cpm,\n      netRevenue: bidResponse.netRevenue,\n      renderedSize: bidResponse.size,\n      mediaType: bidResponse.mediaType,\n      statusMessage: bidResponse.statusMessage,\n      status: bidResponse.status,\n      renderStatus: 4,\n      timeToRespond: bidResponse.timeToRespond,\n      requestTimestamp: bidResponse.requestTimestamp,\n      responseTimestamp: bidResponse.responseTimestamp\n    }\n  }\n}\n\nfunction send(data, status) {\n  let location = utils.getTopWindowLocation();\n  let secure = location.protocol == 'https:';\n  if (typeof data !== 'undefined' && typeof data.auctionInit !== 'undefined') {\n    data.auctionInit = Object.assign({ host: location.host, path: location.pathname, hash: location.hash, search: location.search }, data.auctionInit);\n  }\n  data.initOptions = initOptions;\n\n  let yuktamediaAnalyticsRequestUrl = url.format({\n    protocol: secure ? 'https' : 'http',\n    hostname: 'analytics-prebid.yuktamedia.com',\n    pathname: status == 'auctionEnd' ? '/api/bids' : '/api/bid/won',\n    search: {\n      auctionTimestamp: auctionTimestamp,\n      yuktamediaAnalyticsVersion: yuktamediaAnalyticsVersion,\n      prebidVersion: pbjs.version\n    }\n  });\n\n  ajax(yuktamediaAnalyticsRequestUrl, undefined, JSON.stringify(data), { method: 'POST', contentType: 'application/json' });\n}\n\nyuktamediaAnalyticsAdapter.originEnableAnalytics = yuktamediaAnalyticsAdapter.enableAnalytics;\nyuktamediaAnalyticsAdapter.enableAnalytics = function (config) {\n  initOptions = config.options;\n  yuktamediaAnalyticsAdapter.originEnableAnalytics(config);\n};\n\nadaptermanager.registerAnalyticsAdapter({\n  adapter: yuktamediaAnalyticsAdapter,\n  code: 'yuktamedia'\n});\n\nexport default yuktamediaAnalyticsAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./modules/yuktamediaAnalyticsAdapter.js","import * as utils from 'src/utils';\nimport { registerBidder } from 'src/adapters/bidderFactory';\nimport { BANNER, VIDEO } from 'src/mediaTypes';\nimport find from 'core-js/library/fn/array/find';\n\nconst BIDDER_CODE = 'zedo';\nconst URL = '//z2.zedo.com/asw/fmh.json';\nconst SECURE_URL = '//z2.zedo.com/asw/fmh.json';\nconst DIM_TYPE = {\n  '7': 'display',\n  '9': 'display',\n  '14': 'display',\n  '70': 'SBR',\n  '83': 'CurtainRaiser',\n  '85': 'Inarticle',\n  '86': 'pswipeup',\n  '88': 'Inview',\n  '100': 'display',\n  '101': 'display',\n  '102': 'display',\n  '103': 'display'\n  // '85': 'pre-mid-post-roll',\n};\n\nexport const spec = {\n  code: BIDDER_CODE,\n  aliases: [],\n  supportedMediaTypes: [BANNER, VIDEO],\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {object} bid The bid to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    return !!(bid.params && bid.params.channelCode && bid.params.dimId);\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {BidRequest[]} bidRequests A non-empty list of bid requests which should be sent to the Server.\n   * @return ServerRequest Info describing the request to the server.\n   */\n  buildRequests: function (bidRequests, bidderRequest) {\n    let data = {\n      placements: []\n    };\n    bidRequests.map(bidRequest => {\n      let channelCode = parseInt(bidRequest.params.channelCode);\n      let network = parseInt(channelCode / 1000000);\n      let channel = channelCode % 1000000;\n      let dim = getSizes(bidRequest.sizes);\n      let placement = {\n        id: bidRequest.bidId,\n        network: network,\n        channel: channel,\n        width: dim[0],\n        height: dim[1],\n        dimension: bidRequest.params.dimId,\n        version: '1.25.0-pre',\n        keyword: '',\n        transactionId: bidRequest.transactionId\n      }\n      if (bidderRequest && bidderRequest.gdprConsent) {\n        if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') {\n          data.gdpr = Number(bidderRequest.gdprConsent.gdprApplies);\n        }\n        data.gdpr_consent = bidderRequest.gdprConsent.consentString;\n      }\n      let dimType = DIM_TYPE[String(bidRequest.params.dimId)]\n      if (dimType) {\n        placement['renderers'] = [{\n          'name': dimType\n        }]\n      } else { // default to display\n        placement['renderers'] = [{\n          'name': 'display'\n        }]\n      }\n      data['placements'].push(placement);\n    });\n    let reqUrl = utils.getTopWindowLocation().protocol === 'http:' ? URL : SECURE_URL;\n    return {\n      method: 'GET',\n      url: reqUrl,\n      data: 'g=' + JSON.stringify(data)\n    }\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {*} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, request) {\n    serverResponse = serverResponse.body;\n    const bids = [];\n    if (!serverResponse || serverResponse.error) {\n      let errorMessage = `in response for ${request.bidderCode} adapter`;\n      if (serverResponse && serverResponse.error) { errorMessage += `: ${serverResponse.error}`; }\n      utils.logError(errorMessage);\n      return bids;\n    }\n\n    if (serverResponse.ad) {\n      serverResponse.ad.forEach(ad => {\n        const creativeBid = getCreative(ad);\n        if (creativeBid) {\n          if (parseInt(creativeBid.cpm) !== 0) {\n            const bid = newBid(ad, creativeBid, request);\n            bid.mediaType = parseMediaType(creativeBid);\n            bids.push(bid);\n          }\n        }\n      });\n    }\n    return bids;\n  },\n\n  getUserSyncs: function (syncOptions, responses, gdprConsent) {\n    if (syncOptions.iframeEnabled) {\n      let url = utils.getTopWindowLocation().protocol === 'http:' ? 'http://d3.zedo.com/rs/us/fcs.html' : 'https://tt3.zedo.com/rs/us/fcs.html';\n      if (gdprConsent && typeof gdprConsent.consentString === 'string') {\n        // add 'gdpr' only if 'gdprApplies' is defined\n        if (typeof gdprConsent.gdprApplies === 'boolean') {\n          url += `?gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`;\n        } else {\n          url += `?gdpr_consent=${gdprConsent.consentString}`;\n        }\n      }\n      return [{\n        type: 'iframe',\n        url: url\n      }];\n    }\n  }\n};\n\nfunction getCreative(ad) {\n  return ad && ad.creatives && ad.creatives.length && find(ad.creatives, creative => creative.adId);\n}\n/**\n * Unpack the Server's Bid into a Prebid-compatible one.\n * @param serverBid\n * @param rtbBid\n * @param bidderRequest\n * @return Bid\n */\nfunction newBid(serverBid, creativeBid, bidderRequest) {\n  const bid = {\n    requestId: serverBid.slotId,\n    creativeId: creativeBid.adId,\n    dealId: 99999999,\n    currency: 'USD',\n    netRevenue: true,\n    ttl: 300\n  };\n\n  if (creativeBid.creativeDetails.type === 'VAST') {\n    Object.assign(bid, {\n      width: creativeBid.width,\n      height: creativeBid.height,\n      vastXml: creativeBid.creativeDetails.adContent,\n      cpm: (parseInt(creativeBid.cpm) * 0.65) / 1000000,\n      ttl: 3600\n    });\n  } else {\n    Object.assign(bid, {\n      width: creativeBid.width,\n      height: creativeBid.height,\n      cpm: (parseInt(creativeBid.cpm) * 0.6) / 1000000,\n      ad: creativeBid.creativeDetails.adContent\n    });\n  }\n\n  return bid;\n}\n/* Turn bid request sizes into compatible format */\nfunction getSizes(requestSizes) {\n  let width = 0;\n  let height = 0;\n  if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n    !utils.isArray(requestSizes[0])) {\n    width = parseInt(requestSizes[0], 10);\n    height = parseInt(requestSizes[1], 10);\n  } else if (typeof requestSizes === 'object') {\n    for (let i = 0; i < requestSizes.length; i++) {\n      let size = requestSizes[i];\n      width = parseInt(size[0], 10);\n      height = parseInt(size[1], 10);\n      break;\n    }\n  }\n  return [width, height];\n}\n\nfunction parseMediaType(creativeBid) {\n  const adType = creativeBid.creativeDetails.type;\n  if (adType === 'VAST') {\n    return VIDEO;\n  } else {\n    return BANNER;\n  }\n}\n\nregisterBidder(spec);\n\n\n\n// WEBPACK FOOTER //\n// ./modules/zedoBidAdapter.js"]}